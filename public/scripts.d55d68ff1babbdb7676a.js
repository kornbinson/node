function menosInfo(){$(document).ready((function(){$(".flowplayer").click((function(e){var t=document.querySelectorAll("a[href]");Array.prototype.forEach.call(t,(function(e,t){e.href.indexOf("home2")>-1&&(console.log("encontre uno "),$(e).remove())}))}))}))}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],t):(e=e||self).videojs=t(e.window,e.document)}(this,(function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n="7.8.4",i=[],r=function t(n){function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a("log",s,t)}var a,s="info";return a=function(t,n){return function(r,a,s){var o=n.levels[a],l=new RegExp("^("+o+")$");if("log"!==r&&s.unshift(r.toUpperCase()+":"),s.unshift(t+":"),i){i.push([].concat(s));var u=i.length-1e3;i.splice(0,0<u?u:0)}if(e.console){var c=e.console[r];c||"debug"!==r||(c=e.console.info||e.console.log),c&&o&&l.test(r)&&c[Array.isArray(s)?"apply":"call"](e.console,s)}}}(n,r),r.createLogger=function(e){return t(n+": "+e)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:s},r.level=function(e){if("string"==typeof e){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');s=e}return s},(r.history=function(){return i?[].concat(i):[]}).filter=function(e){return(i||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},r.history.clear=function(){i&&(i.length=0)},r.history.disable=function(){null!==i&&(i.length=0,i=null)},r.history.enable=function(){null===i&&(i=[])},r.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a("error",s,t)},r.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a("warn",s,t)},r.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a("debug",s,t)},r}("VIDEOJS"),a=r.createLogger;function s(e,t){return e(t={exports:{}},t.exports),t.exports}var o=s((function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.apply(this,arguments)}e.exports=t})),l=Object.prototype.toString,u=function(e){return h(e)?Object.keys(e):[]};function c(e,t){u(e).forEach((function(n){return t(e[n],n)}))}function d(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Object.assign?o.apply(void 0,[e].concat(n)):(n.forEach((function(t){t&&c(t,(function(t,n){e[n]=t}))})),e)}function h(e){return!!e&&"object"==typeof e}function f(e){return h(e)&&"[object Object]"===l.call(e)&&e.constructor===Object}function p(t,n){if(!t||!n)return"";if("function"!=typeof e.getComputedStyle)return"";var i=e.getComputedStyle(t);return i?i.getPropertyValue(n)||i[n]:""}function g(e){return"string"==typeof e&&Boolean(e.trim())}function m(e){if(0<=e.indexOf(" "))throw new Error("class has illegal whitespace characters")}function v(){return t===e.document}function y(e){return h(e)&&1===e.nodeType}function b(){try{return e.parent!==e.self}catch(t){return!0}}function _(e){return function(n,i){if(!g(n))return t[e](null);g(i)&&(i=t.querySelector(i));var r=y(i)?i:t;return r[e]&&r[e](n)}}function T(e,n,i,a){void 0===e&&(e="div"),void 0===n&&(n={}),void 0===i&&(i={});var s=t.createElement(e);return Object.getOwnPropertyNames(n).forEach((function(e){var t=n[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(r.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."),s.setAttribute(e,t)):"textContent"===e?w(s,t):s[e]!==t&&(s[e]=t)})),Object.getOwnPropertyNames(i).forEach((function(e){s.setAttribute(e,i[e])})),a&&G(s,a),s}function w(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function S(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function E(e,t){return m(t),e.classList?e.classList.contains(t):function(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}(t).test(e.className)}function C(e,t){return e.classList?e.classList.add(t):E(e,t)||(e.className=(e.className+" "+t).trim()),e}function k(e,t){return e.classList?e.classList.remove(t):(m(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e}function A(e,t,n){var i=E(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!i),n!==i)return n?C(e,t):k(e,t),e}function I(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var i=t[n];null==i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)}))}function x(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,i=n.length-1;0<=i;i--){var r=n[i].name,a=n[i].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(a=null!==a),t[r]=a}return t}function L(e,t){return e.getAttribute(t)}function D(e,t,n){e.setAttribute(t,n)}function R(e,t){e.removeAttribute(t)}function P(){t.body.focus(),t.onselectstart=function(){return!1}}function O(){t.onselectstart=function(){return!0}}function N(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(p(e,"height"))),n.width||(n.width=parseFloat(p(e,"width"))),n}}function M(n){var i;if(n.getBoundingClientRect&&n.parentNode&&(i=n.getBoundingClientRect()),!i)return{left:0,top:0};var r=t.documentElement,a=t.body,s=i.top+(e.pageYOffset||a.scrollTop)-(r.clientTop||a.clientTop||0);return{left:Math.round(i.left+(e.pageXOffset||a.scrollLeft)-(r.clientLeft||a.clientLeft||0)),top:Math.round(s)}}function U(e,t){var n={},i=M(e),r=e.offsetWidth,a=e.offsetHeight,s=i.left,o=t.pageY,l=t.pageX;return t.changedTouches&&(l=t.changedTouches[0].pageX,o=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(i.top-o+a)/a)),n.x=Math.max(0,Math.min(1,(l-s)/r)),n}function j(e){return h(e)&&3===e.nodeType}function B(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function F(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),y(e)||j(e)?e:"string"==typeof e&&/\S/.test(e)?t.createTextNode(e):void 0})).filter((function(e){return e}))}function G(e,t){return F(t).forEach((function(t){return e.appendChild(t)})),e}function H(e,t){return G(B(e),t)}function W(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var z,V=_("querySelector"),Y=_("querySelectorAll"),Z=Object.freeze({__proto__:null,isReal:v,isEl:y,isInFrame:b,createEl:T,textContent:w,prependTo:S,hasClass:E,addClass:C,removeClass:k,toggleClass:A,setAttributes:I,getAttributes:x,getAttribute:L,setAttribute:D,removeAttribute:R,blockTextSelection:P,unblockTextSelection:O,getBoundingClientRect:N,findPosition:M,getPointerPosition:U,isTextNode:j,emptyEl:B,normalizeContent:F,appendContent:G,insertContent:H,isSingleLeftClick:W,$:V,$$:Y}),q=!1,X=function(){if(v()&&!1!==z.options.autoSetup){var e=Array.prototype.slice.call(t.getElementsByTagName("video")),n=Array.prototype.slice.call(t.getElementsByTagName("audio")),i=Array.prototype.slice.call(t.getElementsByTagName("video-js")),r=e.concat(n,i);if(r&&0<r.length)for(var a=0,s=r.length;a<s;a++){var o=r[a];if(!o||!o.getAttribute){K(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&z(o)}else q||K(1)}};function K(t,n){n&&(z=n),e.setTimeout(X,t)}function J(){q=!0,e.removeEventListener("load",J)}function Q(e){var n=t.createElement("style");return n.className=e,n}function $(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}v()&&("complete"===t.readyState?J():e.addEventListener("load",J));var ee,te=3;function ne(){return te++}e.WeakMap||(ee=function(){function t(){this.vdata="vdata"+Math.floor(e.performance&&e.performance.now()||Date.now()),this.data={}}var n=t.prototype;return n.set=function(e,t){var n=e[this.vdata]||ne();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},n.get=function(e){var t=e[this.vdata];if(t)return this.data[t];r("We have no data for this element",e)},n.has=function(e){return e[this.vdata]in this.data},n.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},t}());var ie,re=e.WeakMap?new WeakMap:new ee;function ae(e,t){if(re.has(e)){var n=re.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&re.delete(e)}}function se(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function oe(n){if(n.fixed_)return n;function i(){return!0}function r(){return!1}if(!n||!n.isPropagationStopped){var a=n||e.event;for(var s in n={},a)"layerX"!==s&&"layerY"!==s&&"keyLocation"!==s&&"webkitMovementX"!==s&&"webkitMovementY"!==s&&("returnValue"===s&&a.preventDefault||(n[s]=a[s]));if(n.target||(n.target=n.srcElement||t),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){a.preventDefault&&a.preventDefault(),n.returnValue=!1,a.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),n.cancelBubble=!0,a.cancelBubble=!0,n.isPropagationStopped=i},n.isPropagationStopped=r,n.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),n.isImmediatePropagationStopped=i,n.stopPropagation()},n.isImmediatePropagationStopped=r,null!=n.clientX){var o=t.documentElement,l=t.body;n.pageX=n.clientX+(o&&o.scrollLeft||l&&l.scrollLeft||0)-(o&&o.clientLeft||l&&l.clientLeft||0),n.pageY=n.clientY+(o&&o.scrollTop||l&&l.scrollTop||0)-(o&&o.clientTop||l&&l.clientTop||0)}n.which=n.charCode||n.keyCode,null!=n.button&&(n.button=1&n.button?0:4&n.button?1:2&n.button?2:0)}return n.fixed_=!0,n}var le=["touchstart","touchmove"];function ue(t,n,i){if(Array.isArray(n))return se(ue,t,n,i);re.has(t)||re.set(t,{});var a=re.get(t);if(a.handlers||(a.handlers={}),a.handlers[n]||(a.handlers[n]=[]),i.guid||(i.guid=ne()),a.handlers[n].push(i),a.dispatcher||(a.disabled=!1,a.dispatcher=function(e,n){if(!a.disabled){e=oe(e);var i=a.handlers[e.type];if(i)for(var s=i.slice(0),o=0,l=s.length;o<l&&!e.isImmediatePropagationStopped();o++)try{s[o].call(t,e,n)}catch(e){r.error(e)}}}),1===a.handlers[n].length)if(t.addEventListener){var s=!1;(function(){if("boolean"!=typeof ie){ie=!1;try{var t=Object.defineProperty({},"passive",{get:function(){ie=!0}});e.addEventListener("test",null,t),e.removeEventListener("test",null,t)}catch(t){}}return ie})()&&-1<le.indexOf(n)&&(s={passive:!0}),t.addEventListener(n,a.dispatcher,s)}else t.attachEvent&&t.attachEvent("on"+n,a.dispatcher)}function ce(e,t,n){if(re.has(e)){var i=re.get(e);if(i.handlers){if(Array.isArray(t))return se(ce,e,t,n);var r=function(e,t){i.handlers[t]=[],ae(e,t)};if(void 0!==t){var a=i.handlers[t];if(a)if(n){if(n.guid)for(var s=0;s<a.length;s++)a[s].guid===n.guid&&a.splice(s--,1);ae(e,t)}else r(e,t)}else for(var o in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},o)&&r(e,o)}}}function de(e,t,n){var i=re.has(e)?re.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=oe(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)de.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){re.has(t.target)||re.set(t.target,{});var a=re.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function he(e,t,n){if(Array.isArray(t))return se(he,e,t,n);function i(){ce(e,t,i),n.apply(this,arguments)}i.guid=n.guid=n.guid||ne(),ue(e,t,i)}function fe(e,t,n){function i(){ce(e,t,i),n.apply(this,arguments)}i.guid=n.guid=n.guid||ne(),ue(e,t,i)}function pe(e,t,n){t.guid||(t.guid=ne());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i}function ge(t,n){var i=e.performance.now();return function(){var r=e.performance.now();n<=r-i&&(t.apply(void 0,arguments),i=r)}}function me(){}var ve,ye=Object.freeze({__proto__:null,fixEvent:oe,on:ue,off:ce,trigger:de,one:he,any:fe});function be(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length}function _e(e){if(!e.nodeName&&!Ce(e))throw new Error("Invalid target; must be a DOM node or evented object.")}function Te(e){if(!be(e))throw new Error("Invalid event type; must be a non-empty string or array.")}function we(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")}function Se(e,t){var n,i,r,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return r=a?(n=e.eventBusEl_,3<=t.length&&t.shift(),i=t[0],t[1]):(n=t[0],i=t[1],t[2]),_e(n),Te(i),we(r),{isTargetingSelf:a,target:n,type:i,listener:r=pe(e,r)}}function Ee(e,t,n,i){_e(e),e.nodeName?ye[t](e,n,i):e[t](n,i)}me.prototype.allowedEvents_={},me.prototype.addEventListener=me.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},ue(this,e,t),this.addEventListener=n},me.prototype.removeEventListener=me.prototype.off=function(e,t){ce(this,e,t)},me.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},he(this,e,t),this.addEventListener=n},me.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},fe(this,e,t),this.addEventListener=n},me.prototype.dispatchEvent=me.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=oe(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),de(this,e)},me.prototype.queueTrigger=function(t){var n=this;ve=ve||new Map;var i=t.type||t,r=ve.get(this);r||(r=new Map,ve.set(this,r));var a=r.get(i);r.delete(i),e.clearTimeout(a);var s=e.setTimeout((function(){0===r.size&&(r=null,ve.delete(n)),n.trigger(t)}),0);r.set(i,s)};var Ce=function(e){return e instanceof me||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},ke={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Se(this,n),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(Ee(s,"on",o,l),!a){var u=function(){return e.off(s,o,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,Ee(this,"on","dispose",u),Ee(s,"on","dispose",c)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Se(this,n),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)Ee(s,"one",o,l);else{var u=function t(){e.off(s,o,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)};u.guid=l.guid,Ee(s,"one",o,u)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Se(this,n),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)Ee(s,"any",o,l);else{var u=function t(){e.off(s,o,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)};u.guid=l.guid,Ee(s,"any",o,u)}},off:function(e,t,n){if(!e||be(e))ce(this.eventBusEl_,e,t);else{var i=e,r=t;_e(i),Te(r),we(n),n=pe(this,n),this.off("dispose",n),i.nodeName?(ce(i,r,n),ce(i,"dispose",n)):Ce(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(e,t){return de(this.eventBusEl_,e,t)}};function Ae(t,n){void 0===n&&(n={});var i=n.eventBusKey;if(i){if(!t[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');t.eventBusEl_=t[i]}else t.eventBusEl_=T("span",{className:"vjs-event-bus"});return d(t,ke),t.eventedCallbacks&&t.eventedCallbacks.forEach((function(e){e()})),t.on("dispose",(function(){t.off(),e.setTimeout((function(){t.eventBusEl_=null}),0)})),t}var Ie={state:{},setState:function(e){var t,n=this;return"function"==typeof e&&(e=e()),c(e,(function(e,i){n.state[i]!==e&&((t=t||{})[i]={from:n.state[i],to:e}),n.state[i]=e})),t&&Ce(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function xe(e,t){return d(e,Ie),e.state=d({},e.state,t),"function"==typeof e.handleStateChanged&&Ce(e)&&e.on("statechanged",e.handleStateChanged),e}function Le(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))}function De(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))}function Re(){for(var e={},t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){t&&c(t,(function(t,n){f(t)?(f(e[n])||(e[n]={}),e[n]=Re(e[n],t)):e[n]=t}))})),e}var Pe=function(){function t(t,n,i){if(this.player_=!t&&this.play?t=this:t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Re({},this.options_),n=this.options_=Re(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var r=t&&t.id&&t.id()||"no_player";this.id_=r+"_component_"+ne()}var a;this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),!1!==n.evented&&Ae(this,{eventBusKey:this.el_?"el_":null}),xe(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},e.Set||(a=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}()),this.setTimeoutIds_=e.Set?new Set:new a,this.setIntervalIds_=e.Set?new Set:new a,this.rafIds_=e.Set?new Set:new a,(this.clearingTimersOnDispose_=!1)!==n.initChildren&&this.initChildren(),this.ready(i),!1!==n.reportTouchActivity&&this.enableTouchActivity()}var n=t.prototype;return n.dispose=function(){if(!this.isDisposed_){if(this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),re.has(this.el_)&&re.delete(this.el_),this.el_=null),this.player_=null}},n.isDisposed=function(){return Boolean(this.isDisposed_)},n.player=function(){return this.player_},n.options=function(e){return e&&(this.options_=Re(this.options_,e)),this.options_},n.el=function(){return this.el_},n.createEl=function(e,t,n){return T(e,t,n)},n.localize=function(e,t,n){void 0===n&&(n=e);var i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[i],s=i&&i.split("-")[0],o=r&&r[s],l=n;return a&&a[e]?l=a[e]:o&&o[e]&&(l=o[e]),t&&(l=l.replace(/\{(\d+)\}/g,(function(e,n){var i=t[n-1],r=i;return void 0===i&&(r=e),r}))),l},n.contentEl=function(){return this.contentEl_||this.el_},n.id=function(){return this.id_},n.name=function(){return this.name_},n.children=function(){return this.children_},n.getChildById=function(e){return this.childIndex_[e]},n.getChild=function(e){if(e)return this.childNameIndex_[e]},n.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var i=this,r=0;r<t.length;r++)if(!(i=i.getChild(t[r]))||!i.getChild)return;return i},n.addChild=function(e,n,i){var r,a;if(void 0===n&&(n={}),void 0===i&&(i=this.children_.length),"string"==typeof e){a=De(e);var s=n.componentClass||a;n.name=a;var o=t.getComponent(s);if(!o)throw new Error("Component "+s+" does not exist");if("function"!=typeof o)return null;r=new o(this.player_||this,n)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(a=a||r.name&&De(r.name()))&&(this.childNameIndex_[a]=r,this.childNameIndex_[Le(a)]=r),"function"==typeof r.el&&r.el()){var l=null;this.children_[i+1]&&(this.children_[i+1].el_?l=this.children_[i+1].el_:y(this.children_[i+1])&&(l=this.children_[i+1])),this.contentEl().insertBefore(r.el(),l)}return r},n.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[De(e.name())]=null,this.childNameIndex_[Le(e.name())]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},n.initChildren=function(){var e=this,n=this.options_.children;if(n){var i,r=this.options_,a=t.getComponent("Tech");(i=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!i.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(t){var i,r;return r="string"==typeof t?n[i=t]||e.options_[i]||{}:(i=t.name,t),{name:i,opts:r}})).filter((function(e){var n=t.getComponent(e.opts.componentClass||De(e.name));return n&&!a.isTech(n)})).forEach((function(t){var n=t.name,i=t.opts;if(void 0!==r[n]&&(i=r[n]),!1!==i){!0===i&&(i={}),i.playerOptions=e.options_.playerOptions;var a=e.addChild(n,i);a&&(e[n]=a)}}))}},n.buildCSSClass=function(){return""},n.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},n.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},n.$=function(e,t){return V(e,t||this.contentEl())},n.$$=function(e,t){return Y(e,t||this.contentEl())},n.hasClass=function(e){return E(this.el_,e)},n.addClass=function(e){C(this.el_,e)},n.removeClass=function(e){k(this.el_,e)},n.toggleClass=function(e,t){A(this.el_,e,t)},n.show=function(){this.removeClass("vjs-hidden")},n.hide=function(){this.addClass("vjs-hidden")},n.lockShowing=function(){this.addClass("vjs-lock-showing")},n.unlockShowing=function(){this.removeClass("vjs-lock-showing")},n.getAttribute=function(e){return L(this.el_,e)},n.setAttribute=function(e,t){D(this.el_,e,t)},n.removeAttribute=function(e){R(this.el_,e)},n.width=function(e,t){return this.dimension("width",e,t)},n.height=function(e,t){return this.dimension("height",e,t)},n.dimensions=function(e,t){this.width(e,!0),this.height(t)},n.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),this.el_.style[e]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+De(e)],10)},n.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=p(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+De(e);t=this.el_[n]}return t},n.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},n.currentWidth=function(){return this.currentDimension("width")},n.currentHeight=function(){return this.currentDimension("height")},n.focus=function(){this.el_.focus()},n.blur=function(){this.el_.blur()},n.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},n.handleKeyPress=function(e){this.handleKeyDown(e)},n.emitTapEvents=function(){var t,n=0,i=null;function r(){t=!1}this.on("touchstart",(function(r){1===r.touches.length&&(i={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},n=e.performance.now(),t=!0)})),this.on("touchmove",(function(e){if(1<e.touches.length)t=!1;else if(i){var n=e.touches[0].pageX-i.pageX,r=e.touches[0].pageY-i.pageY;10<Math.sqrt(n*n+r*r)&&(t=!1)}})),this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",(function(r){!(i=null)===t&&e.performance.now()-n<200&&(r.preventDefault(),this.trigger("tap"))}))},n.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=pe(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},n.setTimeout=function(t,n){var i,r=this;return t=pe(this,t),this.clearTimersOnDispose_(),i=e.setTimeout((function(){r.setTimeoutIds_.has(i)&&r.setTimeoutIds_.delete(i),t()}),n),this.setTimeoutIds_.add(i),i},n.clearTimeout=function(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),e.clearTimeout(t)),t},n.setInterval=function(t,n){t=pe(this,t),this.clearTimersOnDispose_();var i=e.setInterval(t,n);return this.setIntervalIds_.add(i),i},n.clearInterval=function(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),e.clearInterval(t)),t},n.requestAnimationFrame=function(t){var n,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),t=pe(this,t),n=e.requestAnimationFrame((function(){i.rafIds_.has(n)&&i.rafIds_.delete(n),t()})),this.rafIds_.add(n),n):this.setTimeout(t,1e3/60)},n.cancelAnimationFrame=function(t){return this.supportsRaf_?(this.rafIds_.has(t)&&(this.rafIds_.delete(t),e.cancelAnimationFrame(t)),t):this.clearTimeout(t)},n.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){e[t[0]].forEach(e[t[1]],e)})),e.clearingTimersOnDispose_=!1})))},t.registerComponent=function(e,n){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i=t.getComponent("Tech"),r=i&&i.isTech(n),a=t===n||t.prototype.isPrototypeOf(n.prototype);if(r||!a)throw new Error('Illegal component, "'+e+'"; '+(r?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");e=De(e),t.components_||(t.components_={});var s=t.getComponent("Player");if("Player"===e&&s&&s.players){var o=s.players,l=Object.keys(o);if(o&&0<l.length&&l.map((function(e){return o[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=n,t.components_[Le(e)]=n},t.getComponent=function(e){if(e&&t.components_)return t.components_[e]},t}();Pe.prototype.supportsRaf_="function"==typeof e.requestAnimationFrame&&"function"==typeof e.cancelAnimationFrame,Pe.registerComponent("Component",Pe);var Oe=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};s((function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t})),s((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t}));var Ne,Me,Ue,je,Be=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t},Fe=e.navigator&&e.navigator.userAgent||"",Ge=/AppleWebKit\/([\d.]+)/i.exec(Fe),He=Ge?parseFloat(Ge.pop()):null,We=/iPod/i.test(Fe),ze=(Ne=Fe.match(/OS (\d+)_/i))&&Ne[1]?Ne[1]:null,Ve=/Android/i.test(Fe),Ye=function(){var e=Fe.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Ze=Ve&&Ye<5&&He<537,qe=/Firefox/i.test(Fe),Xe=/Edg/i.test(Fe),Ke=!Xe&&(/Chrome/i.test(Fe)||/CriOS/i.test(Fe)),Je=(Me=Fe.match(/(Chrome|CriOS)\/(\d+)/))&&Me[2]?parseFloat(Me[2]):null,Qe=(!(je=(Ue=/MSIE\s(\d+)\.\d/.exec(Fe))&&parseFloat(Ue[1]))&&/Trident\/7.0/i.test(Fe)&&/rv:11.0/.test(Fe)&&(je=11),je),$e=/Safari/i.test(Fe)&&!Ke&&!Ve&&!Xe,et=/Windows/i.test(Fe),tt=v()&&("ontouchstart"in e||e.navigator.maxTouchPoints||e.DocumentTouch&&e.document instanceof e.DocumentTouch),nt=/iPad/i.test(Fe)||$e&&tt&&!/iPhone/i.test(Fe),it=/iPhone/i.test(Fe)&&!nt,rt=it||nt||We,at=($e||rt)&&!Ke,st=Object.freeze({__proto__:null,IS_IPOD:We,IOS_VERSION:ze,IS_ANDROID:Ve,ANDROID_VERSION:Ye,IS_NATIVE_ANDROID:Ze,IS_FIREFOX:qe,IS_EDGE:Xe,IS_CHROME:Ke,CHROME_VERSION:Je,IE_VERSION:Qe,IS_SAFARI:$e,IS_WINDOWS:et,TOUCH_ENABLED:tt,IS_IPAD:nt,IS_IPHONE:it,IS_IOS:rt,IS_ANY_SAFARI:at});function ot(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||n<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,i,n.length-1),n[i][t]}function lt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ot.bind(null,"start",0,e),end:ot.bind(null,"end",1,e)}}function ut(e,t){return Array.isArray(e)?lt(e):void 0===e||void 0===t?lt():lt([[e,t]])}function ct(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=ut(0,0));for(var a=0;a<e.length;a++)n=e.start(a),t<(i=e.end(a))&&(i=t),r+=i-n;return r/t}for(var dt,ht={prefixed:!0},ft=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],pt=ft[0],gt=0;gt<ft.length;gt++)if(ft[gt][1]in t){dt=ft[gt];break}if(dt){for(var mt=0;mt<dt.length;mt++)ht[pt[mt]]=dt[mt];ht.prefixed=dt[0]!==pt[0]}function vt(e){if(e instanceof vt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:h(e)&&("number"==typeof e.code&&(this.code=e.code),d(this,e)),this.message||(this.message=vt.defaultMessages[this.code]||"")}vt.prototype.code=0,vt.prototype.message="",vt.prototype.status=null,vt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],vt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var yt=0;yt<vt.errorTypes.length;yt++)vt[vt.errorTypes[yt]]=yt,vt.prototype[vt.errorTypes[yt]]=yt;function bt(e){return null!=e&&"function"==typeof e.then}function _t(e){bt(e)&&e.then(null,(function(e){}))}function Tt(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,i){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})}var wt=s((function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return s[e];var n,a=String(e);return(n=i[a.toLowerCase()])?n:(n=r[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var a;if(a=i[t.toLowerCase()])return a===n;if(a=r[t.toLowerCase()])return a===n}else if("number"==typeof t)return t===n;return!1}};var i=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)i[a-48]=a;for(a=1;a<13;a++)i["f"+a]=a+111;for(a=0;a<10;a++)i["numpad "+a]=a+96;var s=t.names=t.title={};for(a in i)s[i[a]]=a;for(var o in r)i[o]=r[o]})),St="vjs-modal-dialog",Et=function(n){function i(e,t){var i;return(i=n.call(this,e,t)||this).opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=T("div",{className:St+"-content"},{role:"document"}),i.descEl_=T("p",{className:St+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),w(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}Be(i,n);var r=i.prototype;return r.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},r.buildCSSClass=function(){return St+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},r.label=function(){return this.localize(this.options_.label||"Modal Window")},r.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},r.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},r.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},r.fill=function(){this.fillWith(this.content())},r.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),H(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},r.empty=function(){this.trigger("beforemodalempty"),B(this.contentEl()),this.trigger("modalempty")},r.content=function(e){return void 0!==e&&(this.content_=e),this.content_},r.conditionalFocus_=function(){var e=t.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,!n.contains(e)&&n!==e||(this.previouslyActiveEl_=e,this.focus())},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},r.handleKeyDown=function(e){if(e.stopPropagation(),wt.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(wt.isEventKey(e,"Tab")){for(var n,i=this.focusableEls_(),r=this.el_.querySelector(":focus"),a=0;a<i.length;a++)if(r===i[a]){n=a;break}t.activeElement===this.el_&&(n=0),e.shiftKey&&0===n?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||n!==i.length-1||(i[0].focus(),e.preventDefault())}},r.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,(function(t){return(t instanceof e.HTMLAnchorElement||t instanceof e.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof e.HTMLInputElement||t instanceof e.HTMLSelectElement||t instanceof e.HTMLTextAreaElement||t instanceof e.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof e.HTMLIFrameElement||t instanceof e.HTMLObjectElement||t instanceof e.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")}))},i}(Pe);Et.prototype.options_={pauseOnOpen:!0,temporary:!0},Pe.registerComponent("ModalDialog",Et);var Ct=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(Oe(n),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<t.length;i++)n.addTrack(t[i]);return n}Be(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this}))},n.removeTrack=function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},t}(me);for(var kt in Ct.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Ct.prototype.allowedEvents_)Ct.prototype["on"+kt]=null;function At(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)}function It(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)}function xt(n){var i=["protocol","hostname","port","pathname","search","hash","host"],r=t.createElement("a");r.href=n;var a,s=""===r.host&&"file:"!==r.protocol;s&&((a=t.createElement("div")).innerHTML='<a href="'+n+'"></a>',r=a.firstChild,a.setAttribute("style","display:none; position:absolute;"),t.body.appendChild(a));for(var o={},l=0;l<i.length;l++)o[i[l]]=r[i[l]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),o.protocol||(o.protocol=e.location.protocol),s&&t.body.removeChild(a),o}function Lt(e){if(!e.match(/^https?:\/\//)){var n=t.createElement("div");n.innerHTML='<a href="'+e+'">x</a>',e=n.firstChild.href}return e}function Dt(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""}function Rt(t,n){void 0===n&&(n=e.location);var i=xt(t);return(":"===i.protocol?n.protocol:i.protocol)+i.host!==n.protocol+n.host}var Pt=function(e){function t(t){var n;void 0===t&&(t=[]);for(var i=t.length-1;0<=i;i--)if(t[i].enabled){At(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,n}Be(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&At(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,At(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(Ct),Ot=function(e){function t(t){var n;void 0===t&&(t=[]);for(var i=t.length-1;0<=i;i--)if(t[i].selected){It(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(Oe(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}Be(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&It(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,It(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(Ct),Nt=function(e){function t(){return e.apply(this,arguments)||this}Be(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(Ct),Mt=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),Ut=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,i=e.length;function r(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}if(this.cues_=e,this.length_=e.length,t<i)for(n=t;n<i;n++)r.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(),jt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Bt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ft={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Gt={disabled:"disabled",hidden:"hidden",showing:"showing"},Ht=function(e){function t(t){var n;function i(e){Object.defineProperty(Oe(n),e,{get:function(){return r[e]},set:function(){}})}void 0===t&&(t={}),n=e.call(this)||this;var r={id:t.id||"vjs_track_"+ne(),kind:t.kind||"",label:t.label||"",language:t.language||""};for(var a in r)i(a);return n}return Be(t,e),t}(me),Wt=Object.freeze({__proto__:null,parseUrl:xt,getAbsoluteURL:Lt,getFileExtension:Dt,isCrossOrigin:Rt}),zt=Object.prototype.toString,Vt=qt,Yt=qt;function Zt(e,t,n){var i=e;return function(e){var t=zt.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=o({},t,{uri:e}),i.callback=n,i}function qt(e,t,n){return Xt(t=Zt(e,t,n))}function Xt(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(e){return clearTimeout(o),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,g)}function r(){if(!s){var t;clearTimeout(o);var i=g,r=null;return 0!==(t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status)?(i={body:function(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;if(""===e.responseType&&(!e.responseXML||"parsererror"!==e.responseXML.documentElement.nodeName))return e.responseXML}catch(e){}return null}(l),p)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:t,method:c,headers:{},url:u,rawRequest:l},l.getAllResponseHeaders&&(i.headers=function(e){var t={};return e&&e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase(),r=e.slice(n+1).trim();void 0===t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t}(l.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),n(r,i,i.body)}}var a,s,o,l=e.xhr||null,u=(l=l||(e.cors||e.useXDR?new qt.XDomainRequest:new qt.XMLHttpRequest)).url=e.uri||e.url,c=l.method=e.method||"GET",d=e.body||e.data,h=l.headers=e.headers||{},f=!!e.sync,p=!1,g={body:void 0,headers:{},statusCode:0,method:c,url:u,rawRequest:l};if("json"in e&&!1!==e.json&&(p=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===e.json?d:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(r,0)},l.onload=r,l.onerror=i,l.onprogress=function(){},l.onabort=function(){s=!0},l.ontimeout=i,l.open(c,u,!f,e.username,e.password),f||(l.withCredentials=!!e.withCredentials),!f&&0<e.timeout&&(o=setTimeout((function(){if(!s){s=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}}),e.timeout)),l.setRequestHeader)for(a in h)h.hasOwnProperty(a)&&l.setRequestHeader(a,h[a]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(d||null),l}function Kt(t,n){var i=new e.WebVTT.Parser(e,e.vttjs,e.WebVTT.StringDecoder()),a=[];i.oncue=function(e){n.addCue(e)},i.onparsingerror=function(e){a.push(e)},i.onflush=function(){n.trigger({type:"loadeddata",target:n})},i.parse(t),0<a.length&&(e.console&&e.console.groupCollapsed&&e.console.groupCollapsed("Text Track parsing errors for "+n.src),a.forEach((function(e){return r.error(e)})),e.console&&e.console.groupEnd&&e.console.groupEnd()),i.flush()}function Jt(t,n){var i={uri:t},a=Rt(t);a&&(i.cors=a),Vt(i,pe(this,(function(t,i,a){if(t)return r.error(t,i);n.loaded_=!0,"function"!=typeof e.WebVTT?n.tech_&&n.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return Kt(a,n);r.error("vttjs failed to load, stopping trying to process "+n.src)})):Kt(a,n)})))}qt.XMLHttpRequest=e.XMLHttpRequest||function(){},qt.XDomainRequest="withCredentials"in new qt.XMLHttpRequest?qt.XMLHttpRequest:e.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){qt["delete"===e?"del":e]=function(t,n,i){return(n=Zt(t,n,i)).method=e.toUpperCase(),Xt(n)}})),Vt.default=Yt;var Qt=function(t){function n(e){var n;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var i=Re(e,{kind:Ft[e.kind]||"subtitles",language:e.language||e.srclang||""}),r=Gt[i.mode]||"disabled",a=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(r="hidden"),(n=t.call(this,i)||this).tech_=i.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var s=new Ut(n.cues_),o=new Ut(n.activeCues_),l=!1,u=pe(Oe(n),(function(){this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1)}));return"disabled"!==r&&n.tech_.ready((function(){n.tech_.on("timeupdate",u)}),!0),Object.defineProperties(Oe(n),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return r},set:function(e){var t=this;Gt[e]&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||Jt(this.src,this),"disabled"!==r?this.tech_.ready((function(){t.tech_.on("timeupdate",u)}),!0):this.tech_.off("timeupdate",u),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(l=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),i.src?(n.src=i.src,n.preload_||(n.loaded_=!0),(n.preload_||a||"subtitles"!==i.kind&&"captions"!==i.kind)&&Jt(n.src,Oe(n))):n.loaded_=!0,n}Be(n,t);var i=n.prototype;return i.addCue=function(t){var n=t;if(e.vttjs&&!(t instanceof e.vttjs.VTTCue)){for(var i in n=new e.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)i in n||(n[i]=t[i]);n.id=t.id,n.originalCue_=t}for(var r=this.tech_.textTracks(),a=0;a<r.length;a++)r[a]!==this&&r[a].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)},i.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},n}(Ht);Qt.prototype.allowedEvents_={cuechange:"cuechange"};var $t=function(e){function t(t){var n;void 0===t&&(t={});var i=Re(t,{kind:Bt[t.kind]||""});n=e.call(this,i)||this;var r=!1;return Object.defineProperty(Oe(n),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return Be(t,e),t}(Ht),en=function(e){function t(t){var n;void 0===t&&(t={});var i=Re(t,{kind:jt[t.kind]||""});n=e.call(this,i)||this;var r=!1;return Object.defineProperty(Oe(n),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return Be(t,e),t}(Ht),tn=function(e){function t(t){var n,i;void 0===t&&(t={}),n=e.call(this)||this;var r=new Qt(t);return n.kind=r.kind,n.src=r.src,n.srclang=r.language,n.label=r.label,n.default=r.default,Object.defineProperties(Oe(n),{readyState:{get:function(){return i}},track:{get:function(){return r}}}),i=0,r.addEventListener("loadeddata",(function(){i=2,n.trigger({type:"load",target:Oe(n)})})),n}return Be(t,e),t}(me);tn.prototype.allowedEvents_={load:"load"},tn.NONE=0,tn.LOADING=1,tn.LOADED=2,tn.ERROR=3;var nn={audio:{ListClass:Pt,TrackClass:$t,capitalName:"Audio"},video:{ListClass:Ot,TrackClass:en,capitalName:"Video"},text:{ListClass:Nt,TrackClass:Qt,capitalName:"Text"}};Object.keys(nn).forEach((function(e){nn[e].getterName=e+"Tracks",nn[e].privateName=e+"Tracks_"}));var rn={remoteText:{ListClass:Nt,TrackClass:Qt,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Mt,TrackClass:tn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},an=o({},nn,rn);rn.names=Object.keys(rn),nn.names=Object.keys(nn),an.names=[].concat(rn.names).concat(nn.names);var sn=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return on.prototype=e,new on};function on(){}function ln(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function un(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function cn(){this.values=sn(null)}function dn(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(n);2===s.length&&t(s[0],s[1])}}function hn(e,t,n){var i=e;function r(){var t=un(e);if(null===t)throw new ln(ln.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new ln(ln.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var i=new cn;dn(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;0<=r;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];i.integer(e,s),i.percent(e,s)&&i.set("snapToLines",!1),i.alt(e,s,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(e){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(e){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(e){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}((ln.prototype=sn(Error.prototype)).constructor=ln).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},cn.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var fn=t.createElement("textarea"),pn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},gn={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},mn={v:"title",lang:"lang"},vn={rt:"ruby"};function yn(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return t=t.substr((e=n[1]?n[1]:n[2]).length),e}function i(t,n){var i=pn[t];if(!i)return null;var r=e.document.createElement(i),a=mn[t];return a&&n&&(r[a]=n.trim()),r}for(var r,a,s,o=e.document.createElement("div"),l=o,u=[];null!==(r=n());)if("<"!==r[0])l.appendChild(e.document.createTextNode((fn.innerHTML=r,a=fn.textContent,fn.textContent="",a)));else{if("/"===r[1]){u.length&&u[u.length-1]===r.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var c,d=un(r.substr(1,r.length-2));if(d){c=e.document.createProcessingInstruction("timestamp",d),l.appendChild(c);continue}var h=r.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h)continue;if(!(c=i(h[1],h[3])))continue;if(vn[(s=c).localName]&&vn[s.localName]!==l.localName)continue;if(h[2]){var f=h[2].split(".");f.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;gn.hasOwnProperty(n)&&(c.style[t?"background-color":"color"]=gn[n])})),c.className=f.join(" ")}u.push(h[1]),l.appendChild(c),l=c}return o}var bn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function _n(e){for(var t=0;t<bn.length;t++){var n=bn[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function Tn(){}function wn(e,t,n){Tn.call(this),this.cue=t,this.cueDiv=yn(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:function(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function i(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}function r(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var a=n.match(/^.*(\n|\r)/);return a?a[e.length=0]:n}return"ruby"===t.tagName?r(e):t.childNodes?(i(e,t),r(e)):void 0}for(i(t,e);n=r(t);)for(var a=0;a<n.length;a++)if(_n(n.charCodeAt(a)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}this.applyStyles(""===t.vertical?{left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}:{top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Sn(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function En(e,t,n,i){var r=new Sn(t),a=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(a),o=[];if(a.snapToLines){var l;switch(a.vertical){case"":o=["+y","-y"],l="height";break;case"rl":o=["+x","-x"],l="width";break;case"lr":o=["-x","+x"],l="width"}var u=r.lineHeight,c=u*Math.round(s),d=n[l]+u,h=o[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),s<0&&(c+=""===a.vertical?n.height:n.width,o=o.reverse()),r.move(h,c)}else{var f=r.lineHeight/n.height*100;switch(a.lineAlign){case"center":s-=f/2;break;case"end":s-=f}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}o=["+y","-x","+x","-y"],r=new Sn(t)}var p=function(e,t){for(var r,a=new Sn(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(n,t[o])||e.within(n)&&e.overlapsAny(i);)e.move(t[o]);if(e.within(n))return e;var l=e.intersectPercentage(n);l<s&&(r=new Sn(e),s=l),e=new Sn(a)}return r||a}(r,o);t.move(p.toCSSCompatValues(n))}function Cn(){}Tn.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},Tn.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(wn.prototype=sn(Tn.prototype)).constructor=wn,Sn.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Sn.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Sn.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Sn.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Sn.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Sn.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Sn.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Sn.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},Cn.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Cn.convertCueToDOMTree=function(e,t){return e&&t?yn(e,t):null},Cn.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],a=Sn.getSimpleBoxPosition(i),s={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var n,o,l=0;l<t.length;l++)n=new wn(e,o=t[l],s),i.appendChild(n.div),En(0,n,a,r),o.displayState=n.div,r.push(Sn.getSimpleBoxPosition(n))}()}else for(var o=0;o<t.length;o++)i.appendChild(t[o].displayState)},(Cn.Parser=function(e,t,n){n||(n=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof ln))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?dn(e,(function(e,n){switch(e){case"X-TIMESTAMP-MAP":!function(e){var n=new cn;dn(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",un(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}}),/=/):dn(e,(function(e,n){switch(e){case"Region":!function(e){var n=new cn;if(dn(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new cn;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}(n)}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new ln(ln.Errors.BadSignature);t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{hn(r,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(s=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new ln(ln.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var kn=Cn,An={"":1,lr:1,rl:1},In={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function xn(e){return"string"==typeof e&&!!In[e.toLowerCase()]&&e.toLowerCase()}function Ln(e,t,n){this.hasBeenReset=!1;var i="",r=!1,a=e,s=t,o=n,l=null,u="",c=!0,d="auto",h="start",f="auto",p="auto",g=100,m="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!An[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=xn(e);t&&(h=t,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return f},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");f=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(e){var t=xn(e);t&&(p=t,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return m},set:function(e){var t=xn(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");m=t,this.hasBeenReset=!0}}}),this.displayState=void 0}Ln.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Dn=Ln,Rn={"":!0,up:!0};function Pn(e){return"number"==typeof e&&0<=e&&e<=100}function On(){var e=100,t=3,n=0,i=100,r=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Pn(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!Pn(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!Pn(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!Pn(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!Pn(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){var t=function(e){return"string"==typeof e&&!!Rn[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t||(s=t)}}})}var Nn=s((function(t){var n=t.exports={WebVTT:kn,VTTCue:Dn,VTTRegion:On};e.vttjs=n,e.WebVTT=n.WebVTT;var i=n.VTTCue,r=n.VTTRegion,a=e.VTTCue,s=e.VTTRegion;n.shim=function(){e.VTTCue=i,e.VTTRegion=r},n.restore=function(){e.VTTCue=a,e.VTTRegion=s},e.VTTCue||n.shim()})),Mn=function(n){function i(e,t){var i;return void 0===e&&(e={}),void 0===t&&(t=function(){}),e.reportTouchActivity=!1,(i=n.call(this,null,e,t)||this).hasStarted_=!1,i.on("playing",(function(){this.hasStarted_=!0})),i.on("loadstart",(function(){this.hasStarted_=!1})),an.names.forEach((function(t){var n=an[t];e&&e[n.getterName]&&(i[n.privateName]=e[n.getterName])})),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(t){!1===e["native"+t+"Tracks"]&&(i["featuresNative"+t+"Tracks"]=!1)})),!1===e.nativeCaptions||!1===e.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==e.preloadTextTracks,i.autoRemoteTextTracks_=new an.text.ListClass,i.initTrackListeners(),e.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}Be(i,n);var a=i.prototype;return a.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},a.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},a.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},a.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(pe(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()})),500)},a.onDurationChange=function(e){this.duration_=this.duration()},a.buffered=function(){return ut(0,0)},a.bufferedPercent=function(){return ct(this.buffered(),this.duration_)},a.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},a.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},a.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},a.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},a.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.dispose=function(){this.clearTracks(nn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),n.prototype.dispose.call(this)},a.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],i=n.length;i--;){var r=n[i];"text"===e&&t.removeRemoteTextTrack(r),n.removeTrack(r)}}))},a.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;)this.removeRemoteTextTrack(e[t])},a.reset=function(){},a.error=function(e){return void 0!==e&&(this.error_=new vt(e),this.trigger("error")),this.error_},a.played=function(){return this.hasStarted_?ut(0,0):ut()},a.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.initTrackListeners=function(){var e=this;nn.names.forEach((function(t){function n(){e.trigger(t+"trackchange")}var i=e[nn[t].getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),e.on("dispose",(function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)}))}))},a.addWebVttScript_=function(){var n=this;if(!e.WebVTT)if(t.body.contains(this.el())){if(!this.options_["vtt.js"]&&f(Nn)&&0<Object.keys(Nn).length)return void this.trigger("vttjsloaded");var i=t.createElement("script");i.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",i.onload=function(){n.trigger("vttjsloaded")},i.onerror=function(){n.trigger("vttjserror")},this.on("dispose",(function(){i.onload=null,i.onerror=null})),e.WebVTT=!0,this.el().parentNode.appendChild(i)}else this.ready(this.addWebVttScript_)},a.emulateTextTracks=function(){function e(e){return i.addTrack(e.track)}function t(e){return i.removeTrack(e.track)}var n=this,i=this.textTracks(),r=this.remoteTextTracks();function a(){return n.trigger("texttrackchange")}function s(){a();for(var e=0;e<i.length;e++){var t=i[e];t.removeEventListener("cuechange",a),"showing"===t.mode&&t.addEventListener("cuechange",a)}}r.on("addtrack",e),r.on("removetrack",t),this.addWebVttScript_(),s(),i.addEventListener("change",s),i.addEventListener("addtrack",s),i.addEventListener("removetrack",s),this.on("dispose",(function(){r.off("addtrack",e),r.off("removetrack",t),i.removeEventListener("change",s),i.removeEventListener("addtrack",s),i.removeEventListener("removetrack",s);for(var n=0;n<i.length;n++)i[n].removeEventListener("cuechange",a)}))},a.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var s=new an.text.TrackClass(r);return a.addTrack(s),s}(this,e,t,n)},a.createRemoteTextTrack=function(e){var t=Re(e,{tech:this});return new rn.remoteTextEl.TrackClass(t)},a.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var i=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(r.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==t&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(i.track)})),i},a.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},a.getVideoPlaybackQuality=function(){return{}},a.requestPictureInPicture=function(){var t=this.options_.Promise||e.Promise;if(t)return t.reject()},a.setPoster=function(){},a.playsinline=function(){},a.setPlaysinline=function(){},a.overrideNativeAudioTracks=function(){},a.overrideNativeVideoTracks=function(){},a.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=function(e,t){return i.canPlayType(e.type)},i.isTech=function(e){return e.prototype instanceof i||e instanceof i||e===i},i.registerTech=function(e,t){if(i.techs_||(i.techs_={}),!i.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!i.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!i.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=De(e),i.techs_[e]=t,i.techs_[Le(e)]=t,"Tech"!==e&&i.defaultTechOrder_.push(e),t},i.getTech=function(t){if(t)return i.techs_&&i.techs_[t]?i.techs_[t]:(t=De(t),e&&e.videojs&&e.videojs[t]?(r.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),e.videojs[t]):void 0)},i}(Pe);an.names.forEach((function(e){var t=an[e];Mn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),Mn.prototype.featuresVolumeControl=!0,Mn.prototype.featuresMuteControl=!0,Mn.prototype.featuresFullscreenResize=!1,Mn.prototype.featuresPlaybackRate=!1,Mn.prototype.featuresProgressEvents=!1,Mn.prototype.featuresSourceset=!1,Mn.prototype.featuresTimeupdateEvents=!1,Mn.prototype.featuresNativeTextTracks=!1,Mn.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var i=e.sourceHandlers;i=i||(e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){for(var n,i=e.sourceHandlers||[],r=0;r<i.length;r++)if(n=i[r].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var i=e.sourceHandlers||[],r=0;r<i.length;r++)if(i[r].canHandleSource(t,n))return i[r];return null},e.canPlaySource=function(t,n){var i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:r.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Pe.registerComponent("Tech",Mn),Mn.registerTech("Tech",Mn),Mn.defaultTechOrder_=[];var Un={},jn={},Bn={};function Fn(e,t,n,i){void 0===i&&(i=null);var r="call"+De(n),a=e.reduce(zn(r),i),s=a===Bn,o=s?null:t[n](a);return function(e,t,n,i){for(var r=e.length-1;0<=r;r--){var a=e[r];a[t]&&a[t](i,n)}}(e,n,o,s),o}var Gn={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Hn={setCurrentTime:1,setMuted:1,setVolume:1},Wn={play:1,pause:1};function zn(e){return function(t,n){return t===Bn?Bn:n[e]?n[e](t):t}}function Vn(e){void 0===e&&(e="");var t=Dt(e);return Yn[t.toLowerCase()]||""}var Yn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function Zn(e){if(!e.type){var t=Vn(e.src);t&&(e.type=t)}return e}var qn=function(e){function t(t,n,i){var r,a=Re({createEl:!1},n);if(r=e.call(this,t,a,i)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var s=0,o=n.playerOptions.techOrder;s<o.length;s++){var l=De(o[s]),u=Mn.getTech(l);if(l||(u=Pe.getComponent(l)),u&&u.isSupported()){t.loadTech_(l);break}}return r}return Be(t,e),t}(Pe);Pe.registerComponent("MediaLoader",qn);var Xn=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).emitTapEvents(),i.enable(),i}Be(t,e);var n=t.prototype;return n.createEl=function(t,n,i){void 0===t&&(t="div"),void 0===n&&(n={}),void 0===i&&(i={}),n=d({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&r.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),i=d({role:"button"},i),this.tabIndex_=n.tabIndex;var a=e.prototype.createEl.call(this,t,n,i);return this.createControlTextEl(a),a},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=T("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,w(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(t){wt.isEventKey(t,"Space")||wt.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Pe);Pe.registerComponent("ClickableComponent",Xn);var Kn=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update(),t.on("posterchange",pe(Oe(i),i.update)),i}Be(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},n.createEl=function(){return T("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;!this.player_.tech(!0)||(Qe||Xe)&&t||this.player_.tech(!0).focus(),this.player_.paused()?_t(this.player_.play()):this.player_.pause()}},t}(Xn);Pe.registerComponent("PosterImage",Kn);var Jn="#222",Qn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function $n(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function ei(e,t,n){try{e.style[t]=n}catch(e){return}}var ti=function(t){function n(n,i,r){var a;a=t.call(this,n,i,r)||this;var s=pe(Oe(a),a.updateDisplay);return n.on("loadstart",pe(Oe(a),a.toggleDisplay)),n.on("texttrackchange",s),n.on("loadedmetadata",pe(Oe(a),a.preselectTrack)),n.ready(pe(Oe(a),(function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",s),n.on("playerresize",s),e.addEventListener("orientationchange",s),n.on("dispose",(function(){return e.removeEventListener("orientationchange",s)}));for(var t=this.options_.playerOptions.tracks||[],i=0;i<t.length;i++)this.player_.addRemoteTextTrack(t[i],!0);this.preselectTrack()}}))),a}Be(n,t);var i=n.prototype;return i.preselectTrack=function(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var o=r[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in i?n=o.kind===a.kind?o:n||o:a&&!a.enabled?t=e=n=null:o.default&&("descriptions"!==o.kind||e?o.kind in i&&!t&&(t=o):e=o)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){"function"==typeof e.WebVTT&&e.WebVTT.processCues(e,[],this.el_)},i.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],i=0;i<e.length;++i){var r=e[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var a=null,s=null,o=e.length;o--;){var l=e[o];"showing"===l.mode&&("descriptions"===l.kind?a=l:s=l)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},i.updateDisplayState=function(t){for(var n=this.player_.textTrackSettings.getValues(),i=t.activeCues,r=i.length;r--;){var a=i[r];if(a){var s=a.displayState;if(n.color&&(s.firstChild.style.color=n.color),n.textOpacity&&ei(s.firstChild,"color",$n(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(s.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&ei(s.firstChild,"backgroundColor",$n(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?ei(s,"backgroundColor",$n(n.windowColor,n.windowOpacity)):s.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Jn:"raised"===n.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Jn:"depressed"===n.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Jn:"uniform"===n.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Jn)),n.fontPercent&&1!==n.fontPercent){var o=e.parseFloat(s.style.fontSize);s.style.fontSize=o*n.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=Qn[n.fontFamily])}}},i.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof e.WebVTT&&!t.every((function(e){return!e.activeCues}))){for(var n=[],i=0;i<t.length;++i)for(var r=t[i],a=0;a<r.activeCues.length;++a)n.push(r.activeCues[a]);e.WebVTT.processCues(e,n,this.el_);for(var s=0;s<t.length;++s){for(var o=t[s],l=0;l<o.activeCues.length;++l){var u=o.activeCues[l].displayState;C(u,"vjs-text-track-cue"),C(u,"vjs-text-track-cue-"+(o.language?o.language:s))}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},n}(Pe);Pe.registerComponent("TextTrackDisplay",ti);var ni=function(e){function t(){return e.apply(this,arguments)||this}return Be(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),i=T("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[n])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r},t}(Pe);Pe.registerComponent("LoadingSpinner",ni);var ii=function(e){function t(){return e.apply(this,arguments)||this}Be(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),t=d({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),n=d({type:"button"},n);var i=Pe.prototype.createEl.call(this,"button",t,n);return this.createControlTextEl(i),i},n.addChild=function(e,t){return void 0===t&&(t={}),r.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),Pe.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(t){wt.isEventKey(t,"Space")||wt.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(Xn);Pe.registerComponent("Button",ii);var ri=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;return _t(t),void(!this.player_.tech(!0)||(Qe||Xe)&&n||this.player_.tech(!0).focus())}var i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(r){var a=function(){return r.focus()};bt(t)?t.then(a,(function(){})):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(ii);ri.prototype.controlText_="Play Video",Pe.registerComponent("BigPlayButton",ri);var ai=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).controlText(n&&n.controlText||i.localize("Close")),i}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){wt.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(ii);Pe.registerComponent("CloseButton",ai);var si=function(e){function t(t,n){var i;return void 0===n&&(n={}),i=e.call(this,t,n)||this,n.replay=void 0===n.replay||n.replay,i.on(t,"play",i.handlePlay),i.on(t,"pause",i.handlePause),n.replay&&i.on(t,"ended",i.handleEnded),i}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(ii);function oi(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return!isNaN(e)&&e!==1/0||(r=i=n="-"),(r=0<r||0<s?r+":":"")+(i=((r||10<=a)&&i<10?"0"+i:i)+":")+(n<10?"0"+n:n)}si.prototype.controlText_="Play",Pe.registerComponent("PlayToggle",si);var li=oi;function ui(e,t){return void 0===t&&(t=e),li(e,t)}var ci=function(e){function n(t,n){var i;return(i=e.call(this,t,n)||this).on(t,["timeupdate","ended"],i.updateContent),i.updateTextNode_(),i}Be(n,e);var i=n.prototype;return i.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"\xa0</span>"});return this.contentEl_=T("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},i.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},i.updateTextNode_=function(e){var n=this;void 0===e&&(e=0),e=ui(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestAnimationFrame((function(){if(n.contentEl_){var e=n.textNode_;n.textNode_=t.createTextNode(n.formattedTime_),n.textNode_&&(e?n.contentEl_.replaceChild(n.textNode_,e):n.contentEl_.appendChild(n.textNode_))}})))},i.updateContent=function(e){},n}(Pe);ci.prototype.labelText_="Time",ci.prototype.controlText_="Time",Pe.registerComponent("TimeDisplay",ci);var di=function(e){function t(){return e.apply(this,arguments)||this}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(ci);di.prototype.labelText_="Current Time",di.prototype.controlText_="Current Time",Pe.registerComponent("CurrentTimeDisplay",di);var hi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"durationchange",i.updateContent),i.on(t,"loadstart",i.updateContent),i.on(t,"loadedmetadata",i.updateContent),i}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(ci);hi.prototype.labelText_="Duration",hi.prototype.controlText_="Duration",Pe.registerComponent("DurationDisplay",hi);var fi=function(e){function t(){return e.apply(this,arguments)||this}return Be(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(Pe);Pe.registerComponent("TimeDivider",fi);var pi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"durationchange",i.updateContent),i}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore(T("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(ci);pi.prototype.labelText_="Remaining Time",pi.prototype.controlText_="Remaining Time",Pe.registerComponent("RemainingTimeDisplay",pi);var gi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}Be(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=T("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\xa0</span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Pe);Pe.registerComponent("LiveDisplay",gi);var mi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateLiveEdgeStatus(),i.player_.liveTracker&&i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatus),i}Be(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=T("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,e.prototype.dispose.call(this)},t}(ii);function vi(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}mi.prototype.controlText_="Seek to live, currently playing live",Pe.registerComponent("SeekToLive",mi);var yi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}Be(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),n.className=n.className+" vjs-slider",n=d({tabIndex:0},n),i=d({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),e.prototype.createEl.call(this,t,n,i)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Ke||e.preventDefault(),P(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;O(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},n.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestAnimationFrame((function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}))),t}},n.getProgress=function(){return Number(vi(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){var t=U(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(t){wt.isEventKey(t,"Left")||wt.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):wt.isEventKey(t,"Right")||wt.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},t}(Pe);function bi(e,t){return vi(e/t*100,0,100).toFixed(2)+"%"}Pe.registerComponent("Slider",yi);var _i=function(e){function n(t,n){var i;return(i=e.call(this,t,n)||this).partEls_=[],i.on(t,"progress",i.update),i}Be(n,e);var i=n.prototype;return i.createEl=function(){var n=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),i=T("span",{className:"vjs-control-text"}),r=T("span",{textContent:this.localize("Loaded")}),a=t.createTextNode(": ");return this.percentageEl_=T("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),n.appendChild(i),i.appendChild(r),i.appendChild(a),i.appendChild(this.percentageEl_),n},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},i.update=function(e){var t=this;this.requestAnimationFrame((function(){var e=t.player_.liveTracker,n=t.player_.buffered(),i=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),a=t.partEls_,s=bi(r,i);t.percent_!==s&&(t.el_.style.width=s,w(t.percentageEl_,s),t.percent_=s);for(var o=0;o<n.length;o++){var l=n.start(o),u=n.end(o),c=a[o];c||(c=t.el_.appendChild(T()),a[o]=c),c.dataset.start===l&&c.dataset.end===u||(c.dataset.start=l,c.dataset.end=u,c.style.left=bi(l,r),c.style.width=bi(u-l,r))}for(var d=a.length;d>n.length;d--)t.el_.removeChild(a[d-1]);a.length=n.length}))},n}(Pe);Pe.registerComponent("LoadProgressBar",_i);var Ti=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ge(pe(Oe(i),i.update),30),i}Be(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var i=N(this.el_),r=N(this.player_.el()),a=e.width*t;if(r&&i){var s=e.left-r.left+a,o=e.width-a+(r.right-e.right),l=i.width/2;s<l?l+=l-s:o<l&&(l=o),l<0?l=0:l>i.width&&(l=i.width),this.el_.style.right="-"+l+"px",this.write(n)}},n.write=function(e){w(this.el_,e)},n.updateTime=function(e,t,n,i){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame((function(){var a,s=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var o=r.player_.liveTracker.liveWindow(),l=o-t*o;a=(l<1?"":"-")+ui(l,o)}else a=ui(n,s);r.update(e,t,a),i&&i()}))},t}(Pe);Pe.registerComponent("TimeTooltip",Ti);var wi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ge(pe(Oe(i),i.update),30),i}Be(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}},t}(Pe);wi.prototype.options_={children:[]},rt||Ve||wi.prototype.options_.children.push("timeTooltip"),Pe.registerComponent("PlayProgressBar",wi);var Si=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ge(pe(Oe(i),i.update),30),i}Be(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,(function(){n.el_.style.left=e.width*t+"px"}))},t}(Pe);Si.prototype.options_={children:["timeTooltip"]},Pe.registerComponent("MouseTimeDisplay",Si);var Ei=function(e){function n(t,n){var i;return(i=e.call(this,t,n)||this).setEventHandlers_(),i}Be(n,e);var i=n.prototype;return i.setEventHandlers_=function(){this.update_=pe(this,this.update),this.update=ge(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in t&&"visibilityState"in t&&this.on(t,"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(e){t.hidden?this.disableInterval_(e):(this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},i.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(t){var n=this,i=e.prototype.update.call(this);return this.requestAnimationFrame((function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,r=n.player_.duration();t&&t.isLive()&&(r=n.player_.liveTracker.liveCurrentTime()),n.percent_!==i&&(n.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),n.percent_=i),n.currentTime_===e&&n.duration_===r||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[ui(e,r),ui(r,r)],"{1} of {2}")),n.currentTime_=e,n.duration_=r),n.bar&&n.bar.update(N(n.el()),n.getProgress())})),i},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},i.handleMouseDown=function(t){W(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},i.handleMouseMove=function(e){if(W(e)){var t,n=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){if(.99<=n)return void i.seekToLiveEdge();var r=i.seekableStart(),a=i.liveCurrentTime();if(a<=(t=r+n*i.liveWindow())&&(t=a),t<=r&&(t=r+.1),t===1/0)return}else(t=n*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},i.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},i.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},i.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?_t(this.player_.play()):this.update_()},i.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},i.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},i.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(t){if(wt.isEventKey(t,"Space")||wt.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(wt.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(0);else if(wt.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(wt(t))){t.preventDefault(),t.stopPropagation();var n=10*(wt.codes[wt(t)]-wt.codes[0])/100;this.player_.currentTime(this.player_.duration()*n)}else wt.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):wt.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableInterval_),this.off(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in t&&"visibilityState"in t&&this.off(t,"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},n}(yi);Ei.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},rt||Ve||Ei.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Pe.registerComponent("SeekBar",Ei);var Ci=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleMouseMove=ge(pe(Oe(i),i.handleMouseMove),30),i.throttledHandleMouseSeek=ge(pe(Oe(i),i.handleMouseSeek),30),i.enable(),i}Be(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(n||i){var r=t.el(),a=N(r),s=U(r,e).x;s=vi(0,1,s),i&&i.update(a,s),n&&n.update(a,t.getProgress())}}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},n.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(Pe);Ci.prototype.options_={children:["seekBar"]},Pe.registerComponent("ProgressControl",Ci);var ki=function(e){function n(n,i){var r;return(r=e.call(this,n,i)||this).on(n,["enterpictureinpicture","leavepictureinpicture"],r.handlePictureInPictureChange),t.pictureInPictureEnabled||r.disable(),r}Be(n,e);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},i.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")},i.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},n}(ii);ki.prototype.controlText_="Picture-in-Picture",Pe.registerComponent("PictureInPictureToggle",ki);var Ai=function(e){function n(n,i){var r;return(r=e.call(this,n,i)||this).on(n,"fullscreenchange",r.handleFullscreenChange),!1===t[n.fsApi_.fullscreenEnabled]&&r.disable(),r}Be(n,e);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},n}(ii);Ai.prototype.controlText_="Fullscreen",Pe.registerComponent("FullscreenToggle",Ai);var Ii=function(e){function t(){return e.apply(this,arguments)||this}return Be(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Pe);Pe.registerComponent("VolumeLevel",Ii);var xi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on("slideractive",i.updateLastVolume_),i.on(t,"volumechange",i.updateARIAAttributes),t.ready((function(){return i.updateARIAAttributes()})),i}Be(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){W(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){W(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(yi);xi.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},xi.prototype.playerEvent="volumechange",Pe.registerComponent("VolumeBar",xi);var Li=function(e){function t(t,n){var i;return void 0===n&&(n={}),n.vertical=n.vertical||!1,void 0!==n.volumeBar&&!f(n.volumeBar)||(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),i=e.call(this,t,n)||this,function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Oe(i),t),i.throttledHandleMouseMove=ge(pe(Oe(i),i.handleMouseMove),30),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}Be(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Pe);Li.prototype.options_={children:["volumeBar"]},Pe.registerComponent("VolumeControl",Li);var Di=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Oe(i),t),i.on(t,["loadstart","volumechange"],i.update),i}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();0===t?(this.player_.volume(n<.1?.1:n),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;rt&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)k(this.el_,"vjs-vol-"+n);C(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(ii);Di.prototype.controlText_="Mute",Pe.registerComponent("MuteToggle",Di);var Ri=function(e){function n(t,n){var i;return void 0===n&&(n={}),n.inline=void 0===n.inline||n.inline,void 0!==n.volumeControl&&!f(n.volumeControl)||(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(i=e.call(this,t,n)||this).on(t,["loadstart"],i.volumePanelState_),i.on(i.muteToggle,"keyup",i.handleKeyPress),i.on(i.volumeControl,"keyup",i.handleVolumeControlKeyUp),i.on("keydown",i.handleKeyPress),i.on("mouseover",i.handleMouseOver),i.on("mouseout",i.handleMouseOut),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}Be(n,e);var i=n.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},i.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(e){wt.isEventKey(e,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(e){this.addClass("vjs-hover"),ue(t,"keyup",pe(this,this.handleKeyPress))},i.handleMouseOut=function(e){this.removeClass("vjs-hover"),ce(t,"keyup",pe(this,this.handleKeyPress))},i.handleKeyPress=function(e){wt.isEventKey(e,"Esc")&&this.handleMouseOut()},n}(Pe);Ri.prototype.options_={children:["muteToggle","volumeControl"]},Pe.registerComponent("VolumePanel",Ri);var Pi=function(e){function n(t,n){var i;return i=e.call(this,t,n)||this,n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyDown),i.boundHandleBlur_=pe(Oe(i),i.handleBlur),i.boundHandleTapClick_=pe(Oe(i),i.handleTapClick),i}Be(n,e);var i=n.prototype;return i.addEventListenerForItem=function(e){e instanceof Pe&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(e){e instanceof Pe&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},i.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},i.createEl=function(){this.contentEl_=T(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),ue(t,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),t},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},i.handleBlur=function(e){var n=e.relatedTarget||t.activeElement;if(!this.children().some((function(e){return e.el()===n}))){var i=this.menuButton_;i&&i.buttonPressed_&&n!==i.el().firstChild&&i.unpressButton()}},i.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var n=t.filter((function(t){return t.el()===e.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},i.handleKeyDown=function(e){wt.isEventKey(e,"Left")||wt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(wt.isEventKey(e,"Right")||wt.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},i.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},i.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},i.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},n}(Pe);Pe.registerComponent("Menu",Pi);var Oi=function(e){function n(n,i){var r;void 0===i&&(i={}),(r=e.call(this,n,i)||this).menuButton_=new ii(n,i),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var a=ii.prototype.buildCSSClass();return r.menuButton_.el_.className=r.buildCSSClass()+" "+a,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0,r.on(r.menuButton_,"tap",r.handleClick),r.on(r.menuButton_,"click",r.handleClick),r.on(r.menuButton_,"keydown",r.handleKeyDown),r.on(r.menuButton_,"mouseenter",(function(){r.addClass("vjs-hover"),r.menu.show(),ue(t,"keyup",pe(Oe(r),r.handleMenuKeyUp))})),r.on("mouseleave",r.handleMouseLeave),r.on("keydown",r.handleSubmenuKeyDown),r}Be(n,e);var i=n.prototype;return i.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},i.createMenu=function(){var e=new Pi(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=T("li",{className:"vjs-menu-title",innerHTML:De(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var n=new Pe(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},i.createItems=function(){},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+ii.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+e.prototype.buildCSSClass.call(this)},i.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},i.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},i.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(e){this.removeClass("vjs-hover"),ce(t,"keyup",pe(this,this.handleMenuKeyUp))},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(e){wt.isEventKey(e,"Esc")||wt.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),wt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(wt.isEventKey(e,"Up")||wt.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(e){(wt.isEventKey(e,"Esc")||wt.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},i.handleSubmenuKeyDown=function(e){(wt.isEventKey(e,"Esc")||wt.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),wt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),rt&&b())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},n}(Pe);Pe.registerComponent("MenuButton",Oi);var Ni=function(e){function t(t,n){var i,r=n.tracks;if((i=e.call(this,t,n)||this).items.length<=1&&i.hide(),!r)return Oe(i);var a=pe(Oe(i),i.update);return r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),i.player_.on("ready",a),i.player_.on("dispose",(function(){r.removeEventListener("removetrack",a),r.removeEventListener("addtrack",a)})),i}return Be(t,e),t}(Oi);Pe.registerComponent("TrackButton",Ni);var Mi=["Tab","Esc","Up","Down","Right","Left"],Ui=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).selectable=n.selectable,i.isSelected_=n.selected||!1,i.multiSelectable=n.multiSelectable,i.selected(i.isSelected_),i.el_.setAttribute("role",i.selectable?i.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),i}Be(t,e);var n=t.prototype;return n.createEl=function(t,n,i){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",d({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},n),i)},n.handleKeyDown=function(t){Mi.some((function(e){return wt.isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Xn);Pe.registerComponent("MenuItem",Ui);var ji=function(n){function i(i,r){var a,s,o=r.track,l=i.textTracks();function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.handleTracksChange.apply(Oe(a),t)}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.handleSelectedLanguageChange.apply(Oe(a),t)}return r.label=o.label||o.language||"Unknown",r.selected="showing"===o.mode,(a=n.call(this,i,r)||this).track=o,a.kinds=(r.kinds||[r.kind||a.track.kind]).filter(Boolean),i.on(["loadstart","texttrackchange"],u),l.addEventListener("change",u),l.addEventListener("selectedlanguagechange",c),a.on("dispose",(function(){i.off(["loadstart","texttrackchange"],u),l.removeEventListener("change",u),l.removeEventListener("selectedlanguagechange",c)})),void 0===l.onchange&&a.on(["tap","click"],(function(){if("object"!=typeof e.Event)try{s=new e.Event("change")}catch(i){}s||(s=t.createEvent("Event")).initEvent("change",!0,!0),l.dispatchEvent(s)})),a.handleTracksChange(),a}Be(i,n);var r=i.prototype;return r.handleClick=function(e){var t=this.track,i=this.player_.textTracks();if(n.prototype.handleClick.call(this,e),i)for(var r=0;r<i.length;r++){var a=i[r];-1!==this.kinds.indexOf(a.kind)&&(a===t?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},r.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},r.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},r.dispose=function(){this.track=null,n.prototype.dispose.call(this)},i}(Ui);Pe.registerComponent("TextTrackMenuItem",ji);var Bi=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.track.label=n.label?n.label:n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}Be(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(ji);Pe.registerComponent("OffTextTrackMenuItem",Bi);var Fi=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.textTracks(),e.call(this,t,n)||this}return Be(t,e),t.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=ji),this.label_&&(n=this.label_+" off"),e.push(new Bi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(-1<this.kinds_.indexOf(a.kind)){var s=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},t}(Ni);Pe.registerComponent("TextTrackButton",Fi);var Gi=function(e){function t(t,n){var i,r=n.track,a=n.cue,s=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=s&&s<a.endTime,(i=e.call(this,t,n)||this).track=r,i.cue=a,r.addEventListener("cuechange",pe(Oe(i),i.update)),i}Be(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},t}(Ui);Pe.registerComponent("ChaptersTrackMenuItem",Gi);var Hi=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(De(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=new Gi(this.player_,{track:this.track_,cue:t[n]});e.push(r)}return e},t}(Fi);Hi.prototype.kind_="chapters",Hi.prototype.controlText_="Chapters",Pe.registerComponent("ChaptersButton",Hi);var Wi=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var a=t.textTracks(),s=pe(Oe(r),r.handleTracksChange);return a.addEventListener("change",s),r.on("dispose",(function(){a.removeEventListener("change",s)})),r}Be(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Fi);Wi.prototype.kind_="descriptions",Wi.prototype.controlText_="Descriptions",Pe.registerComponent("DescriptionsButton",Wi);var zi=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Fi);zi.prototype.kind_="subtitles",zi.prototype.controlText_="Subtitles",Pe.registerComponent("SubtitlesButton",zi);var Vi=function(e){function t(t,n){var i;return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(i=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+n.kind+" settings dialog"),i}return Be(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(ji);Pe.registerComponent("CaptionSettingsMenuItem",Vi);var Yi=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Vi(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Fi);Yi.prototype.kind_="captions",Yi.prototype.controlText_="Captions",Pe.registerComponent("CaptionsButton",Yi);var Zi=function(e){function t(){return e.apply(this,arguments)||this}return Be(t,e),t.prototype.createEl=function(t,n,i){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),e.prototype.createEl.call(this,t,d({innerHTML:r+="</span>"},n),i)},t}(ji);Pe.registerComponent("SubsCapsMenuItem",Zi);var qi=function(e){function t(t,n){var i;return void 0===n&&(n={}),(i=e.call(this,t,n)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)&&(i.label_="captions"),i.menuButton_.controlText(De(i.label_)),i}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Vi(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t,Zi)},t}(Fi);qi.prototype.kinds_=["captions","subtitles"],qi.prototype.controlText_="Subtitles",Pe.registerComponent("SubsCapsButton",qi);var Xi=function(e){function t(t,n){var i,r=n.track,a=t.audioTracks();function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(Oe(i),t)}return n.label=r.label||r.language||"Unknown",n.selected=r.enabled,(i=e.call(this,t,n)||this).track=r,i.addClass("vjs-"+r.kind+"-menu-item"),a.addEventListener("change",s),i.on("dispose",(function(){a.removeEventListener("change",s)})),i}Be(t,e);var n=t.prototype;return n.createEl=function(t,n,i){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),e.prototype.createEl.call(this,t,d({innerHTML:r+="</span>"},n),i)},n.handleClick=function(t){var n=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var i=0;i<n.length;i++){var r=n[i];r.enabled=r===this.track}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Ui);Pe.registerComponent("AudioTrackMenuItem",Xi);var Ki=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.audioTracks(),e.call(this,t,n)||this}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++)e.push(new Xi(this.player_,{track:t[n],selectable:!0,multiSelectable:!1}));return e},t}(Ni);Ki.prototype.controlText_="Audio Track",Pe.registerComponent("AudioTrackButton",Ki);var Ji=function(e){function t(t,n){var i,r=n.rate,a=parseFloat(r,10);return n.label=r,n.selected=1===a,n.selectable=!0,n.multiSelectable=!1,(i=e.call(this,t,n)||this).label=r,i.rate=a,i.on(t,"ratechange",i.update),i}Be(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Ui);Ji.prototype.contentElType="button",Pe.registerComponent("PlaybackRateMenuItem",Ji);var Qi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateVisibility(),i.updateLabel(),i.on(t,"loadstart",i.updateVisibility),i.on(t,"ratechange",i.updateLabel),i}Be(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=T("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var e=new Pi(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;0<=n;n--)e.addChild(new Ji(this.player(),{rate:t[n]+"x"}));return e},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),i=n[0],r=0;r<n.length;r++)if(n[r]>t){i=n[r];break}this.player().playbackRate(i)},n.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(Oi);Qi.prototype.controlText_="Playback Rate",Pe.registerComponent("PlaybackRateMenuButton",Qi);var $i=function(e){function t(){return e.apply(this,arguments)||this}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Pe);Pe.registerComponent("Spacer",$i);var er=function(e){function t(){return e.apply(this,arguments)||this}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="\xa0",t},t}($i);Pe.registerComponent("CustomControlSpacer",er);var tr=function(e){function t(){return e.apply(this,arguments)||this}return Be(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Pe);tr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in t&&tr.prototype.options_.children.splice(tr.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Pe.registerComponent("ControlBar",tr);var nr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"error",i.open),i}Be(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Et);nr.prototype.options_=o({},Et.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Pe.registerComponent("ErrorDisplay",nr);var ir="vjs-text-track-settings",rr=["#000","Black"],ar=["#00F","Blue"],sr=["#0FF","Cyan"],or=["#0F0","Green"],lr=["#F0F","Magenta"],ur=["#F00","Red"],cr=["#FFF","White"],dr=["#FF0","Yellow"],hr=["1","Opaque"],fr=["0.5","Semi-Transparent"],pr=["0","Transparent"],gr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[rr,cr,ur,or,ar,dr,lr,sr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[hr,fr,pr]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[cr,rr,ur,or,ar,dr,lr,sr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[hr,fr]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[pr,fr,hr]}};function mr(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}gr.windowColor.options=gr.backgroundColor.options;var vr=function(t){function n(e,n){var i;return n.temporary=!1,(i=t.call(this,e,n)||this).updateDisplay=pe(Oe(i),i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=T("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"),"click",(function(){i.setDefaults(),i.updateDisplay()})),c(gr,(function(e){i.on(i.$(e.selector),"change",i.updateDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}Be(n,t);var i=n.prototype;return i.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},i.createElSelect_=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n="label");var r=gr[e],a=r.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map((function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',i.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},i.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return T("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return T("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var e=this.localize("restore all settings to the default values");return T("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var e=this;return function(t,n,i){return void 0===i&&(i=0),u(t).reduce((function(n,i){return function(t,n,i){var r=function(e,t){return mr(e.options[e.options.selectedIndex].value,t)}(e.$(n.selector),n.parser);return void 0!==r&&(t[i]=r),t}(n,t[i],i)}),i)}(gr,0,{})},i.setValues=function(e){var t=this;c(gr,(function(n,i){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(mr(e.options[i].value,n)===t){e.selectedIndex=i;break}}(t.$(n.selector),e[i],n.parser)}))},i.setDefaults=function(){var e=this;c(gr,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},i.restoreSettings=function(){var t;try{t=JSON.parse(e.localStorage.getItem(ir))}catch(t){r.warn(t)}t&&this.setValues(t)},i.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?e.localStorage.setItem(ir,JSON.stringify(t)):e.localStorage.removeItem(ir)}catch(t){r.warn(t)}}},i.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},n}(Et);Pe.registerComponent("TextTrackSettings",vr);var yr=function(t){function n(n,i){var r,a=i.ResizeObserver||e.ResizeObserver;null===i.ResizeObserver&&(a=!1);var s=Re({createEl:!a,reportTouchActivity:!1},i);return(r=t.call(this,n,s)||this).ResizeObserver=i.ResizeObserver||e.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=function(t,n,i,r){var a;function s(){var e=this,n=arguments,i=function(){i=a=null,t.apply(e,n)};r.clearTimeout(a),a=r.setTimeout(i,100)}return void 0===r&&(r=e),s.cancel=function(){r.clearTimeout(a),a=null},s}((function(){r.resizeHandler()}),0,0,Oe(r)),a?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(n.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var e=r.debouncedHandler_,t=r.unloadListener_=function(){ce(this,"resize",e),ce(this,"unload",t),t=null};ue(r.el_.contentWindow,"unload",t),ue(r.el_.contentWindow,"resize",e)}},r.one("load",r.loadListener_)),r}Be(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},i.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},n}(Pe);Pe.registerComponent("ResizeManager",yr);var br={trackingThreshold:30,liveTolerance:15},_r=function(n){function i(e,i){var r,a=Re(br,i,{createEl:!1});return(r=n.call(this,e,a)||this).reset_(),r.on(r.player_,"durationchange",r.handleDurationchange),Qe&&"hidden"in t&&"visibilityState"in t&&r.on(t,"visibilitychange",r.handleVisibilityChange),r}Be(i,n);var r=i.prototype;return r.handleVisibilityChange=function(){this.player_.duration()===1/0&&(t.hidden?this.stopTracking():this.startTracking())},r.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var n=Number(e.performance.now().toFixed(4)),i=-1===this.lastTime_?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+i;var r=this.liveCurrentTime(),a=this.player_.currentTime(),s=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-a)>this.options_.liveTolerance;this.timeupdateSeen_&&r!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},r.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked):(this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)))},r.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked)},r.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=!this.skipNextSeeked_&&2<e,this.skipNextSeeked_=!1,this.trackLive_()},r.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},r.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.skipNextSeeked_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLive_),this.off(this.player_,"seeked",this.handleSeeked),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate),this.off(this.player_,"timeupdate",this.seekToLiveEdge)},r.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},r.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},r.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},r.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},r.isLive=function(){return this.isTracking()},r.atLiveEdge=function(){return!this.behindLiveEdge()},r.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},r.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.isTracking=function(){return"number"==typeof this.trackingInterval_},r.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))},r.dispose=function(){this.off(t,"visibilitychange",this.handleVisibilityChange),this.stopTracking(),n.prototype.dispose.call(this)},i}(Pe);function Tr(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],r="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var s=n[a].src;s&&-1===i.indexOf(s)&&i.push(s)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)}function wr(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n}function Sr(t){var n=t.el();if(!n.resetSourceWatch_){var i={},r=function(t){return wr([t.el(),e.HTMLMediaElement.prototype,e.Element.prototype,kr],"innerHTML")}(t),a=function(e){return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=e.apply(n,r);return Tr(t),s}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){n[e]&&(i[e]=n[e],n[e]=a(i[e]))})),Object.defineProperty(n,"innerHTML",Re(r,{set:a(r.set)})),n.resetSourceWatch_=function(){n.resetSourceWatch_=null,Object.keys(i).forEach((function(e){n[e]=i[e]})),Object.defineProperty(n,"innerHTML",r)},t.one("sourceset",n.resetSourceWatch_)}}function Er(e,t,n,i){function r(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})}void 0===i&&(i=!0);var a={configurable:!0,enumerable:!0,get:function(){var e=n();return r(e),e}};return i&&(a.set=r),Object.defineProperty(e,t,a)}Pe.registerComponent("LiveTracker",_r);var Cr,kr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(n){var i=t.createElement(this.nodeName.toLowerCase());i.innerHTML=n;for(var r=t.createDocumentFragment();i.childNodes.length;)r.appendChild(i.childNodes[0]);return this.innerText="",e.Element.prototype.appendChild.call(this,r),this.innerHTML}}),Ar=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Lt(e.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return e.Element.prototype.setAttribute.call(this,"src",t),t}}),Ir=function(n){function i(e,t){var i;i=n.call(this,e,t)||this;var a=e.source,s=!1;if(a&&(i.el_.currentSrc!==a.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(a):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var o=i.el_.childNodes,l=o.length,u=[];l--;){var c=o[l];"track"===c.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(c),i.remoteTextTracks().addTrack(c.track),i.textTracks().addTrack(c.track),s||i.el_.hasAttribute("crossorigin")||!Rt(c.src)||(s=!0)):u.push(c))}for(var d=0;d<u.length;d++)i.el_.removeChild(u[d])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&s&&r.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(tt||it||Ze)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}Be(i,n);var a=i.prototype;return a.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),i.disposeMediaElement(this.el_),this.options_=null,n.prototype.dispose.call(this)},a.setupSourcesetHandling_=function(){!function(t){if(t.featuresSourceset){var n=t.el();if(!n.resetSourceset_){var i=function(t){return wr([t.el(),e.HTMLMediaElement.prototype,Ar],"src")}(t),r=n.setAttribute,a=n.load;Object.defineProperty(n,"src",Re(i,{set:function(e){var r=i.set.call(n,e);return t.triggerSourceset(n.src),r}})),n.setAttribute=function(e,i){var a=r.call(n,e,i);return/src/i.test(e)&&t.triggerSourceset(n.src),a},n.load=function(){var e=a.call(n);return Tr(t)||(t.triggerSourceset(""),Sr(t)),e},n.currentSrc?t.triggerSourceset(n.currentSrc):Tr(t)||Sr(t),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=a,n.setAttribute=r,Object.defineProperty(n,"src",i),n.resetSourceWatch_&&n.resetSourceWatch_()}}}}(this)},a.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){t=[];for(var e=0;e<n.length;e++){var i=n[e];"metadata"===i.kind&&t.push({track:i,storedMode:i.mode})}}var t,n=this.textTracks();function i(){for(var e=0;e<t.length;e++){var r=t[e];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}n.removeEventListener("change",i)}e(),n.addEventListener("change",e),this.on("dispose",(function(){return n.removeEventListener("change",e)})),this.on("webkitbeginfullscreen",(function(){n.removeEventListener("change",e),n.removeEventListener("change",i),n.addEventListener("change",i)})),this.on("webkitendfullscreen",(function(){n.removeEventListener("change",e),n.addEventListener("change",e),n.removeEventListener("change",i)}))},a.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var i=e.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach((function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i)}},a.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},a.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},a.proxyNativeTracksForType_=function(e){var t=this,n=nn[e],i=this.el()[n.getterName],r=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&i&&i.addEventListener){var a={change:function(n){var i={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(i),"text"===e&&t[rn.remoteText.getterName]().trigger(i)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},s=function(){for(var e=[],t=0;t<r.length;t++){for(var n=!1,a=0;a<i.length;a++)if(i[a]===r[t]){n=!0;break}n||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var n=a[e];i.addEventListener(e,n),t.on("dispose",(function(t){return i.removeEventListener(e,n)}))})),this.on("loadstart",s),this.on("dispose",(function(e){return t.off("loadstart",s)}))}},a.proxyNativeTracks_=function(){var e=this;nn.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},a.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),i.disposeMediaElement(e),e=n}else{e=t.createElement("video");var r=Re({},this.options_.tag&&x(this.options_.tag));tt&&!0===this.options_.nativeControlsForTouch||delete r.controls,I(e,d(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&D(e,"preload",this.options_.preload);for(var a=["loop","muted","playsinline","autoplay"],s=0;s<a.length;s++){var o=a[s],l=this.options_[o];void 0!==l&&(l?D(e,o,o):R(e,o),e[o]=l)}return e},a.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(e){this.trigger(e)}),this)}))}},a.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){r(e,"Video is not ready. (Video.js)")}},a.duration=function(){var e=this;return this.el_.duration===1/0&&Ve&&Ke&&0===this.el_.currentTime?(this.on("timeupdate",(function t(){0<e.el_.currentTime&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN):this.el_.duration||NaN},a.width=function(){return this.el_.offsetWidth},a.height=function(){return this.el_.offsetHeight},a.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}},a.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=e.navigator&&e.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},a.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)_t(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},a.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},a.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},a.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},a.reset=function(){i.resetMediaElement(this.el_)},a.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},a.setControls=function(e){this.el_.controls=!!e},a.addTextTrack=function(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):n.prototype.addTextTrack.call(this,e,t,i)},a.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return n.prototype.createRemoteTextTrack.call(this,e);var i=t.createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e.default&&(i.default=e.default),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i},a.addRemoteTextTrack=function(e,t){var i=n.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},a.removeRemoteTextTrack=function(e){if(n.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),i=t.length;i--;)e!==t[i]&&e!==t[i].track||this.el().removeChild(t[i])},a.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),e.performance&&"function"==typeof e.performance.now?t.creationTime=e.performance.now():e.performance&&e.performance.timing&&"number"==typeof e.performance.timing.navigationStart&&(t.creationTime=e.Date.now()-e.performance.timing.navigationStart),t},i}(Mn);Er(Ir,"TEST_VID",(function(){if(v()){var e=t.createElement("video"),n=t.createElement("track");return n.kind="captions",n.srclang="en",n.label="English",e.appendChild(n),e}})),Ir.isSupported=function(){try{Ir.TEST_VID.volume=.5}catch(e){return!1}return!(!Ir.TEST_VID||!Ir.TEST_VID.canPlayType)},Ir.canPlayType=function(e){return Ir.TEST_VID.canPlayType(e)},Ir.canPlaySource=function(e,t){return Ir.canPlayType(e.type)},Ir.canControlVolume=function(){try{var e=Ir.TEST_VID.volume;return Ir.TEST_VID.volume=e/2+.1,e!==Ir.TEST_VID.volume}catch(e){return!1}},Ir.canMuteVolume=function(){try{var e=Ir.TEST_VID.muted;return Ir.TEST_VID.muted=!e,Ir.TEST_VID.muted?D(Ir.TEST_VID,"muted","muted"):R(Ir.TEST_VID,"muted"),e!==Ir.TEST_VID.muted}catch(e){return!1}},Ir.canControlPlaybackRate=function(){if(Ve&&Ke&&Je<58)return!1;try{var e=Ir.TEST_VID.playbackRate;return Ir.TEST_VID.playbackRate=e/2+.1,e!==Ir.TEST_VID.playbackRate}catch(e){return!1}},Ir.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(t.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(t.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(t.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(t.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Ir.supportsNativeTextTracks=function(){return at||rt&&Ke},Ir.supportsNativeVideoTracks=function(){return!(!Ir.TEST_VID||!Ir.TEST_VID.videoTracks)},Ir.supportsNativeAudioTracks=function(){return!(!Ir.TEST_VID||!Ir.TEST_VID.audioTracks)},Ir.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[1];Er(Ir.prototype,e[0],(function(){return Ir[t]()}),!0)})),Ir.prototype.movingMediaElementInDOM=!rt,Ir.prototype.featuresFullscreenResize=!0,Ir.prototype.featuresProgressEvents=!0,Ir.prototype.featuresTimeupdateEvents=!0,Ir.patchCanPlayType=function(){4<=Ye&&!qe&&!Ke&&(Cr=Ir.TEST_VID&&Ir.TEST_VID.constructor.prototype.canPlayType,Ir.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":Cr.call(this,e)})},Ir.unpatchCanPlayType=function(){var e=Ir.TEST_VID.constructor.prototype.canPlayType;return Cr&&(Ir.TEST_VID.constructor.prototype.canPlayType=Cr),e},Ir.patchCanPlayType(),Ir.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Ir.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Ir.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Ir.prototype["set"+De(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){Ir.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","crossOrigin"].forEach((function(e){Ir.prototype["set"+De(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Ir.prototype[e]=function(){return this.el_[e]()}})),Mn.withSourceHandlers(Ir),Ir.nativeSourceHandler={},Ir.nativeSourceHandler.canPlayType=function(e){try{return Ir.TEST_VID.canPlayType(e)}catch(e){return""}},Ir.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Ir.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=Dt(e.src);return Ir.nativeSourceHandler.canPlayType("video/"+n)}return""},Ir.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Ir.nativeSourceHandler.dispose=function(){},Ir.registerSourceHandler(Ir.nativeSourceHandler),Mn.registerTech("Html5",Ir);var xr=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Lr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Dr=["tiny","xsmall","small","medium","large","xlarge","huge"],Rr={};Dr.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Rr[e]="vjs-layout-"+t}));var Pr={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Or=function(i){function s(e,r,o){var l;if(e.id=e.id||r.id||"vjs_video_"+ne(),(r=d(s.getTagSettings(e),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof e.closest){var u=e.closest("[lang]");u&&u.getAttribute&&(r.language=u.getAttribute("lang"))}else for(var c=e;c&&1===c.nodeType;){if(x(c).hasOwnProperty("lang")){r.language=c.getAttribute("lang");break}c=c.parentNode}if((l=i.call(this,null,r,o)||this).boundDocumentFullscreenChange_=pe(Oe(l),l.documentFullscreenChange_),l.boundFullWindowOnEscKey_=pe(Oe(l),l.fullWindowOnEscKey),l.isFullscreen_=!1,l.log=a(l.id_),l.fsApi_=ht,l.isPosterFromTech_=!1,l.queuedCallbacks_=[],l.isReady_=!1,l.hasStarted_=!1,l.userActive_=!1,!l.options_||!l.options_.techOrder||!l.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(l.tag=e,l.tagAttributes=e&&x(e),l.language(l.options_.language),r.languages){var h={};Object.getOwnPropertyNames(r.languages).forEach((function(e){h[e.toLowerCase()]=r.languages[e]})),l.languages_=h}else l.languages_=s.prototype.options_.languages;l.resetCache_(),l.poster_=r.poster||"",l.controls_=!!r.controls,e.controls=!1,e.removeAttribute("controls"),l.changingSrc_=!1,l.playCallbacks_=[],l.playTerminatedQueue_=[],e.hasAttribute("autoplay")?l.autoplay(!0):l.autoplay(l.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach((function(e){if("function"!=typeof l[e])throw new Error('plugin "'+e+'" does not exist')})),l.scrubbing_=!1,l.el_=l.createEl(),Ae(Oe(l),{eventBusKey:"el_"}),l.fsApi_.requestFullscreen&&(ue(t,l.fsApi_.fullscreenchange,l.boundDocumentFullscreenChange_),l.on(l.fsApi_.fullscreenchange,l.boundDocumentFullscreenChange_)),l.fluid_&&l.on("playerreset",l.updateStyleEl_);var f=Re(l.options_);r.plugins&&Object.keys(r.plugins).forEach((function(e){l[e](r.plugins[e])})),l.options_.playerOptions=f,l.middleware_=[],l.initChildren(),l.isAudio("audio"===e.nodeName.toLowerCase()),l.controls()?l.addClass("vjs-controls-enabled"):l.addClass("vjs-controls-disabled"),l.el_.setAttribute("role","region"),l.isAudio()?l.el_.setAttribute("aria-label",l.localize("Audio Player")):l.el_.setAttribute("aria-label",l.localize("Video Player")),l.isAudio()&&l.addClass("vjs-audio"),l.flexNotSupported_()&&l.addClass("vjs-no-flex"),tt&&l.addClass("vjs-touch-enabled"),rt||l.addClass("vjs-workinghover"),s.players[l.id_]=Oe(l);var p=n.split(".")[0];return l.addClass("vjs-v"+p),l.userActive(!0),l.reportUserActivity(),l.one("play",l.listenForUserActivity_),l.on("stageclick",l.handleStageClick_),l.on("keydown",l.handleKeyDown),l.breakpoints(l.options_.breakpoints),l.responsive(l.options_.responsive),l}Be(s,i);var o=s.prototype;return o.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),ce(t,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ce(t,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),s.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function(e){jn[e.id()]=null}(this),an.names.forEach((function(t){var n=e[an[t].getterName]();n&&n.off&&n.off()})),i.prototype.dispose.call(this)},o.createEl=function(){var n,r=this.tag,a=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player"),s="video-js"===this.tag.tagName.toLowerCase();a?n=this.el_=r.parentNode:s||(n=this.el_=i.prototype.createEl.call(this,"div"));var o=x(r);if(s){for(n=this.el_=r,r=this.tag=t.createElement("video");n.children.length;)r.appendChild(n.firstChild);E(n,"video-js")||C(n,"video-js"),n.appendChild(r),a=this.playerElIngest_=n,Object.keys(n).forEach((function(e){try{r[e]=n[e]}catch(e){}}))}if(r.setAttribute("tabindex","-1"),o.tabindex="-1",(Qe||Ke&&et)&&(r.setAttribute("role","application"),o.role="application"),r.removeAttribute("width"),r.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach((function(e){s&&"class"===e||n.setAttribute(e,o[e]),s&&r.setAttribute(e,o[e])})),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=n.player=this,this.addClass("vjs-paused"),!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Q("vjs-styles-dimensions");var l=V(".vjs-styles-defaults"),u=V("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var c=r.getElementsByTagName("a"),d=0;d<c.length;d++){var h=c.item(d);C(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!a&&r.parentNode.insertBefore(n,r),S(r,n),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_=n},o.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):r.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},o.width=function(e){return this.dimension("width",e)},o.height=function(e){return this.dimension("height",e)},o.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?r.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_())},o.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Ce(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),function(e,t){Ce(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))}((function(){this.on("playerreset",this.updateStyleEl_)}))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},o.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},o.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},o.updateStyleEl_=function(){if(!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){var t,n,i,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),a=r[1]/r[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,n=void 0!==this.height_?this.height_:t*a,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),$(this.styleEl_,"\n      ."+i+" {\n        width: "+t+"px;\n        height: "+n+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*a+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(0<=s&&(l.width=s),0<=o&&(l.height=o))}},o.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=De(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(Mn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};an.names.forEach((function(e){var t=an[e];a[t.getterName]=n[t.privateName]})),d(a,this.options_[i]),d(a,this.options_[r]),d(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(a.startTime=this.cache_.currentTime);var s=Mn.getTech(e);if(!s)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new s(a),this.tech_.ready(pe(this,this.handleTechReady_),!0),function(e,t){e.forEach((function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return n.addCue(e)}))})),t.textTracks()}(this.textTracksJson_||[],this.tech_),xr.forEach((function(e){n.on(n.tech_,e,n["handleTech"+De(e)+"_"])})),Object.keys(Lr).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Lr[e]+"_"].bind(n),event:t}):n["handleTech"+Lr[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||S(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},o.unloadTech_=function(){var e=this;an.names.forEach((function(t){var n=an[t];e[n.privateName]=e[n.getterName]()})),this.textTracksJson_=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track}));return Array.prototype.map.call(t,(function(e){var t=Tt(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(Tt))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},o.tech=function(e){return void 0===e&&r.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},o.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},o.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},o.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},o.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},o.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,i=function(){var e=t.muted();function n(){t.muted(e)}t.muted(!0),t.playTerminatedQueue_.push(n);var i=t.play();if(bt(i))return i.catch(n)};if("any"===e&&!0!==this.muted()?bt(n=this.play())&&(n=n.catch(i)):n="muted"===e&&!0!==this.muted()?i():this.play(),bt(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(n){t.trigger({type:"autoplay-failure",autoplay:e})}))}},o.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var a=i[r];if(a.type&&a.src&&a.src===t)return a.type}return Vn(t)}(this,t)),this.cache_.source=Re({},e,{src:t,type:n});for(var i=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),r=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var l=x(a[o]);r.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},o.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(this.lastSource_&&(this.lastSource_.tech===r||this.lastSource_.player===i)||(n=function(){})),n(r),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var n=t.techGet("currentSrc");t.lastSource_.tech=n,t.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},o.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},o.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},o.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},o.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},o.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},o.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},o.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},o.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},o.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},o.handleTechFirstPlay_=function(){this.options_.starttime&&(r.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},o.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},o.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},o.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},o.handleTechClick_=function(e){W(e)&&this.controls_&&(this.paused()?_t(this.play()):this.pause())},o.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},o.handleTechTap_=function(){this.userActive(!this.userActive())},o.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},o.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},o.handleTechTouchEnd_=function(e){e.preventDefault()},o.handleStageClick_=function(){this.reportUserActivity()},o.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},o.documentFullscreenChange_=function(e){var n=e.target.player;if(!n||n===this){var i=this.el(),r=t[this.fsApi_.fullscreenElement]===i;!r&&i.matches?r=i.matches(":"+this.fsApi_.fullscreen):!r&&i.msMatchesSelector&&(r=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}},o.handleTechFullscreenChange_=function(e,t){t&&(t.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(t.isFullscreen))},o.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},o.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},o.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},o.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},o.handleTechError_=function(){var e=this.tech_.error();this.error(e)},o.handleTechTextData_=function(e,t){var n=null;1<arguments.length&&(n=t),this.trigger("textdata",n)},o.getCache=function(){return this.cache_},o.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},o.techCall_=function(e,t){this.ready((function(){if(e in Hn)return function(e,t,n,i){return t[n](e.reduce(zn(n),i))}(this.middleware_,this.tech_,e,t);if(e in Wn)return Fn(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw r(e),e}}),!0)},o.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Gn)return function(e,t,n){return e.reduceRight(zn(n),t[n]())}(this.middleware_,this.tech_,e);if(e in Wn)return Fn(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(o){if(void 0===this.tech_[e])throw r("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",o),o;if("TypeError"===o.name)throw r("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",o),this.tech_.isReady_=!1,o;throw r(o),o}}},o.play=function(){var t=this,n=this.options_.Promise||e.Promise;return n?new n((function(e){t.play_(e)})):this.play_()},o.play_=function(e){var t=this;void 0===e&&(e=_t),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!at&&!rt||this.load());var i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},o.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},o.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},o.pause=function(){this.techCall_("pause")},o.paused=function(){return!1!==this.techGet_("paused")},o.played=function(){return this.techGet_("played")||ut(0,0)},o.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},o.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.applyInitTime_),void this.one("canplay",this.applyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},o.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},o.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},o.remainingTime=function(){return this.duration()-this.currentTime()},o.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},o.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=ut(0,0)),e},o.bufferedPercent=function(){return ct(this.buffered(),this.duration())},o.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return t<n&&(n=t),n},o.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},o.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},o.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},o.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},o.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},o.isFullscreen=function(e){if(void 0===e)return this.isFullscreen_;var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()},o.requestFullscreen=function(t){var n=this.options_.Promise||e.Promise;if(n){var i=this;return new n((function(e,n){function r(){i.off("fullscreenerror",s),i.off("fullscreenchange",a)}function a(){r(),e()}function s(e,t){r(),n(t)}i.one("fullscreenchange",a),i.one("fullscreenerror",s);var o=i.requestFullscreenHelper_(t);if(o)return o.then(r,r),o}))}return this.requestFullscreenHelper_()},o.requestFullscreenHelper_=function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then((function(){return n.isFullscreen(!0)}),(function(){return n.isFullscreen(!1)})),i}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},o.exitFullscreen=function(){var t=this.options_.Promise||e.Promise;if(t){var n=this;return new t((function(e,t){function i(){n.off("fullscreenerror",a),n.off("fullscreenchange",r)}function r(){i(),e()}function a(e,n){i(),t(n)}n.one("fullscreenchange",r),n.one("fullscreenerror",a);var s=n.exitFullscreenHelper_();if(s)return s.then(i,i),s}))}return this.exitFullscreenHelper_()},o.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var n=t[this.fsApi_.exitFullscreen]();return n&&n.then((function(){return e.isFullscreen(!1)})),n}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},o.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=t.documentElement.style.overflow,ue(t,"keydown",this.boundFullWindowOnEscKey_),t.documentElement.style.overflow="hidden",C(t.body,"vjs-full-window"),this.trigger("enterFullWindow")},o.fullWindowOnEscKey=function(e){wt.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},o.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,ce(t,"keydown",this.boundFullWindowOnEscKey_),t.documentElement.style.overflow=this.docOrigOverflow,k(t.body,"vjs-full-window"),this.trigger("exitFullWindow")},o.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},o.requestPictureInPicture=function(){if("pictureInPictureEnabled"in t)return this.techGet_("requestPictureInPicture")},o.exitPictureInPicture=function(){if("pictureInPictureEnabled"in t)return t.exitPictureInPicture()},o.handleKeyDown=function(e){var t=this.options_.userActions;t&&t.hotkeys&&!function(e){var t=e.tagName.toLowerCase();return!!e.isContentEditable||("input"===t?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(t))}(this.el_.ownerDocument.activeElement)&&("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))},o.handleHotkeys=function(e){var n=this.options_.userActions?this.options_.userActions.hotkeys:{},i=n.fullscreenKey,r=n.muteKey,a=void 0===r?function(e){return wt.isEventKey(e,"m")}:r,s=n.playPauseKey,o=void 0===s?function(e){return wt.isEventKey(e,"k")||wt.isEventKey(e,"Space")}:s;if((void 0===i?function(e){return wt.isEventKey(e,"f")}:i).call(this,e)){e.preventDefault(),e.stopPropagation();var l=Pe.getComponent("FullscreenToggle");!1!==t[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),Pe.getComponent("MuteToggle").prototype.handleClick.call(this,e)):o.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Pe.getComponent("PlayToggle").prototype.handleClick.call(this,e))},o.canPlayType=function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var a=i[n],s=Mn.getTech(a);if(s=s||Pe.getComponent(a)){if(s.isSupported()&&(t=s.canPlayType(e)))return t}else r.error('The "'+a+'" tech is undefined. Skipped browser support check for that tech.')}return""},o.selectSource=function(e){function t(e,t,n){var i;return e.some((function(e){return t.some((function(t){if(i=n(e,t))return!0}))})),i}function n(e,t){var n=e[0];if(e[1].canPlaySource(t,a.options_[n.toLowerCase()]))return{source:t,tech:n}}var i,a=this,s=this.options_.techOrder.map((function(e){return[e,Mn.getTech(e)]})).filter((function(e){var t=e[0],n=e[1];return n?n.isSupported():(r.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}));return(this.options_.sourceOrder?t(e,s,(i=n,function(e,t){return i(t,e)})):t(s,e,n))||!1},o.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var n=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):h(t)&&n.push(t)})),t=n}else t="string"==typeof t&&t.trim()?[Zn({src:t})]:h(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Zn(t)]:[];return t}(e);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),function(e,t,n){e.setTimeout((function(){return function e(t,n,i,r,a,s){void 0===t&&(t={}),void 0===n&&(n=[]),void 0===a&&(a=[]),void 0===s&&(s=!1);var o=n[0],l=n.slice(1);if("string"==typeof o)e(t,Un[o],i,r,a,s);else if(o){var u=function(e,t){var n=jn[e.id()],i=null;if(null==n)return i=t(e),jn[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=n[r];a[0]===t&&(i=a[1])}return null===i&&(i=t(e),n.push([t,i])),i}(r,o);if(!u.setSource)return a.push(u),e(t,l,i,r,a,s);u.setSource(d({},t),(function(n,o){if(n)return e(t,l,i,r,a,s);a.push(u),e(o,t.type===o.type?l:Un[o.type],i,r,a,s)}))}else l.length?e(t,l,i,r,a,s):s?i(t,a):e(t,Un["*"],i,r,a,!0)}(t,Un[t.type],n,e)}),1)}(this,n[0],(function(e,i){if(t.middleware_=i,t.cache_.sources=n,t.updateSourceCaches_(e),t.src_(e))return 1<n.length?t.src(n.slice(1)):(t.changingSrc_=!1,t.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void t.triggerReady());!function(e,t){e.forEach((function(e){return e.setTech&&e.setTech(t)}))}(i,t.tech_)}))):this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},o.src_=function(e){var t=this,n=this.selectSource([e]);return!n||(function(e,t){return De(e)===De(t)}(n.tech,this.techName_)?this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready((function(){t.changingSrc_=!1}))),!1)},o.load=function(){this.techCall_("load")},o.reset=function(){var t=this,n=this.options_.Promise||e.Promise;this.paused()||!n?this.doReset_():_t(this.play().then((function(){return t.doReset_()})))},o.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Ce(this)&&this.trigger("playerreset")},o.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},o.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},o.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},o.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},o.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},o.currentSource=function(){return this.cache_.source||{}},o.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},o.currentType=function(){return this.currentSource()&&this.currentSource().type||""},o.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},o.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},o.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},o.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},o.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},o.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},o.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},o.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},o.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&4===e.code){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",(function(){this.off(["click","touchstart"],t)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new vt(e),this.addClass("vjs-error"),r.error("(CODE:"+this.error_.code+" "+vt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},o.reportUserActivity=function(e){this.userActivity_=!0},o.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},o.listenForUserActivity_=function(){function e(e){r(),this.clearInterval(t)}var t,n,i,r=pe(this,this.reportUserActivity);this.on("mousedown",(function(){r(),this.clearInterval(t),t=this.setInterval(r,250)})),this.on("mousemove",(function(e){e.screenX===n&&e.screenY===i||(n=e.screenX,i=e.screenY,r())})),this.on("mouseup",e),this.on("mouseleave",e);var a,s=this.getChild("controlBar");!s||rt||Ve||(s.on("mouseenter",(function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0})),s.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",r),this.on("keyup",r),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},o.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},o.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},o.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},o.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},o.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},o.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t=t||e,this.tech_)return this.tech_.removeRemoteTextTrack(t)},o.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},o.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},o.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},o.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},o.languages=function(){return Re(s.prototype.options_.languages,this.languages_)},o.toJSON=function(){var e=Re(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=Re(i)).player=void 0,e.tracks[n]=i}return e},o.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var i=new Et(this,t);return this.addChild(i),i.on("dispose",(function(){n.removeChild(i)})),i.open(),i},o.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Dr.length;n++){var i=Dr[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(Rr[e]),this.addClass(Rr[i]),this.breakpoint_=i;break}}},o.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},o.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=d({},Pr,e),this.updateCurrentBreakpoint_()),d(this.breakpoints_)},o.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},o.currentBreakpoint=function(){return this.breakpoint_},o.currentBreakpointClass=function(){return Rr[this.breakpoint_]||""},o.loadMedia=function(e,t){var n=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Re(e);var i=this.cache_.media,r=i.poster,a=i.src,s=i.textTracks;!i.artwork&&r&&(this.cache_.media.artwork=[{src:r,type:Vn(r)}]),a&&this.src(a),r&&this.poster(r),Array.isArray(s)&&s.forEach((function(e){return n.addRemoteTextTrack(e,!1)})),this.ready(t)}},o.getMedia=function(){if(this.cache_.media)return Re(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Vn(t.poster)}]),t},s.getTagSettings=function(e){var t={sources:[],tracks:[]},n=x(e),i=n["data-setup"];if(E(e,"vjs-fill")&&(n.fill=!0),E(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var a=function(e,t){var n,i=null;try{n=JSON.parse(e,void 0)}catch(e){i=e}return[i,n]}(i||"{}"),s=a[0],o=a[1];s&&r.error(s),d(n,o)}if(d(t,n),e.hasChildNodes())for(var l=e.childNodes,u=0,c=l.length;u<c;u++){var h=l[u],f=h.nodeName.toLowerCase();"source"===f?t.sources.push(x(h)):"track"===f&&t.tracks.push(x(h))}return t},o.flexNotSupported_=function(){var e=t.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},s}(Pe);an.names.forEach((function(e){var t=an[e];Or.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Or.prototype.crossorigin=Or.prototype.crossOrigin,Or.players={};var Nr=e.navigator;Or.prototype.options_={techOrder:Mn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Nr&&(Nr.languages&&Nr.languages[0]||Nr.userLanguage||Nr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Or.prototype[e]=function(){return this.techGet_(e)}})),xr.forEach((function(e){Or.prototype["handleTech"+De(e)+"_"]=function(){return this.trigger(e)}})),Pe.registerComponent("Player",Or);var Mr=s((function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,i)}e.exports=t}));function Ur(e){return Yr.hasOwnProperty(e)}function jr(e){return Ur(e)?Yr[e]:void 0}function Br(e,t){e[Vr]=e[Vr]||{},e[Vr][t]=!0}function Fr(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)}function Gr(e,t){return t.prototype.name=e,function(){Fr(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Wr(t,[this].concat(i));return this[e]=function(){return a},Fr(this,a.getEventHash()),a}}var Hr=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}},Wr=s((function(e){function t(n,i,r){return e.exports=t=Hr()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Mr(r,n.prototype),r},t.apply(null,arguments)}e.exports=t})),zr="plugin",Vr="activePlugins_",Yr={},Zr=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,Ae(this),delete this.trigger,xe(this,this.constructor.defaultState),Br(t,this.name),this.dispose=pe(this,this.dispose),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),de(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Vr][e]=!1,this.player=this.state=null,t[e]=Gr(e,Yr[e])},e.isBasic=function(t){var n="string"==typeof t?jr(t):t;return"function"==typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Ur(t))r.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Or.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return Yr[t]=n,t!==zr&&(Or.prototype[t]=e.isBasic(n)?function(e,t){function n(){Fr(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Br(this,e),Fr(this,{name:e,plugin:t,instance:n}),n}return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):Gr(t,n)),n},e.deregisterPlugin=function(e){if(e===zr)throw new Error("Cannot de-register base plugin.");Ur(e)&&(delete Yr[e],delete Or.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(Yr)),e.forEach((function(e){var n=jr(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){var t=jr(e);return t&&t.VERSION||""},e}();Zr.getPlugin=jr,Zr.BASE_PLUGIN_NAME=zr,Zr.registerPlugin(zr,Zr),Or.prototype.usingPlugin=function(e){return!!this[Vr]&&!0===this[Vr][e]},Or.prototype.hasPlugin=function(e){return!!Ur(e)};var qr=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Xr(e,t,n){var i=Xr.getPlayer(e);if(i)return t&&r.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&i.ready(n),i;var a="string"==typeof e?V("#"+qr(e)):e;if(!y(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");a.ownerDocument.defaultView&&a.ownerDocument.body.contains(a)||r.warn("The element supplied is not included in the DOM"),t=t||{},Xr.hooks("beforesetup").forEach((function(e){var n=e(a,Re(t));h(n)&&!Array.isArray(n)?t=Re(t,n):r.error("please return an object in beforesetup hooks")}));var s=Pe.getComponent("Player");return i=new s(a,t,n),Xr.hooks("setup").forEach((function(e){return e(i)})),i}if(Xr.hooks_={},Xr.hooks=function(e,t){return Xr.hooks_[e]=Xr.hooks_[e]||[],t&&(Xr.hooks_[e]=Xr.hooks_[e].concat(t)),Xr.hooks_[e]},Xr.hook=function(e,t){Xr.hooks(e,t)},Xr.hookOnce=function(e,t){Xr.hooks(e,[].concat(t).map((function(t){return function n(){return Xr.removeHook(e,n),t.apply(void 0,arguments)}})))},Xr.removeHook=function(e,t){var n=Xr.hooks(e).indexOf(t);return!(n<=-1||(Xr.hooks_[e]=Xr.hooks_[e].slice(),Xr.hooks_[e].splice(n,1),0))},!0!==e.VIDEOJS_NO_DYNAMIC_STYLE&&v()){var Kr=V(".vjs-styles-defaults");if(!Kr){Kr=Q("vjs-styles-defaults");var Jr=V("head");Jr&&Jr.insertBefore(Kr,Jr.firstChild),$(Kr,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}K(1,Xr),Xr.VERSION=n,Xr.options=Or.prototype.options_,Xr.getPlayers=function(){return Or.players},Xr.getPlayer=function(e){var t,n=Or.players;if("string"==typeof e){var i=qr(e),r=n[i];if(r)return r;t=V("#"+i)}else t=e;if(y(t)){var a=t.player,s=t.playerId;if(a||n[s])return a||n[s]}},Xr.getAllPlayers=function(){return Object.keys(Or.players).map((function(e){return Or.players[e]})).filter(Boolean)},Xr.players=Or.players,Xr.getComponent=Pe.getComponent,Xr.registerComponent=function(e,t){Mn.isTech(t)&&r.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Pe.registerComponent.call(Pe,e,t)},Xr.getTech=Mn.getTech,Xr.registerTech=Mn.registerTech,Xr.use=function(e,t){Un[e]=Un[e]||[],Un[e].push(t)},Object.defineProperty(Xr,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Xr.middleware,"TERMINATOR",{value:Bn,writeable:!1,enumerable:!0}),Xr.browser=st,Xr.TOUCH_ENABLED=tt,Xr.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},i={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}(n,e),e&&(n.super_=e),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},Xr.mergeOptions=Re,Xr.bind=pe,Xr.registerPlugin=Zr.registerPlugin,Xr.deregisterPlugin=Zr.deregisterPlugin,Xr.plugin=function(e,t){return r.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Zr.registerPlugin(e,t)},Xr.getPlugins=Zr.getPlugins,Xr.getPlugin=Zr.getPlugin,Xr.getPluginVersion=Zr.getPluginVersion,Xr.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),(Xr.options.languages=Re(Xr.options.languages,((n={})[e]=t,n)))[e]},Xr.log=r,Xr.createLogger=a,Xr.createTimeRange=Xr.createTimeRanges=ut,Xr.formatTime=ui,Xr.setFormatTime=function(e){li=e},Xr.resetFormatTime=function(){li=oi},Xr.parseUrl=xt,Xr.isCrossOrigin=Rt,Xr.EventTarget=me,Xr.on=ue,Xr.one=he,Xr.off=ce,Xr.trigger=de,Xr.xhr=Vt,Xr.TextTrack=Qt,Xr.AudioTrack=$t,Xr.VideoTrack=en,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){Xr[e]=function(){return r.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Z[e].apply(null,arguments)}})),Xr.computedStyle=p,Xr.dom=Z,Xr.url=Wt,Xr.defineLazyProperty=Er;var Qr=s((function(e,t){var n,i,r,a,s;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s}));function $r(){return($r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ea(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function ta(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},r=n.length;r--;)""!==n[r]&&((t=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),i[t[0]]=t[1]);return i}var na=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},t.trigger=function(e,t){var n,i,r,a=this.listeners[e];if(a)if(2===arguments.length)for(i=a.length,n=0;n<i;++n)a[n].call(this,t);else for(r=Array.prototype.slice.call(arguments,1),i=a.length,n=0;n<i;++n)a[n].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),ia=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return ea(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(na),ra=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}ea(t,e);var n=t.prototype;return n.push=function(e){var t,n,i=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var i=n(e);return i===e?t:t.concat([i])}),[e]).forEach((function(e){for(var r=0;r<i.customParsers.length;r++)if(i.customParsers[r].call(i,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void i.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void i.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void i.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var a=ta(t[1]);if(a.URI&&(n.uri=a.URI),a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=s[0],l=s[1];n.byterange={},o&&(n.byterange.length=parseInt(o,10)),l&&(n.byterange.offset=parseInt(l,10))}}i.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=ta(t[1]),n.attributes.RESOLUTION){var u=n.attributes.RESOLUTION.split("x"),c={};u[0]&&(c.width=parseInt(u[0],10)),u[1]&&(c.height=parseInt(u[1],10)),n.attributes.RESOLUTION=c}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}i.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=ta(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))i.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))i.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=ta(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void i.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=ta(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return(n={type:"tag",tagType:"cue-out-cont"}).data=t[1]?t[1]:"",void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return(n={type:"tag",tagType:"cue-out"}).data=t[1]?t[1]:"",void i.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return(n={type:"tag",tagType:"cue-in"}).data=t[1]?t[1]:"",void i.trigger("data",n);i.trigger("data",{type:"tag",data:e.slice(4)})}}}else i.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:a}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(na),aa=function(t){function n(){var n;(n=t.call(this)||this).lineStream=new ia,n.parseStream=new ra,n.lineStream.pipe(n.parseStream);var i,r,a=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),s=[],o={},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;return n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},n.parseStream.on("data",(function(t){var n,c;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((o.byterange=e).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((o.byterange=e).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(o.duration=t.duration),0===t.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:function(t){for(var n=e.atob(t||""),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(t.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(r.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,u=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){i={},t.uri&&(i.uri=t.uri),t.byterange&&(i.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes?(o.attributes||(o.attributes={}),$r(o.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var e=this.manifest.mediaGroups[t.attributes.TYPE];e[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},n=e[t.attributes["GROUP-ID"]],c.autoselect=!!(c={default:/yes/i.test(t.attributes.DEFAULT)}).default||/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(c.language=t.attributes.LANGUAGE),t.attributes.URI&&(c.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(c.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(c.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(c.forced=/yes/i.test(t.attributes.FORCED)),n[t.attributes.NAME]=c}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),o.dateTimeString=t.dateTimeString,o.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=t.data},"cue-out-cont":function(){o.cueOutCont=t.data},"cue-in":function(){o.cueIn=t.data}}[t.tagType]||function(){}).call(a)},uri:function(){o.uri=t.uri,s.push(o),!this.manifest.targetDuration||"duration"in o||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),r&&(o.key=r),o.timeline=u,i&&(o.map=i),o={}},comment:function(){},custom:function(){t.segment?(o.custom=o.custom||{},o.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(a)})),n}ea(n,t);var i=n.prototype;return i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push("\n")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},n}(na);function sa(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var oa,la=sa(Qr),ua=sa(e),ca=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=la.buildAbsoluteURL(ua.location&&ua.location.href||"",e)),la.buildAbsoluteURL(e,t))},da=(oa=e)&&"object"==typeof oa&&"default"in oa?oa.default:oa,ha=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,fa=new RegExp("[\\-\\.0-9"+ha.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),pa=new RegExp("^"+ha.source+fa.source+"*(?::"+ha.source+fa.source+"*)?$");function ga(){}function ma(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function va(e,t,n,i,r,a){for(var s,o=++t,l=0;;){var u=e.charAt(o);switch(u){case"=":if(1===l)s=e.slice(t,o),l=3;else{if(2!==l)throw new Error("attribute equal must after attrName");l=3}break;case"'":case'"':if(3===l||1===l){if(1===l&&(a.warning('attribute value must after "="'),s=e.slice(t,o)),!(0<(o=e.indexOf(u,t=o+1))))throw new Error("attribute value no end '"+u+"' match");c=e.slice(t,o).replace(/&#?\w+;/g,r),n.add(s,c,t-1),l=5}else{if(4!=l)throw new Error('attribute value must after "="');c=e.slice(t,o).replace(/&#?\w+;/g,r),n.add(s,c,t),a.warning('attribute "'+s+'" missed start quot('+u+")!!"),t=o+1,l=5}break;case"/":switch(l){case 0:n.setTagName(e.slice(t,o));case 5:case 6:case 7:l=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==l&&n.setTagName(e.slice(t,o)),o;case">":switch(l){case 0:n.setTagName(e.slice(t,o));case 5:case 6:case 7:break;case 4:case 1:"/"===(c=e.slice(t,o)).slice(-1)&&(n.closed=!0,c=c.slice(0,-1));case 2:2===l&&(c=s),4==l?(a.warning('attribute "'+c+'" missed quot(")!!'),n.add(s,c.replace(/&#?\w+;/g,r),t)):("http://www.w3.org/1999/xhtml"===i[""]&&c.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),n.add(c,c,t));break;case 3:throw new Error("attribute value missed!!")}return o;case"\x80":u=" ";default:if(u<=" ")switch(l){case 0:n.setTagName(e.slice(t,o)),l=6;break;case 1:s=e.slice(t,o),l=2;break;case 4:var c=e.slice(t,o).replace(/&#?\w+;/g,r);a.warning('attribute "'+c+'" missed quot(")!!'),n.add(s,c,t);case 5:l=6}else switch(l){case 2:"http://www.w3.org/1999/xhtml"===i[""]&&s.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),n.add(s,s,t),t=o,l=1;break;case 5:a.warning('attribute space is required"'+s+'"!!');case 6:l=1,t=o;break;case 3:l=4,t=o;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function ya(e,t,n){for(var i=e.tagName,r=null,a=e.length;a--;){var s=e[a],o=s.qName,l=s.value;if(0<(h=o.indexOf(":")))var u=s.prefix=o.slice(0,h),c=o.slice(h+1),d="xmlns"===u&&c;else u=null,d="xmlns"===(c=o)&&"";s.localName=c,!1!==d&&(null==r&&(r={},Ta(n,n={})),n[d]=r[d]=l,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(d,l))}for(a=e.length;a--;)(u=(s=e[a]).prefix)&&("xml"===u&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(s.uri=n[u||""]));var h;c=0<(h=i.indexOf(":"))?(u=e.prefix=i.slice(0,h),e.localName=i.slice(h+1)):(u=null,e.localName=i);var f=e.uri=n[u||""];if(t.startElement(f,c,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=r,!0;if(t.endElement(f,c,i),r)for(u in r)t.endPrefixMapping(u)}function ba(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),s=e.substring(t+1,a);if(/[&<]/.test(s))return/^script$/i.test(n)||(s=s.replace(/&#?\w+;/g,i)),r.characters(s,0,s.length),a}return t+1}function _a(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function Ta(e,t){for(var n in e)t[n]=e[n]}function wa(e,t,n,i){switch(e.charAt(t+2)){case"-":return"-"!==e.charAt(t+3)?-1:t<(r=e.indexOf("--\x3e",t+4))?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1);default:if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var a=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(e);n=r.exec(e);)if(i.push(n),n[1])return i}(e,t),s=a.length;if(1<s&&/!doctype/i.test(a[0][0])){var o=a[1][0],l=3<s&&/^public$/i.test(a[2][0])&&a[3][0],u=4<s&&a[4][0],c=a[s-1];return n.startDTD(o,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),c.index+c[0].length}}return-1}function Sa(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(n.processingInstruction(r[1],r[2]),i+2):-1}return-1}function Ea(e){}function Ca(e,t){return e.__proto__=t,e}ga.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),Ta(t,t={}),function(e,t,n,i,r){function a(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(65535<e){var t=55296+((e-=65536)>>10);return String.fromCharCode(t,56320+(1023&e))}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function s(t){if(p<t){var n=e.substring(p,t).replace(/&#?\w+;/g,a);d&&o(p),i.characters(n,0,t-p),p=t}}function o(t,n){for(;u<=t&&(n=c.exec(e));)u=(l=n.index)+n[0].length,d.lineNumber++;d.columnNumber=t-l+1}for(var l=0,u=0,c=/.*(?:\r\n?|\n)|.*$/g,d=i.locator,h=[{currentNSMap:t}],f={},p=0;;){try{var g=e.indexOf("<",p);if(g<0){if(!e.substr(p).match(/^\s*$/)){var m=i.doc,v=m.createTextNode(e.substr(p));m.appendChild(v),i.currentElement=v}return}switch(p<g&&s(g),e.charAt(g+1)){case"/":var y=e.indexOf(">",g+3),b=e.substring(g+2,y),_=h.pop();y<0?(b=e.substring(g+2).replace(/[\s<].*/,""),r.error("end tag name: "+b+" is not complete:"+_.tagName),y=g+1+b.length):b.match(/\s</)&&(b=b.replace(/[\s<].*/,""),r.error("end tag name: "+b+" maybe not complete"),y=g+1+b.length);var T=_.localNSMap,w=_.tagName==b;if(w||_.tagName&&_.tagName.toLowerCase()==b.toLowerCase()){if(i.endElement(_.uri,_.localName,b),T)for(var S in T)i.endPrefixMapping(S);w||r.fatalError("end tag name: "+b+" is not match the current start tagName:"+_.tagName)}else h.push(_);y++;break;case"?":d&&o(g),y=Sa(e,g,i);break;case"!":d&&o(g),y=wa(e,g,i,r);break;default:d&&o(g);var E=new Ea,C=h[h.length-1].currentNSMap,k=(y=va(e,g,E,C,a,r),E.length);if(!E.closed&&_a(e,y,E.tagName,f)&&(E.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),d&&k){for(var A=ma(d,{}),I=0;I<k;I++){var x=E[I];o(x.offset),x.locator=ma(d,{})}i.locator=A,ya(E,i,C)&&h.push(E),i.locator=d}else ya(E,i,C)&&h.push(E);"http://www.w3.org/1999/xhtml"!==E.uri||E.closed?y++:y=ba(e,y,E.tagName,a,i)}}catch(t){r.error("element parse error: "+t),y=-1}p<y?p=y:s(Math.max(g,p)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},Ea.prototype={setTagName:function(e){if(!pa.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!pa.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},Ca({},Ca.prototype)instanceof Ca||(Ca=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n});var ka=ga;function Aa(e,t){for(var n in e)t[n]=e[n]}function Ia(e,t){var n=e.prototype;if(Object.create){var i=Object.create(t.prototype);n.__proto__=i}if(!(n instanceof t)){var r=function(){};r.prototype=t.prototype,Aa(n,r=new r),e.prototype=n=r}n.constructor!=e&&(n.constructor=e)}var xa={},La=xa.ELEMENT_NODE=1,Da=xa.ATTRIBUTE_NODE=2,Ra=xa.TEXT_NODE=3,Pa=xa.CDATA_SECTION_NODE=4,Oa=xa.ENTITY_REFERENCE_NODE=5,Na=xa.ENTITY_NODE=6,Ma=xa.PROCESSING_INSTRUCTION_NODE=7,Ua=xa.COMMENT_NODE=8,ja=xa.DOCUMENT_NODE=9,Ba=xa.DOCUMENT_TYPE_NODE=10,Fa=xa.DOCUMENT_FRAGMENT_NODE=11,Ga=xa.NOTATION_NODE=12,Ha={},Wa={},za=(Ha.INDEX_SIZE_ERR=(Wa[1]="Index size error",1),Ha.DOMSTRING_SIZE_ERR=(Wa[2]="DOMString size error",2),Ha.HIERARCHY_REQUEST_ERR=(Wa[3]="Hierarchy request error",3)),Va=(Ha.WRONG_DOCUMENT_ERR=(Wa[4]="Wrong document",4),Ha.INVALID_CHARACTER_ERR=(Wa[5]="Invalid character",5),Ha.NO_DATA_ALLOWED_ERR=(Wa[6]="No data allowed",6),Ha.NO_MODIFICATION_ALLOWED_ERR=(Wa[7]="No modification allowed",7),Ha.NOT_FOUND_ERR=(Wa[8]="Not found",8)),Ya=(Ha.NOT_SUPPORTED_ERR=(Wa[9]="Not supported",9),Ha.INUSE_ATTRIBUTE_ERR=(Wa[10]="Attribute in use",10));function Za(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,Wa[e]),this.message=Wa[e],Error.captureStackTrace&&Error.captureStackTrace(this,Za);return n.code=e,t&&(this.message=this.message+": "+t),n}function qa(){}function Xa(e,t){this._node=e,this._refresh=t,Ka(this)}function Ka(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);ks(e,"length",n.length),Aa(n,e),e._inc=t}}function Ja(){}function Qa(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function $a(e,t,n,i){if(i?t[Qa(t,i)]=n:t[t.length++]=n,e){var r=(n.ownerElement=e).ownerDocument;r&&(i&&ss(r,e,i),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(r,e,n))}}function es(e,t,n){var i=Qa(t,n);if(!(0<=i))throw Za(Va,new Error(e.tagName+"@"+n));for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,e){var a=e.ownerDocument;a&&(ss(a,e,n),n.ownerElement=null)}}function ts(e){if(this._features={},e)for(var t in e)this._features=e[t]}function ns(){}function is(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function rs(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(rs(e,t))return!0}while(e=e.nextSibling)}function as(){}function ss(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function os(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,a=0;r;)r=(i[a++]=r).nextSibling;i.length=a}}}function ls(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,os(e.ownerDocument,e),t}function us(e,t,n){var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===Fa){var r=t.firstChild;if(null==r)return t;var a=t.lastChild}else r=a=t;var s=n?n.previousSibling:e.lastChild;for(r.previousSibling=s,a.nextSibling=n,s?s.nextSibling=r:e.firstChild=r,null==n?e.lastChild=a:n.previousSibling=a;r.parentNode=e,r!==a&&(r=r.nextSibling););return os(e.ownerDocument||e,e),t.nodeType==Fa&&(t.firstChild=t.lastChild=null),t}function cs(){this._nsMap={}}function ds(){}function hs(){}function fs(){}function ps(){}function gs(){}function ms(){}function vs(){}function ys(){}function bs(){}function _s(){}function Ts(){}function ws(){}function Ss(e,t){var n=[],i=9==this.nodeType?this.documentElement:this,r=i.prefix,a=i.namespaceURI;if(a&&null==r&&null==(r=i.lookupPrefix(a)))var s=[{namespace:a,prefix:null}];return Cs(this,n,e,t,s),n.join("")}function Es(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(!i&&!r)return!1;if("xml"===i&&"http://www.w3.org/XML/1998/namespace"===r||"http://www.w3.org/2000/xmlns/"==r)return!1;for(var a=n.length;a--;){var s=n[a];if(s.prefix==i)return s.namespace!=r}return!0}function Cs(e,t,n,i,r){if(i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case La:r=r||[];var a=e.attributes,s=a.length,o=e.firstChild,l=e.tagName;n="http://www.w3.org/1999/xhtml"===e.namespaceURI||n,t.push("<",l);for(var u=0;u<s;u++)"xmlns"==(c=a.item(u)).prefix?r.push({prefix:c.localName,namespace:c.value}):"xmlns"==c.nodeName&&r.push({prefix:"",namespace:c.value});for(u=0;u<s;u++){var c;if(Es(c=a.item(u),0,r)){var d=c.prefix||"",h=c.namespaceURI,f=d?" xmlns:"+d:" xmlns";t.push(f,'="',h,'"'),r.push({prefix:d,namespace:h})}Cs(c,t,n,i,r)}if(Es(e,0,r)&&(t.push(f=(d=e.prefix||"")?" xmlns:"+d:" xmlns",'="',h=e.namespaceURI,'"'),r.push({prefix:d,namespace:h})),o||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),n&&/^script$/i.test(l))for(;o;)o.data?t.push(o.data):Cs(o,t,n,i,r),o=o.nextSibling;else for(;o;)Cs(o,t,n,i,r),o=o.nextSibling;t.push("</",l,">")}else t.push("/>");return;case ja:case Fa:for(o=e.firstChild;o;)Cs(o,t,n,i,r),o=o.nextSibling;return;case Da:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,is),'"');case Ra:return t.push(e.data.replace(/[<&]/g,is));case Pa:return t.push("<![CDATA[",e.data,"]]>");case Ua:return t.push("\x3c!--",e.data,"--\x3e");case Ba:var p=e.publicId,g=e.systemId;if(t.push("<!DOCTYPE ",e.name),p)t.push(' PUBLIC "',p),g&&"."!=g&&t.push('" "',g),t.push('">');else if(g&&"."!=g)t.push(' SYSTEM "',g,'">');else{var m=e.internalSubset;m&&t.push(" [",m,"]"),t.push(">")}return;case Ma:return t.push("<?",e.target," ",e.data,"?>");case Oa:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ks(e,t,n){e[t]=n}Ha.INVALID_STATE_ERR=(Wa[11]="Invalid state",11),Ha.SYNTAX_ERR=(Wa[12]="Syntax error",12),Ha.INVALID_MODIFICATION_ERR=(Wa[13]="Invalid modification",13),Ha.NAMESPACE_ERR=(Wa[14]="Invalid namespace",14),Ha.INVALID_ACCESS_ERR=(Wa[15]="Invalid access",15),Za.prototype=Error.prototype,Aa(Ha,Za),qa.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)Cs(this[i],n,e,t);return n.join("")}},Xa.prototype.item=function(e){return Ka(this),this[e]},Ia(Xa,qa),Ja.prototype={length:0,item:qa.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Za(Ya);var n=this.getNamedItem(e.nodeName);return $a(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new Za(Ya);return t=this.getNamedItemNS(e.namespaceURI,e.localName),$a(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return es(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return es(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},ts.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var i=new as;if(i.implementation=this,i.childNodes=new qa,(i.doctype=n)&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new ms;return i.name=e,i.nodeName=e,i.publicId=t,i.systemId=n,i}},ns.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return us(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return ls(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,i){var r=new n.constructor;for(var a in n){var s=n[a];"object"!=typeof s&&s!=r[a]&&(r[a]=s)}switch(n.childNodes&&(r.childNodes=new qa),r.ownerDocument=t,r.nodeType){case La:var o=n.attributes,l=r.attributes=new Ja,u=o.length;l._ownerElement=r;for(var c=0;c<u;c++)r.setAttributeNode(e(t,o.item(c),!0));break;case Da:i=!0}if(i)for(var d=n.firstChild;d;)r.appendChild(e(t,d,i)),d=d.nextSibling;return r}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==Ra&&e.nodeType==Ra?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(n[i]==e)return i;t=t.nodeType==Da?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==Da?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},Aa(xa,ns),Aa(xa,ns.prototype),as.prototype={nodeName:"#document",nodeType:ja,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType!=Fa)return null==this.documentElement&&e.nodeType==La&&(this.documentElement=e),us(this,e,t),e.ownerDocument=this,e;for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),ls(this,e)},importNode:function(e,t){return function e(t,n,i){var r;switch(n.nodeType){case La:(r=n.cloneNode(!1)).ownerDocument=t;case Fa:break;case Da:i=!0}if((r=r||n.cloneNode(!1)).ownerDocument=t,r.parentNode=null,i)for(var a=n.firstChild;a;)r.appendChild(e(t,a,i)),a=a.nextSibling;return r}(this,e,t)},getElementById:function(e){var t=null;return rs(this.documentElement,(function(n){if(n.nodeType==La&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new cs;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new qa,(t.attributes=new Ja)._ownerElement=t},createDocumentFragment:function(){var e=new _s;return e.ownerDocument=this,e.childNodes=new qa,e},createTextNode:function(e){var t=new fs;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new ps;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new gs;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Ts;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new ds;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new bs;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new cs,i=t.split(":"),r=n.attributes=new Ja;return n.childNodes=new qa,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n},createAttributeNS:function(e,t){var n=new ds,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},Ia(as,ns),as.prototype.getElementsByTagName=(cs.prototype={nodeType:La,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===Fa?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var i=e.lastChild;n.removeChild(t),i=e.lastChild}return i=e.lastChild,t.parentNode=e,t.previousSibling=i,t.nextSibling=null,i?i.nextSibling=t:e.firstChild=t,e.lastChild=t,os(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new Xa(this,(function(t){var n=[];return rs(t,(function(i){i===t||i.nodeType!=La||"*"!==e&&i.tagName!=e||n.push(i)})),n}))},getElementsByTagNameNS:function(e,t){return new Xa(this,(function(n){var i=[];return rs(n,(function(r){r===n||r.nodeType!==La||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)})),i}))}}).getElementsByTagName,as.prototype.getElementsByTagNameNS=cs.prototype.getElementsByTagNameNS,Ia(cs,ns),ds.prototype.nodeType=Da,Ia(ds,ns),hs.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){this.nodeValue=this.data=e=this.data+e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(Wa[za])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},Ia(hs,ns),fs.prototype={nodeName:"#text",nodeType:Ra,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},Ia(fs,hs),ps.prototype={nodeName:"#comment",nodeType:Ua},Ia(ps,hs),gs.prototype={nodeName:"#cdata-section",nodeType:Pa},Ia(gs,hs),ms.prototype.nodeType=Ba,Ia(ms,ns),vs.prototype.nodeType=Ga,Ia(vs,ns),ys.prototype.nodeType=Na,Ia(ys,ns),bs.prototype.nodeType=Oa,Ia(bs,ns),_s.prototype.nodeName="#document-fragment",_s.prototype.nodeType=Fa,Ia(_s,ns),Ts.prototype.nodeType=Ma,Ia(Ts,ns),ws.prototype.serializeToString=function(e,t,n){return Ss.call(e,t,n)},ns.prototype.toString=Ss;try{Object.defineProperty&&(Object.defineProperty(Xa.prototype,"length",{get:function(){return Ka(this),this.$$length}}),Object.defineProperty(ns.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case La:case Fa:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case La:case Fa:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ks=function(e,t,n){e["$$"+t]=n})}catch(Fc){}function As(e){return!!e&&"object"==typeof e}function Is(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return Object.keys(t).forEach((function(n){e[n]=Array.isArray(e[n])&&Array.isArray(t[n])?e[n].concat(t[n]):As(e[n])&&As(t[n])?Is(e[n],t[n]):t[n]})),e}),{})}function xs(e){return e.reduce((function(e,t){return e.concat(t)}),[])}function Ls(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}function Ds(e){var t=e.baseUrl,n=e.source,i=void 0===n?"":n,r=e.range,a=void 0===r?"":r,s=e.indexRange,o=void 0===s?"":s,l={uri:i,resolvedUri:ca((void 0===t?"":t)||"",i)};if(a||o){var u=(a||o).split("-"),c=parseInt(u[0],10),d=parseInt(u[1],10);l.byterange={length:d-c+1,offset:c}}return l}function Rs(e){var t=e.type,n=void 0===t?"static":t,i=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.sourceDuration,o=mo[n](e),l=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(o.start,o.end).map(function(e){return function(t,n){var i=e.duration,r=e.timescale,a=e.startNumber;return{number:(void 0===a?1:a)+t,duration:i/(void 0===r?1:r),timeline:e.periodIndex,time:n*i}}}(e));if("static"===n){var u=l.length-1;l[u].duration=s-i/a*u}return l}function Ps(e){var t=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,r=e.sourceDuration,a=e.timescale,s=void 0===a?1:a,o=e.indexRange,l=void 0===o?"":o,u=e.duration;if(!t)throw new Error(po);var c=Ds({baseUrl:t,source:i.sourceURL,range:i.range}),d=Ds({baseUrl:t,source:t,indexRange:l});if(d.map=c,u){var h=Rs(e);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else r&&(d.duration=r/s,d.timeline=0);return d.number=0,[d]}function Os(e,t,n){for(var i=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,a=e.timeline||0,s=e.sidx.byterange,o=s.offset+s.length,l=t.timescale,u=t.references.filter((function(e){return 1!==e.referenceType})),c=[],d=o+t.firstOffset,h=0;h<u.length;h++){var f=t.references[h],p=f.referencedSize,g=Ps({baseUrl:n,timescale:l,timeline:a,periodIndex:a,duration:f.subsegmentDuration,sourceDuration:r,indexRange:d+"-"+(d+p-1)})[0];i&&(g.map=i),c.push(g),d+=p}return e.segments=c,e}function Ns(e){return function(e){return Object.keys(e).map((function(t){return e[t]}))}(e.reduce((function(e,t){var n,i=t.attributes.id+(t.attributes.lang||"");return e[i]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[i].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[i].attributes.contentProtection=t.attributes.contentProtection)):e[i]=t,e}),{})).map((function(e){return e.discontinuityStarts=function(e,t){return e.reduce((function(e,t,n){return t.discontinuity&&e.push(n),e}),[])}(e.segments),e}))}function Ms(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e){var i=e[n];if(i.sidx){var r=i.sidx.uri+"-"+(s=i.sidx.byterange).offset+"-"+(s.offset+s.length-1),a=t[r]&&t[r].sidx;i.sidx&&a&&Os(i,a,i.sidx.resolvedUri)}}var s;return e}function Us(e){var t,n=e.attributes,i=e.segments,r=e.sidx,a={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),r&&(a.sidx=r),a}function js(e,t){for(var n,i,r,a,s,o=e.type,l=void 0===o?"static":o,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=e.media,h=void 0===d?"":d,f=e.sourceDuration,p=e.timescale,g=void 0===p?1:p,m=e.startNumber,v=void 0===m?1:m,y=e.periodIndex,b=[],_=-1,T=0;T<t.length;T++){var w=t[T],S=w.d,E=w.r||0,C=w.t||0;_<0&&(_=C),C&&_<C&&(_=C);var k=void 0;if(E<0){var A=T+1;k=A===t.length?"dynamic"===l&&0<c&&0<h.indexOf("$Number$")?(i=(n=e).NOW,r=n.timescale,a=n.start,s=n.minimumUpdatePeriod,Math.ceil((((i+n.clientOffset)/1e3+(void 0===s?0:s)-(n.availabilityStartTime+(void 0===a?0:a)))*(void 0===r?1:r)-_)/S)):(f*g-_)/S:(t[A].t-_)/S}else k=E+1;for(var I=v+b.length+k,x=v+b.length;x<I;)b.push({number:x,duration:S/g,time:_,timeline:y}),_+=S,x++}return b}function Bs(e,t){return e.replace(vo,function(e){return function(t,n,i,r){if("$$"===t)return"$";if(void 0===e[n])return t;var a=""+e[n];return"RepresentationID"===n||(r=i?parseInt(r,10):1)<=a.length?a:new Array(r-a.length+1).join("0")+a}}(t))}function Fs(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,r=void 0===i?{sourceURL:"",range:""}:i,a=Ds({baseUrl:e.baseUrl,source:Bs(r.sourceURL,n),range:r.range});return function(e,t){return e.duration||t?e.duration?Rs(e):js(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t).map((function(t){n.Number=t.number,n.Time=t.time;var i=Bs(e.media||"",n);return{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:ca(e.baseUrl||"",i),map:a,number:t.number}}))}function Gs(e,t){var n=e.duration,i=e.segmentUrls,r=void 0===i?[]:i;if(!n&&!t||n&&t)throw new Error(go);var a,s=r.map((function(t){return function(e,t){var n=e.baseUrl,i=e.initialization,r=void 0===i?{}:i,a=Ds({baseUrl:n,source:r.sourceURL,range:r.range}),s=Ds({baseUrl:n,source:t.media,range:t.mediaRange});return s.map=a,s}(e,t)}));return n&&(a=Rs(e)),t&&(a=js(e,t)),a.map((function(e,t){if(s[t]){var n=s[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}})).filter((function(e){return e}))}function Hs(e){var t,n,i=e.attributes,r=e.segmentInfo;r.template?(n=Fs,t=Is(i,r.template)):r.base?(n=Ps,t=Is(i,r.base)):r.list&&(n=Gs,t=Is(i,r.list));var a={attributes:i};if(!n)return a;var s=n(t,r.timeline);if(t.duration){var o=t.timescale;t.duration=t.duration/(void 0===o?1:o)}else t.duration=s.length?s.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):0;return a.attributes=t,a.segments=s,r.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a}function Ws(e,t){return Ls(e.childNodes).filter((function(e){return e.tagName===t}))}function zs(e){return e.textContent.trim()}function Vs(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),i=n[1],r=n[2],a=n[3],s=n[4],o=n[5];return 31536e3*parseFloat(n[0]||0)+2592e3*parseFloat(i||0)+86400*parseFloat(r||0)+3600*parseFloat(a||0)+60*parseFloat(s||0)+parseFloat(o||0)}function Ys(e){return e&&e.attributes?Ls(e.attributes).reduce((function(e,t){return e[t.name]=(yo[t.name]||yo.DEFAULT)(t.value),e}),{}):{}}function Zs(e,t){return t.length?xs(e.map((function(e){return t.map((function(t){return ca(e,zs(t))}))}))):e}function qs(e){var t=Ws(e,"SegmentTemplate")[0],n=Ws(e,"SegmentList")[0],i=n&&Ws(n,"SegmentURL").map((function(e){return Is({tag:"SegmentURL"},Ys(e))})),r=Ws(e,"SegmentBase")[0],a=n||t,s=a&&Ws(a,"SegmentTimeline")[0],o=n||r||t,l=o&&Ws(o,"Initialization")[0],u=t&&Ys(t);u&&l?u.initialization=l&&Ys(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,timeline:s&&Ws(s,"S").map((function(e){return Ys(e)})),list:n&&Is(Ys(n),{segmentUrls:i,initialization:Ys(l)}),base:r&&Is(Ys(r),{initialization:Ys(l)})};return Object.keys(c).forEach((function(e){c[e]||delete c[e]})),c}function Xs(e){if(""===e)throw new Error(ho);var t=(new uo).parseFromString(e,"application/xml"),n=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!n||n&&0<n.getElementsByTagName("parsererror").length)throw new Error(fo);return n}function Ks(t,n){return void 0===n&&(n={}),function(e,t){var n;if(void 0===t&&(t={}),!e.length)return{};var i=e[0].attributes,r=i.sourceDuration,a=i.type,s=void 0===a?"static":a,o=i.suggestedPresentationDelay,l=i.minimumUpdatePeriod,u=void 0===l?0:l,c=Ns(e.filter((function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType}))).map(Us),d=Ns(e.filter((function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType}))),h=e.filter((function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType})),f={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:r,playlists:Ms(c,t),minimumUpdatePeriod:1e3*u};return"dynamic"===s&&(f.suggestedPresentationDelay=o),d.length&&(f.mediaGroups.AUDIO.audio=function(e,t){var n;void 0===t&&(t={});var i=e.reduce((function(e,i){var r=i.attributes.role&&i.attributes.role.value||"",a=i.attributes.lang||"",s="main";return a&&(s=i.attributes.lang+(r?" ("+r+")":"")),e[s]&&e[s].playlists[0].attributes.BANDWIDTH>i.attributes.bandwidth||(e[s]={language:a,autoselect:!0,default:"main"===r,playlists:Ms([function(e){var t,n=e.attributes,i=e.segments,r=e.sidx,a={attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),r&&(a.sidx=r),a}(i)],t),uri:""},void 0===n&&"main"===r&&((n=i).default=!0)),e}),{});return n||(i[Object.keys(i)[0]].default=!0),i}(d,t)),h.length&&(f.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var i=n.attributes.lang||"text";return e[i]||(e[i]={language:i,default:!1,autoselect:!1,playlists:Ms([function(e){var t,n=e.attributes,i=e.segments;return void 0===i&&(i=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration),{attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1}}(n)],t),uri:""}),e}),{})}(h,t)),f}(function(e){return e.map(Hs)}(function(t,n){void 0===n&&(n={});var i=n,r=i.manifestUri,a=void 0===r?"":r,s=i.NOW,o=void 0===s?Date.now():s,l=i.clientOffset,u=void 0===l?0:l,c=Ws(t,"Period");if(!c.length)throw new Error(co);var d=Ys(t),h=Zs([a],Ws(t,"BaseURL"));return d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=o,d.clientOffset=u,xs(c.map(function(t,n){return function(i,r){var a=Zs(n,Ws(i,"BaseURL")),s=Ys(i),o=parseInt(s.id,10),l=e.isNaN(o)?r:o,u=Is(t,{periodIndex:l}),c=Ws(i,"AdaptationSet"),d=qs(i);return xs(c.map(function(e,t,n){return function(i){var r=Ys(i),a=Zs(t,Ws(i,"BaseURL")),s={role:Ys(Ws(i,"Role")[0])},o=Is(e,r,s),l=function(e){return e.reduce((function(e,t){var n=Ys(t),i=bo[n.schemeIdUri];if(i){e[i]={attributes:n};var r=Ws(t,"cenc:pssh")[0];if(r){var a=zs(r),s=a&&function(e){for(var t=function(e){return da.atob?da.atob(e):Buffer.from(e,"base64").toString("binary")}(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(a);e[i].pssh=s}}return e}),{})}(Ws(i,"ContentProtection"));Object.keys(l).length&&(o=Is(o,{contentProtection:l}));var u=qs(i),c=Ws(i,"Representation"),d=Is(n,u);return xs(c.map(function(e,t,n){return function(i){var r=Ws(i,"BaseURL"),a=Zs(t,r),s=Is(e,Ys(i)),o=qs(i);return a.map((function(e){return{segmentInfo:Is(n,o),attributes:Is(s,{baseUrl:e})}}))}}(o,a,d)))}}(u,a,d)))}}(d,h)))}(Xs(t),n)),n.sidxMapping)}function Js(e){return new Date(1e3*e-20828448e5)}function Qs(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}function $s(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])}var eo,to,no,io,ro,ao,so,oo=ts,lo=ws,uo=s((function(e,t){function n(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function r(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function s(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var n=this.options,r=new o,a=n.domBuilder||new i,s=n.errorHandler,l=n.locator,u=n.xmlns||{},c={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return l&&a.setDocumentLocator(l),r.errorHandler=function(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},a=e instanceof Function;function s(t){var i=e[t];!i&&a&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+function(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,a,l),r.domBuilder=n.domBuilder||a,/\/x?html?$/.test(t)&&(c.nbsp="\xa0",c.copy="\xa9",u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,u,c):r.errorHandler.error("invalid doc source"),a.doc},i.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var a=this.doc,o=a.createElementNS(e,n||t),l=i.length;s(this,o),this.currentElement=o,this.locator&&r(this.locator,o);for(var u=0;u<l;u++){e=i.getURI(u);var c=i.getValue(u),d=(n=i.getQName(u),a.createAttributeNS(e,n));this.locator&&r(i.getLocator(u),d),d.value=d.nodeValue=c,o.setAttributeNode(d)}},endElement:function(e,t,n){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&r(this.locator,n),s(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=a.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&r(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=a.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&r(this.locator,i),s(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var a=i.createDocumentType(e,t,n);this.locator&&r(this.locator,a),s(this,a)}},warning:function(e){},error:function(e){},fatalError:function(e){throw e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){i.prototype[e]=function(){return null}}));var o=ka,l=t.DOMImplementation=oo;t.XMLSerializer=lo,t.DOMParser=n})).DOMParser,co="INVALID_NUMBER_OF_PERIOD",ho="DASH_EMPTY_MANIFEST",fo="DASH_INVALID_XML",po="NO_BASE_URL",go="SEGMENT_TIME_UNSPECIFIED",mo={static:function(e){var t=e.timescale;return{start:0,end:Math.ceil(e.sourceDuration/(e.duration/(void 0===t?1:t)))}},dynamic:function(e){var t=e.timescale,n=void 0===t?1:t,i=e.duration,r=e.start,a=e.minimumUpdatePeriod,s=e.timeShiftBufferDepth,o=void 0===s?1/0:s,l=(e.NOW+e.clientOffset)/1e3,u=e.availabilityStartTime+(void 0===r?0:r),c=Math.ceil((l+(void 0===a?0:a)-u)*n/i),d=Math.floor((l-u-o)*n/i),h=Math.floor((l-u)*n/i);return{start:Math.max(0,d),end:Math.min(c,h)}}},vo=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,yo={mediaPresentationDuration:function(e){return Vs(e)},availabilityStartTime:function(e){return function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),Date.parse(e)}(e)/1e3},minimumUpdatePeriod:function(e){return Vs(e)},suggestedPresentationDelay:function(e){return Vs(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Vs(e)},start:function(e){return Vs(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Vs(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},bo={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},_o=function(e){return e>>>0},To=_o,wo={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:eo(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,i,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(i=6,r=0;r<o;r++)n=a.getUint16(i),i+=2,s.sps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;for(t=e[i],i++,r=0;r<t;r++)n=a.getUint16(i),i+=2,s.pps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;return s},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:$s(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;i<e.byteLength;)n.compatibleBrands.push($s(e.subarray(i,i+4))),i+=4;return n},dinf:function(e){return{boxes:eo(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:eo(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:$s(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=n)if(n=i.getUint32(t),t+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31)}return r}(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(r.creationTime=Js(n.getUint32(i+=4)),r.modificationTime=Js(n.getUint32(i+=8)),r.timescale=n.getUint32(i+=4),i+=8):(r.creationTime=Js(n.getUint32(i)),r.modificationTime=Js(n.getUint32(i+=4)),r.timescale=n.getUint32(i+=4),i+=4),r.duration=n.getUint32(i),t=n.getUint16(i+=4),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:eo(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:eo(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(n.streamDescriptor=eo(e.subarray(28))[0]),n},moof:function(e){return{boxes:eo(e)}},moov:function(e){return{boxes:eo(e)}},mvex:function(e){return{boxes:eo(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(i.creationTime=Js(t.getUint32(n+=4)),i.modificationTime=Js(t.getUint32(n+=8)),i.timescale=t.getUint32(n+=4),n+=8):(i.creationTime=Js(t.getUint32(n)),i.modificationTime=Js(t.getUint32(n+=4)),i.timescale=t.getUint32(n+=4),n+=4),i.duration=t.getUint32(n),i.rate=t.getUint16(n+=4)+t.getUint16(n+2)/16,i.volume=t.getUint8(n+=4)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.nextTrackId=t.getUint32(n+=24),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},r=n.getUint16(22);for(t=24;r;t+=12,r--)i.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return i},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:eo(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.chunkOffsets.push(n.getUint32(t));return i},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;i;t+=12,i--)r.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:eo(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)i.entries.push(n.getUint32(t));return i},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return i},styp:function(e){return wo.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:To(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=To(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],s=8&i.flags[2],o=16&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(i.defaultSampleDuration=n.getUint32(t),t+=4),o&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),u&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(i.creationTime=Js(t.getUint32(n+=4)),i.modificationTime=Js(t.getUint32(n+=8)),i.trackId=t.getUint32(n+=4),n+=4,n+=8):(i.creationTime=Js(t.getUint32(n)),i.modificationTime=Js(t.getUint32(n+=4)),i.trackId=t.getUint32(n+=4),n+=4,n+=4),i.duration=t.getUint32(n),n+=4,i.layer=t.getUint16(n+=8),i.alternateGroup=t.getUint16(n+=2),i.volume=t.getUint8(n+=2)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),i.width=t.getUint16(n+=36)+t.getUint16(n+2)/16,i.height=t.getUint16(n+=4)+t.getUint16(n+2)/16,i},traf:function(e){return{boxes:eo(e)}},trak:function(e){return{boxes:eo(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=i.getUint32(4),d=8;for(r&&(n.dataOffset=i.getInt32(d),d+=4),a&&c&&(t={flags:Qs(e.subarray(d,d+4))},d+=4,s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),u&&(t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),l&&(t.flags=Qs(e.subarray(d,d+4)),d+=4),u&&(t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},So={inspect:eo=function(e){for(var t,n,i,r,a,s=0,o=[],l=new ArrayBuffer(e.length),u=new Uint8Array(l),c=0;c<e.length;++c)u[c]=e[c];for(t=new DataView(l);s<e.byteLength;)n=t.getUint32(s),i=$s(e.subarray(s+4,s+8)),(a=(wo[i]||function(e){return{data:e}})(e.subarray(s+8,r=1<n?s+n:e.byteLength))).size=n,a.type=i,o.push(a),s=r;return o},textify:to=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map((function(e,i){return n+e.type+"\n"+Object.keys(e).filter((function(e){return"type"!==e&&"boxes"!==e})).map((function(t){var i=n+"  "+t+": ",r=e[t];if(r instanceof Uint8Array||r instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map((function(e){return" "+("00"+e.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);return a?1===a.length?i+"<"+a.join("").slice(1)+">":i+"<\n"+a.map((function(e){return n+"  "+e})).join("\n")+"\n"+n+"  >":i+"<>"}return i+JSON.stringify(r,null,2).split("\n").map((function(e,t){return 0===t?e:n+"  "+e})).join("\n")})).join("\n")+(e.boxes?"\n"+to(e.boxes,t+1):"")})).join("\n")},parseType:$s,findBox:function e(t,n){var i,r,a,s,o,l=[];if(!n.length)return null;for(i=0;i<t.byteLength;)r=To(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),a=$s(t.subarray(i+4,i+8)),s=1<r?i+r:t.byteLength,a===n[0]&&(1===n.length?l.push(t.subarray(i+8,s)):(o=e(t.subarray(i+8,s),n.slice(1))).length&&(l=l.concat(o))),i=s;return l},parseTraf:wo.traf,parseTfdt:wo.tfdt,parseHdlr:wo.hdlr,parseTfhd:wo.tfhd,parseTrun:wo.trun,parseSidx:wo.sidx},Eo=_o,Co=function(e){return("00"+e.toString(16)).slice(-2)};function ko(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),-1<i)},this.trigger=function(t){var n,i,r,a;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){e={}}}}no=function(e){return So.findBox(e,["moov","trak"]).reduce((function(e,t){var n,i,r,a;return(n=So.findBox(t,["tkhd"])[0])?(r=Eo(n[i=0===n[0]?12:20]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]),(a=So.findBox(t,["mdia","mdhd"])[0])?(e[r]=Eo(a[i=0===a[0]?12:20]<<24|a[i+1]<<16|a[i+2]<<8|a[i+3]),e):null):null}),{})},io=function(e,t){var n,i,r;return n=So.findBox(t,["moof","traf"]),i=[].concat.apply([],n.map((function(t){return So.findBox(t,["tfhd"]).map((function(n){var i,r;return i=Eo(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),r=e[i]||9e4,(So.findBox(t,["tfdt"]).map((function(e){var t,n;return t=e[0],n=Eo(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=Eo(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n}))[0]||1/0)/r}))}))),r=Math.min.apply(null,i),isFinite(r)?r:0},ro=function(e,t){var n,i=So.findBox(t,["moof","traf"]),r=0,a=0;if(i&&i.length)for(var s=So.parseTraf(i[0]),o=0;o<s.boxes.length;o++)"tfhd"===s.boxes[o].type?n=s.boxes[o].trackId:"tfdt"===s.boxes[o].type?r=s.boxes[o].baseMediaDecodeTime:"trun"===s.boxes[o].type&&s.boxes[o].samples.length&&(a=s.boxes[o].samples[0].compositionTimeOffset||0);return(r+a)/(e[n]||9e4)},ao=function(e){var t=So.findBox(e,["moov","trak"]),n=[];return t.forEach((function(e){var t=So.findBox(e,["mdia","hdlr"]),i=So.findBox(e,["tkhd"]);t.forEach((function(e,t){var r,a,s=So.parseType(e.subarray(8,12)),o=i[t];"vide"===s&&(a=0===(r=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0)?r.getUint32(12):r.getUint32(20),n.push(a))}))})),n},so=function(e){var t=So.findBox(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,i,r={},a=So.findBox(e,["tkhd"])[0];a&&(i=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),r.id=t.getUint32(0===i?12:20));var s=So.findBox(e,["mdia","hdlr"])[0];if(s){var o=So.parseType(s.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=So.findBox(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);r.codec=So.parseType(u.subarray(4,8));var c,d=So.findBox(u,[r.codec])[0];d&&(/^[a-z]vc[1-9]$/i.test(r.codec)?(c=d.subarray(78),"avcC"===So.parseType(c.subarray(4,8))&&11<c.length?(r.codec+=".",r.codec+=Co(c[9]),r.codec+=Co(c[10]),r.codec+=Co(c[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)&&(c=d.subarray(28),"esds"===So.parseType(c.subarray(4,8))&&20<c.length&&0!==c[19]?(r.codec+="."+Co(c[19]),r.codec+="."+Co(c[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"))}var h=So.findBox(e,["mdia","mdhd"])[0];if(h&&a){var f=0===i?12:20;r.timescale=Eo(h[f]<<24|h[1+f]<<16|h[2+f]<<8|h[3+f])}n.push(r)})),n};var Ao={findBox:So.findBox,parseType:So.parseType,timescale:no,startTime:io,compositionStartTime:ro,videoTrackIds:ao,tracks:so};function Io(){Io.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Oo(0,0),new Oo(0,1),new Oo(1,0),new Oo(1,1)],this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this)}ko.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},ko.prototype.push=function(e){this.trigger("data",e)},ko.prototype.flush=function(e){this.trigger("done",e)},ko.prototype.partialFlush=function(e){this.trigger("partialdone",e)},ko.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},ko.prototype.reset=function(e){this.trigger("reset",e)};var xo=ko;function Lo(e){return null===e?"":(e=Ro[e]||e,String.fromCharCode(e))}function Do(){for(var e=[],t=15;t--;)e.push("");return e}(Io.prototype=new xo).push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,r=i=0}return n}(e.escapedRBSP)).payloadType&&(n=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],s.push(a));return s}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Io.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},Io.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2&&this.dispatchCea608Packet(e)}),this),this.captionPackets_.length=0),this.flushCCStreams(e)},Io.prototype.flush=function(){return this.flushStream("flush")},Io.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Io.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},Io.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Io.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Io.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},Io.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var Ro={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Po=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Oo=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Do();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Do();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Do()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=Lo((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Lo((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=Po.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=Lo(i),a+=Lo(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};function No(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null}function Mo(e,t){var n=Ao.findBox(e,["moof","traf"]),i=Ao.findBox(e,["mdat"]),r={},a=[];return i.forEach((function(e,t){a.push({mdat:e,traf:n[t]})})),a.forEach((function(e){var n,i=e.mdat,a=e.traf,s=Ao.findBox(a,["tfhd"]),o=So.parseTfhd(s[0]),l=o.trackId,u=Ao.findBox(a,["tfdt"]),c=0<u.length?So.parseTfdt(u[0]).baseMediaDecodeTime:0,d=Ao.findBox(a,["trun"]);t===l&&0<d.length&&(n=function(e,t,n){var i,r,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),c=No(r,t);i={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:Uo(u),trackId:n},c?(i.pts=c.pts,i.dts=c.dts,s=c):(i.pts=s.pts,i.dts=s.dts),l.push(i)}return l}(i,function(e,t,n){var i=t,r=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,s=n.trackId,o=[];return e.forEach((function(e){var t=So.parseTrun(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=i+e.compositionTimeOffset,i+=e.duration})),o=o.concat(t)})),o}(d,c,o),l),r[l]||(r[l]=[]),r[l]=r[l].concat(n))})),r}Oo.prototype=new xo,Oo.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(e){return""}})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Oo.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Do(),this.nonDisplayed_=Do(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Oo.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Oo.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},Oo.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},Oo.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},Oo.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},Oo.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},Oo.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},Oo.prototype.isNormalChar=function(e){return 32<=e&&e<=127},Oo.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Do(),this.displayed_=Do()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Oo.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Oo.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Oo.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=n+=t},Oo.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=t},Oo.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Oo.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=t};var Uo=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},jo=Io,Bo=function(){var e,t,n,i,r,a,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new jo,s=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&i===t[n])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))i=s[n=a[0]];else if(null===n||!i)return t.push(e),null;for(;0<t.length;){var l=t.shift();this.parse(l,a,s)}return null!==(o=function(e,t,n){return null===t?null:{seiNals:Mo(e,t)[t],timescale:n}}(e,n,i))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],i=n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()};function Fo(e){var t=31&e[1];return(t<<=8)|e[2]}function Go(e){return!!(64&e[1])}function Ho(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function Wo(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function zo(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}new xo;var Vo=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Yo={isLikelyAacData:function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+n:10+n},parseAdtsSize:function(e,t){return 6144&e[t+3]|e[t+4]<<3|(224&e[t+5])>>5},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return Vo[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=zo(e.subarray(10,14)));do{if((n=zo(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t,n){var i,r="";for(i=0;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(i,0,r)))break;var a=i.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(s*=4)+(3&a[7])}}t+=10,t+=n}while(t<e.byteLength);return null}},Zo=function(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e},qo={};function Xo(e,t,n){for(var i,r,a,s,o=0,l=Qo,u=!1;l<=e.byteLength;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o++,l++;else{switch(i=e.subarray(o,l),qo.ts.parseType(i,t.pid)){case"pes":r=qo.ts.parsePesType(i,t.table),a=qo.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=qo.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),u=!0)}if(u)break;o+=Qo,l+=Qo}for(o=(l=e.byteLength)-Qo,u=!1;0<=o;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o--,l--;else{switch(i=e.subarray(o,l),qo.ts.parseType(i,t.pid)){case"pes":r=qo.ts.parsePesType(i,t.table),a=qo.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=qo.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),u=!0)}if(u)break;o-=Qo,l-=Qo}}function Ko(e,t,n){for(var i,r,a,s,o,l,u,c=0,d=Qo,h=!1,f={data:[],size:0};d<e.byteLength;)if(71!==e[c]||71!==e[d])c++,d++;else{switch(i=e.subarray(c,d),qo.ts.parseType(i,t.pid)){case"pes":if(r=qo.ts.parsePesType(i,t.table),a=qo.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!h&&(s=qo.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0),!n.firstKeyFrame)){if(a&&0!==f.size){for(o=new Uint8Array(f.size),l=0;f.data.length;)u=f.data.shift(),o.set(u,l),l+=u.byteLength;if(qo.ts.videoPacketContainsKeyFrame(o)){var p=qo.ts.parsePesTime(o);p&&(n.firstKeyFrame=p,n.firstKeyFrame.type="video")}f.size=0}f.data.push(i),f.size+=i.byteLength}}if(h&&n.firstKeyFrame)break;c+=Qo,d+=Qo}for(c=(d=e.byteLength)-Qo,h=!1;0<=c;)if(71!==e[c]||71!==e[d])c--,d--;else{switch(i=e.subarray(c,d),qo.ts.parseType(i,t.pid)){case"pes":r=qo.ts.parsePesType(i,t.table),a=qo.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(s=qo.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0)}if(h)break;c-=Qo,d-=Qo}}qo.ts={parseType:function(e,t){var n=Fo(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Go(e),n=4+Ho(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Go(e),i=4+Ho(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var s=i+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:Go,parsePesType:function(e,t){switch(t[Fo(e)]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Go(e))return null;var t=4+Ho(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+Ho(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===Wo(31&n[r+3])&&(a=!0);1!==n[++i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Wo(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===Wo(31&n[r+3])&&(a=!0),a}},qo.aac=Yo;var Jo=9e4,Qo=188;function $o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var el=null,tl=(nl.prototype.decrypt=function(e,t,n,i,r,a){var s=this._key[1],o=e^s[0],l=i^s[1],u=n^s[2],c=t^s[3],d=void 0,h=void 0,f=void 0,p=s.length/4-2,g=void 0,m=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],T=v[3],w=v[4];for(g=0;g<p;g++)d=y[o>>>24]^b[l>>16&255]^_[u>>8&255]^T[255&c]^s[m],h=y[l>>>24]^b[u>>16&255]^_[c>>8&255]^T[255&o]^s[m+1],f=y[u>>>24]^b[c>>16&255]^_[o>>8&255]^T[255&l]^s[m+2],c=y[c>>>24]^b[o>>16&255]^_[l>>8&255]^T[255&u]^s[m+3],m+=4,o=d,l=h,u=f;for(g=0;g<4;g++)r[(3&-g)+a]=w[o>>>24]<<24^w[l>>16&255]<<16^w[u>>8&255]<<8^w[255&c]^s[m++],d=o,o=l,l=u,u=c,c=d},nl);function nl(e){$o(this,nl),el=el||function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],a=void 0,s=void 0,o=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,f=void 0,p=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!i[s];s^=c||1,o=u[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,p=16843009*l[d=l[c=l[r[i[s]=h]=s]]]^65537*d^257*c^16843008*s,f=257*l[h]^16843008*h,a=0;a<4;a++)t[a][s]=f=f<<24^f>>>8,n[a][h]=p=p<<24^p>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e}(),this._tables=[[el[0][0].slice(),el[0][1].slice(),el[0][2].slice(),el[0][3].slice(),el[0][4].slice()],[el[1][0].slice(),el[1][1].slice(),el[1][2].slice(),el[1][3].slice(),el[1][4].slice()]];var t=void 0,n=void 0,i=void 0,r=void 0,a=void 0,s=this._tables[0][4],o=this._tables[1],l=e.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=e.slice(0),this._key=[r,a=[]],t=l;t<4*l+28;t++)i=r[t-1],(t%l==0||8===l&&t%l==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],t%l==0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),r[t]=r[t-l]^i;for(n=0;t;n++,t--)i=r[3&n?t:t-4],a[n]=t<=4||n<4?i:o[0][s[i>>>24]]^o[1][s[i>>16&255]]^o[2][s[i>>8&255]]^o[3][s[255&i]]}var il=(rl.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},rl.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},rl.prototype.trigger=function(e,t){var n=this.listeners[e];if(n)if(2===arguments.length)for(var i=n.length,r=0;r<i;++r)n[r].call(this,t);else for(var a=Array.prototype.slice.call(arguments,1),s=n.length,o=0;o<s;++o)n[o].apply(this,a)},rl.prototype.dispose=function(){this.listeners={}},rl.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}))},rl);function rl(){$o(this,rl),this.listeners={}}var al,sl=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ol,al=il),ol.prototype.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},ol.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},ol);function ol(){$o(this,ol);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,al.call(this,il));return e.jobs=[],e.delay=1,e.timeout_=null,e}function ll(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}function ul(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new tl(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),o=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0;for(o=n[0],l=n[1],u=n[2],c=n[3],g=0;g<i.length;g+=4)d=ll(i[g]),h=ll(i[g+1]),f=ll(i[g+2]),p=ll(i[g+3]),r.decrypt(d,h,f,p,s,g),s[g]=ll(s[g]^o),s[g+1]=ll(s[g+1]^l),s[g+2]=ll(s[g+2]^u),s[g+3]=ll(s[g+3]^c),o=d,l=h,u=f,c=p;return a}var cl=(dl.prototype.decryptChunk_=function(e,t,n,i){return function(){var r=ul(e,t,n);i.set(r,e.byteOffset)}},function(e,t,n){n&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e,n)}(dl,0,[{key:"STEP",get:function(){return 32e3}}]),dl);function dl(e,t,n,i){$o(this,dl);var r=dl.STEP,a=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new sl,this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s)),o=r;o<a.length;o+=r)n=new Uint32Array([ll(a[o-4]),ll(a[o-3]),ll(a[o-2]),ll(a[o-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s));this.asyncStream_.push((function(){i(null,function(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}(s))}))}function hl(t,n){return/^[a-z]+:/i.test(n)?n:(/\/\//i.test(t)||(t=Qr.buildAbsoluteURL(e.location.href,t)),Qr.buildAbsoluteURL(t,n))}function fl(e,t,n){return e&&n.responseURL&&t!==n.responseURL?n.responseURL:t}function pl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var gl=function(e,t,n){return t&&ml(e.prototype,t),n&&ml(e,n),e};function ml(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function yl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function bl(e,t){["AUDIO","SUBTITLES"].forEach((function(n){for(var i in e.mediaGroups[n])for(var r in e.mediaGroups[n][i])t(e.mediaGroups[n][i][r],n,i,r)}))}function _l(e,t){var n=kl(e,{}),i=n.playlists[t.id];if(!i)return null;if(i.segments&&t.segments&&i.segments.length===t.segments.length&&i.endList===t.endList&&i.mediaSequence===t.mediaSequence)return null;var r=kl(i,t);i.segments&&(r.segments=function(e,t,n){var i=t.slice();n=n||0;for(var r=Math.min(e.length,t.length+n),a=n;a<r;a++)i[a-n]=kl(e[a],i[a-n]);return i}(i.segments,t.segments,t.mediaSequence-i.mediaSequence)),r.segments.forEach((function(e){!function(e,t){e.resolvedUri||(e.resolvedUri=hl(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=hl(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=hl(t,e.map.uri))}(e,r.resolvedUri)}));for(var a=0;a<n.playlists.length;a++)n.playlists[a].id===t.id&&(n.playlists[a]=r);return n.playlists[t.id]=r,n.playlists[t.uri]=r,n}function Tl(e,t){return e+"-"+t}function wl(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];n.resolvedUri=hl(e.uri,n.uri),n.id=Tl(t,n.uri),e.playlists[n.id]=n,(e.playlists[n.uri]=n).attributes||(n.attributes={},Al.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}}function Sl(e){bl(e,(function(t){t.uri&&(t.resolvedUri=hl(e.uri,t.uri))}))}function El(e,t){var n=e.segments[e.segments.length-1];return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)}var Cl=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},kl=Xr.mergeOptions,Al=Xr.log,Il=(vl(xl,Xr.EventTarget),gl(xl,[{key:"playlistRequestError",value:function(e,t,n){var i=t.uri,r=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+i+".",responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(t,n,i){var r=this;this.request=null,this.state="HAVE_METADATA";var a=new aa;this.customTagParsers.forEach((function(e){return a.addParser(e)})),this.customTagMappers.forEach((function(e){return a.addTagMapper(e)})),a.push(t.responseText),a.end(),a.manifest.uri=n,a.manifest.id=i,a.manifest.attributes=a.manifest.attributes||{};var s=_l(this.master,a.manifest);this.targetDuration=a.manifest.targetDuration,s?(this.master=s,this.media_=this.master.playlists[i]):this.trigger("playlistunchanged"),this.media().endList||(e.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=e.setTimeout((function(){r.trigger("mediaupdatetimeout")}),El(this.media(),!!s))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.trigger("dispose"),this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),e.clearTimeout(this.finalRenditionTimeout),this.off()}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(t,n){var i=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(e.clearTimeout(this.finalRenditionTimeout),n){var r=t.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=e.setTimeout(this.media.bind(this,t,!1),r)}else{var a=this.state,s=!this.media_||t.id!==this.media_.id;if(this.master.playlists[t.id].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(s&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(s){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},(function(e,n){if(i.request){if(t.resolvedUri=fl(i.handleManifestRedirects,t.resolvedUri,n),e)return i.playlistRequestError(i.request,t,a);i.haveMetadata(n,t.uri,t.id),i.trigger("HAVE_MASTER"===a?"loadedmetadata":"mediachange")}}))}}}},{key:"pause",value:function(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(t){var n=this;e.clearTimeout(this.mediaUpdateTimeout);var i=this.media();t?this.mediaUpdateTimeout=e.setTimeout((function(){return n.load()}),i?i.targetDuration/2*1e3:5e3):this.started?this.trigger(i&&!i.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}},{key:"start",value:function(){var t=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(n,i){if(t.request){if(t.request=null,n)return t.error={status:i.status,message:"HLS playlist request error at URL: "+t.srcUrl+".",responseText:i.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");var r=new aa;if(t.customTagParsers.forEach((function(e){return r.addParser(e)})),t.customTagMappers.forEach((function(e){return r.addTagMapper(e)})),r.push(i.responseText),r.end(),t.state="HAVE_MASTER",t.srcUrl=fl(t.handleManifestRedirects,t.srcUrl,i),r.manifest.uri=t.srcUrl,r.manifest.playlists)return t.master=r.manifest,wl(t.master),Sl(t.master),t.trigger("loadedplaylist"),void(t.request||t.media(r.manifest.playlists[0]));var a=Tl(0,t.srcUrl);return t.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:e.location.href,playlists:[{uri:t.srcUrl,id:a,resolvedUri:t.srcUrl,attributes:{}}]},t.master.playlists[a]=t.master.playlists[0],t.master.playlists[t.srcUrl]=t.master.playlists[0],t.haveMetadata(i,t.srcUrl,a),t.trigger("loadedmetadata")}}))}}]),xl);function xl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};pl(this,xl);var i=yl(this,(xl.__proto__||Object.getPrototypeOf(xl)).call(this)),r=n.withCredentials,a=void 0!==r&&r,s=n.handleManifestRedirects,o=void 0!==s&&s;i.srcUrl=e,i.hls_=t,i.withCredentials=a,i.handleManifestRedirects=o;var l=t.options_;if(i.customTagParsers=l&&l.customTagParsers||[],i.customTagMappers=l&&l.customTagMappers||[],!i.srcUrl)throw new Error("A non-empty playlist URL is required");return i.state="HAVE_NOTHING",i.on("mediaupdatetimeout",(function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:hl(i.master.uri,i.media().uri),withCredentials:i.withCredentials},(function(e,t){if(i.request)return e?i.playlistRequestError(i.request,i.media(),"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri,i.media().id)})))})),i}function Ll(e,t,n){var i,r;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(i=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(void 0!==(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t)).precise?i.result:(r=function(e,t){for(var n=0,i=void 0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?r.result:i.result+n}function Dl(t,n,i){if(!t)return 0;if("number"!=typeof i&&(i=0),void 0===n){if(t.totalDuration)return t.totalDuration;if(!t.endList)return e.Infinity}return Ll(t,n,i)}function Rl(e,t,n){var i=0;if(n<t){var r=[n,t];t=r[0],n=r[1]}if(t<0){for(var a=t;a<Math.min(0,n);a++)i+=e.targetDuration;t=0}for(var s=t;s<n;s++)i+=e.segments[s].duration;return i}function Pl(e,t){if(!e.segments.length)return 0;var n=e.segments.length,i="number"==typeof t?t:(e.segments[n-1].duration||e.targetDuration)+2*e.targetDuration;if(0===i)return n;for(var r=0;n--&&!(i<=(r+=e.segments[n].duration)););return Math.max(0,n)}function Ol(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return Dl(e);if(null===t)return null;t=t||0;var r=n?Pl(e,i):e.segments.length;return Ll(e,e.mediaSequence+r,t)}function Nl(e){return e-Math.floor(e)==0}function Ml(e,t){if(Nl(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,i=1;i<=n;i++){var r=Math.pow(10,i),a=t*r;if(Nl(a)||i===n)return(a+e)/r}}function Ul(e){return e.excludeUntil&&e.excludeUntil>Date.now()}function jl(e){return e.excludeUntil&&e.excludeUntil===1/0}function Bl(e){var t=Ul(e);return!e.disabled&&!t}function Fl(e,t){return t.attributes&&t.attributes[e]}function Gl(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!Bl(e)&&(e.attributes.BANDWIDTH||0)<n})).length}function Hl(){return function e(t,n){t=uu({timeout:45e3},t);var i=e.beforeRequest||Xr.Hls.xhr.beforeRequest;if(i&&"function"==typeof i){var r=i(t);r&&(t=r)}var a=lu(t,(function(e,t){var i=a.response;!e&&i&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=i.byteLength||i.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),t.headers&&(a.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(a.timedout=!0),e||a.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(a&&(i||a.responseText)))),n(e,a)})),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a}}function Wl(e){var t={};return e.byterange&&(t.Range=function(e){return"bytes="+e.offset+"-"+(e.offset+e.length-1)}(e.byterange)),t}function zl(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")}function Vl(e){return 32<=e&&e<126?String.fromCharCode(e):"."}function Yl(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];t[n]=ArrayBuffer.isView(i)?{bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:i})),t}function Zl(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}function ql(e){return e.resolvedUri}function Xl(e){for(var t=Array.prototype.slice.call(e),n="",i=0;i<t.length/16;i++)n+=t.slice(16*i,16*i+16).map(zl).join("")+" "+t.slice(16*i,16*i+16).map(Vl).join("")+"\n";return n}function Kl(e){var t=e.programTime,n=e.playlist,i=e.retryCount,r=void 0===i?2:i,a=e.seekTo,s=e.pauseAfterSeek,o=void 0===s||s,l=e.tech,u=e.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");if(void 0===t||!n||!a)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!l.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n))return u({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var c=function(e,t){var n=void 0;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(i=t.segments[r],!(n<t.segments[r+1].dateTimeObject));r++);var a=t.segments[t.segments.length-1],s=a.dateTimeObject,o=a.videoTimingInfo?function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds}(a.videoTimingInfo):a.duration+.25*a.duration;return new Date(s.getTime()+1e3*o)<n?null:(s<n&&(i=a),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:ou.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(t,n);if(!c)return u({message:t+" was not found in the stream"});var d=c.segment,h=function(e,t){var n=void 0,i=void 0;try{n=new Date(e),i=new Date(t)}catch(e){}var r=n.getTime();return(i.getTime()-r)/1e3}(d.dateTimeObject,t);if("estimate"===c.type)return 0===r?u({message:t+" is not buffered yet. Try again"}):(a(c.estimatedStart+h),void l.one("seeked",(function(){Kl({programTime:t,playlist:n,retryCount:r-1,seekTo:a,pauseAfterSeek:o,tech:l,callback:u})})));var f=d.start+h;l.one("seeked",(function(){return u(null,l.currentTime())})),o&&l.pause(),a(f)}function Jl(e,t){var n=[],i=void 0;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Xr.createTimeRanges(n)}function Ql(e,t){return Jl(e,(function(e,n){return e-.1<=t&&t<=n+.1}))}function $l(e,t){return Jl(e,(function(e){return t<=e-1/30}))}function eu(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")}function tu(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function nu(e,t,n){var i=void 0,r=void 0;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime<=t&&r.endTime>=e&&n.removeCue(r)}function iu(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}var ru=Xr.createTimeRange,au=Ml.bind(null,1),su=Ml.bind(null,-1),ou={duration:Dl,seekable:function(e,t,n){var i=t||0,r=Ol(e,t,!0,n);return null===r?ru():ru(i,r)},safeLiveIndex:Pl,getMediaInfoForTime:function(e,t,n,i){var r=void 0,a=e.segments.length,s=t-i;if(s<0){if(0<n)for(r=n-1;0<=r;r--)if(0<(s+=su(e.segments[r].duration)))return{mediaIndex:r,startTime:i-Rl(e,n,r)};return{mediaIndex:0,startTime:t}}if(n<0){for(r=n;r<0;r++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(r=n;r<a;r++)if((s-=au(e.segments[r].duration))<0)return{mediaIndex:r,startTime:i+Rl(e,n,r)};return{mediaIndex:a-1,startTime:t}},isEnabled:Bl,isDisabled:function(e){return e.disabled},isBlacklisted:Ul,isIncompatible:jl,playlistEnd:Ol,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:Fl,estimateSegmentRequestTime:function(e,t,n,i){var r=3<arguments.length&&void 0!==i?i:0;return Fl("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:Gl},lu=Xr.xhr,uu=Xr.mergeOptions,cu=Object.freeze({createTransferableMessage:Yl,initSegmentId:Zl,segmentKeyId:ql,hexDump:Xl,tagDump:function(e){return Xl(e.bytes)},textRanges:function(e){var t,n,i="",r=void 0;for(r=0;r<e.length;r++)i+=(t=e).start(n=r)+"-"+t.end(n)+" ";return i}}),du="undefined"!=typeof window?window:{},hu="undefined"==typeof Symbol?"__target":Symbol(),fu=du.BlobBuilder||du.WebKitBlobBuilder||du.MozBlobBuilder||du.MSBlobBuilder,pu=du.URL||du.webkitURL||pu&&pu.msURL,gu=du.Worker;function mu(e,t){return function(n){var i=this;if(!t)return new gu(e);if(gu&&!n){var r=_u(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[hu]=new gu(r),function(e,t){if(e&&t){var n=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&pu.revokeObjectURL(e.objURL),n.call(e)}}}(this[hu],r),this[hu]}var a={postMessage:function(e){i.onmessage&&setTimeout((function(){i.onmessage({data:e,target:a})}))}};t.call(a),this.postMessage=function(e){setTimeout((function(){a.onmessage({data:e,target:i})}))},this.isThisThread=!0}}if(gu){var vu,yu=_u("self.onmessage = function () {}"),bu=new Uint8Array(1);try{(vu=new gu(yu)).postMessage(bu,[bu.buffer])}catch(Fc){gu=null}finally{pu.revokeObjectURL(yu),vu&&vu.terminate()}}function _u(e){try{return pu.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(Fc){var t=new fu;return t.append(e),pu.createObjectURL(t.getBlob(type))}}function Tu(e){return e.map((function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)}))}))}function wu(e){var t,n=0<arguments.length&&void 0!==e?e:"",i={codecCount:0};return i.codecCount=n.split(",").length,i.codecCount=i.codecCount||2,(t=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(n))&&(i.videoCodec=t[2],i.videoObjectTypeIndicator=t[3]),i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(n),i.audioProfile=i.audioProfile&&i.audioProfile[2],i}function Su(e,t,n){return e+"/"+t+'; codecs="'+n.filter((function(e){return!!e})).join(", ")+'"'}function Eu(e){var t={type:"",parameters:{}},n=e.trim().split(";");return t.type=n.shift().trim(),n.forEach((function(e){var n=e.trim().split("=");if(1<n.length){var i=n[0].replace(/"/g,"").trim(),r=n[1].replace(/"/g,"").trim();t.parameters[i]=r}})),t}function Cu(e){return/mp4a\.\d+.\d+/i.test(e)}function ku(e){return/avc1\.[\da-f]+/i.test(e)}var Au=new mu("./transmuxer-worker.worker.js",(function(e,t){var n=this;!function(){function e(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),-1<i)},this.trigger=function(t){var n,i,r,a;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){e={}}}}e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,i,r,a,s,o,l,u,c,d,h,f,p,g,m,v,y,b,_,T,w,S,E,C,k,A,I,x,L,D,R,P,O,N,M,U,j,B,F,G,H=e,W=Math.pow(2,32)-1;function z(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n}function V(e){for(var t=[];e--;)t.push(0);return t}function Y(){Y.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new pe(0,0),new pe(0,1),new pe(1,0),new pe(1,1)],this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this)}!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);E=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),I=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),x={video:A,audio:I},R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]),P=new Uint8Array([0,0,0,0,0,0,0,0]),O=P,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),M=P,L=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},i=function(){return t(S.dinf,t(S.dref,R))},r=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},m=function(e){return t(S.hdlr,x[e])},g=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(S.mdhd,n)},p=function(e){return t(S.mdia,g(e),m(e.type),o(e))},s=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,L):t(S.smhd,D),i(),y(e))},l=function(e,n){for(var i=[],r=n.length;r--;)i[r]=_(n[r]);return t.apply(null,[S.moof,s(e)].concat(i))},u=function(e){for(var n=e.length,i=[];n--;)i[n]=h(e[n]);return t.apply(null,[S.moov,d(4294967295)].concat(i).concat(c(e)))},c=function(e){for(var n=e.length,i=[];n--;)i[n]=T(e[n]);return t.apply(null,[S.mvex].concat(i))},d=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,n)},v=function(e){var n,i,r=e.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)a[i+4]=(n=r[i].flags).dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(S.sdtp,a)},y=function(e){return t(S.stbl,b(e),t(S.stts,M),t(S.stsc,O),t(S.stsz,N),t(S.stco,P))},b=function(e){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):j(e))},U=function(e){var n,i,r=e.sps||[],a=e.pps||[],s=[],o=[];for(n=0;n<r.length;n++)s.push((65280&r[n].byteLength)>>>8),s.push(255&r[n].byteLength),s=s.concat(Array.prototype.slice.call(r[n]));for(n=0;n<a.length;n++)o.push((65280&a[n].byteLength)>>>8),o.push(255&a[n].byteLength),o=o.concat(Array.prototype.slice.call(a[n]));if(i=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],s,[a.length],o))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];i.push(t(S.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return t.apply(null,i)},j=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},f=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,n)},_=function(e){var n,i,r,a,s,o;return n=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(1+W)),o=Math.floor(e.baseMediaDecodeTime%(1+W)),i=t(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===e.type?(r=w(e,92),t(S.traf,n,i,r)):(a=v(e),r=w(e,a.length+92),t(S.traf,n,i,r,a))},h=function(e){return e.duration=e.duration||4294967295,t(S.trak,f(e),p(e))},T=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(S.trex,n)},G=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},F=function(e,n){var i,r,a,s;for(n+=20+16*(r=e.samples||[]).length,i=G(r,n),s=0;s<r.length;s++)i=i.concat([(4278190080&(a=r[s]).duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return t(S.trun,new Uint8Array(i))},B=function(e,n){var i,r,a,s;for(n+=20+8*(r=e.samples||[]).length,i=G(r,n),s=0;s<r.length;s++)i=i.concat([(4278190080&(a=r[s]).duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return t(S.trun,new Uint8Array(i))},w=function(e,t){return"audio"===e.type?B(e,t):F(e,t)},a=function(){return t(S.ftyp,E,C,E,k)};var Z,q,X,K,J,Q=function(e){return t(S.mdat,e)},$=l,ee=function(e){var t,n=a(),i=u(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t},te=[33,16,5,32,164,27],ne=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ie={96e3:[te,[227,64],V(154),[56]],88200:[te,[231],V(170),[56]],64e3:[te,[248,192],V(240),[56]],48e3:[te,[255,192],V(268),[55,148,128],V(54),[112]],44100:[te,[255,192],V(268),[55,163,128],V(84),[112]],32e3:[te,[255,192],V(268),[55,234],V(226),[112]],24e3:[te,[255,192],V(268),[55,255,128],V(268),[111,112],V(126),[224]],16e3:[te,[255,192],V(268),[55,255,128],V(268),[111,255],V(269),[223,108],V(195),[1,192]],12e3:[ne,V(268),[3,127,248],V(268),[6,255,240],V(268),[13,255,224],V(268),[27,253,128],V(259),[56]],11025:[ne,V(268),[3,127,248],V(268),[6,255,240],V(268),[13,255,224],V(268),[27,255,192],V(268),[55,175,128],V(108),[112]],8e3:[ne,V(268),[3,121,16],V(47),[7]]},re=(Z=ie,Object.keys(Z).reduce((function(e,t){return e[t]=new Uint8Array(Z[t].reduce((function(e,t){return e.concat(t)}),[])),e}),{})),ae=(q=function(e){return 9e4*e},X=function(e,t){return e*t},K=function(e){return e/9e4},J=function(e,t){return e/t},function(e,t){return q(J(e,t))}),se=function(e,t,n){return K(n?e:e-t)},oe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},le=function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},ue=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),e.minSegmentPts=void 0===e.minSegmentPts?t.pts:Math.min(e.minSegmentPts,t.pts),e.maxSegmentPts=void 0===e.maxSegmentPts?t.pts:Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),e.minSegmentDts=void 0===e.minSegmentDts?t.dts:Math.min(e.minSegmentDts,t.dts),e.maxSegmentDts=void 0===e.maxSegmentDts?t.dts:Math.max(e.maxSegmentDts,t.dts))};function ce(e){return null===e?"":(e=he[e]||e,String.fromCharCode(e))}function de(){for(var e=[],t=15;t--;)e.push("");return e}(Y.prototype=new H).push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,r=i=0}return n}(e.escapedRBSP)).payloadType&&(n=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],s.push(a));return s}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Y.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},Y.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2&&this.dispatchCea608Packet(e)}),this),this.captionPackets_.length=0),this.flushCCStreams(e)},Y.prototype.flush=function(){return this.flushStream("flush")},Y.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Y.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},Y.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Y.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Y.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},Y.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var he={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},fe=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],pe=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=de();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=de();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=de()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=ce((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=ce((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=fe.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=ce(i),a+=ce(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};function ge(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function me(e){var t,n;me.prototype.init.call(this),this.type_=e||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=ge(e.dts,n),e.pts=ge(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){t=n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}pe.prototype=new H,pe.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(e){return""}})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},pe.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=de(),this.nonDisplayed_=de(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},pe.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},pe.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},pe.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},pe.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},pe.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},pe.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},pe.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},pe.prototype.isNormalChar=function(e){return 32<=e&&e<=127},pe.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=de(),this.displayed_=de()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},pe.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},pe.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},pe.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=n+=t},pe.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=t},pe.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},pe.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=t};var ve={CaptionStream:Y,Cea608Stream:pe},ye={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};function be(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}function _e(e,t,n){return decodeURIComponent(be(e,t,n))}function Te(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}me.prototype=new H;var we,Se=me,Ee={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=_e(e.data,1,t),e.value=_e(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=_e(e.data,1,t),e.url=_e(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=unescape(be(e.data,0,t));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(we=function(e){var t,n={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},i=0,r=[],a=0;if(we.prototype.init.call(this),this.dispatchType=ye.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,s,o,l;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)));else if(r.push(e),a+=e.data.byteLength,1===r.length&&(i=Te(e.data.subarray(6,10)),i+=10),!(a<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<i;)t.data.set(r[0].data.subarray(0,i-l),l),l+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=Te(t.data.subarray(10,14)),i-=Te(t.data.subarray(16,20)));do{if((s=Te(t.data.subarray(n+4,n+8)))<1)return;if((o={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+s+10)}).key=o.id,Ee[o.id]&&(Ee[o.id](o),"com.apple.streaming.transportStreamTimestamp"===o.owner)){var u=o.data,c=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;c*=4,o.timeStamp=c+=3&u[7],void 0===t.pts&&void 0===t.dts&&(t.pts=o.timeStamp,t.dts=o.timeStamp),this.trigger("timestamp",o)}t.frames.push(o),n+=10,n+=s}while(n<i);this.trigger("data",t)}}}).prototype=new H;var Ce,ke,Ae,Ie=we,xe=Se;(Ce=function(){var e=new Uint8Array(188),t=0;Ce.prototype.init.call(this),this.push=function(n){var i,r=0,a=188;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;a<i.byteLength;)71!==i[r]||71!==i[a]?(r++,a++):(this.trigger("data",i.subarray(r,a)),r+=188,a+=188);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new H,(ke=function(){var e,t,n,i;ke.prototype.init.call(this),(i=this).packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var a=e[r],s=(31&e[r+1])<<8|e[r+2];a===ye.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=s:a===ye.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=s:a===ye.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][s]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],1<(48&t[3])>>>4&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.streamType=n.pid===this.programMapTable.video?ye.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?ye.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new H,ke.STREAM_TYPES={h264:27,adts:15},(Ae=function(){function e(e,t,i){var r,a,s=new Uint8Array(e.size),o={type:t},l=0,u=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,l=0;l<e.data.length;l++)s.set((a=e.data[l]).data,u),u+=a.data.byteLength;!function(e,t){var n;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])}(s,o),r="video"===t||o.packetLength<=e.size,(i||r)&&(e.size=0,e.data.length=0),r&&n.trigger("data",o)}}var t,n=this,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0};Ae.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var t,n;switch(s.streamType){case ye.H264_STREAM_TYPE:case ye.H264_STREAM_TYPE:t=i,n="video";break;case ye.ADTS_STREAM_TYPE:t=r,n="audio";break;case ye.METADATA_STREAM_TYPE:t=a,n="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&e(t,n,!0),t.data.push(s),t.size+=s.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=s.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),n.trigger("data",e)}})[s.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){e(i,"video"),e(r,"audio"),e(a,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new H;var Le={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ce,TransportParseStream:ke,ElementaryStream:Ae,TimestampRolloverStream:xe,CaptionStream:ve.CaptionStream,Cea608Stream:ve.Cea608Stream,MetadataStream:Ie};for(var De in ye)ye.hasOwnProperty(De)&&(Le[De]=ye[De]);var Re,Pe=Le,Oe=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Re=function(e){var t,n=0;Re.prototype.init.call(this),this.push=function(i){var r,a,s,o,l=0;if(e||(n=0),"audio"===i.type)for(t?(a=t,(t=new Uint8Array(a.byteLength+i.data.byteLength)).set(a),t.set(i.data,a.byteLength)):t=i.data;l+5<t.length;)if(255===t[l]&&240==(246&t[l+1])){if(o=9e4*(s=1024*(1+(3&t[l+6])))/Oe[(60&t[l+2])>>>2],t.byteLength<(r=l+((3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5)))return;if(this.trigger("data",{pts:i.pts+n*o,dts:i.dts+n*o,sampleCount:s,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:Oe[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+2*(1&~t[l+1]),r)}),n++,t.byteLength===r)return void(t=void 0);t=t.subarray(r)}else l++},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new H;var Ne,Me,Ue,je=Re,Be=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(r,r+s)),n=new DataView(a.buffer).getUint32(0),i=8*s,t-=s},this.skipBits=function(e){var r;e<i||(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord()),n<<=e,i-=e},this.readBits=function(e){var r=Math.min(i,e),a=n>>>32-r;return 0<(i-=r)?n<<=r:0<t&&this.loadWord(),0<(r=e-r)?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!=(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(Me=function(){var e,t,n=0;Me.prototype.init.call(this),this.push=function(i){for(var r,a=(t=t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),r):i.data).byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}for(n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));1!==t[++e]&&e<a;);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&3<t.byteLength&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new H,Ue={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Ne=function(){var e,t,n,i,r,a,s,o=new Me;Ne.prototype.init.call(this),(e=this).push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,o.push(e))},o.on("data",(function(s){var o={trackId:t,pts:n,dts:i,data:s};switch(31&s[0]){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)})),o.on("done",(function(){e.trigger("done")})),o.on("partialdone",(function(){e.trigger("partialdone")})),o.on("reset",(function(){e.trigger("reset")})),o.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},r=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},a=function(e){var t,n,i,r,a,o,l,u,c,d,h,f,p,g=0,m=0,v=0,y=0,b=1;if(n=(t=new Be(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Ue[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==a?8:12,p=0;p<h;p++)t.readBoolean()&&s(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),p=0;p<l;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:f=[1,1];break;case 2:f=[12,11];break;case 3:f=[10,11];break;case 4:f=[16,11];break;case 5:f=[40,33];break;case 6:f=[24,11];break;case 7:f=[20,11];break;case 8:f=[32,11];break;case 9:f=[80,33];break;case 10:f=[18,11];break;case 11:f=[15,11];break;case 12:f=[64,33];break;case 13:f=[160,99];break;case 14:f=[4,3];break;case 15:f=[3,2];break;case 16:f=[2,1];break;case 255:f=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}f&&(b=f[0]/f[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(u+1)-2*g-2*m)*b),height:(2-d)*(c+1)*16-2*v-2*y,sarRatio:f}}}).prototype=new H;var Fe,Ge={H264Stream:Ne,NalByteStream:Me},He=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+n:10+n},We=function(e,t){return 6144&e[t+3]|e[t+4]<<3|(224&e[t+5])>>5};function ze(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ve(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}}(Fe=function(){var e=new Uint8Array,t=0;Fe.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,a,s=0,o=0;for(e.length?(a=e.length,(e=new Uint8Array(n.byteLength+a)).set(e.subarray(0,a)),e.set(n,a)):e=n;3<=e.length-o;)if(e[o]!=="I".charCodeAt(0)||e[o+1]!=="D".charCodeAt(0)||e[o+2]!=="3".charCodeAt(0))if(255!=(255&e[o])||240!=(240&e[o+1]))o++;else{if(e.length-o<7)break;if(o+(s=We(e,o))>e.length)break;r={type:"audio",data:e.subarray(o,o+s),pts:t,dts:t},this.trigger("data",r),o+=s}else{if(e.length-o<10)break;if(o+(s=He(e,o))>e.length)break;i={type:"timed-metadata",data:e.subarray(o,o+s)},this.trigger("data",i),o+=s}e=0<e.length-o?e.subarray(o):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new H;var Ye,Ze,qe,Xe,Ke=Fe,Je=Ge.H264Stream,Qe=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],$e=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];(Ze=function(e,t){var n=[],i=0,r=0,a=0,s=1/0;t=t||{},Ze.prototype.init.call(this),this.push=function(t){ue(e,t),e&&Qe.forEach((function(n){e[n]=t[n]})),n.push(t)},this.setEarliestDts=function(t){r=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var o,l,u,c,d;0!==n.length&&(o=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))}(n,e,r),e.baseMediaDecodeTime=le(e,t.keepOriginalTimestamps),function(e,t,n,i){var r,a,s,o,l,u=0,c=0,d=0;if(t.length&&(r=ae(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(9e4/(e.samplerate/1024)),n&&i&&(u=r-Math.max(n,i),d=(c=Math.floor(u/a))*a),!(c<1||45e3<d))){for(s=(s=re[e.samplerate])||t[0].data,o=0;o<c;o++)t.splice(0,0,{data:s,dts:(l=t[0]).dts-a,pts:l.pts-a});e.baseMediaDecodeTime-=Math.floor(function(e,t){return X(K(e),t)}(d,e.samplerate))}}(e,o,a,s),e.samples=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push({size:e[t].data.byteLength,duration:1024});return n}(o),u=Q(function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)r.set((n=e[t]).data,i),i+=n.data.byteLength;return r}(o)),n=[],l=$(i,[e]),c=new Uint8Array(l.byteLength+u.byteLength),i++,c.set(l),c.set(u,l.byteLength),oe(e),d=Math.ceil(9216e4/e.samplerate),o.length&&this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+o.length*d}),this.trigger("data",{track:e,boxes:c})),this.trigger("done","AudioSegmentStream")},this.reset=function(){oe(e),n=[],this.trigger("reset")}}).prototype=new H,(Ye=function(e,t){var n,i,r=0,a=[],s=[];t=t||{},Ye.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){ue(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],$e.forEach((function(t){e[t]=n[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var n,i,o,l,u,c,d,h,f=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,t=i.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r}(a),(o=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r}(n))[0][0].keyFrame||((i=this.getGopForFusion_(a[0],e))?(f=i.duration,o.unshift(i),o.byteLength+=i.byteLength,o.nalCount+=i.nalCount,o.pts=i.pts,o.dts=i.dts,o.duration+=i.duration):o=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e}(o)),s.length){var p;if(!(p=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");oe(e),o=p}ue(e,o),e.samples=function(e,t){var n,i,r,a,s=0,o=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)s+=(r=z(a[i],s)).size,o.push(r);return o}(o),u=Q(function(e){var t,n,i,r,a,s,o=0,l=new Uint8Array(e.byteLength+4*e.nalCount),u=new DataView(l.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)u.setUint32(o,(s=a[i]).data.byteLength),l.set(s.data,o+=4),o+=s.data.byteLength;return l}(o)),e.baseMediaDecodeTime=le(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),this.trigger("segmentTimingInfo",Ve(e.baseMediaDecodeTime,(d=o[0]).dts,d.pts,(h=o[o.length-1]).dts+h.duration,h.pts+h.duration,f)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=$(r,[e]),c=new Uint8Array(l.byteLength+u.byteLength),r++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){oe(e),i=n=void 0},this.getGopForFusion_=function(t){var n,i,r,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)r=(a=this.gopCache_[s]).gop,e.pps&&ze(e.pps[0],a.pps[0])&&e.sps&&ze(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||-1e4<=(n=t.dts-r.dts-r.duration)&&n<=45e3&&(!i||n<o)&&(i=a,o=n));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,o,l,u;for(a=e.byteLength,o=e.nalCount,l=e.duration,t=n=0;t<s.length&&n<e.length&&(i=s[t]).pts!==(r=e[n]).pts;)r.pts>i.pts?t++:(n++,a-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=a,u.duration=l,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,o,l;for(t=s.length-1,n=e.length-1,a=null,o=!1;0<=t&&0<=n;){if((i=s[t]).pts===(r=e[n]).pts){o=!0;break}i.pts>r.pts?t--:(t===s.length-1&&(a=n),n--)}if(!o&&null===a)return null;if(0===(l=o?n:a))return e;var u=e.slice(l),c=u.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){s=e}}).prototype=new H,(Xe=function(e,t){this.numberOfTracks=0,this.metadataStream=t,this.remuxTracks=void 0===(e=e||{}).remux||!!e.remux,this.keepOriginalTimestamps="boolean"==typeof e.keepOriginalTimestamps&&e.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Xe.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new H,Xe.prototype.flush=function(e){var t,n,i,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,$e.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,Qe.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(s.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,i=ee(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=se(t.startPts,o,this.keepOriginalTimestamps),t.endTime=se(t.endPts,o,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=se(n.pts,o,this.keepOriginalTimestamps),s.metadata.push(n);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)this.trigger("caption",t=s.captions[r]);for(r=0;r<s.metadata.length;r++)this.trigger("id3Frame",n=s.metadata[r])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Xe.prototype.setRemux=function(e){this.remuxTracks=e},(qe=function(e){var t,n,i=this,r=!0;qe.prototype.init.call(this),this.baseMediaDecodeTime=(e=e||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};(this.transmuxPipeline_=r).type="aac",r.metadataStream=new Pe.MetadataStream,r.aacStream=new Ke,r.audioTimestampRolloverStream=new Pe.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Pe.TimestampRolloverStream("timed-metadata"),r.adtsStream=new je,r.coalesceStream=new Xe(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(a){"timed-metadata"!==a.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Ze(n,e),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};(this.transmuxPipeline_=r).type="ts",r.metadataStream=new Pe.MetadataStream,r.packetStream=new Pe.TransportPacketStream,r.parseStream=new Pe.TransportParseStream,r.elementaryStream=new Pe.ElementaryStream,r.timestampRolloverStream=new Pe.TimestampRolloverStream,r.adtsStream=new je,r.h264Stream=new Je,r.captionStream=new Pe.CaptionStream,r.coalesceStream=new Xe(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?n||"audio"!==a.tracks[s].type||((n=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new Ye(t,e),r.videoSegmentStream.on("timelineStartInfo",(function(e){n&&(n.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Ze(n,e),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,oe(n),e.keepOriginalTimestamps||(n.timelineStartInfo.baseMediaDecodeTime=i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,oe(t),r.captionStream.reset(),e.keepOriginalTimestamps||(t.timelineStartInfo.baseMediaDecodeTime=i)),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(r){var t=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)}(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new H;var et={Transmuxer:qe,VideoSegmentStream:Ye,AudioSegmentStream:Ze,AUDIO_PROPERTIES:Qe,VIDEO_PROPERTIES:$e,generateVideoSegmentTimingInfo:Ve},tt=(function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(nt,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new et.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var i=t.data;t.data=i.buffer,e.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])})),t.captionStream&&t.captionStream.on("data",(function(t){e.postMessage({action:"caption",data:t})})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}))}(this.self,this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*(e.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),nt);function nt(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,nt),this.options=t||{},this.self=e,this.init()}new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new tt(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new tt(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(n)}()})),Iu={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},xu=(vl(Lu,Xr.EventTarget),gl(Lu,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,n){var i=t.player_;if(n.captions&&n.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams)if(!e.inbandTextTracks_[r]){i.tech_.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(r);e.inbandTextTracks_[r]=a||i.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function(e){var t={start:{decode:e.start.dts/9e4,presentation:e.start.pts/9e4},end:{decode:e.end.dts/9e4,presentation:e.end.pts/9e4},baseMediaDecodeTime:e.baseMediaDecodeTime/9e4};e.prependedContentDuration&&(t.prependedContentDuration=e.prependedContentDuration/9e4),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}},{key:"createRealSourceBuffers_",value:function(){var e=this,t=["audio","video"];t.forEach((function(n){if(e[n+"Codec_"]&&!e[n+"Buffer_"]){var i=null;e.mediaSource_[n+"Buffer_"]?(i=e.mediaSource_[n+"Buffer_"]).updating=!1:(i=function(e,t){var n=e.addSourceBuffer(t),i=Object.create(null);function r(e){"function"==typeof n[e]?i[e]=function(){return n[e].apply(n,arguments)}:void 0===i[e]&&Object.defineProperty(i,e,{get:function(){return n[e]},set:function(t){return n[e]=t}})}for(var a in i.updating=!1,i.realBuffer_=n)r(a);return i}(e.mediaSource_.nativeMediaSource_,n+'/mp4;codecs="'+e[n+"Codec_"]+'"'),e.mediaSource_[n+"Buffer_"]=i),e[n+"Buffer_"]=i,["update","updatestart","updateend"].forEach((function(r){i.addEventListener(r,(function(){if("audio"!==n||!e.audioDisabled_)return"updateend"===r&&(e[n+"Buffer_"].updating=!1),t.every((function(t){return!("audio"!==t||!e.audioDisabled_)||n===t||!e[t+"Buffer_"]||!e[t+"Buffer_"].updating}))?e.trigger(r):void 0}))}))}}))}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(e,t,n){if(null==t||!e.length)return[];var i=Math.ceil(9e4*(t-n+3)),r=void 0;for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil(9e4*(t-i)),a=Math.ceil(9e4*(n-i)),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var l=o+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,o-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),nu(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)nu(e,t,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);t=this.pendingBuffers_.reduce((function(e,t){var n=t.type,i=t.data,r=t.initSegment;return e[n].segments.push(i),e[n].bytes+=i.byteLength,e[n].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e}),t),this.videoBuffer_||this.audioBuffer_||(0===t.video.bytes&&(this.videoCodec_=null),0===t.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),t.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info}),t.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:t.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(t.audio.segments.unshift(t.audio.initSegment),t.audio.bytes+=t.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var n=!1;this.videoBuffer_&&t.video.bytes?(t.video.segments.unshift(t.video.initSegment),t.video.bytes+=t.video.initSegment.byteLength,this.concatAndAppendSegments_(t.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(n=!0),function(t,n,i){var r=e.WebKitDataCue||e.VTTCue;if(n&&n.forEach((function(e){this.inbandTextTracks_[e.stream].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))}),t),i){var a=iu(t.mediaSource_.duration);if(i.forEach((function(t){var n=t.cueTime+this.timestampOffset;!("number"!=typeof n||e.isNaN(n)||n<0)&&n<1/0&&t.frames.forEach((function(e){var t=new r(n,n,e.value||e.url||e.data||"");t.frame=e,t.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Xr.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Xr.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Xr.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(t),this.metadataTrack_.addCue(t)}),this)}),t),t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){for(var s=t.metadataTrack_.cues,o=[],l=0;l<s.length;l++)s[l]&&o.push(s[l]);var u=o.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),c=Object.keys(u).sort((function(e,t){return Number(e)-Number(t)}));c.forEach((function(e,t){var n=u[e],i=Number(c[t+1])||a;n.forEach((function(e){e.endTime=i}))}))}}}(this,t.captions,t.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(t.audio,this.audioBuffer_),this.pendingBuffers_.length=0,n&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,i=void 0;if(e.bytes){i=new Uint8Array(e.bytes),e.segments.forEach((function(e){i.set(e,n),n+=e.byteLength}));try{t.updating=!0,t.appendBuffer(i)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"dispose",value:function(){this.transmuxer_&&this.transmuxer_.terminate(),this.trigger("dispose"),this.off()}}]),Lu);function Lu(e,t){pl(this,Lu);var n=yl(this,(Lu.__proto__||Object.getPrototypeOf(Lu)).call(this,Xr.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=e,n.codecs_=t,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=11<=Xr.browser.IE_VERSION;var i={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach((function(e){Cu(e)?n.audioCodec_=e:ku(e)&&(n.videoCodec_=e)})),n.transmuxer_=new Au,n.transmuxer_.postMessage({action:"init",options:i}),n.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):"videoSegmentTimingInfo"===e.data.action?n.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){return function(e,t,n){var i=null,r=null,a=0,s=[],o=[];if(!e&&!t)return Xr.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(n)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return Xr.createTimeRange();for(var l=e.buffered,u=t.buffered,c=l.length;c--;)s.push({time:l.start(c),type:"start"}),s.push({time:l.end(c),type:"end"});for(c=u.length;c--;)s.push({time:u.start(c),type:"start"}),s.push({time:u.end(c),type:"end"});for(s.sort((function(e,t){return e.time-t.time})),c=0;c<s.length;c++)"start"===s[c].type?2==++a&&(i=s[c].time):"end"===s[c].type&&1==--a&&(r=s[c].time),null!==i&&null!==r&&(o.push([i,r]),r=i=null);return Xr.createTimeRanges(o)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}var Du=(vl(Ru,Xr.EventTarget),gl(Ru,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,n=Eu(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var i=[];n.parameters&&n.parameters.codecs&&(i=(i=Tu(i=n.parameters.codecs.split(","))).filter((function(e){return Cu(e)||ku(e)}))),0===i.length&&(i=["avc1.4d400d","mp4a.40.2"]),t=new xu(this,i),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}},{key:"dispose",value:function(){this.trigger("dispose"),this.off(),this.sourceBuffers.forEach((function(e){e.dispose&&e.dispose()})),this.sourceBuffers.length=0}}]),Ru);function Ru(){pl(this,Ru);var n=yl(this,(Ru.__proto__||Object.getPrototypeOf(Ru)).call(this)),i=void 0;for(i in n.nativeMediaSource_=new e.MediaSource,n.nativeMediaSource_)i in Ru.prototype||"function"!=typeof n.nativeMediaSource_[i]||(n[i]=n.nativeMediaSource_[i].bind(n.nativeMediaSource_));return n.duration_=NaN,Object.defineProperty(n,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){(this.duration_=e)===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(n,"seekable",{get:function(){return this.duration_===1/0?Xr.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(n,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(n,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),n.sourceBuffers=[],n.activeSourceBuffers_=[],n.updateActiveSourceBuffers_=function(){if(n.activeSourceBuffers_.length=0,1===n.sourceBuffers.length){var e=n.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void n.activeSourceBuffers_.push(e)}for(var t=!1,i=!0,r=0;r<n.player_.audioTracks().length;r++){var a=n.player_.audioTracks()[r];if(a.enabled&&"main"!==a.kind){i=!(t=!0);break}}n.sourceBuffers.forEach((function(e,r){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=t;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,i=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=r?i:!i,e.audioDisabled_))return;n.activeSourceBuffers_.push(e)}))},n.onPlayerMediachange_=function(){n.sourceBuffers.forEach((function(e){e.appendAudioInitSegment_=!0}))},n.onHlsReset_=function(){n.sourceBuffers.forEach((function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})}))},n.onHlsSegmentTimeMapping_=function(e){n.sourceBuffers.forEach((function(t){return t.timeMapping_=e.mapping}))},["sourceopen","sourceclose","sourceended"].forEach((function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))}),n),n.on("sourceopen",(function(e){var i=t.querySelector('[src="'+n.url_+'"]');i&&(n.player_=Xr(i.parentNode),n.player_&&(n.player_.tech_.on("hls-reset",n.onHlsReset_),n.player_.tech_.on("hls-segment-time-mapping",n.onHlsSegmentTimeMapping_),n.player_.audioTracks&&n.player_.audioTracks()&&(n.player_.audioTracks().on("change",n.updateActiveSourceBuffers_),n.player_.audioTracks().on("addtrack",n.updateActiveSourceBuffers_),n.player_.audioTracks().on("removetrack",n.updateActiveSourceBuffers_)),n.player_.on("mediachange",n.onPlayerMediachange_)))})),n.on("sourceended",(function(e){for(var t=iu(n.duration),i=0;i<n.sourceBuffers.length;i++){var r=n.sourceBuffers[i],a=r.metadataTrack_&&r.metadataTrack_.cues;a&&a.length&&(a[a.length-1].endTime=t)}})),n.on("sourceclose",(function(e){this.sourceBuffers.forEach((function(e){e.transmuxer_&&e.transmuxer_.terminate()})),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})),n}var Pu=0;function Ou(e,t){var n=Xr.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})}function Nu(){return!!e.MediaSource&&!!e.MediaSource.isTypeSupported&&e.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function Mu(){if(this.MediaSource={open:Ou,supportsNativeMediaSources:Nu},Nu())return new Du;throw new Error("Cannot use create a virtual MediaSource for this video")}Xr.mediaSources={},Mu.open=Ou,Mu.supportsNativeMediaSources=Nu;var Uu={createObjectURL:function(t){var n=void 0;return t instanceof Du?(n=e.URL.createObjectURL(t.nativeMediaSource_),t.url_=n):t instanceof Du?(n="blob:vjs-media-source/"+Pu,Pu++,Xr.mediaSources[n]=t,n):(n=e.URL.createObjectURL(t),t.url_=n)}};function ju(e,t){for(var n=void 0,i=Hu(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),r=0;r<t.playlists.length;r++){var a=_l(i,t.playlists[r]);a?i=a:n=!0}return bl(t,(function(e,t,r,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,o=_l(i,e.playlists[0]);o&&((i=o).mediaGroups[t][r][a].playlists[0]=i.playlists[s],n=!1)}})),n?null:i}function Bu(e){return e.uri+"-"+e.byterange.offset+"-"+(e.byterange.offset+e.byterange.length-1)}function Fu(e,t){var n,i,r={};for(var a in e){var s=e[a].sidx;if(s){var o=Bu(s);if(!t[o])break;n=t[o].sidxInfo,i=s,(Boolean(!n.map&&!i.map)||Boolean(n.map&&i.map&&n.map.byterange.offset===i.map.byterange.offset&&n.map.byterange.length===i.map.byterange.length))&&n.uri===i.uri&&n.byterange.offset===i.byterange.offset&&n.byterange.length===i.byterange.length&&(r[o]=t[o])}}return r}function Gu(e,t,n,i,r){var a={uri:fl(i.handleManifestRedirects,e.resolvedUri),byterange:e.byterange,playlist:t};return n(Xr.mergeOptions(a,{responseType:"arraybuffer",headers:Wl(a)}),r)}Xr.MediaSource=Mu,Xr.URL=Uu;var Hu=Xr.mergeOptions,Wu=(vl(zu,Xr.EventTarget),gl(zu,[{key:"setupChildLoader",value:function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t}},{key:"dispose",value:function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},e.clearTimeout(this.minimumUpdatePeriodTimeout_),e.clearTimeout(this.mediaRequest_),e.clearTimeout(this.mediaUpdateTimeout),this.off()}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"sidxRequestFinished_",value:function(e,t,n,i){var r=this;return function(a,s){if(r.request){if(r.request=null,a)return r.error={status:s.status,message:"DASH playlist request error at URL: "+e.uri,response:s.response,code:2},n&&(r.state=n),r.trigger("error"),i(t,null);var o=new Uint8Array(s.response),l=So.parseSidx(o.subarray(8));return i(t,l)}}}},{key:"media",value:function(t){var n=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}var r=!this.media_||t.id!==this.media_.id;if(r&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r)if(this.media_&&this.trigger("mediachanging"),t.sidx){var a=void 0,s=void 0;s=this.masterPlaylistLoader_?(a=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.sidxMapping_):(a=this.master,this.sidxMapping_);var o=Bu(t.sidx);s[o]={sidxInfo:t.sidx},this.request=Gu(t.sidx,t,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(t,a,i,(function(e,r){if(!e||!r)throw new Error("failed to request sidx");s[o].sidx=r,n.haveMetadata({startingState:i,playlist:e.playlists[t.id]})})))}else this.mediaRequest_=e.setTimeout(this.haveMetadata.bind(this,{startingState:i,playlist:t}),0)}},{key:"haveMetadata",value:function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),this.trigger("HAVE_MASTER"===t?"loadedmetadata":"mediachange")}},{key:"pause",value:function(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),e.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(t){var n=this;e.clearTimeout(this.mediaUpdateTimeout),e.clearTimeout(this.minimumUpdatePeriodTimeout_);var i=this.media();t?this.mediaUpdateTimeout=e.setTimeout((function(){return n.load()}),i?i.targetDuration/2*1e3:5e3):this.started?this.trigger(i&&!i.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var e=Ks(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});e.uri=this.srcUrl;for(var t=0;t<e.playlists.length;t++)e.playlists[t].uri="placeholder-uri-"+t;return bl(e,(function(t,n,i,r){if(t.playlists&&t.playlists.length){var a="placeholder-uri-"+n+"-"+i+"-"+r,s=Tl(0,a);t.playlists[0].uri=a,t.playlists[0].id=s,e.playlists[s]=t.playlists[0],e.playlists[a]=t.playlists[0]}})),wl(e),Sl(e),e}},{key:"start",value:function(){var t=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=e.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(e,n){if(t.request){if(t.request=null,e)return t.error={status:n.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.masterXml_=n.responseText,t.masterLoaded_=n.responseHeaders&&n.responseHeaders.date?Date.parse(n.responseHeaders.date):Date.now(),t.srcUrl=fl(t.handleManifestRedirects,t.srcUrl,n),t.syncClientServerClock_(t.onClientServerClockSync_.bind(t))}}))}},{key:"syncClientServerClock_",value:function(e){var t=this,n=function(e){var t=Ws(e,"UTCTiming")[0];if(!t)return null;var n=Ys(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}(Xs(this.masterXml_));return null===n?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.clientOffset_=n.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:hl(this.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(i,r){if(t.request){if(i)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var a;a="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.clientOffset_=a-Date.now(),e()}})))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var t=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=e.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var t=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(n,i){if(t.request){if(t.request=null,n)return t.error={status:i.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.masterXml_=i.responseText,t.sidxMapping_=function(e,t,n,i){var r=Ks(e,{manifestUri:t,clientOffset:n}),a=Fu(r.playlists,i);return bl(r,(function(e,t,n,r){e.playlists&&e.playlists.length&&(a=Hu(a,Fu(e.playlists,i)))})),a}(t.masterXml_,t.srcUrl,t.clientOffset_,t.sidxMapping_);var r=t.parseMasterXml(),a=ju(t.master,r),s=t.media().sidx;if(a)if(s){var o=Bu(s);if(!t.sidxMapping_[o]){var l=t.media();t.request=Gu(l.sidx,l,t.hls_.xhr,{handleManifestRedirects:t.handleManifestRedirects},t.sidxRequestFinished_(l,r,t.state,(function(n,i){if(!n||!i)throw new Error("failed to request sidx on minimumUpdatePeriod");t.sidxMapping_[o].sidx=i,t.minimumUpdatePeriodTimeout_=e.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),t.master.minimumUpdatePeriod),t.refreshMedia_(t.media().id)})))}}else t.master=a;t.minimumUpdatePeriodTimeout_=e.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),t.master.minimumUpdatePeriod)}}))}},{key:"refreshMedia_",value:function(t){var n=this;if(!t)throw new Error("refreshMedia_ must take a media id");var i,r=void 0;i=this.masterPlaylistLoader_?(r=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(r=this.master,this.parseMasterXml());var a=ju(r,i);a?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=a:this.master=a,this.media_=a.playlists[t]):(this.media_=i.playlists[t],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=e.setTimeout((function(){n.trigger("mediaupdatetimeout")}),El(this.media(),!!a))),this.trigger("loadedplaylist")}}]),zu);function zu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3];pl(this,zu);var r=yl(this,(zu.__proto__||Object.getPrototypeOf(zu)).call(this)),a=n.withCredentials,s=void 0!==a&&a,o=n.handleManifestRedirects,l=void 0!==o&&o;if(r.hls_=t,r.withCredentials=s,r.handleManifestRedirects=l,!e)throw new Error("A non-empty playlist URL or playlist is required");return r.on("minimumUpdatePeriod",(function(){r.refreshXml_()})),r.on("mediaupdatetimeout",(function(){r.refreshMedia_(r.media().id)})),r.state="HAVE_NOTHING",r.loadedPlaylists_={},"string"==typeof e?(r.srcUrl=e,r.sidxMapping_={},yl(r)):(r.setupChildLoader(i,e),r)}function Vu(e){return Xr.log.debug?Xr.log.debug.bind(Xr,"VHS:",e+" >"):function(){}}function Yu(){}var Zu=(gl(qu,[{key:"createSourceBuffer_",value:function(e,t){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",(function(){n.start_()})):this.start_()}},{key:"start_",value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.sourceBuffer_.removing=!1,e.logger_("buffered ["+eu(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_((function(){t.sourceBuffer_.abort()}),e)}},{key:"appendBuffer",value:function(e,t){var n=this;this.processedAppend_=!0,this.queueCallback_((function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.addEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),n.sourceBuffer_.appendBuffer(e.bytes)}),(function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),t()}))}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Xr.createTimeRanges()}},{key:"remove",value:function(e,t,n){var i=this,r=2<arguments.length&&void 0!==n?n:Yu;this.processedAppend_&&this.queueCallback_((function(){i.logger_("remove ["+e+" => "+t+"]"),i.sourceBuffer_.removing=!0,i.sourceBuffer_.remove(e,t)}),r)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Yu}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_((function(){t.sourceBuffer_.timestampOffset=e,t.runCallback_()})),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){function e(){t.sourceBuffer_&&"open"===t.mediaSource.readyState&&t.sourceBuffer_.abort(),t.sourceBuffer_.removeEventListener("updateend",e)}var t=this;this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",e):e()}}]),qu);function qu(e,t,n,i){pl(this,qu),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,this.type_=n,this.mimeType_=t,this.logger_=Vu("SourceUpdater["+n+"]["+t+"]"),"closed"===e.readyState?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,t,i)):this.createSourceBuffer_(t,i)}function Xu(e){e.forEach((function(e){e.abort()}))}function Ku(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:ic,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:rc,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:nc,xhr:t}:null}function Ju(t,n){var i;return t&&(i=e.getComputedStyle(t))?i[n]:""}function Qu(e,t){var n=e.slice();e.sort((function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))}function $u(t,n){var i=void 0,r=void 0;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n.attributes.BANDWIDTH&&(r=n.attributes.BANDWIDTH),(i=i||e.Number.MAX_VALUE)-(r||e.Number.MAX_VALUE)}function ec(e){return"number"==typeof e&&isFinite(e)}var tc={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},nc=2,ic=-101,rc=-102,ac=(vl(sc,Xr.EventTarget),gl(sc,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset(),this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Xr.createTimeRanges()}},{key:"initSegment",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!e)return null;var i=Zl(e),r=this.initSegments_[i];return n&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),r||e}},{key:"segmentKey",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!e)return null;var i=ql(e),r=this.keyCache_[i];this.cacheEncryptionKeys_&&n&&!r&&e.bytes&&(this.keyCache_[i]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});var a={resolvedUri:(r||e).resolvedUri};return r&&(a.bytes=r.bytes),a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Zu(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};if(e){var i=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var a=null;if(i&&(i.id?a=i.id:i.uri&&(a=i.uri)),this.logger_("playlist update ["+a+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(i&&i.uri===e.uri){var s=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+s+"]"),null!==this.mediaIndex&&(this.mediaIndex-=s),r&&(r.mediaIndex-=s,0<=r.mediaIndex&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,1/0,e),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,n){if(t===1/0&&(t=this.duration_()),this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,n),nu(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)nu(e,t,this.inbandTextTracks_[i])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(this.isEndOfStream_(e.mediaIndex)?this.endOfStream():e.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()||(e.timeline!==this.currentTimeline_&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(e)))}}},{key:"isEndOfStream_",value:function(e,t){return function(e,t,n){return!(!e||!t)&&e.endList&&"open"===t.readyState&&n===e.segments.length}(1<arguments.length&&void 0!==t?t:this.playlist_,this.mediaSource_,e)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(e,t,n,i,r,a){var s=0,o=void 0;e.length&&(s=e.end(e.length-1));var l=Math.max(0,s-r);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!i&&1<=l)return null;if(null===a)return n=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,n,null,!0);if(null!==n)return this.generateSegmentInfo_(t,n+1,o=s,!1);if(this.fetchAtBuffer_){var u=ou.getMediaInfoForTime(t,s,a.segmentIndex,a.time);n=u.mediaIndex,o=u.startTime}else{var c=ou.getMediaInfoForTime(t,r,a.segmentIndex,a.time);n=c.mediaIndex,o=c.startTime}return this.generateSegmentInfo_(t,n,o,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map((function(e,t){return{timeline:e.timeline,segmentIndex:t}})).filter((function(e){return e.timeline===t.currentTimeline_}));return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,n,i){if(t<0||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:i,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=ou.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=function(e,t,n){var i=2<arguments.length&&void 0!==n?n:1;return((e.length?e.end(e.length-1):0)-t)/i}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=a)return!1;var s=function(e){var t=e.currentTime,n=e.bandwidth,i=e.duration,r=e.segmentDuration,a=e.timeUntilRebuffer,s=e.currentTimeline,o=e.syncController,l=e.master.playlists.filter((function(e){return!ou.isIncompatible(e)})),u=l.filter(ou.isEnabled);u.length||(u=l.filter((function(e){return!ou.isDisabled(e)})));var c=u.filter(ou.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var l=o.getSyncPoint(e,i,s,t)?1:2;return{playlist:e,rebufferingImpact:ou.estimateSegmentRequestTime(r,n,e)*l-a}})),d=c.filter((function(e){return e.rebufferingImpact<=0}));return Qu(d,(function(e,t){return $u(t.playlist,e.playlist)})),d.length?d[0]:(Qu(c,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),c[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=.5;return a<=1/30&&(o=1),!(!s.playlist||s.playlist.uri===this.playlist_.uri||r-a-s.rebufferingImpact<o||(this.bandwidth=s.playlist.attributes.BANDWIDTH*tc.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),0))}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=function(e,t,n,i,r,a,s){var o=[],l=function(e,t,n){var i=0,r=!1;return function(a,s){if(!r)return a?(r=!0,Xu(e),n(a,s)):(i+=1)===e.length?(s.endOfAllRequests=Date.now(),s.encryptedBytes?function(e,t,n){var i;e.addEventListener("message",(function i(r){if(r.data.source===t.requestId){e.removeEventListener("message",i);var a=r.data.decrypted;return t.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength),n(null,t)}})),i=t.key.bytes.slice?t.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.key.bytes)),e.postMessage(Yl({source:t.requestId,encrypted:t.encryptedBytes,key:i,iv:t.key.iv}),[t.encryptedBytes.buffer,i.buffer])}(t,s,n):n(null,s)):void 0}}(o,n,s);if(r.key&&!r.key.bytes){var u=e(Xr.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),function(e,t){return function(n,i){var r=i.response,a=Ku(n,i);if(a)return t(a,e);if(16!==r.byteLength)return t({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:nc,xhr:i},e);var s=new DataView(r);return e.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),t(null,e)}}(r,l));o.push(u)}if(r.map&&!r.map.bytes){var c=e(Xr.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Wl(r.map)}),function(e,t,n){return function(i,r){var a=r.response,s=Ku(i,r);return s?n(s,e):0===a.byteLength?n({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:nc,xhr:r},e):(e.map.bytes=new Uint8Array(r.response),t&&!t.isInitialized()&&t.init(),e.map.timescales=Ao.timescale(e.map.bytes),e.map.videoTrackIds=Ao.videoTrackIds(e.map.bytes),n(null,e))}}(r,i,l));o.push(c)}var d=e(Xr.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:Wl(r)}),function(e,t,n){return function(i,r){var a=r.response,s=Ku(i,r),o=void 0;return s?n(s,e):0===a.byteLength?n({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:nc,xhr:r},e):(e.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),e.key?e.encryptedBytes=new Uint8Array(r.response):e.bytes=new Uint8Array(r.response),t&&e.map&&e.map.bytes&&(t.isInitialized()||t.init(),(o=t.parse(e.bytes,e.map.videoTrackIds,e.map.timescales))&&o.captions&&(e.captionStreams=o.captionStreams,e.fmp4Captions=o.captions)),n(null,e))}}(r,i,l));return d.addEventListener("progress",function(e,t){return function(n){return e.stats=Xr.mergeOptions(e.stats,function(e){var t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(n)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(n,e)}}(r,a)),o.push(d),function(){return Xu(o)}}(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t=function(e,t,n){var i=t-30;return e.length&&(i=Math.max(i,e.start(0))),Math.min(t-n,i)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<t&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,n={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var i=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(t.key),n.key.iv=i}return t.map&&(n.map=this.initSegment(t.map)),n}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===rc?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===ic?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),t.key&&this.segmentKey(t.key,!0),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(function(e,t,n){for(var i in n)if(!e[i]){t.trigger({type:"usage",name:"hls-608"});var r=t.textTracks().getTrackById(i);e[i]=r||t.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),function(e){var t=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var r=window.WebKitDataCue||window.VTTCue;n.forEach((function(e){var n=e.stream,a=e.startTime,s=e.endTime;t[n]&&t[n].addCue(new r(a+=i,s+=i,e.text))}))}}({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,n=t.segment,i=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&i&&(i.containsAudio||i.containsVideo)&&(this.startingMedia_={containsAudio:i.containsAudio,containsVideo:i.containsVideo});var r=function(e,t,n){return"main"===e&&t&&n?n.containsAudio||n.containsVideo?t.containsVideo&&!n.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.containsVideo&&n.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.startingMedia_,i);if(r)return this.error({message:r,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(i&&i.segmentTimestampInfo&&(t.timestampOffset-=i.segmentTimestampInfo[0].ptsTime-i.segmentTimestampInfo[0].dtsTime),this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset"));var a=this.syncController_.mappingForTimeline(t.timeline);if(null!==a&&this.trigger({type:"segmenttimemapping",mapping:a}),this.state="APPENDING",n.map){var s=Zl(n.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==s){var o=this.initSegment(n.map);this.sourceUpdater_.appendBuffer({bytes:o.bytes},(function(){e.activeInitSegmentId_=s}))}}t.byteLength=t.bytes.byteLength,this.mediaSecondsLoaded+="number"==typeof n.start&&"number"==typeof n.end?n.end-n.start:n.duration,this.logger_(function(e){var t=e.segment,n=e.playlist,i=n.mediaSequence,r=n.segments;return["appending ["+e.mediaIndex+"] of ["+i+", "+(i+(void 0===r?[]:r).length)+"] from playlist ["+n.id+"]","["+t.start+" => "+t.end+"] in timeline ["+e.timeline+"]"].join(" ")}(t)),this.sourceUpdater_.appendBuffer({bytes:t.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,t.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment;n.videoTimingInfo||(n.videoTimingInfo={}),n.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||0,n.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,n.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,n.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(e.mediaIndex+1,e.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(t){if(this.segmentMetadataTrack_){var n=t.segment,i=n.start,r=n.end;if(ec(i)&&ec(r)){nu(i,r,this.segmentMetadataTrack_);var a={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:i,end:r},s=new(e.WebKitDataCue||e.VTTCue)(i,r,JSON.stringify(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}}}]),sc);function sc(e){pl(this,sc);var t=yl(this,(sc.__proto__||Object.getPrototypeOf(sc)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.cacheEncryptionKeys_=e.cacheEncryptionKeys,t.keyCache_={},t.captionParser_="main"===t.loaderType_?new Bo:null,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.triggerSyncInfoUpdate_=function(){return t.trigger("syncinfoupdate")},t.syncController_.on("syncinfoupdate",t.triggerSyncInfoUpdate_),t.mediaSource_.addEventListener("sourceopen",(function(){return t.ended_=!1})),t.fetchAtBuffer_=!1,t.logger_=Vu("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}function oc(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}var lc=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),uc=(vl(cc,ac),gl(cc,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Xr.createTimeRanges();var e=this.subtitlesTrack_.cues;return Xr.createTimeRanges([[e[0].startTime,e[e.length-1].startTime]])}},{key:"initSegment",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!e)return null;var i=Zl(e),r=this.initSegments_[i];if(n&&!r&&e.bytes){var a=lc.byteLength+e.bytes.byteLength,s=new Uint8Array(a);s.set(e.bytes),s.set(lc,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:s}}return r||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){nu(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var n=this.pendingSegment_,i=n.segment;if("function"!=typeof e.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=void 0,a=function(){t.subtitlesTrack_.tech_.off("vttjsloaded",r),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")};return r=function(){t.subtitlesTrack_.tech_.off("vttjserror",a),t.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",r),void this.subtitlesTrack_.tech_.one("vttjserror",a)}i.requested=!0;try{this.parseVTTCues_(n)}catch(n){return this.error({message:n.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,n.cues.length&&this.remove(n.cues[0].endTime,n.cues[n.cues.length-1].endTime),n.cues.forEach((function(n){t.subtitlesTrack_.addCue(t.featuresNativeTextTracks_?new e.VTTCue(n.startTime,n.endTime,n.text):n)})),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(t){var n=void 0,i=!1;"function"==typeof e.TextDecoder?n=new e.TextDecoder("utf8"):(n=e.WebVTT.StringDecoder(),i=!0);var r=new e.WebVTT.Parser(e,e.vttjs,n);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=t.cues.push.bind(t.cues),r.ontimestampmap=function(e){return t.timestampmap=e},r.onparsingerror=function(e){Xr.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var a=t.segment.map.bytes;i&&(a=oc(a)),r.parse(a)}var s=t.bytes;i&&(s=oc(s)),r.parse(s),r.flush()}},{key:"updateTimeMapping_",value:function(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/9e4-r.LOCAL+t.mapping;e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(e.cues[0].startTime,e.cues[e.cues.length-1].startTime-i.duration)})}else i.empty=!0}}]),cc);function cc(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};pl(this,cc);var n=yl(this,(cc.__proto__||Object.getPrototypeOf(cc)).call(this,e,t));return n.mediaSource_=null,n.subtitlesTrack_=null,n.featuresNativeTextTracks_=e.featuresNativeTextTracks,n}function dc(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null}var hc=[{name:"VOD",run:function(e,t,n,i,r){return n===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(e,t,n,i,r){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.dateTimeObject){var c=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(r-c);if(null!==o&&(0===d||o<d))break;o=d,s={time:c,segmentIndex:l}}}return s}},{name:"Segment",run:function(e,t,n,i,r){var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.timeline===i&&void 0!==u.start){var c=Math.abs(r-u.start);if(null!==o&&o<c)break;(!s||null===o||c<=o)&&(o=c,s={time:u.start,segmentIndex:l})}}return s}},{name:"Discontinuity",run:function(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],u=e.discontinuities[t.discontinuitySequence+o+1];if(u){var c=Math.abs(r-u.time);if(null!==s&&s<c)break;(!a||null===s||c<=s)&&(s=c,a={time:u.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(e,t,n,i,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],fc=(vl(pc,Xr.EventTarget),gl(pc,[{key:"getSyncPoint",value:function(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return 0<i.segmentIndex&&(i.time*=-1),Math.abs(i.time+Rl(e,i.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,n,i){for(var r=[],a=0;a<hc.length;a++){var s=hc[a],o=s.run(this,e,t,n,i);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r}},{key:"selectSyncPoint_",value:function(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<i&&(i=s,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;0<=n;n--){var i=e.segments[n];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t,n=e.segment,i=e.playlist;return(t=n.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,t)&&(this.saveDiscontinuitySyncInfo_(e),i.syncInfo||(i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:n.start})),t}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,n=Ao.timescale(t.map.bytes),i=Ao.compositionStartTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=i),{start:i,end:i+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=function(e,t){var n;return(n=qo.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,a=null,s=0,o=0;3<=e.length-o;){switch(qo.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((s=qo.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===a&&(t=e.subarray(o,o+s),a=qo.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=qo.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+s),r=qo.aac.parseSampleRate(t)),i++,o+=s;break;default:o++}if(n)return null}if(null===r||null===a)return null;var l=Jo/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*l,pts:a+1024*i*l}]}}(e):function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,i=0,r=Qo;r<e.byteLength;)if(71!==e[i]||71!==e[r])i++,r++;else{switch(n=e.subarray(i,r),qo.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=qo.ts.parsePat(n));break;case"pmt":t.table||(t.table=qo.ts.parsePmt(n))}if(t.pid&&t.table)return;i+=Qo,r+=Qo}}(e,t),t.table)if(t.table.hasOwnProperty(i))switch(t.table[i]){case 27:n.video=[],Ko(e,t,n),0===n.video.length&&delete n.video;break;case 15:n.audio=[],Xo(e,t,n),0===n.audio.length&&delete n.audio}return n}(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Zo(e.dts,n),e.pts=Zo(e.pts,n),e.dtsTime=e.dts/Jo,e.ptsTime=e.pts/Jo}))}if(e.video&&e.video.length){var i=t;if(void 0===i&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=Zo(e.dts,i),e.pts=Zo(e.pts,i),e.dtsTime=e.dts/Jo,e.ptsTime=e.pts/Jo})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Zo(r.dts,i),r.pts=Zo(r.pts,i),r.dtsTime=r.dts/Jo,r.ptsTime=r.dts/Jo}}}(n,t),n):null}(e.bytes,this.inspectCache_),n=void 0,i=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,i=t.video[1].dtsTime,r=t.video):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,i=t.audio[1].dtsTime,r=t.audio),{segmentTimestampInfo:r,start:n,end:i,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var n=e.segment,i=this.timelines[e.timeline];if(null!==e.timestampOffset)this.timelines[e.timeline]=i={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+i.time+"] [mapping: "+i.mapping+"]"),n.start=e.startOfSegment,n.end=t.end+i.mapping;else{if(!i)return!1;n.start=t.start+i.mapping,n.end=t.end+i.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r,a=t.discontinuityStarts[i],s=t.discontinuitySequence+i+1,o=a-e.mediaIndex,l=Math.abs(o);(!this.discontinuities[s]||this.discontinuities[s].accuracy>l)&&(r=o<0?n.start-Rl(t,e.mediaIndex,a):n.end+Rl(t,e.mediaIndex+1,a),this.discontinuities[s]={time:r,accuracy:l})}}},{key:"dispose",value:function(){this.trigger("dispose"),this.off()}}]),pc);function pc(){pl(this,pc);var e=yl(this,(pc.__proto__||Object.getPrototypeOf(pc)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Vu("SyncController"),e}function gc(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)}function mc(e,t){(t.activePlaylistLoader=e).load()}var vc=new mu("./decrypter-worker.worker.js",(function(e,t){var n,i,r,a,s,o,l;function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e){u(this,d),i=i||function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],a=void 0,s=void 0,o=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,f=void 0,p=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!i[s];s^=c||1,o=u[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,p=16843009*l[d=l[c=l[r[i[s]=h]=s]]]^65537*d^257*c^16843008*s,f=257*l[h]^16843008*h,a=0;a<4;a++)t[a][s]=f=f<<24^f>>>8,n[a][h]=p=p<<24^p>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e}(),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];var t=void 0,n=void 0,r=void 0,a=void 0,s=void 0,o=this._tables[0][4],l=this._tables[1],c=e.length,h=1;if(4!==c&&6!==c&&8!==c)throw new Error("Invalid aes key size");for(a=e.slice(0),this._key=[a,s=[]],t=c;t<4*c+28;t++)r=a[t-1],(t%c==0||8===c&&t%c==4)&&(r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[255&r],t%c==0&&(r=r<<8^r>>>24^h<<24,h=h<<1^283*(h>>7))),a[t]=a[t-c]^r;for(n=0;t;n++,t--)r=a[3&n?t:t-4],s[n]=t<=4||n<4?r:l[0][o[r>>>24]]^l[1][o[r>>16&255]]^l[2][o[r>>8&255]]^l[3][o[255&r]]}function h(){u(this,h),this.listeners={}}function f(){u(this,f);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,a));return e.jobs=[],e.delay=1,e.timeout_=null,e}function p(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}function g(e,t,n,i){u(this,g);var r=g.STEP,a=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),l=0;for(this.asyncStream_=new o,this.asyncStream_.push(this.decryptChunk_(a.subarray(l,l+r),t,n,s)),l=r;l<a.length;l+=r)n=new Uint32Array([p(a[l-4]),p(a[l-3]),p(a[l-2]),p(a[l-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(l,l+r),t,n,s));this.asyncStream_.push((function(){i(null,function(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}(s))}))}n=function(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e},i=null,d.prototype.decrypt=function(e,t,n,i,r,a){var s=this._key[1],o=e^s[0],l=i^s[1],u=n^s[2],c=t^s[3],d=void 0,h=void 0,f=void 0,p=s.length/4-2,g=void 0,m=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],T=v[3],w=v[4];for(g=0;g<p;g++)d=y[o>>>24]^b[l>>16&255]^_[u>>8&255]^T[255&c]^s[m],h=y[l>>>24]^b[u>>16&255]^_[c>>8&255]^T[255&o]^s[m+1],f=y[u>>>24]^b[c>>16&255]^_[o>>8&255]^T[255&l]^s[m+2],c=y[c>>>24]^b[o>>16&255]^_[l>>8&255]^T[255&u]^s[m+3],m+=4,o=d,l=h,u=f;for(g=0;g<4;g++)r[(3&-g)+a]=w[o>>>24]<<24^w[l>>16&255]<<16^w[u>>8&255]<<8^w[255&c]^s[m++],d=o,o=l,l=u,u=c,c=d},r=d,h.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},h.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},h.prototype.trigger=function(e,t){var n=this.listeners[e];if(n)if(2===arguments.length)for(var i=n.length,r=0;r<i;++r)n[r].call(this,t);else for(var a=Array.prototype.slice.call(arguments,1),s=n.length,o=0;o<s;++o)n[o].apply(this,a)},h.prototype.dispose=function(){this.listeners={}},h.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}))},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,s=a=h),f.prototype.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},f.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},o=f,g.prototype.decryptChunk_=function(e,t,n,i){return function(){var a=function(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),a=new r(Array.prototype.slice.call(t)),s=new Uint8Array(e.byteLength),o=new Int32Array(s.buffer),l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,g=void 0,m=void 0,v=void 0;for(l=n[0],u=n[1],c=n[2],d=n[3],v=0;v<i.length;v+=4)h=p(i[v]),f=p(i[v+1]),g=p(i[v+2]),m=p(i[v+3]),a.decrypt(h,f,g,m,o,v),o[v]=p(o[v]^l),o[v+1]=p(o[v+1]^u),o[v+2]=p(o[v+2]^c),o[v+3]=p(o[v+3]^d),l=h,u=f,c=g,d=m;return s}(e,t,n);i.set(a,e.byteOffset)}},n(g,null,[{key:"STEP",get:function(){return 32e3}}]),l=g,new function(e){e.onmessage=function(t){var n=t.data,i=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),r=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),a=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new l(i,r,a,(function(t,i){e.postMessage(function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];t[n]=ArrayBuffer.isView(i)?{bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:i})),t}({source:n.source,decrypted:i}),[i.buffer])}))}}(this)})),yc={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e],i=t.blacklistCurrentPlaylist;gc(t.segmentLoaders[e],n);var r=n.activeTrack(),a=n.activeGroup(),s=(a.filter((function(e){return e.default}))[0]||a[0]).id,o=n.tracks[s];if(r!==o){for(var l in Xr.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[l].enabled=n.tracks[l]===o;n.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];Xr.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),gc(n,i);var r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}}},bc={AUDIO:function(e,t,n){if(t){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",yc[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",yc[e](e,n))}},_c={AUDIO:function(e,t){var n,i,r=t.hls,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,u=t.mediaTypes[e],c=u.groups,d=u.tracks,h=t.masterPlaylistLoader;for(var f in l[e]&&0!==Object.keys(l[e]).length||(l[e]={main:{default:{default:!0}}}),l[e])for(var p in c[f]||(c[f]=[]),l[e][f]){var g,m=l[e][f][p];if(g=m.resolvedUri?new Il(m.resolvedUri,r,o):m.playlists&&"dash"===a?new Wu(m.playlists[0],r,o,h):null,m=Xr.mergeOptions({id:p,playlistLoader:g},m),bc[e](e,m.playlistLoader,t),c[f].push(m),void 0===d[p]){var v=new Xr.AudioTrack({id:p,kind:(n=m,i=void 0,i=n.default?"main":"alternative",n.characteristics&&0<=n.characteristics.indexOf("public.accessibility.describes-video")&&(i="main-desc"),i),enabled:!1,language:m.language,default:m.default,label:p});d[p]=v}}s.on("error",yc[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.hls,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.masterPlaylistLoader;for(var h in o[e])for(var f in u[h]||(u[h]=[]),o[e][h])if(!o[e][h][f].forced){var p=o[e][h][f],g=void 0;if("hls"===r?g=new Il(p.resolvedUri,i,s):"dash"===r&&(g=new Wu(p.playlists[0],i,s,d)),p=Xr.mergeOptions({id:f,playlistLoader:g},p),bc[e](e,p.playlistLoader,t),u[h].push(p),void 0===c[f]){var m=n.addRemoteTextTrack({id:f,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:f},!1).track;c[f]=m}}a.on("error",yc[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;for(var o in i[e])for(var l in a[o]||(a[o]=[]),i[e][o]){var u=i[e][o][l];if(u.instreamId.match(/CC\d/)&&(a[o].push(Xr.mergeOptions({id:l},u)),void 0===s[l])){var c=n.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default&&u.autoselect,language:u.language,label:l},!1).track;s[l]=c}}}},Tc={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},wc=void 0,Sc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Ec=(vl(Cc,Xr.EventTarget),gl(Cc,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;e.requestOptions_.timeout=Gl(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?0:n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){_c[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,r=e.hls;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var i=t.mediaTypes[e].groups,r=t.masterPlaylistLoader.media();if(!r)return null;var a=null;return r.attributes[e]&&(a=i[r.attributes[e]]),a=a||i.main,void 0===n?a:null===n?null:a.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=Tc[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],r=n.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),l=a.activePlaylistLoader;gc(i,a),o&&(o.playlistLoader?(i.resyncLoader(),mc(o.playlistLoader,a)):l&&r.resetEverything())}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],r=n.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),l=a.activePlaylistLoader;gc(i,a),o&&(o.playlistLoader?(l!==o.playlistLoader&&(i.track&&i.track(s),i.resetEverything()),mc(o.playlistLoader,a)):r.resetEverything())}}(n,e)}));var a=t.AUDIO.activeGroup(),s=(a.filter((function(e){return e.default}))[0]||a[0]).id;function o(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"hls-audio-change"})}for(var l in t.AUDIO.tracks[s].enabled=!0,t.AUDIO.onTrackChanged(),n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),i.audioTracks().addEventListener("change",o),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(function(){i.audioTracks().removeEventListener("change",o),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),i.clearTracks("audio"),t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[l])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(t){return Xr.log.warn("Failed to create SourceBuffers",t),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var n=void 0;return e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n=n||e.selectPlaylist(),e.initialMedia_=n,void e.masterPlaylistLoader_.media(e.initialMedia_)}if(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&&e.audioSegmentLoader_.load()),!t.endList){var i=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};e.duration()!==1/0?e.tech_.one("durationchange",(function t(){e.duration()===1/0?i():e.tech_.one("durationchange",t)})):i()}})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;e.requestOptions_.timeout=Gl(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?0:n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))}},{key:"triggerPresenceUsage_",value:function(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var s in n.AUDIO[a])n.AUDIO[a][s].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),wc.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),wc.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&1<Object.keys(n.AUDIO[r[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist(),n=e.masterPlaylistLoader_.media(),i=e.tech_.buffered();!function(e){var t=e.currentPlaylist,n=e.nextPlaylist;return n?!t.endList||e.duration<tc.MAX_BUFFER_LOW_WATER_LINE||n.attributes.BANDWIDTH<t.attributes.BANDWIDTH||e.bufferLowWaterLine<=e.forwardBuffer:(Xr.log.warn("We received no playlist to switch to. Please check your stream."),!1)}({currentPlaylist:n,nextPlaylist:t,forwardBuffer:i.length?i.end(i.length-1)-e.tech_.currentTime():0,bufferLowWaterLine:e.bufferLowWaterLine(),duration:e.duration(),log:e.logger_})||e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("ended",(function(){e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)})),this.mainSegmentLoader_.on("reseteverything",(function(){e.tech_.trigger("hls-reset")})),this.mainSegmentLoader_.on("segmenttimemapping",(function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})})),this.audioSegmentLoader_.on("ended",(function(){e.onEndOfStream()}))}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything((function(){e.tech_.setCurrentTime(Xr.browser.IE_VERSION||Xr.browser.IS_EDGE?e.tech_.currentTime()+.04:e.tech_.currentTime())})))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(Xr.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return Xr.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(e){Xr.log.warn("Failed to call media source endOfStream",e)}}}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var n=wc.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=.1;var a=r.end(r.length-1);return a-i<=.1&&n-a<=.1}},{key:"blacklistCurrentPlaylist",value:function(e,t){var n,i=0<arguments.length&&void 0!==e?e:{},r=t,a=void 0;if(a=i.playlist||this.masterPlaylistLoader_.media(),r=r||i.blacklistDuration||this.blacklistDuration,!a){this.error=i;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var s=1===this.masterPlaylistLoader_.master.playlists.filter(Bl).length,o=this.masterPlaylistLoader_.master.playlists;return 1===o.length?(Xr.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s)):(s&&(Xr.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),o.forEach((function(e){e.excludeUntil!==1/0&&delete e.excludeUntil})),this.tech_.trigger("retryplaylist")),a.excludeUntil=Date.now()+1e3*r,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),n=this.selectPlaylist(),Xr.log.warn("Problem encountered with the current HLS playlist."+(i.message?" "+i.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(n,s))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Ql(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:wc.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(null!==n){var i=this.masterPlaylistLoader_.master.suggestedPresentationDelay,r=wc.Playlist.seekable(t,n,i);if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.mediaSource.duration)))return;if(0===(e=wc.Playlist.seekable(t,n,i)).length)return}var a=void 0,s=void 0;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),s=this.seekable_.start(0)),this.seekable_=e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?r:Xr.createTimeRanges([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+eu(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}}},{key:"updateDuration",value:function(){function e(){t.logger_("Setting duration from "+t.mediaSource.duration+" => "+i);try{t.mediaSource.duration=i}catch(e){Xr.log.warn("Failed to set media source duration",e)}t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",e)}var t=this,n=this.mediaSource.duration,i=wc.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered();0<r.length&&(i=Math.max(i,r.end(r.length-1))),n!==i&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",e):e())}},{key:"dispose",value:function(){var e=this;this.trigger("dispose"),this.decrypter_&&this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var i in n)n[i].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.off(),this.mediaSource.dispose&&this.mediaSource.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=function(e,t){var n=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"}(t),i=function(e){var t=e.attributes||{};return t.CODECS?wu(t.CODECS):Iu}(t),r=t.attributes||{},a=!0,s=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&r.AUDIO){var o=e.mediaGroups.AUDIO[r.AUDIO];if(o)for(var l in a=!(s=!0),o)if(!o[l].uri&&!o[l].playlists){a=!0;break}}s&&!i.audioProfile&&(a||(i.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return wu(r.playlists[0].attributes.CODECS).audioProfile}return null}(e,r.AUDIO)),i.audioProfile||(Xr.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),i.audioProfile=Iu.audioProfile));var u={};i.videoCodec&&(u.video=""+i.videoCodec+i.videoObjectTypeIndicator),i.audioProfile&&(u.audio="mp4a.40."+i.audioProfile);var c=Su("audio",n,[u.audio]),d=Su("video",n,[u.video]),h=Su("video",n,[u.video,u.audio]);return s?!a&&u.video?[d,c]:a||u.video?[h,c]:[c,c]:u.video?[h]:[c]}(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=1<e.length&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new Xr.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach((function(t){t.attributes.CODECS&&e.MediaSource&&e.MediaSource.isTypeSupported&&!e.MediaSource.isTypeSupported('video/mp4; codecs="'+function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e){return Tu([e])[0]}))}(t.attributes.CODECS)+'"')&&(t.excludeUntil=1/0)}))}},{key:"excludeIncompatibleVariants_",value:function(e){var t=2,n=null,i=void 0;e.attributes.CODECS&&(i=wu(e.attributes.CODECS),n=i.videoCodec,t=i.codecCount),this.master().playlists.forEach((function(e){var i={codecCount:2,videoCodec:null};e.attributes.CODECS&&(i=wu(e.attributes.CODECS)),i.codecCount!==t&&(e.excludeUntil=1/0),i.videoCodec!==n&&(e.excludeUntil=1/0)}))}},{key:"updateAdCues_",value:function(t){var n=0,i=this.seekable();i.length&&(n=i.start(0)),function(t,n,i){var r=2<arguments.length&&void 0!==i?i:0;if(t.segments)for(var a=r,s=void 0,o=0;o<t.segments.length;o++){var l=t.segments[o];if(s=s||dc(n,a+l.duration/2)){if("cueIn"in l){s.endTime=a,s.adEndTime=a,a+=l.duration,s=null;continue}if(a<s.endTime){a+=l.duration;continue}s.endTime+=l.duration}else if("cueOut"in l&&((s=new e.VTTCue(a,a+l.duration,l.cueOut)).adStartTime=a,s.adEndTime=a+parseFloat(l.cueOut),n.addCue(s)),"cueOutCont"in l){var u,c,d=l.cueOutCont.split("/").map(parseFloat),h=Cl(d,2);u=h[0],c=h[1],(s=new e.VTTCue(a,a+l.duration,"")).adStartTime=a-u,s.adEndTime=s.adStartTime+c,n.addCue(s)}a+=l.duration}}(t,this.cueTagsTrack_,n)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=tc.GOAL_BUFFER_LENGTH,n=tc.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,tc.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=tc.BUFFER_LOW_WATER_LINE,n=tc.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,tc.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,i)}}]),Cc);function Cc(e){pl(this,Cc);var t=yl(this,(Cc.__proto__||Object.getPrototypeOf(Cc)).call(this)),n=e.url,i=e.handleManifestRedirects,r=e.withCredentials,a=e.tech,s=e.bandwidth,o=e.externHls,l=e.useCueTags,u=e.blacklistDuration,c=e.enableLowInitialPlaylist,d=e.cacheEncryptionKeys,h=e.sourceType;if(!n)throw new Error("A non-empty playlist URL is required");wc=o,t.withCredentials=r,t.tech_=a,t.hls_=a.hls,t.sourceType_=h,t.useCueTags_=l,t.blacklistDuration=u,t.enableLowInitialPlaylist=c,t.useCueTags_&&(t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues"),t.cueTagsTrack_.inBandMetadataTrackDispatchType=""),t.requestOptions_={withCredentials:r,handleManifestRedirects:i,timeout:null},t.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Yu,activeTrack:Yu,onGroupChanged:Yu,onTrackChanged:Yu}})),e}(),t.mediaSource=new Xr.MediaSource,t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_.bind(t)),t.seekable_=Xr.createTimeRanges(),t.hasPlayed_=!1,t.syncController_=new fc(e),t.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,t.decrypter_=new vc,t.inbandTextTracks_={};var f={hls:t.hls_,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function(){return t.seekable()},seeking:function(){return t.tech_.seeking()},duration:function(){return t.mediaSource.duration},hasPlayed:function(){return t.hasPlayed_},goalBufferLength:function(){return t.goalBufferLength()},bandwidth:s,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_,cacheEncryptionKeys:d};return t.masterPlaylistLoader_="dash"===t.sourceType_?new Wu(n,t.hls_,t.requestOptions_):new Il(n,t.hls_,t.requestOptions_),t.setupMasterPlaylistLoaderListeners_(),t.mainSegmentLoader_=new ac(Xr.mergeOptions(f,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),e),t.audioSegmentLoader_=new ac(Xr.mergeOptions(f,{loaderType:"audio"}),e),t.subtitleSegmentLoader_=new uc(Xr.mergeOptions(f,{loaderType:"vtt",featuresNativeTextTracks:t.tech_.featuresNativeTextTracks}),e),t.setupSegmentLoaderListeners_(),Sc.forEach((function(e){t[e+"_"]=(function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}).bind(t,e)})),t.logger_=Vu("MPC"),t.masterPlaylistLoader_.load(),t}function kc(e,t,n){pl(this,kc);var i=e.masterPlaylistController_,r=i[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(i);if(t.attributes.RESOLUTION){var a=t.attributes.RESOLUTION;this.width=a.width,this.height=a.height}this.bandwidth=t.attributes.BANDWIDTH,this.id=n,this.enabled=function(e,t,n){return function(i){var r=e.master.playlists[t],a=jl(r),s=Bl(r);return void 0===i?s:(i?delete r.disabled:r.disabled=!0,i===s||a||(n(),e.trigger(i?"renditionenabled":"renditiondisabled")),i)}}(e.playlists,t.id,r)}var Ac=["seeking","seeked","pause","playing","error"],Ic=(gl(xc,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&e.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=e.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var e=this.seekable(),t=this.tech_.currentTime(),n=void 0;return this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=e.end(e.length-1)),this.beforeSeekableWindow_(e,t)&&(n=e.start(0)+.1),void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+eu(e)+". Seeking to "+n+"."),this.tech_.setCurrentTime(n),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=Ql(this.tech_.buffered(),e);return t.length&&e+3<=t.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.buffered(),r=$l(i,t);if(this.videoUnderflow_(r,i,t))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<r.length){var a=r.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t,n,i){var r=3<arguments.length&&void 0!==i&&i;if(!e.length)return!1;var a=e.end(e.length-1)+.1;return!n.endList&&r&&(a=e.end(e.length-1)+3*n.targetDuration),a<t}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-.1)}},{key:"videoUnderflow_",value:function(e,t,n){if(0===e.length){var i=this.gapFromVideoUnderflow_(t,n);if(i)return this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=$l(t,n);this.cancelTimer_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=function(e){if(e.length<2)return Xr.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return Xr.createTimeRanges(t)}(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&2<t-r)return{start:r,end:a}}return null}}]),xc);function xc(t){var n=this;function i(){return n.monitorCurrentTime_()}function r(){return n.techWaiting_()}function a(){return n.cancelTimer_()}function s(){return n.fixesBadSeeks_()}pl(this,xc),this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Vu("PlaybackWatcher"),this.logger_("initialize"),this.tech_.on("seekablechanged",s),this.tech_.on("waiting",r),this.tech_.on(Ac,a),this.tech_.on("canplay",i),this.dispose=function(){n.logger_("dispose"),n.tech_.off("seekablechanged",s),n.tech_.off("waiting",r),n.tech_.off(Ac,a),n.tech_.off("canplay",i),n.checkCurrentTimeTimeout_&&e.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}function Lc(e){!function e(t,n){var i=0,r=0,a=Xr.mergeOptions(Dc,n);function s(){r&&t.currentTime(r)}function o(e){null!=e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())}function l(){if(Date.now()-i<1e3*a.errorInterval)t.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(a.getSource&&"function"==typeof a.getSource)return i=Date.now(),a.getSource.call(t,o);Xr.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}}function u(){t.off("loadedmetadata",s),t.off("error",l),t.off("dispose",u)}t.ready((function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})})),t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(n){u(),e(t,n)}}(this,e)}var Dc={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Rc={PlaylistLoader:Il,Playlist:ou,Decrypter:cl,AsyncStream:sl,decrypt:ul,utils:cu,STANDARD_PLAYLIST_SELECTOR:function(){var t=this.useDevicePixelRatio&&e.devicePixelRatio||1;return function(t,n,i,r,a){var s=t.playlists.map((function(t){return{bandwidth:t.attributes.BANDWIDTH||e.Number.MAX_VALUE,width:t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,height:t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height,playlist:t}}));Qu(s,(function(e,t){return e.bandwidth-t.bandwidth}));var o=(s=s.filter((function(e){return!ou.isIncompatible(e.playlist)}))).filter((function(e){return ou.isEnabled(e.playlist)}));o.length||(o=s.filter((function(e){return!ou.isDisabled(e.playlist)})));var l=o.filter((function(e){return e.bandwidth*tc.BANDWIDTH_VARIANCE<n})),u=l[l.length-1],c=l.filter((function(e){return e.bandwidth===u.bandwidth}))[0];if(!1===a){var d=c||o[0]||s[0];return d?d.playlist:null}var h=l.filter((function(e){return e.width&&e.height}));Qu(h,(function(e,t){return e.width-t.width}));var f=h.filter((function(e){return e.width===i&&e.height===r}));u=f[f.length-1];var p=f.filter((function(e){return e.bandwidth===u.bandwidth}))[0],g=void 0,m=void 0,v=void 0;p||(m=(g=h.filter((function(e){return e.width>i||e.height>r}))).filter((function(e){return e.width===g[0].width&&e.height===g[0].height})),u=m[m.length-1],v=m.filter((function(e){return e.bandwidth===u.bandwidth}))[0]);var y=v||p||c||o[0]||s[0];return y?y.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Ju(this.tech_.el(),"width"),10)*t,parseInt(Ju(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(ou.isEnabled);return Qu(e,(function(e,t){return $u(e,t)})),e.filter((function(e){return wu(e.attributes.CODECS).videoCodec}))[0]||null},comparePlaylistBandwidth:$u,comparePlaylistResolution:function(t,n){var i=void 0,r=void 0;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(r=n.attributes.RESOLUTION.width),(i=i||e.Number.MAX_VALUE)===(r=r||e.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?t.attributes.BANDWIDTH-n.attributes.BANDWIDTH:i-r},xhr:Hl()};function Pc(e){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)?"hls":/^application\/dash\+xml/i.test(e)?"dash":null}function Oc(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})}["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach((function(e){Object.defineProperty(Rc,e,{get:function(){return Xr.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),tc[e]},set:function(t){Xr.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?Xr.log.warn("value of Hls."+e+" must be greater than or equal to 0"):tc[e]=t}})}));var Nc="videojs-vhs";function Mc(){if(!window.localStorage)return null;var e=window.localStorage.getItem(Nc);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}Rc.canPlaySource=function(){return Xr.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},Rc.supportsNativeHls=function(){var e=t.createElement("video");return!!Xr.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Rc.supportsNativeDash=!!Xr.getTech("Html5").isSupported()&&/maybe|probably/i.test(t.createElement("video").canPlayType("application/dash+xml")),Rc.supportsTypeNatively=function(e){return"hls"===e?Rc.supportsNativeHls:"dash"===e&&Rc.supportsNativeDash},Rc.isSupported=function(){return Xr.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Uc=(vl(jc,Xr.getComponent("Component")),gl(jc,[{key:"setOptions_",value:function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Mc();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=tc.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===tc.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}},{key:"src",value:function(e,t){var n=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Rc,this.options_.sourceType=Pc(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.masterPlaylistController_=new Ec(this.options_),this.playbackWatcher_=new Ic(Xr.mergeOptions(this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",(function(){Xr.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)})),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Rc.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Rc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){Xr.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return tu(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return tu(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(window.localStorage){var t=Mc();t=t?Xr.mergeOptions(t,e):e;try{window.localStorage.setItem(Nc,JSON.stringify(t))}catch(e){return}}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){!function(e){var t=e.playlists;e.representations=function(){return t&&t.master&&t.master.playlists?t.master.playlists.filter((function(e){return!jl(e)})).map((function(t,n){return new kc(e,t,t.id)})):[]}}(n),function(e){var t=Xr.players[e.tech_.options_.playerId];if(t.eme){var n=function(e,t,n){if(!e)return e;var i=void 0,r=void 0;if(n.mimeType_)i=t.mimeType_,r=n.mimeType_;else{var a=Eu(t.mimeType_),s=a.parameters.codecs.split(","),o=void 0,l=void 0;s.forEach((function(e){Cu(e=e.trim())?o=e:ku(e)&&(l=e)})),i=a.type+'; codecs="'+l+'"',r=a.type.replace("video","audio")+'; codecs="'+o+'"'}var u={},c=t.playlist_;for(var d in e)u[d]={audioContentType:r,videoContentType:i},c.contentProtection&&c.contentProtection[d]&&c.contentProtection[d].pssh&&(u[d].pssh=c.contentProtection[d].pssh),"string"==typeof e[d]&&(u[d].url=e[d]);return Xr.mergeOptions(e,u)}(e.source_.keySystems,e.masterPlaylistController_.mainSegmentLoader_,e.masterPlaylistController_.audioSegmentLoader_);n&&(t.currentSource().keySystems=n,11!==Xr.browser.IE_VERSION&&t.eme.initializeMediaKeys&&t.eme.initializeMediaKeys())}}(n)})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&this.tech_.src(Xr.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=Xr.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){!function(e,t){t.representations().forEach((function(t){e.addQualityLevel(t)})),Oc(e,t.playlists)}(e.qualityLevels_,e)})),this.playlists.on("mediachange",(function(){Oc(e.qualityLevels_,e.playlists)})))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(jc.prototype.__proto__||Object.getPrototypeOf(jc.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(e,t){return function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===i)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n=0,i=void 0,r=0;r<t.segments.length&&!(e<=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(n<e){if(e>n+.25*a.duration)return null;i=a}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(i,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:i},o=function(e,t){if(!t.dateTimeObject)return null;var n=e-(t.videoTimingInfo.transmuxedPresentationStart+t.videoTimingInfo.transmuxerPrependedSeconds);return new Date(t.dateTimeObject.getTime()+1e3*n)}(i,a.segment);return o&&(s.programDateTime=o.toISOString()),r(null,s)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToProgramTime",value:function(e,t,n,i){var r=!(2<arguments.length&&void 0!==n)||n,a=3<arguments.length&&void 0!==i?i:2;return Kl({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:a,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),jc);function jc(e,n,i){pl(this,jc);var r=yl(this,(jc.__proto__||Object.getPrototypeOf(jc)).call(this,n,i.hls));if(n.options_&&n.options_.playerId){var a=Xr(n.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return Xr.log.warn("player.hls is deprecated. Use player.tech().hls instead."),n.trigger({type:"usage",name:"hls-player-access"}),r},configurable:!0}),a.vhs=r,(a.dash=r).player_=a}if(r.tech_=n,r.source_=e,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(t,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var n=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement;n&&n.contains(r.tech_.el())&&r.masterPlaylistController_.smoothQualityChange_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),r.on(r.tech_,"error",(function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,"play",r.play),r}var Bc={name:"videojs-http-streaming",VERSION:"1.13.2",canHandleSource:function(e,t){var n=Xr.mergeOptions(Xr.options,1<arguments.length&&void 0!==t?t:{});return Bc.canPlayType(e.type,n)},handleSource:function(e,t,n){var i=Xr.mergeOptions(Xr.options,2<arguments.length&&void 0!==n?n:{});return t.hls=new Uc(e,t,i),t.hls.xhr=Hl(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e,t){var n=Xr.mergeOptions(Xr.options,1<arguments.length&&void 0!==t?t:{}).hls.overrideNative,i=Pc(e);return!i||Rc.supportsTypeNatively(i)&&!n?"":"maybe"}};return void 0!==Xr.MediaSource&&void 0!==Xr.URL||(Xr.MediaSource=Mu,Xr.URL=Uu),Mu.supportsNativeMediaSources()&&Xr.getTech("Html5").registerSourceHandler(Bc,0),Xr.HlsHandler=Uc,Xr.HlsSourceHandler=Bc,Xr.Hls=Rc,Xr.use||Xr.registerComponent("Hls",Rc),Xr.options.hls=Xr.options.hls||{},Xr.registerPlugin?Xr.registerPlugin("reloadSourceOnError",Lc):Xr.plugin("reloadSourceOnError",Lc),Xr})),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,(function(e,t){var n=[],i=e.document,r=n.slice,a=n.concat,s=n.push,o=n.indexOf,l={},u=l.toString,c=l.hasOwnProperty,d={},h="1.12.4",f=function(e,t){return new f.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g=/^-ms-/,m=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};function y(e){var t=!!e&&"length"in e&&e.length,n=f.type(e);return"function"!==n&&!f.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}f.fn=f.prototype={jquery:h,constructor:f,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=f.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return f.each(this,e)},map:function(e){return this.pushStack(f.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},f.extend=f.fn.extend=function(){var e,t,n,i,r,a,s=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[o]||{},o++),"object"==typeof s||f.isFunction(s)||(s={}),o===l&&(s=this,o--);l>o;o++)if(null!=(r=arguments[o]))for(i in r)e=s[i],s!==(n=r[i])&&(u&&n&&(f.isPlainObject(n)||(t=f.isArray(n)))?(t?(t=!1,a=e&&f.isArray(e)?e:[]):a=e&&f.isPlainObject(e)?e:{},s[i]=f.extend(u,a,n)):void 0!==n&&(s[i]=n));return s},f.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===f.type(e)},isArray:Array.isArray||function(e){return"array"===f.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!f.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==f.type(e)||e.nodeType||f.isWindow(e))return!1;try{if(e.constructor&&!c.call(e,"constructor")&&!c.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!d.ownFirst)for(t in e)return c.call(e,t);for(t in e);return void 0===t||c.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[u.call(e)]||"object":typeof e},globalEval:function(t){t&&f.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(g,"ms-").replace(m,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(y(e))for(n=e.length;n>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(y(Object(e))?f.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){var i;if(t){if(o)return o.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!=n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,s=!n;a>r;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,n){var i,r,s=0,o=[];if(y(e))for(i=e.length;i>s;s++)null!=(r=t(e[s],s,n))&&o.push(r);else for(s in e)null!=(r=t(e[s],s,n))&&o.push(r);return a.apply([],o)},guid:1,proxy:function(e,t){var n,i,a;return"string"==typeof t&&(a=e[t],t=e,e=a),f.isFunction(e)?(n=r.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(r.call(arguments)))}).guid=e.guid=e.guid||f.guid++,i):void 0},now:function(){return+new Date},support:d}),"function"==typeof Symbol&&(f.fn[Symbol.iterator]=n[Symbol.iterator]),f.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));var b=function(e){var t,n,i,r,a,s,o,l,u,c,d,h,f,p,g,m,v,y,b,_="sizzle"+1*new Date,T=e.document,w=0,S=0,E=ae(),C=ae(),k=ae(),A=function(e,t){return e===t&&(d=!0),0},I={}.hasOwnProperty,x=[],L=x.pop,D=x.push,R=x.push,P=x.slice,O=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j="\\["+M+"*("+U+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+M+"*\\]",B=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),G=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),H=new RegExp("^"+M+"*,"+M+"*"),W=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(B),Y=new RegExp("^"+U+"$"),Z={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,$=/'|\\/g,ee=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),te=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=function(){h()};try{R.apply(x=P.call(T.childNodes),T.childNodes)}catch(ne){R={apply:x.length?function(e,t){D.apply(e,P.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function re(e,t,i,r){var a,o,u,c,d,p,v,y,w=t&&t.ownerDocument,S=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==S&&9!==S&&11!==S)return i;if(!r&&((t?t.ownerDocument||t:T)!==f&&h(t),t=t||f,g)){if(11!==S&&(p=J.exec(e)))if(a=p[1]){if(9===S){if(!(u=t.getElementById(a)))return i;if(u.id===a)return i.push(u),i}else if(w&&(u=w.getElementById(a))&&b(t,u)&&u.id===a)return i.push(u),i}else{if(p[2])return R.apply(i,t.getElementsByTagName(e)),i;if((a=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return R.apply(i,t.getElementsByClassName(a)),i}if(n.qsa&&!k[e+" "]&&(!m||!m.test(e))){if(1!==S)w=t,y=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace($,"\\$&"):t.setAttribute("id",c=_),o=(v=s(e)).length,d=Y.test(c)?"#"+c:"[id='"+c+"']";o--;)v[o]=d+" "+ge(v[o]);y=v.join(","),w=Q.test(e)&&fe(t.parentNode)||t}if(y)try{return R.apply(i,w.querySelectorAll(y)),i}catch(E){}finally{c===_&&t.removeAttribute("id")}}}return l(e.replace(G,"$1"),t,i,r)}function ae(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function se(e){return e[_]=!0,e}function oe(e){var t=f.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function ue(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return se((function(t){return t=+t,se((function(n,i){for(var r,a=e([],n.length,t),s=a.length;s--;)n[r=a[s]]&&(n[r]=!(i[r]=n[r]))}))}))}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=re.support={},a=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=re.setDocument=function(e){var t,r,s=e?e.ownerDocument||e:T;return s!==f&&9===s.nodeType&&s.documentElement?(p=(f=s).documentElement,g=!a(f),(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ie,!1):r.attachEvent&&r.attachEvent("onunload",ie)),n.attributes=oe((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=oe((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=K.test(f.getElementsByClassName),n.getById=oe((function(e){return p.appendChild(e).id=_,!f.getElementsByName||!f.getElementsByName(_).length})),n.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}},i.filter.ID=function(e){var t=e.replace(ee,te);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(ee,te);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},i.find.CLASS=n.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&g?t.getElementsByClassName(e):void 0},v=[],m=[],(n.qsa=K.test(f.querySelectorAll))&&(oe((function(e){p.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+M+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+_+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]")})),oe((function(e){var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+M+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=K.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&oe((function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),v.push("!=",B)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=K.test(p.compareDocumentPosition),b=t||K.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===f||e.ownerDocument===T&&b(T,e)?-1:t===f||t.ownerDocument===T&&b(T,t)?1:c?O(c,e)-O(c,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,r=e.parentNode,a=t.parentNode,s=[e],o=[t];if(!r||!a)return e===f?-1:t===f?1:r?-1:a?1:c?O(c,e)-O(c,t):0;if(r===a)return ue(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)o.unshift(n);for(;s[i]===o[i];)i++;return i?ue(s[i],o[i]):s[i]===T?-1:o[i]===T?1:0},f):f},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&h(e),t=t.replace(z,"='$1']"),n.matchesSelector&&g&&!k[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return re(t,f,null,[e]).length>0},re.contains=function(e,t){return(e.ownerDocument||e)!==f&&h(e),b(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==f&&h(e);var r=i.attrHandle[t.toLowerCase()],a=r&&I.call(i.attrHandle,t.toLowerCase())?r(e,t,!g):void 0;return void 0!==a?a:n.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,i=[],r=0,a=0;if(d=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(A),d){for(;t=e[a++];)t===e[a]&&(r=i.push(a));for(;r--;)e.splice(i[r],1)}return c=null,e},r=re.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=re.selectors={cacheLength:50,createPseudo:se,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ee,te),e[3]=(e[3]||e[4]||e[5]||"").replace(ee,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ee,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=re.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,h,f,p,g=a!==s?"nextSibling":"previousSibling",m=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!l&&!o,b=!1;if(m){if(a){for(;g;){for(h=t;h=h[g];)if(o?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&y){for(b=(f=(u=(c=(d=(h=m)[_]||(h[_]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===w&&u[1])&&u[2],h=f&&m.childNodes[f];h=++f&&h&&h[g]||(b=f=0)||p.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[w,f,b];break}}else if(y&&(b=f=(u=(c=(d=(h=t)[_]||(h[_]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===w&&u[1]),!1===b)for(;(h=++f&&h&&h[g]||(b=f=0)||p.pop())&&((o?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&((c=(d=h[_]||(h[_]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[w,b]),h!==t)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return r[_]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?se((function(e,n){for(var i,a=r(e,t),s=a.length;s--;)e[i=O(e,a[s])]=!(n[i]=a[s])})):function(e){return r(e,0,n)}):r}},pseudos:{not:se((function(e){var t=[],n=[],i=o(e.replace(G,"$1"));return i[_]?se((function(e,t,n,r){for(var a,s=i(e,null,r,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))})):function(e,r,a){return t[0]=e,i(t,null,a,n),t[0]=null,!n.pop()}})),has:se((function(e){return function(t){return re(e,t).length>0}})),contains:se((function(e){return e=e.replace(ee,te),function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}})),lang:se((function(e){return Y.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(ee,te).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he((function(){return[0]})),last:he((function(e,t){return[t-1]})),eq:he((function(e,t,n){return[0>n?n+t:n]})),even:he((function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e})),odd:he((function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e})),lt:he((function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e})),gt:he((function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ce(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=de(t);function pe(){}function ge(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function me(e,t,n){var i=t.dir,r=n&&"parentNode"===i,a=S++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,a)}:function(t,n,s){var o,l,u,c=[w,a];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if((o=(l=(u=t[_]||(t[_]={}))[t.uniqueID]||(u[t.uniqueID]={}))[i])&&o[0]===w&&o[1]===a)return c[2]=o[2];if(l[i]=c,c[2]=e(t,n,s))return!0}}}function ve(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function ye(e,t,n,i,r){for(var a,s=[],o=0,l=e.length,u=null!=t;l>o;o++)(a=e[o])&&(n&&!n(a,i,r)||(s.push(a),u&&t.push(o)));return s}function be(e,t,n,i,r,a){return i&&!i[_]&&(i=be(i)),r&&!r[_]&&(r=be(r,a)),se((function(a,s,o,l){var u,c,d,h=[],f=[],p=s.length,g=a||function(e,t,n){for(var i=0,r=t.length;r>i;i++)re(e,t[i],n);return n}(t||"*",o.nodeType?[o]:o,[]),m=!e||!a&&t?g:ye(g,h,e,o,l),v=n?r||(a?e:p||i)?[]:s:m;if(n&&n(m,v,o,l),i)for(u=ye(v,f),i(u,[],o,l),c=u.length;c--;)(d=u[c])&&(v[f[c]]=!(m[f[c]]=d));if(a){if(r||e){if(r){for(u=[],c=v.length;c--;)(d=v[c])&&u.push(m[c]=d);r(null,v=[],u,l)}for(c=v.length;c--;)(d=v[c])&&(u=r?O(a,d):h[c])>-1&&(a[u]=!(s[u]=d))}}else v=ye(v===s?v.splice(p,v.length):v),r?r(null,s,v,l):R.apply(s,v)}))}function _e(e){for(var t,n,r,a=e.length,s=i.relative[e[0].type],o=s||i.relative[" "],l=s?1:0,c=me((function(e){return e===t}),o,!0),d=me((function(e){return O(t,e)>-1}),o,!0),h=[function(e,n,i){var r=!s&&(i||n!==u)||((t=n).nodeType?c(e,n,i):d(e,n,i));return t=null,r}];a>l;l++)if(n=i.relative[e[l].type])h=[me(ve(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[_]){for(r=++l;a>r&&!i.relative[e[r].type];r++);return be(l>1&&ve(h),l>1&&ge(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(G,"$1"),n,r>l&&_e(e.slice(l,r)),a>r&&_e(e=e.slice(r)),a>r&&ge(e))}h.push(n)}return ve(h)}function Te(e,t){var n=t.length>0,r=e.length>0,a=function(a,s,o,l,c){var d,p,m,v=0,y="0",b=a&&[],_=[],T=u,S=a||r&&i.find.TAG("*",c),E=w+=null==T?1:Math.random()||.1,C=S.length;for(c&&(u=s===f||s||c);y!==C&&null!=(d=S[y]);y++){if(r&&d){for(p=0,s||d.ownerDocument===f||(h(d),o=!g);m=e[p++];)if(m(d,s||f,o)){l.push(d);break}c&&(w=E)}n&&((d=!m&&d)&&v--,a&&b.push(d))}if(v+=y,n&&y!==v){for(p=0;m=t[p++];)m(b,_,s,o);if(a){if(v>0)for(;y--;)b[y]||_[y]||(_[y]=L.call(l));_=ye(_)}R.apply(l,_),c&&!a&&_.length>0&&v+t.length>1&&re.uniqueSort(l)}return c&&(w=E,u=T),b};return n?se(a):a}return pe.prototype=i.filters=i.pseudos,i.setFilters=new pe,s=re.tokenize=function(e,t){var n,r,a,s,o,l,u,c=C[e+" "];if(c)return t?0:c.slice(0);for(o=e,l=[],u=i.preFilter;o;){for(s in n&&!(r=H.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(a=[])),n=!1,(r=W.exec(o))&&(n=r.shift(),a.push({value:n,type:r[0].replace(G," ")}),o=o.slice(n.length)),i.filter)!(r=Z[s].exec(o))||u[s]&&!(r=u[s](r))||(n=r.shift(),a.push({value:n,type:s,matches:r}),o=o.slice(n.length));if(!n)break}return t?o.length:o?re.error(e):C(e,l).slice(0)},o=re.compile=function(e,t){var n,i=[],r=[],a=k[e+" "];if(!a){for(t||(t=s(e)),n=t.length;n--;)(a=_e(t[n]))[_]?i.push(a):r.push(a);(a=k(e,Te(r,i))).selector=e}return a},l=re.select=function(e,t,r,a){var l,u,c,d,h,f="function"==typeof e&&e,p=!a&&s(e=f.selector||e);if(r=r||[],1===p.length){if((u=p[0]=p[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&n.getById&&9===t.nodeType&&g&&i.relative[u[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(ee,te),t)||[])[0]))return r;f&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(l=Z.needsContext.test(e)?0:u.length;l--&&!i.relative[d=(c=u[l]).type];)if((h=i.find[d])&&(a=h(c.matches[0].replace(ee,te),Q.test(u[0].type)&&fe(t.parentNode)||t))){if(u.splice(l,1),!(e=a.length&&ge(u)))return R.apply(r,a),r;break}}return(f||o(e,p))(a,t,!g,r,!t||Q.test(e)&&fe(t.parentNode)||t),r},n.sortStable=_.split("").sort(A).join("")===_,n.detectDuplicates=!!d,h(),n.sortDetached=oe((function(e){return 1&e.compareDocumentPosition(f.createElement("div"))})),oe((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||le("type|href|height|width",(function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&oe((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||le("value",(function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue})),oe((function(e){return null==e.getAttribute("disabled")}))||le(N,(function(e,t,n){var i;return n?void 0:!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),re}(e);f.find=b,f.expr=b.selectors,f.expr[":"]=f.expr.pseudos,f.uniqueSort=f.unique=b.uniqueSort,f.text=b.getText,f.isXMLDoc=b.isXML,f.contains=b.contains;var _=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&f(e).is(n))break;i.push(e)}return i},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},w=f.expr.match.needsContext,S=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,E=/^.[^:#\[\.,]*$/;function C(e,t,n){if(f.isFunction(t))return f.grep(e,(function(e,i){return!!t.call(e,i,e)!==n}));if(t.nodeType)return f.grep(e,(function(e){return e===t!==n}));if("string"==typeof t){if(E.test(t))return f.filter(t,e,n);t=f.filter(t,e)}return f.grep(e,(function(e){return f.inArray(e,t)>-1!==n}))}f.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?f.find.matchesSelector(i,e)?[i]:[]:f.find.matches(e,f.grep(t,(function(e){return 1===e.nodeType})))},f.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(f(e).filter((function(){for(t=0;r>t;t++)if(f.contains(i[t],this))return!0})));for(t=0;r>t;t++)f.find(e,i[t],n);return(n=this.pushStack(r>1?f.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&w.test(e)?f(e):e||[],!1).length}});var k,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(f.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||k,"string"==typeof e){if(!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:A.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(f.merge(this,f.parseHTML(r[1],(t=t instanceof f?t[0]:t)&&t.nodeType?t.ownerDocument||t:i,!0)),S.test(r[1])&&f.isPlainObject(t))for(r in t)f.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if((a=i.getElementById(r[2]))&&a.parentNode){if(a.id!==r[2])return k.find(e);this.length=1,this[0]=a}return this.context=i,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):f.isFunction(e)?void 0!==n.ready?n.ready(e):e(f):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),f.makeArray(e,this))}).prototype=f.fn,k=f(i);var I=/^(?:parents|prev(?:Until|All))/,x={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}f.fn.extend({has:function(e){var t,n=f(e,this),i=n.length;return this.filter((function(){for(t=0;i>t;t++)if(f.contains(this,n[t]))return!0}))},closest:function(e,t){for(var n,i=0,r=this.length,a=[],s=w.test(e)||"string"!=typeof e?f(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&f.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?f.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?f.inArray(this[0],f(e)):f.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(f.uniqueSort(f.merge(this.get(),f(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),f.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return _(e,"parentNode")},parentsUntil:function(e,t,n){return _(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return _(e,"nextSibling")},prevAll:function(e){return _(e,"previousSibling")},nextUntil:function(e,t,n){return _(e,"nextSibling",n)},prevUntil:function(e,t,n){return _(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return f.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:f.merge([],e.childNodes)}},(function(e,t){f.fn[e]=function(n,i){var r=f.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=f.filter(i,r)),this.length>1&&(x[e]||(r=f.uniqueSort(r)),I.test(e)&&(r=r.reverse())),this.pushStack(r)}}));var D,R,P=/\S+/g;function O(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",N),e.removeEventListener("load",N)):(i.detachEvent("onreadystatechange",N),e.detachEvent("onload",N))}function N(){(i.addEventListener||"load"===e.event.type||"complete"===i.readyState)&&(O(),f.ready())}for(R in f.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return f.each(e.match(P)||[],(function(e,n){t[n]=!0})),t}(e):f.extend({},e);var t,n,i,r,a=[],s=[],o=-1,l=function(){for(r=e.once,i=t=!0;s.length;o=-1)for(n=s.shift();++o<a.length;)!1===a[o].apply(n[0],n[1])&&e.stopOnFalse&&(o=a.length,n=!1);e.memory||(n=!1),t=!1,r&&(a=n?[]:"")},u={add:function(){return a&&(n&&!t&&(o=a.length-1,s.push(n)),function t(n){f.each(n,(function(n,i){f.isFunction(i)?e.unique&&u.has(i)||a.push(i):i&&i.length&&"string"!==f.type(i)&&t(i)}))}(arguments),n&&!t&&l()),this},remove:function(){return f.each(arguments,(function(e,t){for(var n;(n=f.inArray(t,a,n))>-1;)a.splice(n,1),o>=n&&o--})),this},has:function(e){return e?f.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=!0,n||u.disable(),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},f.extend({Deferred:function(e){var t=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return f.Deferred((function(n){f.each(t,(function(t,a){var s=f.isFunction(e[t])&&e[t];r[a[1]]((function(){var e=s&&s.apply(this,arguments);e&&f.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[a[0]+"With"](this===i?n.promise():this,s?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?f.extend(e,i):i}},r={};return i.pipe=i.then,f.each(t,(function(e,a){var s=a[2],o=a[3];i[a[1]]=s.add,o&&s.add((function(){n=o}),t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?i:this,arguments),this},r[a[0]+"With"]=s.fireWith})),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,a=0,s=r.call(arguments),o=s.length,l=1!==o||e&&f.isFunction(e.promise)?o:0,u=1===l?e:f.Deferred(),c=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?r.call(arguments):a,i===t?u.notifyWith(n,i):--l||u.resolveWith(n,i)}};if(o>1)for(t=new Array(o),n=new Array(o),i=new Array(o);o>a;a++)s[a]&&f.isFunction(s[a].promise)?s[a].promise().progress(c(a,n,t)).done(c(a,i,s)).fail(u.reject):--l;return l||u.resolveWith(i,s),u.promise()}}),f.fn.ready=function(e){return f.ready.promise().done(e),this},f.extend({isReady:!1,readyWait:1,holdReady:function(e){e?f.readyWait++:f.ready(!0)},ready:function(e){(!0===e?--f.readyWait:f.isReady)||(f.isReady=!0,!0!==e&&--f.readyWait>0||(D.resolveWith(i,[f]),f.fn.triggerHandler&&(f(i).triggerHandler("ready"),f(i).off("ready"))))}}),f.ready.promise=function(t){if(!D)if(D=f.Deferred(),"complete"===i.readyState||"loading"!==i.readyState&&!i.documentElement.doScroll)e.setTimeout(f.ready);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",N),e.addEventListener("load",N);else{i.attachEvent("onreadystatechange",N),e.attachEvent("onload",N);var n=!1;try{n=null==e.frameElement&&i.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!f.isReady){try{n.doScroll("left")}catch(t){return e.setTimeout(i,50)}O(),f.ready()}}()}return D.promise(t)},f.ready.promise(),f(d))break;d.ownFirst="0"===R,d.inlineBlockNeedsLayout=!1,f((function(){var e,t,n,r;(n=i.getElementsByTagName("body")[0])&&n.style&&(t=i.createElement("div"),(r=i.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",d.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))})),function(){var e=i.createElement("div");d.deleteExpando=!0;try{delete e.test}catch(t){d.deleteExpando=!1}e=null}();var M=function(e){var t=f.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)},U=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,j=/([A-Z])/g;function B(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(j,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:U.test(n)?f.parseJSON(n):n)}catch(r){}f.data(e,t,n)}else n=void 0}return n}function F(e){var t;for(t in e)if(("data"!==t||!f.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function G(e,t,i,r){if(M(e)){var a,s,o=f.expando,l=e.nodeType,u=l?f.cache:e,c=l?e[o]:e[o]&&o;if(c&&u[c]&&(r||u[c].data)||void 0!==i||"string"!=typeof t)return c||(c=l?e[o]=n.pop()||f.guid++:o),u[c]||(u[c]=l?{}:{toJSON:f.noop}),"object"!=typeof t&&"function"!=typeof t||(r?u[c]=f.extend(u[c],t):u[c].data=f.extend(u[c].data,t)),s=u[c],r||(s.data||(s.data={}),s=s.data),void 0!==i&&(s[f.camelCase(t)]=i),"string"==typeof t?null==(a=s[t])&&(a=s[f.camelCase(t)]):a=s,a}}function H(e,t,n){if(M(e)){var i,r,a=e.nodeType,s=a?f.cache:e,o=a?e[f.expando]:f.expando;if(s[o]){if(t&&(i=n?s[o]:s[o].data)){r=(t=f.isArray(t)?t.concat(f.map(t,f.camelCase)):t in i||(t=f.camelCase(t))in i?[t]:t.split(" ")).length;for(;r--;)delete i[t[r]];if(n?!F(i):!f.isEmptyObject(i))return}(n||(delete s[o].data,F(s[o])))&&(a?f.cleanData([e],!0):d.deleteExpando||s!=s.window?delete s[o]:s[o]=void 0)}}}f.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?f.cache[e[f.expando]]:e[f.expando])&&!F(e)},data:function(e,t,n){return G(e,t,n)},removeData:function(e,t){return H(e,t)},_data:function(e,t,n){return G(e,t,n,!0)},_removeData:function(e,t){return H(e,t,!0)}}),f.fn.extend({data:function(e,t){var n,i,r,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(r=f.data(a),1===a.nodeType&&!f._data(a,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&B(a,i=f.camelCase(i.slice(5)),r[i]);f._data(a,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each((function(){f.data(this,e)})):arguments.length>1?this.each((function(){f.data(this,e,t)})):a?B(a,e,f.data(a,e)):void 0},removeData:function(e){return this.each((function(){f.removeData(this,e)}))}}),f.extend({queue:function(e,t,n){var i;return e?(i=f._data(e,t=(t||"fx")+"queue"),n&&(!i||f.isArray(n)?i=f._data(e,t,f.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){var n=f.queue(e,t=t||"fx"),i=n.length,r=n.shift(),a=f._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,(function(){f.dequeue(e,t)}),a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return f._data(e,n)||f._data(e,n,{empty:f.Callbacks("once memory").add((function(){f._removeData(e,t+"queue"),f._removeData(e,n)}))})}}),f.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?f.queue(this[0],e):void 0===t?this:this.each((function(){var n=f.queue(this,e,t);f._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&f.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){f.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=f.Deferred(),a=this,s=this.length,o=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=f._data(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}}),function(){var e;d.shrinkWrapBlocks=function(){return null!=e?e:(e=!1,(n=i.getElementsByTagName("body")[0])&&n.style?(t=i.createElement("div"),(r=i.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(i.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0);var t,n,r}}();var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,z=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],Y=function(e,t){return"none"===f.css(e=t||e,"display")||!f.contains(e.ownerDocument,e)};function Z(e,t,n,i){var r,a=1,s=20,o=i?function(){return i.cur()}:function(){return f.css(e,t,"")},l=o(),u=n&&n[3]||(f.cssNumber[t]?"":"px"),c=(f.cssNumber[t]||"px"!==u&&+l)&&z.exec(f.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do{f.style(e,t,(c/=a=a||".5")+u)}while(a!==(a=o()/l)&&1!==a&&--s)}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}var q=function(e,t,n,i,r,a,s){var o=0,l=e.length,u=null==n;if("object"===f.type(n))for(o in r=!0,n)q(e,t,o,n[o],!0,a,s);else if(void 0!==i&&(r=!0,f.isFunction(i)||(s=!0),u&&(s?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(f(e),n)})),t))for(;l>o;o++)t(e[o],n,s?i:i.call(e[o],o,t(e[o],n)));return r?e:u?t.call(e):l?t(e[0],n):a},X=/^(?:checkbox|radio)$/i,K=/<([\w:-]+)/,J=/^$|\/(?:java|ecma)script/i,Q=/^\s+/,$="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function ee(e){var t=$.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}!function(){var e=i.createElement("div"),t=i.createDocumentFragment(),n=i.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d.leadingWhitespace=3===e.firstChild.nodeType,d.tbody=!e.getElementsByTagName("tbody").length,d.htmlSerialize=!!e.getElementsByTagName("link").length,d.html5Clone="<:nav></:nav>"!==i.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),d.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),(n=i.createElement("input")).setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),d.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,d.noCloneEvent=!!e.addEventListener,e[f.expando]=1,d.attributes=!e.getAttribute(f.expando)}();var te={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:d.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};function ne(e,t){var n,i,r=0,a=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||f.nodeName(i,t)?a.push(i):f.merge(a,ne(i,t));return void 0===t||t&&f.nodeName(e,t)?f.merge([e],a):a}function ie(e,t){for(var n,i=0;null!=(n=e[i]);i++)f._data(n,"globalEval",!t||f._data(t[i],"globalEval"))}te.optgroup=te.option,te.tbody=te.tfoot=te.colgroup=te.caption=te.thead,te.th=te.td;var re=/<|&#?\w+;/,ae=/<tbody/i;function se(e){X.test(e.type)&&(e.defaultChecked=e.checked)}function oe(e,t,n,i,r){for(var a,s,o,l,u,c,h,p=e.length,g=ee(t),m=[],v=0;p>v;v++)if((s=e[v])||0===s)if("object"===f.type(s))f.merge(m,s.nodeType?[s]:s);else if(re.test(s)){for(l=l||g.appendChild(t.createElement("div")),u=(K.exec(s)||["",""])[1].toLowerCase(),l.innerHTML=(h=te[u]||te._default)[1]+f.htmlPrefilter(s)+h[2],a=h[0];a--;)l=l.lastChild;if(!d.leadingWhitespace&&Q.test(s)&&m.push(t.createTextNode(Q.exec(s)[0])),!d.tbody)for(a=(s="table"!==u||ae.test(s)?"<table>"!==h[1]||ae.test(s)?0:l:l.firstChild)&&s.childNodes.length;a--;)f.nodeName(c=s.childNodes[a],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(f.merge(m,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=g.lastChild}else m.push(t.createTextNode(s));for(l&&g.removeChild(l),d.appendChecked||f.grep(ne(m,"input"),se),v=0;s=m[v++];)if(i&&f.inArray(s,i)>-1)r&&r.push(s);else if(o=f.contains(s.ownerDocument,s),l=ne(g.appendChild(s),"script"),o&&ie(l),n)for(a=0;s=l[a++];)J.test(s.type||"")&&n.push(s);return l=null,g}!function(){var t,n,r=i.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})(d[t]=(n="on"+t)in e)||(r.setAttribute(n,"t"),d[t]=!1===r.attributes[n].expando);r=null}();var le=/^(?:input|select|textarea)$/i,ue=/^key/,ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,de=/^(?:focusinfocus|focusoutblur)$/,he=/^([^.]*)(?:\.(.+)|)/;function fe(){return!0}function pe(){return!1}function ge(){try{return i.activeElement}catch(e){}}function me(e,t,n,i,r,a){var s,o;if("object"==typeof t){for(o in"string"!=typeof n&&(i=i||n,n=void 0),t)me(e,o,n,i,t[o],a);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=pe;else if(!r)return e;return 1===a&&(s=r,(r=function(e){return f().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=f.guid++)),e.each((function(){f.event.add(this,t,r,i,n)}))}f.event={global:{},add:function(e,t,n,i,r){var a,s,o,l,u,c,d,h,p,g,m,v=f._data(e);if(v){for(n.handler&&(n=(l=n).handler,r=l.selector),n.guid||(n.guid=f.guid++),(s=v.events)||(s=v.events={}),(c=v.handle)||((c=v.handle=function(e){return void 0===f||e&&f.event.triggered===e.type?void 0:f.event.dispatch.apply(c.elem,arguments)}).elem=e),o=(t=(t||"").match(P)||[""]).length;o--;)p=m=(a=he.exec(t[o])||[])[1],g=(a[2]||"").split(".").sort(),p&&(u=f.event.special[p]||{},u=f.event.special[p=(r?u.delegateType:u.bindType)||p]||{},d=f.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&f.expr.match.needsContext.test(r),namespace:g.join(".")},l),(h=s[p])||((h=s[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,g,c)||(e.addEventListener?e.addEventListener(p,c,!1):e.attachEvent&&e.attachEvent("on"+p,c))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),f.event.global[p]=!0);e=null}},remove:function(e,t,n,i,r){var a,s,o,l,u,c,d,h,p,g,m,v=f.hasData(e)&&f._data(e);if(v&&(c=v.events)){for(u=(t=(t||"").match(P)||[""]).length;u--;)if(p=m=(o=he.exec(t[u])||[])[1],g=(o[2]||"").split(".").sort(),p){for(d=f.event.special[p]||{},h=c[p=(i?d.delegateType:d.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=h.length;a--;)s=h[a],!r&&m!==s.origType||n&&n.guid!==s.guid||o&&!o.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(h.splice(a,1),s.selector&&h.delegateCount--,d.remove&&d.remove.call(e,s));l&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,g,v.handle)||f.removeEvent(e,p,v.handle),delete c[p])}else for(p in c)f.event.remove(e,p+t[u],n,i,!0);f.isEmptyObject(c)&&(delete v.handle,f._removeData(e,"events"))}},trigger:function(t,n,r,a){var s,o,l,u,d,h,p,g=[r||i],m=c.call(t,"type")?t.type:t,v=c.call(t,"namespace")?t.namespace.split("."):[];if(l=h=r=r||i,3!==r.nodeType&&8!==r.nodeType&&!de.test(m+f.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),o=m.indexOf(":")<0&&"on"+m,(t=t[f.expando]?t:new f.Event(m,"object"==typeof t&&t)).isTrigger=a?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:f.makeArray(n,[t]),d=f.event.special[m]||{},a||!d.trigger||!1!==d.trigger.apply(r,n))){if(!a&&!d.noBubble&&!f.isWindow(r)){for(de.test((u=d.delegateType||m)+m)||(l=l.parentNode);l;l=l.parentNode)g.push(l),h=l;h===(r.ownerDocument||i)&&g.push(h.defaultView||h.parentWindow||e)}for(p=0;(l=g[p++])&&!t.isPropagationStopped();)t.type=p>1?u:d.bindType||m,(s=(f._data(l,"events")||{})[t.type]&&f._data(l,"handle"))&&s.apply(l,n),(s=o&&l[o])&&s.apply&&M(l)&&(t.result=s.apply(l,n),!1===t.result&&t.preventDefault());if(t.type=m,!a&&!t.isDefaultPrevented()&&(!d._default||!1===d._default.apply(g.pop(),n))&&M(r)&&o&&r[m]&&!f.isWindow(r)){(h=r[o])&&(r[o]=null),f.event.triggered=m;try{r[m]()}catch(y){}f.event.triggered=void 0,h&&(r[o]=h)}return t.result}},dispatch:function(e){e=f.event.fix(e);var t,n,i,a,s,o=[],l=r.call(arguments),u=(f._data(this,"events")||{})[e.type]||[],c=f.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(o=f.event.handlers.call(this,e,u),t=0;(a=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,n=0;(s=a.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(s.namespace)||(e.handleObj=s,e.data=s.data,void 0!==(i=((f.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,l))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,a,s=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;o>n;n++)void 0===i[r=(a=t[n]).selector+" "]&&(i[r]=a.needsContext?f(r,this).index(l)>-1:f.find(r,this,null,[l]).length),i[r]&&i.push(a);i.length&&s.push({elem:l,handlers:i})}return o<t.length&&s.push({elem:this,handlers:t.slice(o)}),s},fix:function(e){if(e[f.expando])return e;var t,n,r,a=e.type,s=e,o=this.fixHooks[a];for(o||(this.fixHooks[a]=o=ce.test(a)?this.mouseHooks:ue.test(a)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new f.Event(s),t=r.length;t--;)e[n=r[t]]=s[n];return e.target||(e.target=s.srcElement||i),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,a,s=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(n=(r=e.target.ownerDocument||i).body,e.pageX=t.clientX+((a=r.documentElement)&&a.scrollLeft||n&&n.scrollLeft||0)-(a&&a.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(a&&a.scrollTop||n&&n.scrollTop||0)-(a&&a.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ge()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===ge()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return f.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return f.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var i=f.extend(new f.Event,n,{type:e,isSimulated:!0});f.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}},f.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var i="on"+t;e.detachEvent&&(void 0===e[i]&&(e[i]=null),e.detachEvent(i,n))},f.Event=function(e,t){return this instanceof f.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?fe:pe):this.type=e,t&&f.extend(this,t),this.timeStamp=e&&e.timeStamp||f.now(),void(this[f.expando]=!0)):new f.Event(e,t)},f.Event.prototype={constructor:f.Event,isDefaultPrevented:pe,isPropagationStopped:pe,isImmediatePropagationStopped:pe,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=fe,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=fe,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=fe,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){f.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,a=e.handleObj;return r&&(r===i||f.contains(i,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),d.submit||(f.event.special.submit={setup:function(){return!f.nodeName(this,"form")&&void f.event.add(this,"click._submit keypress._submit",(function(e){var t=e.target,n=f.nodeName(t,"input")||f.nodeName(t,"button")?f.prop(t,"form"):void 0;n&&!f._data(n,"submit")&&(f.event.add(n,"submit._submit",(function(e){e._submitBubble=!0})),f._data(n,"submit",!0))}))},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&f.event.simulate("submit",this.parentNode,e))},teardown:function(){return!f.nodeName(this,"form")&&void f.event.remove(this,"._submit")}}),d.change||(f.event.special.change={setup:function(){return le.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(f.event.add(this,"propertychange._change",(function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)})),f.event.add(this,"click._change",(function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),f.event.simulate("change",this,e)}))),!1):void f.event.add(this,"beforeactivate._change",(function(e){var t=e.target;le.test(t.nodeName)&&!f._data(t,"change")&&(f.event.add(t,"change._change",(function(e){!this.parentNode||e.isSimulated||e.isTrigger||f.event.simulate("change",this.parentNode,e)})),f._data(t,"change",!0))}))},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return f.event.remove(this,"._change"),!le.test(this.nodeName)}}),d.focusin||f.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){f.event.simulate(t,e.target,f.event.fix(e))};f.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=f._data(i,t);r||i.addEventListener(e,n,!0),f._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=f._data(i,t)-1;r?f._data(i,t,r):(i.removeEventListener(e,n,!0),f._removeData(i,t))}}})),f.fn.extend({on:function(e,t,n,i){return me(this,e,t,n,i)},one:function(e,t,n,i){return me(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,f(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=pe),this.each((function(){f.event.remove(this,e,n,t)}))},trigger:function(e,t){return this.each((function(){f.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];return n?f.event.trigger(e,t,n,!0):void 0}});var ve=/ jQuery\d+="(?:null|\d+)"/g,ye=new RegExp("<(?:"+$+")[\\s/>]","i"),be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,_e=/<script|<style|<link/i,Te=/checked\s*(?:[^=]|=\s*.checked.)/i,we=/^true\/(.*)/,Se=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ee=ee(i).appendChild(i.createElement("div"));function Ce(e,t){return f.nodeName(e,"table")&&f.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ke(e){return e.type=(null!==f.find.attr(e,"type"))+"/"+e.type,e}function Ae(e){var t=we.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Ie(e,t){if(1===t.nodeType&&f.hasData(e)){var n,i,r,a=f._data(e),s=f._data(t,a),o=a.events;if(o)for(n in delete s.handle,s.events={},o)for(i=0,r=o[n].length;r>i;i++)f.event.add(t,n,o[n][i]);s.data&&(s.data=f.extend({},s.data))}}function xe(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!d.noCloneEvent&&t[f.expando]){for(i in(r=f._data(t)).events)f.removeEvent(t,i,r.handle);t.removeAttribute(f.expando)}"script"===n&&t.text!==e.text?(ke(t).text=e.text,Ae(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),d.html5Clone&&e.innerHTML&&!f.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&X.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function Le(e,t,n,i){t=a.apply([],t);var r,s,o,l,u,c,h=0,p=e.length,g=p-1,m=t[0],v=f.isFunction(m);if(v||p>1&&"string"==typeof m&&!d.checkClone&&Te.test(m))return e.each((function(r){var a=e.eq(r);v&&(t[0]=m.call(this,r,a.html())),Le(a,t,n,i)}));if(p&&(r=(c=oe(t,e[0].ownerDocument,!1,e,i)).firstChild,1===c.childNodes.length&&(c=r),r||i)){for(o=(l=f.map(ne(c,"script"),ke)).length;p>h;h++)s=c,h!==g&&(s=f.clone(s,!0,!0),o&&f.merge(l,ne(s,"script"))),n.call(e[h],s,h);if(o)for(u=l[l.length-1].ownerDocument,f.map(l,Ae),h=0;o>h;h++)J.test((s=l[h]).type||"")&&!f._data(s,"globalEval")&&f.contains(u,s)&&(s.src?f._evalUrl&&f._evalUrl(s.src):f.globalEval((s.text||s.textContent||s.innerHTML||"").replace(Se,"")));c=r=null}return e}function De(e,t,n){for(var i,r=t?f.filter(t,e):e,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||f.cleanData(ne(i)),i.parentNode&&(n&&f.contains(i.ownerDocument,i)&&ie(ne(i,"script")),i.parentNode.removeChild(i));return e}f.extend({htmlPrefilter:function(e){return e.replace(be,"<$1></$2>")},clone:function(e,t,n){var i,r,a,s,o,l=f.contains(e.ownerDocument,e);if(d.html5Clone||f.isXMLDoc(e)||!ye.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(Ee.innerHTML=e.outerHTML,Ee.removeChild(a=Ee.firstChild)),!(d.noCloneEvent&&d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||f.isXMLDoc(e)))for(i=ne(a),o=ne(e),s=0;null!=(r=o[s]);++s)i[s]&&xe(r,i[s]);if(t)if(n)for(o=o||ne(e),i=i||ne(a),s=0;null!=(r=o[s]);s++)Ie(r,i[s]);else Ie(e,a);return(i=ne(a,"script")).length>0&&ie(i,!l&&ne(e,"script")),i=o=r=null,a},cleanData:function(e,t){for(var i,r,a,s,o=0,l=f.expando,u=f.cache,c=d.attributes,h=f.event.special;null!=(i=e[o]);o++)if((t||M(i))&&(s=(a=i[l])&&u[a])){if(s.events)for(r in s.events)h[r]?f.event.remove(i,r):f.removeEvent(i,r,s.handle);u[a]&&(delete u[a],c||void 0===i.removeAttribute?i[l]=void 0:i.removeAttribute(l),n.push(a))}}}),f.fn.extend({domManip:Le,detach:function(e){return De(this,e,!0)},remove:function(e){return De(this,e)},text:function(e){return q(this,(function(e){return void 0===e?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))}),null,e,arguments.length)},append:function(){return Le(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ce(this,e).appendChild(e)}))},prepend:function(){return Le(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ce(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Le(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Le(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&f.cleanData(ne(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&f.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return f.clone(this,e,t)}))},html:function(e){return q(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(ve,""):void 0;if("string"==typeof e&&!_e.test(e)&&(d.htmlSerialize||!ye.test(e))&&(d.leadingWhitespace||!Q.test(e))&&!te[(K.exec(e)||["",""])[1].toLowerCase()]){e=f.htmlPrefilter(e);try{for(;i>n;n++)1===(t=this[n]||{}).nodeType&&(f.cleanData(ne(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Le(this,arguments,(function(t){var n=this.parentNode;f.inArray(this,e)<0&&(f.cleanData(ne(this)),n&&n.replaceChild(t,this))}),e)}}),f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){f.fn[e]=function(e){for(var n,i=0,r=[],a=f(e),o=a.length-1;o>=i;i++)n=i===o?this:this.clone(!0),f(a[i])[t](n),s.apply(r,n.get());return this.pushStack(r)}}));var Re,Pe={HTML:"block",BODY:"block"};function Oe(e,t){var n=f(t.createElement(e)).appendTo(t.body),i=f.css(n[0],"display");return n.detach(),i}function Ne(e){var t=i,n=Pe[e];return n||("none"!==(n=Oe(e,t))&&n||((t=((Re=(Re||f("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||Re[0].contentDocument).document).write(),t.close(),n=Oe(e,t),Re.detach()),Pe[e]=n),n}var Me=/^margin/,Ue=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),je=function(e,t,n,i){var r,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];for(a in r=n.apply(e,i||[]),t)e.style[a]=s[a];return r},Be=i.documentElement;!function(){var t,n,r,a,s,o,l=i.createElement("div"),u=i.createElement("div");if(u.style){function c(){var c,d,h=i.documentElement;h.appendChild(l),u.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",t=r=o=!1,n=s=!0,e.getComputedStyle&&(d=e.getComputedStyle(u),t="1%"!==(d||{}).top,o="2px"===(d||{}).marginLeft,r="4px"===(d||{width:"4px"}).width,u.style.marginRight="50%",n="4px"===(d||{marginRight:"4px"}).marginRight,(c=u.appendChild(i.createElement("div"))).style.cssText=u.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",u.style.width="1px",s=!parseFloat((e.getComputedStyle(c)||{}).marginRight),u.removeChild(c)),u.style.display="none",(a=0===u.getClientRects().length)&&(u.style.display="",u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",u.childNodes[0].style.borderCollapse="separate",(c=u.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===c[0].offsetHeight)&&(c[0].style.display="",c[1].style.display="none",a=0===c[0].offsetHeight)),h.removeChild(l)}u.style.cssText="float:left;opacity:.5",d.opacity="0.5"===u.style.opacity,d.cssFloat=!!u.style.cssFloat,u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===u.style.backgroundClip,(l=i.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",u.innerHTML="",l.appendChild(u),d.boxSizing=""===u.style.boxSizing||""===u.style.MozBoxSizing||""===u.style.WebkitBoxSizing,f.extend(d,{reliableHiddenOffsets:function(){return null==t&&c(),a},boxSizingReliable:function(){return null==t&&c(),r},pixelMarginRight:function(){return null==t&&c(),n},pixelPosition:function(){return null==t&&c(),t},reliableMarginRight:function(){return null==t&&c(),s},reliableMarginLeft:function(){return null==t&&c(),o}})}}();var Fe,Ge,He=/^(top|right|bottom|left)$/;function We(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}e.getComputedStyle?(Fe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ge=function(e,t,n){var i,r,a,s,o=e.style;return""!==(s=(n=n||Fe(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==s||f.contains(e.ownerDocument,e)||(s=f.style(e,t)),n&&!d.pixelMarginRight()&&Ue.test(s)&&Me.test(t)&&(i=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=i,o.minWidth=r,o.maxWidth=a),void 0===s?s:s+""}):Be.currentStyle&&(Fe=function(e){return e.currentStyle},Ge=function(e,t,n){var i,r,a,s,o=e.style;return null==(s=(n=n||Fe(e))?n[t]:void 0)&&o&&o[t]&&(s=o[t]),Ue.test(s)&&!He.test(t)&&(i=o.left,(a=(r=e.runtimeStyle)&&r.left)&&(r.left=e.currentStyle.left),o.left="fontSize"===t?"1em":s,s=o.pixelLeft+"px",o.left=i,a&&(r.left=a)),void 0===s?s:s+""||"auto"});var ze=/alpha\([^)]*\)/i,Ve=/opacity\s*=\s*([^)]*)/i,Ye=/^(none|table(?!-c[ea]).+)/,Ze=new RegExp("^("+W+")(.*)$","i"),qe={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","O","Moz","ms"],Je=i.createElement("div").style;function Qe(e){if(e in Je)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=Ke.length;n--;)if((e=Ke[n]+t)in Je)return e}function $e(e,t){for(var n,i,r,a=[],s=0,o=e.length;o>s;s++)(i=e[s]).style&&(a[s]=f._data(i,"olddisplay"),n=i.style.display,t?(a[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Y(i)&&(a[s]=f._data(i,"olddisplay",Ne(i.nodeName)))):(r=Y(i),(n&&"none"!==n||!r)&&f._data(i,"olddisplay",r?n:f.css(i,"display"))));for(s=0;o>s;s++)(i=e[s]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[s]||"":"none"));return e}function et(e,t,n){var i=Ze.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function tt(e,t,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>a;a+=2)"margin"===n&&(s+=f.css(e,n+V[a],!0,r)),i?("content"===n&&(s-=f.css(e,"padding"+V[a],!0,r)),"margin"!==n&&(s-=f.css(e,"border"+V[a]+"Width",!0,r))):(s+=f.css(e,"padding"+V[a],!0,r),"padding"!==n&&(s+=f.css(e,"border"+V[a]+"Width",!0,r)));return s}function nt(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=Fe(e),s=d.boxSizing&&"border-box"===f.css(e,"boxSizing",!1,a);if(0>=r||null==r){if((0>(r=Ge(e,t,a))||null==r)&&(r=e.style[t]),Ue.test(r))return r;i=s&&(d.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+tt(e,t,n||(s?"border":"content"),i,a)+"px"}function it(e,t,n,i,r){return new it.prototype.init(e,t,n,i,r)}f.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:d.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=f.camelCase(t),l=e.style;if(t=f.cssProps[o]||(f.cssProps[o]=Qe(o)||o),s=f.cssHooks[t]||f.cssHooks[o],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t];if("string"==(a=typeof n)&&(r=z.exec(n))&&r[1]&&(n=Z(e,t,r),a="number"),null!=n&&n==n&&("number"===a&&(n+=r&&r[3]||(f.cssNumber[o]?"":"px")),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!s||!("set"in s)||void 0!==(n=s.set(e,n,i))))try{l[t]=n}catch(u){}}},css:function(e,t,n,i){var r,a,s,o=f.camelCase(t);return t=f.cssProps[o]||(f.cssProps[o]=Qe(o)||o),(s=f.cssHooks[t]||f.cssHooks[o])&&"get"in s&&(a=s.get(e,!0,n)),void 0===a&&(a=Ge(e,t,i)),"normal"===a&&t in Xe&&(a=Xe[t]),""===n||n?(r=parseFloat(a),!0===n||isFinite(r)?r||0:a):a}}),f.each(["height","width"],(function(e,t){f.cssHooks[t]={get:function(e,n,i){return n?Ye.test(f.css(e,"display"))&&0===e.offsetWidth?je(e,qe,(function(){return nt(e,t,i)})):nt(e,t,i):void 0},set:function(e,n,i){var r=i&&Fe(e);return et(0,n,i?tt(e,t,i,d.boxSizing&&"border-box"===f.css(e,"boxSizing",!1,r),r):0)}}})),d.opacity||(f.cssHooks.opacity={get:function(e,t){return Ve.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=f.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===f.trim(a.replace(ze,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=ze.test(a)?a.replace(ze,r):a+" "+r)}}),f.cssHooks.marginRight=We(d.reliableMarginRight,(function(e,t){return t?je(e,{display:"inline-block"},Ge,[e,"marginRight"]):void 0})),f.cssHooks.marginLeft=We(d.reliableMarginLeft,(function(e,t){return t?(parseFloat(Ge(e,"marginLeft"))||(f.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-je(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})):0))+"px":void 0})),f.each({margin:"",padding:"",border:"Width"},(function(e,t){f.cssHooks[e+t]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+V[i]+t]=a[i]||a[i-2]||a[0];return r}},Me.test(e)||(f.cssHooks[e+t].set=et)})),f.fn.extend({css:function(e,t){return q(this,(function(e,t,n){var i,r,a={},s=0;if(f.isArray(t)){for(i=Fe(e),r=t.length;r>s;s++)a[t[s]]=f.css(e,t[s],!1,i);return a}return void 0!==n?f.style(e,t,n):f.css(e,t)}),e,t,arguments.length>1)},show:function(){return $e(this,!0)},hide:function(){return $e(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){Y(this)?f(this).show():f(this).hide()}))}}),f.Tween=it,(it.prototype={constructor:it,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||f.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(f.cssNumber[n]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,n=it.propHooks[this.prop];return this.pos=t=this.options.duration?f.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):it.propHooks._default.set(this),this}}).init.prototype=it.prototype,(it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=f.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){f.fx.step[e.prop]?f.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[f.cssProps[e.prop]]&&!f.cssHooks[e.prop]?e.elem[e.prop]=e.now:f.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},f.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},f.fx=it.prototype.init,f.fx.step={};var rt,at,st=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function lt(){return e.setTimeout((function(){rt=void 0})),rt=f.now()}function ut(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)i["margin"+(n=V[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var i,r=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),a=0,s=r.length;s>a;a++)if(i=r[a].call(n,t,e))return i}function dt(e,t,n){var i,r,a=0,s=dt.prefilters.length,o=f.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var t=rt||lt(),n=Math.max(0,u.startTime+u.duration-t),i=1-(n/u.duration||0),a=0,s=u.tweens.length;s>a;a++)u.tweens[a].run(i);return o.notifyWith(e,[u,i,n]),1>i&&s?n:(o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:f.extend({},t),opts:f.extend(!0,{specialEasing:{},easing:f.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||lt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=f.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?(o.notifyWith(e,[u,1,0]),o.resolveWith(e,[u,t])):o.rejectWith(e,[u,t]),this}}),c=u.props;for(function(e,t){var n,i,r,a,s;for(n in e)if(r=t[i=f.camelCase(n)],f.isArray(a=e[n])&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(s=f.cssHooks[i])&&"expand"in s)for(n in a=s.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=r);else t[i]=r}(c,u.opts.specialEasing);s>a;a++)if(i=dt.prefilters[a].call(u,e,c,u.opts))return f.isFunction(i.stop)&&(f._queueHooks(u.elem,u.opts.queue).stop=f.proxy(i.stop,i)),i;return f.map(c,ct,u),f.isFunction(u.opts.start)&&u.opts.start.call(e,u),f.fx.timer(f.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}f.Animation=f.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return Z(n.elem,e,z.exec(t),n),n}]},tweener:function(e,t){f.isFunction(e)?(t=e,e=["*"]):e=e.match(P);for(var n,i=0,r=e.length;r>i;i++)(dt.tweeners[n=e[i]]=dt.tweeners[n]||[]).unshift(t)},prefilters:[function(e,t,n){var i,r,a,s,o,l,u,c=this,h={},p=e.style,g=e.nodeType&&Y(e),m=f._data(e,"fxshow");for(i in n.queue||(null==(o=f._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,c.always((function(){c.always((function(){o.unqueued--,f.queue(e,"fx").length||o.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===("none"===(u=f.css(e,"display"))?f._data(e,"olddisplay")||Ne(e.nodeName):u)&&"none"===f.css(e,"float")&&(d.inlineBlockNeedsLayout&&"inline"!==Ne(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.shrinkWrapBlocks()||c.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),t)if(st.exec(r=t[i])){if(delete t[i],a=a||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}h[i]=m&&m[i]||f.style(e,i)}else u=void 0;if(f.isEmptyObject(h))"inline"===("none"===u?Ne(e.nodeName):u)&&(p.display=u);else for(i in m?"hidden"in m&&(g=m.hidden):m=f._data(e,"fxshow",{}),a&&(m.hidden=!g),g?f(e).show():c.done((function(){f(e).hide()})),c.done((function(){var t;for(t in f._removeData(e,"fxshow"),h)f.style(e,t,h[t])})),h)s=ct(g?m[i]:0,i,c),i in m||(m[i]=s.start,g&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),f.speed=function(e,t,n){var i=e&&"object"==typeof e?f.extend({},e):{complete:n||!n&&t||f.isFunction(e)&&e,duration:e,easing:n&&t||t&&!f.isFunction(t)&&t};return i.duration=f.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in f.fx.speeds?f.fx.speeds[i.duration]:f.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){f.isFunction(i.old)&&i.old.call(this),i.queue&&f.dequeue(this,i.queue)},i},f.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Y).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=f.isEmptyObject(e),a=f.speed(t,n,i),s=function(){var t=dt(this,f.extend({},e),a);(r||f._data(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",a=f.timers,s=f._data(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&ot.test(r)&&i(s[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(n),t=!1,a.splice(r,1));!t&&n||f.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=f._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],a=f.timers,s=i?i.length:0;for(n.finish=!0,f.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),f.each(["toggle","show","hide"],(function(e,t){var n=f.fn[t];f.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,i,r)}})),f.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){f.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),f.timers=[],f.fx.tick=function(){var e,t=f.timers,n=0;for(rt=f.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||f.fx.stop(),rt=void 0},f.fx.timer=function(e){f.timers.push(e),e()?f.fx.start():f.timers.pop()},f.fx.interval=13,f.fx.start=function(){at||(at=e.setInterval(f.fx.tick,f.fx.interval))},f.fx.stop=function(){e.clearInterval(at),at=null},f.fx.speeds={slow:600,fast:200,_default:400},f.fn.delay=function(t,n){return t=f.fx&&f.fx.speeds[t]||t,this.queue(n=n||"fx",(function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}}))},function(){var e,t=i.createElement("input"),n=i.createElement("div"),r=i.createElement("select"),a=r.appendChild(i.createElement("option"));(n=i.createElement("div")).setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),(e=n.getElementsByTagName("a")[0]).style.cssText="top:1px",d.getSetAttribute="t"!==n.className,d.style=/top/.test(e.getAttribute("style")),d.hrefNormalized="/a"===e.getAttribute("href"),d.checkOn=!!t.value,d.optSelected=a.selected,d.enctype=!!i.createElement("form").enctype,r.disabled=!0,d.optDisabled=!a.disabled,(t=i.createElement("input")).setAttribute("value",""),d.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),d.radioValue="t"===t.value}();var ht=/\r/g,ft=/[\x20\t\r\n\f]+/g;f.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=f.isFunction(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,f(this).val()):e)?r="":"number"==typeof r?r+="":f.isArray(r)&&(r=f.map(r,(function(e){return null==e?"":e+""}))),(t=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=f.valHooks[r.type]||f.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(ht,""):null==n?"":n:void 0}}),f.extend({valHooks:{option:{get:function(e){var t=f.find.attr(e,"value");return null!=t?t:f.trim(f.text(e)).replace(ft," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,s=a?null:[],o=a?r+1:i.length,l=0>r?o:a?r:0;o>l;l++)if(((n=i[l]).selected||l===r)&&(d.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!f.nodeName(n.parentNode,"optgroup"))){if(t=f(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,a=f.makeArray(t),s=r.length;s--;)if(f.inArray(f.valHooks.option.get(i=r[s]),a)>-1)try{i.selected=n=!0}catch(o){}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),f.each(["radio","checkbox"],(function(){f.valHooks[this]={set:function(e,t){return f.isArray(t)?e.checked=f.inArray(f(e).val(),t)>-1:void 0}},d.checkOn||(f.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var pt,gt,mt=f.expr.attrHandle,vt=/^(?:checked|selected)$/i,yt=d.getSetAttribute,bt=d.input;f.fn.extend({attr:function(e,t){return q(this,f.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){f.removeAttr(this,e)}))}}),f.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?f.prop(e,t,n):(1===a&&f.isXMLDoc(e)||(t=t.toLowerCase(),r=f.attrHooks[t]||(f.expr.match.bool.test(t)?gt:pt)),void 0!==n?null===n?void f.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=f.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&f.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,a=t&&t.match(P);if(a&&1===e.nodeType)for(;n=a[r++];)i=f.propFix[n]||n,f.expr.match.bool.test(n)?bt&&yt||!vt.test(n)?e[i]=!1:e[f.camelCase("default-"+n)]=e[i]=!1:f.attr(e,n,""),e.removeAttribute(yt?n:i)}}),gt={set:function(e,t,n){return!1===t?f.removeAttr(e,n):bt&&yt||!vt.test(n)?e.setAttribute(!yt&&f.propFix[n]||n,n):e[f.camelCase("default-"+n)]=e[n]=!0,n}},f.each(f.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=mt[t]||f.find.attr;mt[t]=bt&&yt||!vt.test(t)?function(e,t,i){var r,a;return i||(a=mt[t],mt[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,mt[t]=a),r}:function(e,t,n){return n?void 0:e[f.camelCase("default-"+t)]?t.toLowerCase():null}})),bt&&yt||(f.attrHooks.value={set:function(e,t,n){return f.nodeName(e,"input")?void(e.defaultValue=t):pt&&pt.set(e,t,n)}}),yt||(pt={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},mt.id=mt.name=mt.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},f.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:pt.set},f.attrHooks.contenteditable={set:function(e,t,n){pt.set(e,""!==t&&t,n)}},f.each(["width","height"],(function(e,t){f.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}}))),d.style||(f.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var _t=/^(?:input|select|textarea|button|object)$/i,Tt=/^(?:a|area)$/i;f.fn.extend({prop:function(e,t){return q(this,f.prop,e,t,arguments.length>1)},removeProp:function(e){return e=f.propFix[e]||e,this.each((function(){try{this[e]=void 0,delete this[e]}catch(t){}}))}}),f.extend({prop:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&f.isXMLDoc(e)||(r=f.propHooks[t=f.propFix[t]||t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=f.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.hrefNormalized||f.each(["href","src"],(function(e,t){f.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),d.optSelected||(f.propHooks.selected={get:function(e){return null},set:function(e){}}),f.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){f.propFix[this.toLowerCase()]=this})),d.enctype||(f.propFix.enctype="encoding");var wt=/[\t\r\n\f]/g;function St(e){return f.attr(e,"class")||""}f.fn.extend({addClass:function(e){var t,n,i,r,a,s,o,l=0;if(f.isFunction(e))return this.each((function(t){f(this).addClass(e.call(this,t,St(this)))}));if("string"==typeof e&&e)for(t=e.match(P)||[];n=this[l++];)if(r=St(n),i=1===n.nodeType&&(" "+r+" ").replace(wt," ")){for(s=0;a=t[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r!==(o=f.trim(i))&&f.attr(n,"class",o)}return this},removeClass:function(e){var t,n,i,r,a,s,o,l=0;if(f.isFunction(e))return this.each((function(t){f(this).removeClass(e.call(this,t,St(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(P)||[];n=this[l++];)if(r=St(n),i=1===n.nodeType&&(" "+r+" ").replace(wt," ")){for(s=0;a=t[s++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");r!==(o=f.trim(i))&&f.attr(n,"class",o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):f.isFunction(e)?this.each((function(n){f(this).toggleClass(e.call(this,n,St(this),t),t)})):this.each((function(){var t,i,r,a;if("string"===n)for(i=0,r=f(this),a=e.match(P)||[];t=a[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||((t=St(this))&&f._data(this,"__className__",t),f.attr(this,"class",t||!1===e?"":f._data(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+St(n)+" ").replace(wt," ").indexOf(t)>-1)return!0;return!1}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){f.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),f.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var Et=e.location,Ct=f.now(),kt=/\?/,At=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;f.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,r=f.trim(t+"");return r&&!f.trim(r.replace(At,(function(e,t,r,a){return n&&t&&(i=0),0===i?e:(n=r||t,i+=!a-!r,"")})))?Function("return "+r)():f.error("Invalid JSON: "+t)},f.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{e.DOMParser?n=(new e.DOMParser).parseFromString(t,"text/xml"):((n=new e.ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(t))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||f.error("Invalid XML: "+t),n};var It=/#.*$/,xt=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dt=/^(?:GET|HEAD)$/,Rt=/^\/\//,Pt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ot={},Nt={},Mt="*/".concat("*"),Ut=Et.href,jt=Pt.exec(Ut.toLowerCase())||[];function Bt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,a=t.toLowerCase().match(P)||[];if(f.isFunction(n))for(;i=a[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Ft(e,t,n,i){var r={},a=e===Nt;function s(o){var l;return r[o]=!0,f.each(e[o]||[],(function(e,o){var u=o(t,n,i);return"string"!=typeof u||a||r[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),s(u),!1)})),l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function Gt(e,t){var n,i,r=f.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&f.extend(!0,e,n),e}function Ht(e){return e.style&&e.style.display||f.css(e,"display")}f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ut,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(jt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,f.ajaxSettings),t):Gt(f.ajaxSettings,e)},ajaxPrefilter:Bt(Ot),ajaxTransport:Bt(Nt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0);var i,r,a,s,o,l,u,c,d=f.ajaxSetup({},n=n||{}),h=d.context||d,p=d.context&&(h.nodeType||h.jquery)?f(h):f.event,g=f.Deferred(),m=f.Callbacks("once memory"),v=d.statusCode||{},y={},b={},_=0,T="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!c)for(c={};t=Lt.exec(s);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return _||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||T;return u&&u.abort(t),E(0,t),this}};if(g.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((t||d.url||Ut)+"").replace(It,"").replace(Rt,jt[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=f.trim(d.dataType||"*").toLowerCase().match(P)||[""],null==d.crossDomain&&(i=Pt.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===jt[1]&&i[2]===jt[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(jt[3]||("http:"===jt[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=f.param(d.data,d.traditional)),Ft(Ot,d,n,w),2===_)return w;for(r in(l=f.event&&d.global)&&0==f.active++&&f.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Dt.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(kt.test(a)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=xt.test(a)?a.replace(xt,"$1_="+Ct++):a+(kt.test(a)?"&":"?")+"_="+Ct++)),d.ifModified&&(f.lastModified[a]&&w.setRequestHeader("If-Modified-Since",f.lastModified[a]),f.etag[a]&&w.setRequestHeader("If-None-Match",f.etag[a])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Mt+"; q=0.01":""):d.accepts["*"]),d.headers)w.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(!1===d.beforeSend.call(h,w,d)||2===_))return w.abort();for(r in T="abort",{success:1,error:1,complete:1})w[r](d[r]);if(u=Ft(Nt,d,n,w)){if(w.readyState=1,l&&p.trigger("ajaxSend",[w,d]),2===_)return w;d.async&&d.timeout>0&&(o=e.setTimeout((function(){w.abort("timeout")}),d.timeout));try{_=1,u.send(y,E)}catch(S){if(!(2>_))throw S;E(-1,S)}}else E(-1,"No Transport");function E(t,n,i,r){var c,y,b,T,S,E=n;2!==_&&(_=2,o&&e.clearTimeout(o),u=void 0,s=r||"",w.readyState=t>0?4:0,c=t>=200&&300>t||304===t,i&&(T=function(e,t,n){for(var i,r,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(s in o)if(o[s]&&o[s].test(r)){l.unshift(s);break}if(l[0]in n)a=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),n[a]):void 0}(d,w,i)),T=function(e,t,n,i){var r,a,s,o,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=u[l+" "+a]||u["* "+a]))for(r in u)if((o=r.split(" "))[1]===a&&(s=u[l+" "+o[0]]||u["* "+o[0]])){!0===s?s=u[r]:!0!==u[r]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(d,T,w,c),c?(d.ifModified&&((S=w.getResponseHeader("Last-Modified"))&&(f.lastModified[a]=S),(S=w.getResponseHeader("etag"))&&(f.etag[a]=S)),204===t||"HEAD"===d.type?E="nocontent":304===t?E="notmodified":(E=T.state,y=T.data,c=!(b=T.error))):(b=E,!t&&E||(E="error",0>t&&(t=0))),w.status=t,w.statusText=(n||E)+"",c?g.resolveWith(h,[y,E,w]):g.rejectWith(h,[w,E,b]),w.statusCode(v),v=void 0,l&&p.trigger(c?"ajaxSuccess":"ajaxError",[w,d,c?y:b]),m.fireWith(h,[w,E]),l&&(p.trigger("ajaxComplete",[w,d]),--f.active||f.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,n){return f.get(e,t,n,"json")},getScript:function(e,t){return f.get(e,void 0,t,"script")}}),f.each(["get","post"],(function(e,t){f[t]=function(e,n,i,r){return f.isFunction(n)&&(r=r||i,i=n,n=void 0),f.ajax(f.extend({url:e,type:t,dataType:r,data:n,success:i},f.isPlainObject(e)&&e))}})),f._evalUrl=function(e){return f.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},f.fn.extend({wrapAll:function(e){if(f.isFunction(e))return this.each((function(t){f(this).wrapAll(e.call(this,t))}));if(this[0]){var t=f(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e})).append(this)}return this},wrapInner:function(e){return f.isFunction(e)?this.each((function(t){f(this).wrapInner(e.call(this,t))})):this.each((function(){var t=f(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=f.isFunction(e);return this.each((function(n){f(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(){return this.parent().each((function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)})).end()}}),f.expr.filters.hidden=function(e){return d.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:function(e){if(!f.contains(e.ownerDocument||i,e))return!0;for(;e&&1===e.nodeType;){if("none"===Ht(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}(e)},f.expr.filters.visible=function(e){return!f.expr.filters.hidden(e)};var Wt=/%20/g,zt=/\[\]$/,Vt=/\r?\n/g,Yt=/^(?:submit|button|image|reset|file)$/i,Zt=/^(?:input|select|textarea|keygen)/i;function qt(e,t,n,i){var r;if(f.isArray(t))f.each(t,(function(t,r){n||zt.test(e)?i(e,r):qt(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)}));else if(n||"object"!==f.type(t))i(e,t);else for(r in t)qt(e+"["+r+"]",t[r],n,i)}f.param=function(e,t){var n,i=[],r=function(e,t){t=f.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=f.ajaxSettings&&f.ajaxSettings.traditional),f.isArray(e)||e.jquery&&!f.isPlainObject(e))f.each(e,(function(){r(this.name,this.value)}));else for(n in e)qt(n,e[n],t,r);return i.join("&").replace(Wt,"+")},f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=f.prop(this,"elements");return e?f.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!f(this).is(":disabled")&&Zt.test(this.nodeName)&&!Yt.test(e)&&(this.checked||!X.test(e))})).map((function(e,t){var n=f(this).val();return null==n?null:f.isArray(n)?f.map(n,(function(e){return{name:t.name,value:e.replace(Vt,"\r\n")}})):{name:t.name,value:n.replace(Vt,"\r\n")}})).get()}}),f.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return this.isLocal?$t():i.documentMode>8?Qt():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Qt()||$t()}:Qt;var Xt=0,Kt={},Jt=f.ajaxSettings.xhr();function Qt(){try{return new e.XMLHttpRequest}catch(t){}}function $t(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}e.attachEvent&&e.attachEvent("onunload",(function(){for(var e in Kt)Kt[e](void 0,!0)})),d.cors=!!Jt&&"withCredentials"in Jt,(Jt=d.ajax=!!Jt)&&f.ajaxTransport((function(t){var n;if(!t.crossDomain||d.cors)return{send:function(i,r){var a,s=t.xhr(),o=++Xt;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)void 0!==i[a]&&s.setRequestHeader(a,i[a]+"");s.send(t.hasContent&&t.data||null),n=function(e,i){var a,l,u;if(n&&(i||4===s.readyState))if(delete Kt[o],n=void 0,s.onreadystatechange=f.noop,i)4!==s.readyState&&s.abort();else{u={},a=s.status,"string"==typeof s.responseText&&(u.text=s.responseText);try{l=s.statusText}catch(c){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=u.text?200:404}u&&r(a,l,u,s.getAllResponseHeaders())},t.async?4===s.readyState?e.setTimeout(n):s.onreadystatechange=Kt[o]=n:n()},abort:function(){n&&n(void 0,!0)}}})),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return f.globalEval(e),e}}}),f.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)})),f.ajaxTransport("script",(function(e){if(e.crossDomain){var t,n=i.head||f("head")[0]||i.documentElement;return{send:function(r,a){(t=i.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||a(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}}));var en=[],tn=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||f.expando+"_"+Ct++;return this[e]=!0,e}}),f.ajaxPrefilter("json jsonp",(function(t,n,i){var r,a,s,o=!1!==t.jsonp&&(tn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=f.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(tn,"$1"+r):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||f.error(r+" was not called"),s[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){s=arguments},i.always((function(){void 0===a?f(e).removeProp(r):e[r]=a,t[r]&&(t.jsonpCallback=n.jsonpCallback,en.push(r)),s&&f.isFunction(a)&&a(s[0]),s=a=void 0})),"script"):void 0})),f.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||i;var r=S.exec(e),a=!n&&[];return r?[t.createElement(r[1])]:(r=oe([e],t,a),a&&a.length&&f(a).remove(),f.merge([],r.childNodes))};var nn=f.fn.load;function rn(e){return f.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}f.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var i,r,a,s=this,o=e.indexOf(" ");return o>-1&&(i=f.trim(e.slice(o,e.length)),e=e.slice(0,o)),f.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&f.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){a=arguments,s.html(i?f("<div>").append(f.parseHTML(e)).find(i):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},f.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){f.fn[t]=function(e){return this.on(t,e)}})),f.expr.filters.animated=function(e){return f.grep(f.timers,(function(t){return e===t.elem})).length},f.offset={setOffset:function(e,t,n){var i,r,a,s,o,l,u=f.css(e,"position"),c=f(e),d={};"static"===u&&(e.style.position="relative"),o=c.offset(),a=f.css(e,"top"),l=f.css(e,"left"),("absolute"===u||"fixed"===u)&&f.inArray("auto",[a,l])>-1?(s=(i=c.position()).top,r=i.left):(s=parseFloat(a)||0,r=parseFloat(l)||0),f.isFunction(t)&&(t=t.call(e,n,f.extend({},o))),null!=t.top&&(d.top=t.top-o.top+s),null!=t.left&&(d.left=t.left-o.left+r),"using"in t?t.using.call(e,d):c.css(d)}},f.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){f.offset.setOffset(this,e,t)}));var t,n,i={top:0,left:0},r=this[0],a=r&&r.ownerDocument;return a?f.contains(t=a.documentElement,r)?(void 0!==r.getBoundingClientRect&&(i=r.getBoundingClientRect()),n=rn(a),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i:void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===f.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),f.nodeName(e[0],"html")||(n=e.offset()),n.top+=f.css(e[0],"borderTopWidth",!0),n.left+=f.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-f.css(i,"marginTop",!0),left:t.left-n.left-f.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&!f.nodeName(e,"html")&&"static"===f.css(e,"position");)e=e.offsetParent;return e||Be}))}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n=/Y/.test(t);f.fn[e]=function(i){return q(this,(function(e,i,r){var a=rn(e);return void 0===r?a?t in a?a[t]:a.document.documentElement[i]:e[i]:void(a?a.scrollTo(n?f(a).scrollLeft():r,n?r:f(a).scrollTop()):e[i]=r)}),e,i,arguments.length,null)}})),f.each(["top","left"],(function(e,t){f.cssHooks[t]=We(d.pixelPosition,(function(e,n){return n?(n=Ge(e,t),Ue.test(n)?f(e).position()[t]+"px":n):void 0}))})),f.each({Height:"height",Width:"width"},(function(e,t){f.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){f.fn[i]=function(i,r){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===r?"margin":"border");return q(this,(function(t,n,i){var r;return f.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?f.css(t,n,s):f.style(t,n,i,s)}),t,a?i:void 0,a,null)}}))})),f.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),f.fn.size=function(){return this.length},f.fn.andSelf=f.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return f}));var an=e.jQuery,sn=e.$;return f.noConflict=function(t){return e.$===f&&(e.$=sn),t&&e.jQuery===f&&(e.jQuery=an),f},t||(e.jQuery=e.$=f),f})),menosInfo(),function(e){function t(e,t,n,i){for(var r=n.slice(),a=function(e,t){return e.currentTarget=t,e.eventPhase=e.target===e.currentTarget?2:3,e}(t,e),s=0,o=r.length;s<o&&(handler=r[s],"object"==typeof handler&&"function"==typeof handler.handleEvent?handler.handleEvent(a):handler.call(e,a),!a.stoppedImmediatePropagation);s++);return i&&!a.stoppedPropagation&&e.parentNode?e.parentNode.dispatchEvent(a):!a.defaultPrevented}function n(e,t){return{configurable:!0,get:e,set:t}}function i(e,t,i){var r=v(t||e,i);g(e,"textContent",n((function(){return r.get.call(this)}),(function(e){r.set.call(this,e)})))}function r(e,t){for(var n=e.length;n--&&e[n]!==t;);return n}function a(){if("BR"===this.tagName)return"\n";for(var e=this.firstChild,t=[];e;)8!==e.nodeType&&7!==e.nodeType&&t.push(e.textContent),e=e.nextSibling;return t.join("")}function s(e){!c&&w.test(document.readyState)&&(c=!c,document.detachEvent(d,s),(e=document.createEvent("Event")).initEvent(h,!0,!0),document.dispatchEvent(e))}function o(e){for(var t;t=this.lastChild;)this.removeChild(t);null!=e&&this.appendChild(document.createTextNode(e))}function l(t,n){return n||(n=e.event),n.target||(n.target=n.srcElement||n.fromElement||document),n.timeStamp||(n.timeStamp=(new Date).getTime()),n}if(!document.createEvent){var u=!0,c=!1,d="onreadystatechange",h="DOMContentLoaded",f="__IE8__"+Math.random(),p=e.Object,g=p.defineProperty||function(e,t,n){e[t]=n.value},m=p.defineProperties||function(t,n){for(var i in n)if(y.call(n,i))try{g(t,i,n[i])}catch(n){e.console&&console.log(i+" failed on object:",t,n.message)}},v=p.getOwnPropertyDescriptor,y=p.prototype.hasOwnProperty,b=e.Element.prototype,_=e.Text.prototype,T=/^[a-z]+$/,w=/loaded|complete/,S={},E=document.createElement("div");i(e.HTMLCommentElement.prototype,b,"nodeValue"),i(e.HTMLScriptElement.prototype,null,"text"),i(_,null,"nodeValue"),i(e.HTMLTitleElement.prototype,null,"text"),g(e.HTMLStyleElement.prototype,"textContent",function(e){return n((function(){return e.get.call(this.styleSheet)}),(function(t){e.set.call(this.styleSheet,t)}))}(v(e.CSSStyleSheet.prototype,"cssText"))),m(b,{textContent:{get:a,set:o},firstElementChild:{get:function(){for(var e=this.childNodes||[],t=0,n=e.length;t<n;t++)if(1==e[t].nodeType)return e[t]}},lastElementChild:{get:function(){for(var e=this.childNodes||[],t=e.length;t--;)if(1==e[t].nodeType)return e[t]}},previousElementSibling:{get:function(){for(var e=this.previousSibling;e&&1!=e.nodeType;)e=e.previousSibling;return e}},nextElementSibling:{get:function(){for(var e=this.nextSibling;e&&1!=e.nodeType;)e=e.nextSibling;return e}},childElementCount:{get:function(){for(var e=0,t=this.childNodes||[],n=t.length;n--;e+=1==t[n].nodeType);return e}},addEventListener:{value:function(e,n,i){var a,s=this,o="on"+e,u=s[f]||g(s,f,{value:{}})[f],c=u[o]||(u[o]={}),d=c.h||(c.h=[]);if(!y.call(c,"w")){if(c.w=function(e){return e[f]||t(s,l(0,e),d,!1)},!y.call(S,o))if(T.test(e))try{(a=document.createEventObject())[f]=!0,9!=s.nodeType&&null==s.parentNode&&E.appendChild(s),s.fireEvent(o,a),S[o]=!0}catch(a){for(S[o]=!1;E.hasChildNodes();)E.removeChild(E.firstChild)}else S[o]=!1;(c.n=S[o])&&s.attachEvent(o,c.w)}r(d,n)<0&&d[i?"unshift":"push"](n)}},dispatchEvent:{value:function(e){var n,i=this,r="on"+e.type,a=i[f],s=a&&a[r],o=!!s;return e.target||(e.target=i),o?s.n?i.fireEvent(r,e):t(i,e,s.h,!0):!(n=i.parentNode)||n.dispatchEvent(e),!e.defaultPrevented}},removeEventListener:{value:function(e,t,n){var i=this[f],a=i&&i["on"+e],s=a&&a.h,o=s?r(s,t):-1;-1<o&&s.splice(o,1)}}}),m(_,{addEventListener:{value:b.addEventListener},dispatchEvent:{value:b.dispatchEvent},removeEventListener:{value:b.removeEventListener}}),m(e.XMLHttpRequest.prototype,{addEventListener:{value:function(e,t,n){var i=this,a="on"+e,s=i[f]||g(i,f,{value:{}})[f],o=s[a]||(s[a]={}),l=o.h||(o.h=[]);r(l,t)<0&&(i[a]||(i[a]=function(){var t=document.createEvent("Event");t.initEvent(e,!0,!0),i.dispatchEvent(t)}),l[n?"unshift":"push"](t))}},dispatchEvent:{value:function(e){var n=this,i="on"+e.type,r=n[f],a=r&&r[i];return!!a&&(a.n?n.fireEvent(i,e):t(n,e,a.h,!0))}},removeEventListener:{value:b.removeEventListener}}),m(e.Event.prototype,{bubbles:{value:!0,writable:!0},cancelable:{value:!0,writable:!0},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0,this.returnValue=!1)}},stopPropagation:{value:function(){this.stoppedPropagation=!0,this.cancelBubble=!0}},stopImmediatePropagation:{value:function(){this.stoppedImmediatePropagation=!0,this.stopPropagation()}},initEvent:{value:function(e,t,n){this.type=e,this.bubbles=!!t,this.cancelable=!!n,this.bubbles||this.stopPropagation()}}}),m(e.HTMLDocument.prototype,{textContent:{get:function(){return 11===this.nodeType?a.call(this):null},set:function(e){11===this.nodeType&&o.call(this,e)}},addEventListener:{value:function(t,n,i){var r=this;b.addEventListener.call(r,t,n,i),u&&t===h&&!w.test(r.readyState)&&(u=!1,r.attachEvent(d,s),e==top&&function e(t){try{r.documentElement.doScroll("left"),s()}catch(t){setTimeout(e,50)}}())}},dispatchEvent:{value:b.dispatchEvent},removeEventListener:{value:b.removeEventListener},createEvent:{value:function(e){var t;if("Event"!==e)throw new Error("unsupported "+e);return(t=document.createEventObject()).timeStamp=(new Date).getTime(),t}}}),m(e.Window.prototype,{getComputedStyle:{value:function(){function e(e){this._=e}function t(){}var n=/^(?:[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/,i=/^(top|right|bottom|left)$/,r=function(e,t){return t.toUpperCase()};return e.prototype.getPropertyValue=function(e){var t,a,s,o=this._,l=o.style,u=o.currentStyle,c=o.runtimeStyle;return e=("float"===e?"style-float":e).replace(/\-([a-z])/g,r),n.test(t=u?u[e]:l[e])&&!i.test(e)&&(a=l.left,(s=c&&c.left)&&(c.left=u.left),l.left="fontSize"===e?"1em":t,t=l.pixelLeft+"px",l.left=a,s&&(c.left=s)),null==t?t:t+""||"auto"},t.prototype.getPropertyValue=function(){return null},function(n,i){return i?new t(n):new e(n)}}()},addEventListener:{value:function(n,i,a){var s,o=e,u="on"+n;o[u]||(o[u]=function(e){return t(o,l(0,e),s,!1)}),r(s=o[u][f]||(o[u][f]=[]),i)<0&&s[a?"unshift":"push"](i)}},dispatchEvent:{value:function(t){var n=e["on"+t.type];return!n||!1!==n.call(e,t)&&!t.defaultPrevented}},removeEventListener:{value:function(t,n,i){var a=(e["on"+t]||p)[f],s=a?r(a,n):-1;-1<s&&a.splice(s,1)}}})}}(this),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).flowplayer=e()}((function(){return function e(t,n,i){function r(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return r(t[s][1][e]||e)}),c,c.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";var i=t.exports={},r=e("class-list"),a=window.jQuery,s=e("punycode"),o=e("computed-style");i.noop=function(){},i.identity=function(e){return e},i.removeNode=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},i.find=function(e,t){return a?a(e,t).toArray():(t=t||document,Array.prototype.map.call(t.querySelectorAll(e),(function(e){return e})))},i.text=function(e,t){e["innerText"in e?"innerText":"textContent"]=t},i.findDirect=function(e,t){return i.find(e,t).filter((function(e){return e.parentNode===t}))},i.hasClass=function(e,t){return"string"==typeof e.className&&r(e).contains(t)},i.isSameDomain=function(e){var t=window.location,n=i.createElement("a",{href:e});return t.hostname===n.hostname&&t.protocol===n.protocol&&t.port===n.port},i.css=function(e,t,n){return"object"==typeof t?Object.keys(t).forEach((function(n){i.css(e,n,t[n])})):void 0!==n?""===n?e?e.style.removeProperty(t):void 0:e?e.style.setProperty(t,n):void 0:e?o(e,t):void 0},i.createElement=function(e,t,n){try{var r=document.createElement(e);for(var s in t)t.hasOwnProperty(s)&&("css"===s?i.css(r,t[s]):i.attr(r,s,t[s]));return r.innerHTML=n||"",r}catch(i){if(!a)throw i;return a("<"+e+">"+n+"</"+e+">").attr(t)[0]}},i.toggleClass=function(e,t,n){if(e){var i=r(e);void 0===n?i.toggle(t):n?i.add(t):n||i.remove(t)}},i.addClass=function(e,t){return i.toggleClass(e,t,!0)},i.removeClass=function(e,t){return i.toggleClass(e,t,!1)},i.append=function(e,t){return e.appendChild(t),e},i.appendTo=function(e,t){return i.append(t,e),e},i.prepend=function(e,t){e.insertBefore(t,e.firstChild)},i.insertAfter=function(e,t,n){t==i.lastChild(e)&&e.appendChild(n);var r=Array.prototype.indexOf.call(e.children,t);e.insertBefore(n,e.children[r+1])},i.html=function(e,t){(e=e.length?e:[e]).forEach((function(e){e.innerHTML=t}))},i.attr=function(e,t,n){if("class"===t&&(t="className"),i.hasOwnOrPrototypeProperty(e,t))try{e[t]=n}catch(i){if(!a)throw i;a(e).attr(t,n)}else!1===n?e.removeAttribute(t):e.setAttribute(t,n);return e},i.prop=function(e,t,n){if(void 0===n)return e&&e[t];e[t]=n},i.offset=function(e){var t=e.getBoundingClientRect();return e.offsetWidth/e.offsetHeight>e.clientWidth/e.clientHeight&&(t={left:100*t.left,right:100*t.right,top:100*t.top,bottom:100*t.bottom,width:100*t.width,height:100*t.height}),t},i.width=function(e,t){if(t)return e.style.width=(""+t).replace(/px$/,"")+"px";var n=i.offset(e).width;return void 0===n?e.offsetWidth:n},i.height=function(e,t){if(t)return e.style.height=(""+t).replace(/px$/,"")+"px";var n=i.offset(e).height;return void 0===n?e.offsetHeight:n},i.lastChild=function(e){return e.children[e.children.length-1]},i.hasParent=function(e,t){for(var n=e.parentElement;n;){if(i.matches(n,t))return!0;n=n.parentElement}return!1},i.createAbsoluteUrl=function(e){return i.createElement("a",{href:e}).href},i.xhrGet=function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===this.readyState)return this.status>=400?n():void t(this.responseText)},i.open("get",e,!0),i.send()},i.pick=function(e,t){var n={};return t.forEach((function(t){e.hasOwnProperty(t)&&(n[t]=e[t])})),n},i.hostname=function(e){return s.toUnicode(e||window.location.hostname)},i.browser={webkit:"WebkitAppearance"in document.documentElement.style},i.getPrototype=function(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__},i.hasOwnOrPrototypeProperty=function(e,t){for(var n=e;n;){if(Object.prototype.hasOwnProperty.call(n,t))return!0;n=i.getPrototype(n)}return!1},i.matches=function(e,t){var n=Element.prototype;return(n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),i=0;n[i]&&n[i]!==t;)i++;return!!n[i]}).call(e,t)},function(e){function t(e){return e.replace(/-[a-z]/g,(function(e){return e[1].toUpperCase()}))}void 0!==e.setAttribute&&(e.setProperty=function(e,n){return this.setAttribute(t(e),String(n))},e.getPropertyValue=function(e){return this.getAttribute(t(e))||null},e.removeProperty=function(e){var n=this.getPropertyValue(e);return this.removeAttribute(t(e)),n})}(window.CSSStyleDeclaration.prototype)},{"class-list":33,"computed-style":34,punycode:41}],2:[function(e,t,n){"use strict";var i=e("../common");t.exports=function(e,t,n,r){n=n||"opaque";var a="obj"+(""+Math.random()).slice(2,15),s='<object class="fp-engine" id="'+a+'" name="'+a+'" ',o=navigator.userAgent.indexOf("MSIE")>-1;s+=o?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">':' data="'+e+'" type="application/x-shockwave-flash">';var l={width:"100%",height:"100%",allowscriptaccess:"always",wmode:n,quality:"high",flashvars:"",movie:e+(o?"?"+a:""),name:a};"transparent"!==n&&(l.bgcolor=r||"#333333"),Object.keys(t).forEach((function(e){l.flashvars+=e+"="+t[e]+"&"})),Object.keys(l).forEach((function(e){s+='<param name="'+e+'" value="'+l[e]+'"/>'}));var u=i.createElement("div",{},s+="</object>");return i.find("object",u)},window.attachEvent&&window.attachEvent("onbeforeunload",(function(){window.__flash_savedUnloadHandler=window.__flash_unloadHandler=function(){}}))},{"../common":1}],3:[function(e,t,n){"use strict";function i(e){return/^https?:/.test(e)}var r,a=e("../flowplayer"),s=e("../common"),o=e("./embed"),l=e("extend-object"),u=e("bean");(r=function(e,t){function n(e){return/application\/x-mpegurl/i.test(e.type)}var c,d,h,f,p=e.conf,g=[],m={engineName:r.engineName,pick:function(t){var n=l({},function(){if(a.support.flashVideo){for(var n,i,r=0;r<t.length;r++)if(/mp4|flv|flash/i.test((i=t[r]).type)&&(n=i),e.conf.swfHls&&/mpegurl/i.test(i.type)&&(n=i),n&&!/mp4/i.test(n.type))return n;return n}}());if(n)return!n.src||i(n.src)||e.conf.rtmp||n.rtmp||(n.src=s.createAbsoluteUrl(n.src)),n},suspendEngine:function(){f=!0},resumeEngine:function(){f=!1},load:function(r){function v(e){return e.replace(/&amp;/g,"%26").replace(/&/g,"%26").replace(/=/g,"%3D")}c=r,g.forEach((function(e){clearTimeout(e)}));var y=s.findDirect("video",t)[0]||s.find(".fp-player > video",t)[0],b=r.src,_=i(b),T=function(){s.removeNode(y)};a.support.video&&s.prop(y,"autoplay")&&function(e){return e.some((function(e){return!!y.canPlayType(e.type)}))}(r.sources)?u.one(y,"timeupdate",T):T();var w=r.rtmp||p.rtmp;if(_||w||(b=s.createAbsoluteUrl(b)),h&&n(r)&&h.data!==s.createAbsoluteUrl(p.swfHls)&&m.unload(),h){["live","preload","loop"].forEach((function(e){r.hasOwnProperty(e)&&h.__set(e,r[e])})),Object.keys(r.flashls||{}).forEach((function(e){h.__set("hls_"+e,r.flashls[e])}));var S=!1;!_&&w?h.__set("rtmp",w.url||w):(S=!!h.__get("rtmp"),h.__set("rtmp",null)),h.__play(b,S||r.rtmp&&r.rtmp!==p.rtmp)}else{d="fpCallback"+(""+Math.random()).slice(3,15),b=v(b);var E={hostname:s.hostname(p.embedded?p.hostname:location.hostname),url:b,callback:d};t.getAttribute("data-origin")&&(E.origin=t.getAttribute("data-origin")),["proxy","key","autoplay","preload","subscribe","live","loop","debug","splash","poster","rtmpt"].forEach((function(e){p.hasOwnProperty(e)&&(E[e]=p[e]),r.hasOwnProperty(e)&&(E[e]=r[e]),(p.rtmp||{}).hasOwnProperty(e)&&(E[e]=(p.rtmp||{})[e]),(r.rtmp||{}).hasOwnProperty(e)&&(E[e]=(r.rtmp||{})[e])})),p.rtmp&&(E.rtmp=p.rtmp.url||p.rtmp),r.rtmp&&(E.rtmp=r.rtmp.url||r.rtmp),Object.keys(r.flashls||{}).forEach((function(e){E["hls_"+e]=r.flashls[e]}));var C=void 0!==r.hlsQualities?r.hlsQualities:p.hlsQualities;void 0!==C&&(E.hlsQualities=C?encodeURIComponent(JSON.stringify(C)):C),void 0!==p.bufferTime&&(E.bufferTime=p.bufferTime),_&&delete E.rtmp,E.rtmp&&(E.rtmp=v(E.rtmp));var k,A=p.bgcolor||s.css(t,"background-color")||"";0===A.indexOf("rgb")?k=function(e){function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}if(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))return"#"+t(e[1])+t(e[2])+t(e[3])}(A):0===A.indexOf("#")&&(k=function(e){return 7===e.length?e:"#"+e.split("").slice(1).map((function(e){return e+e})).join("")}(A)),E.initialVolume=e.volumeLevel;var I=n(r)?p.swfHls:p.swf;h=o(I,E,p.wmode,k)[0];var x=s.find(".fp-player",t)[0];s.prepend(x,h),e.off("quality.flashengine").on("quality.flashengine",(function(t,n,i){(void 0!==e.video.hlsQualities?e.video.hlsQualities:e.conf.hlsQualities)&&h.__quality(i)})),setTimeout((function(){try{if(!h.PercentLoaded())return e.trigger("error",[e,{code:7,url:p.swf}])}catch(e){}}),5e3),g.push(setTimeout((function(){void 0===h.PercentLoaded&&e.trigger("flashdisabled",[e])}),15e3)),g.push(setTimeout((function(){void 0===h.PercentLoaded&&e.trigger("flashdisabled",[e,!1])}),500)),e.off("resume.flashhack").on("resume.flashhack",(function(){var t=setTimeout((function(){var t=h.__status().time,n=setTimeout((function(){e.playing&&!e.loading&&h.__status().time===t&&e.trigger("flashdisabled",[e])}),400);g.push(n),e.one("seek.flashhack pause.flashhack load.flashack",(function(){clearTimeout(n)}))}),800);g.push(t),e.one("progress",(function(){clearTimeout(t)}))})),h.pollInterval=setInterval((function(){if(h&&!f){var t=h.__status?h.__status():null;t&&((e.conf.live||e.live||r.live)&&(r.seekOffset=t.seekOffset,r.duration=t.duration+t.seekOffset),e.playing&&t.time&&t.time!==e.video.time&&e.trigger("progress",[e,t.time]),r.buffer=t.buffer/r.bytes*r.duration,e.trigger("buffer",[e,r.buffer]),!r.buffered&&t.time>0&&(r.buffered=!0,e.trigger("buffered",[e])))}}),250),window[d]=function(n,i){var r=c;p.debug&&(0===n.indexOf("debug")&&i&&i.length?console.log.apply(console,["-- "+n].concat(i)):console.log("--",n,i));var a={type:n};switch(n){case"ready":i=l(r,i);break;case"click":a.flash=!0;break;case"keydown":a.which=i;break;case"seek":r.time=i;break;case"status":e.trigger("progress",[e,i.time]),i.buffer<r.bytes&&!r.buffered?(r.buffer=i.buffer/r.bytes*r.duration,e.trigger("buffer",r.buffer)):r.buffered||(r.buffered=!0,e.trigger("buffered"));break;case"metadata":var s=atob(i);i={key:s.substr(10,4),data:s.substr(21)}}"click"===n||"keydown"===n?(a.target=t,u.fire(t,n,[a])):"buffered"!=n&&"unload"!==n?setTimeout((function(){e.trigger(a,[e,i])}),1):"unload"===n&&e.trigger(a,[e,i])}}},speed:s.noop,unload:function(){h&&h.__unload&&h.__unload();try{d&&window[d]&&delete window[d]}catch(e){}s.find("object",t).forEach(s.removeNode),h=0,e.off(".flashengine"),e.off(".flashhack"),clearInterval(h.pollInterval),g.forEach((function(e){clearTimeout(e)}))}};return["pause","resume","seek","volume"].forEach((function(t){m[t]=function(n){try{e.ready&&(void 0===n?h["__"+t]():h["__"+t](n))}catch(n){if(void 0===h["__"+t])return e.trigger("flashdisabled",[e]);throw n}}})),m}).engineName="flash",r.canPlay=function(e,t){return a.support.flashVideo&&/video\/(mp4|flash|flv)/i.test(e)||a.support.flashVideo&&t.swfHls&&/mpegurl/i.test(e)},a.engines.push(r)},{"../common":1,"../flowplayer":28,"./embed":2,bean:31,"extend-object":36}],4:[function(e,t,n){"use strict";function i(e,t){return t=t||100,Math.round(e*t)/t}function r(e){return/mpegurl/i.test(e)?"application/x-mpegurl":e}function a(e){return/^(video|application)/i.test(e)||(e=r(e)),!!h.canPlayType(e).replace("no","")}var s,o,l=e("../flowplayer"),u=e("bean"),c=e("extend-object"),d=e("../common"),h=document.createElement("video"),f={ended:"finish",pause:"pause",play:"resume",timeupdate:"progress",volumechange:"volume",ratechange:"speed",seeked:"seek",loadeddata:"ready",error:"error",dataunavailable:"error",webkitendfullscreen:!l.support.inlineVideo&&"unload"},p=function(e,t,n,i,a,o){if(void 0===t&&(t=!0),void 0===n&&(n="none"),void 0===i&&(i=!0),void 0===a&&(a=!0),i&&s)return s.type=r(e.type),s.src=e.src,d.find("track",s).forEach(d.removeNode),s.removeAttribute("crossorigin"),s;var u=document.createElement("video");u.src=e.src,u.type=r(e.type);var c="fp-engine ";if(o&&o.length&&(c+="native-subtitles"),u.className=c,l.support.autoplay&&(u.autoplay=!!t&&"autoplay"),l.support.dataload&&(u.preload=n),a&&(u.setAttribute("webkit-playsinline","true"),u.setAttribute("playsinline","true")),o&&o.length){var h=function(e){var t=u.textTracks;t.length&&(t[0].mode=e)};o.some((function(e){return!d.isSameDomain(e.src)}))&&d.attr(u,"crossorigin","anonymous"),"function"==typeof u.textTracks.addEventListener&&u.textTracks.addEventListener("addtrack",(function(){h("disabled"),h("showing")})),o.forEach((function(e){u.appendChild(d.createElement("track",{kind:"subtitles",srclang:e.srclang||"en",label:e.label||"en",src:e.src,default:e.default}))}))}return i&&(s=u),u};(o=function(e,t){function n(n,r,s){var o=t.getAttribute("data-flowplayer-instance-id");if(!n.listeners||!n.listeners.hasOwnProperty(o)){(n.listeners||(n.listeners={}))[o]=s,u.on(r,"error",(function(t){try{a(t.target.getAttribute("type"))&&e.trigger("error",[e,{code:4,video:c(s,{src:n.src,url:n.src})}])}catch(e){}})),e.on("shutdown",(function(){u.off(r),u.off(n,".dvrhack"),e.off(".loophack")}));var l={},p=function(t){"metadata"===t.kind&&(t.mode="hidden",t.addEventListener("cuechange",(function(){e.trigger("metadata",[e,t.activeCues[0].value])}),!1))};return n&&n.textTracks&&n.textTracks.length&&Array.prototype.forEach.call(n.textTracks,p),n&&n.textTracks&&"function"==typeof n.textTracks.addEventListener&&n.textTracks.addEventListener("addtrack",(function(e){p(e.track)}),!1),(e.conf.dvr||e.dvr||s.dvr)&&u.on(n,"progress.dvrhack",(function(){n.seekable.length&&(e.video.duration=n.seekable.end(null),e.video.seekOffset=n.seekable.start(null),e.trigger("dvrwindow",[e,{start:n.seekable.start(null),end:n.seekable.end(null)}]),n.currentTime>=n.seekable.start(null)||(n.currentTime=n.seekable.start(null)))})),Object.keys(f).forEach((function(r){var a=f[r];if("webkitendfullscreen"===r&&e.conf.disableInline&&(a="unload"),a){var u=function(l){if(s=n.listeners[o],l.target&&d.hasClass(l.target,"fp-engine")){b.debug&&!/progress/.test(a)&&console.log(r,"->",a,l);var u,f=function(){e.trigger(a,[e,u])};if(!e.ready&&!/ready|error/.test(a)||!a||!d.find("video",t).length)return void("resume"===a&&e.one("ready",(function(){setTimeout((function(){f()}))})));if("unload"===a)return void e.unload();switch(a){case"ready":u=c(s,{duration:n.duration<Number.MAX_VALUE?n.duration:0,width:n.videoWidth,height:n.videoHeight,url:n.currentSrc,src:n.currentSrc});try{u.seekable=/mpegurl/i.test(s&&s.type||"")&&n.duration||n.seekable&&n.seekable.end(null)||e.live}catch(e){}if(h=h||setInterval((function(){try{u.buffer=n.buffered.end(null)}catch(e){}u.buffer&&(i(u.buffer,1e3)<i(u.duration,1e3)&&!u.buffered&&u.buffer!==g?(e.trigger("buffer",[e,u.buffer]),g=u.buffer):u.buffered||u.buffer===g||(u.buffered=!0,e.trigger("buffer",[e,u.buffer]).trigger("buffered",l),g=u.buffer,clearInterval(h),h=0))}),250),!e.live&&!u.duration&&!y.hlsDuration&&"loadeddata"===r){var p=function(){u.duration=n.duration;try{u.seekable=n.seekable&&n.seekable.end(null)}catch(e){}f(),n.removeEventListener("durationchange",p),d.toggleClass(t,"is-live",!1)};n.addEventListener("durationchange",p);var m=function(){e.ready||n.duration||(u.duration=0,d.addClass(t,"is-live"),f()),n.removeEventListener("timeupdate",m)};return void n.addEventListener("timeupdate",m)}break;case"progress":case"seek":if(n.currentTime>0||e.live)u=Math.max(n.currentTime,0);else if("progress"==a)return;break;case"speed":u=i(n.playbackRate);break;case"volume":u=i(n.volume);break;case"error":try{(u=(l.srcElement||l.originalTarget).error).video=c(s,{src:n.src,url:n.src})}catch(e){return}}f()}};t.addEventListener(r,u,!0),l[r]||(l[r]=[]),l[r].push(u)}})),l}n.listeners[o]=s}var r,h,g,m,v=d.findDirect("video",t)[0]||d.find(".fp-player > video",t)[0],y=l.support,b=e.conf;return r={engineName:o.engineName,pick:function(e){var t=function(){if(y.video){if(b.videoTypePreference){var t=function(e,t){var n=e.filter((function(e){return e.type===t}));return n.length?n[0]:null}(e,b.videoTypePreference);if(t)return t}for(var n=0;n<e.length;n++)if(a(e[n].type))return e[n]}}();if(t)return"string"==typeof t.src&&(t.src=d.createAbsoluteUrl(t.src)),t},load:function(i){var a=d.find(".fp-player",t)[0],s=!1,o=!1;b.splash&&!v?(v=p(i,void 0,void 0,void 0,!b.disableInline,l.support.subtitles&&b.nativesubtitles&&i.subtitles),d.prepend(a,v),o=!0):v?(d.addClass(v,"fp-engine"),d.find("source,track",v).forEach(d.removeNode),e.conf.nativesubtitles||d.attr(v,"crossorigin",!1),s=v.src===i.src):(v=p(i,!!i.autoplay||!!b.autoplay,b.clip.preload||!0,!1),d.prepend(a,v),o=!0),y.inlineVideo||d.css(v,{position:"absolute",top:"-9999em"}),u.off(v,"timeupdate",d.noop),u.on(v,"timeupdate",d.noop),d.prop(v,"loop",!1),e.off(".loophack"),(i.loop||b.loop)&&(/mpegurl/i.test(i.type)?e.on("finish.loophack",(function(){e.resume()})):d.prop(v,"loop",!0)),void 0!==m&&(v.volume=m),(e.video.src&&i.src!=e.video.src||i.index)&&d.attr(v,"autoplay","autoplay"),v.src=i.src,v.type=i.type,r._listeners=n(v,d.find("source",v).concat(v),i)||r._listeners,(s||o&&!b.splash)&&v.load(),y.iOS.iPad&&y.iOS.chrome&&v.load(),v.paused&&(i.autoplay||b.autoplay||b.splash)&&v.play()},pause:function(){v.pause()},resume:function(){v.play()},speed:function(e){v.playbackRate=e},seek:function(t){try{var n=e.paused;v.currentTime=t,n&&v.pause()}catch(e){}},volume:function(e){m=e,v&&(v.volume=e)},unload:function(){d.find("video.fp-engine",t).forEach((function(e){d.attr(e,"src",""),d.removeNode(e)})),y.cachedVideoTag||(s=null),h=clearInterval(h);var e=t.getAttribute("data-flowplayer-instance-id");delete v.listeners[e],v=0,r._listeners&&Object.keys(r._listeners).forEach((function(e){r._listeners[e].forEach((function(n){t.removeEventListener(e,n,!0)}))}))}}}).canPlay=function(e){return l.support.video&&a(e)},o.engineName="html5",l.engines.push(o)},{"../common":1,"../flowplayer":28,bean:31,"extend-object":36}],5:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("../common"),a=e("bean");i((function(e,t){e.on("ready",(function(){var e=r.find("video.fp-engine",t)[0];e&&(e.setAttribute("x-webkit-airplay","allow"),window.WebKitPlaybackTargetAvailabilityEvent&&(e.addEventListener("webkitplaybacktargetavailabilitychanged",(function(e){if("available"===e.availability){var n=r.find(".fp-header",t)[0];r.find(".fp-airplay",n).forEach(r.removeNode);var i=r.createElement("a",{class:"fp-airplay fp-icon",title:"Play on AirPlay device"});n.insertBefore(i,r.find(".fp-fullscreen",n)[0])}})),e.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",(function(){var n=r.find(".fp-airplay",t)[0];n&&r.toggleClass(n,"fp-active",e.webkitCurrentPlaybackTargetIsWireless)}))))})),a.on(t,"click",".fp-airplay",(function(e){e.preventDefault(),r.find("video.fp-engine",t)[0].webkitShowPlaybackTargetPicker()}))}))},{"../common":1,"../flowplayer":28,bean:31}],6:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("./resolve").TYPE_RE,a=e("scriptjs"),s=e("bean");i((function(e,t){var n,i=e.conf.analytics,o=0,l=0;if(i){"undefined"==typeof _gat&&a("//google-analytics.com/ga.js");var u=function(){var e=_gat._getTracker(i);return e._setAllowLinker(!0),e},c=function(i,a,s){s=s||e.video,o&&"undefined"!=typeof _gat&&(u()._trackEvent("Video / Seconds played",e.engine.engineName+"/"+s.type,s.title||t.getAttribute("title")||s.src.split("/").slice(-1)[0].replace(r,""),Math.round(o/1e3)),o=0,n&&(clearTimeout(n),n=null))};e.bind("load unload",c).bind("progress",(function(){e.seeking||(o+=l?+new Date-l:0,l=+new Date),n||(n=setTimeout((function(){n=null,u()._trackEvent("Flowplayer heartbeat","Heartbeat","",0,!0)}),6e5))})).bind("pause",(function(){l=0})),e.bind("shutdown",(function(){s.off(window,"unload",c)})),s.on(window,"unload",c)}}))},{"../flowplayer":28,"./resolve":19,bean:31,scriptjs:42}],7:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("../common"),a=e("bean"),s=e("scriptjs");i((function(e,t){function n(){console.log("sessionListener")}function i(e){e===chrome.cast.ReceiverAvailability.AVAILABLE&&function(){var e=r.find(".fp-header",t)[0];r.find(".fp-chromecast",e).forEach(r.removeNode),r.find(".fp-chromecast-engine",t).forEach(r.removeNode),h=r.createElement("a",{class:"fp-chromecast fp-icon",title:"Play on Cast device"}),e.insertBefore(h,r.find(".fp-fullscreen",e)[0]);var n=r.createElement("div",{class:"fp-chromecast-engine"}),i=r.createElement("p",{class:"fp-chromecast-engine-status"}),a=r.createElement("p",{class:"fp-chromecast-engine-icon"});n.appendChild(a),n.appendChild(i);var s=r.find(".fp-engine",t)[0];s?s.parentNode.insertBefore(n,s):r.prepend(r.find(".fp-player",t)[0]||t,n)}()}function o(){}function l(){console.log("onError")}function u(){clearInterval(d),d=null,e.release(),r.toggleClass(t,"is-chromecast",!1),r.toggleClass(h,"fp-active",!1)}if(!1!==e.conf.chromecast){s("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),window.__onGCastApiAvailable=function(e){e&&function(){var e,t,r;e=f.applicationId||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,t=new chrome.cast.SessionRequest(e),r=new chrome.cast.ApiConfig(t,n,i),chrome.cast.initialize(r,o,l)}()};var c,d,h,f=e.conf.chromecast||{};a.on(t,"click",".fp-chromecast",(function(n){if(n.preventDefault(),c)return e.trigger("pause",[e]),c.stop(),c=null,void u();e.playing&&e.pause(),chrome.cast.requestSession((function(n){var i=(c=n).receiver.friendlyName;r.html(r.find(".fp-chromecast-engine-status")[0],"Playing on device "+i);var a=new chrome.cast.media.MediaInfo(e.video.src),s=new chrome.cast.media.LoadRequest(a);c.loadMedia(s,(function(n){n.addUpdateListener((function(i){if(c){d=d||setInterval((function(){e.trigger("progress",[e,n.getEstimatedTime()])}),500),i?(r.toggleClass(t,"is-chromecast",!0),r.toggleClass(h,"fp-active",!0),e.hijack({pause:function(){n.pause()},resume:function(){n.play()},seek:function(e){var t=new chrome.cast.media.SeekRequest;t.currentTime=e,n.seek(t)}})):(u(),e.trigger("finish",[e]));var a=n.playerState;e.paused&&a===chrome.cast.media.PlayerState.PLAYING&&e.trigger("resume",[e]),e.playing&&a===chrome.cast.media.PlayerState.PAUSED&&e.trigger("pause",[e]),r.toggleClass(t,"is-loading",a===chrome.cast.media.PlayerState.BUFFERING)}}))}),(function(){}))}),(function(e){console.error("requestSession error",e)}))}))}}))},{"../common":1,"../flowplayer":28,bean:31,scriptjs:42}],8:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("../common"),a=e("bean");i((function(e,t){function n(e){t.className=t.className.replace(s," "),e>=0&&r.addClass(t,"cue"+e)}function i(t){var n=t&&!isNaN(t.time)?t.time:t;return n<0&&(n=e.video.duration+n),.125*Math.round(n/.125)}var s=/ ?cue\d+ ?/,o=!1,l={},u=-.125,c=function(t){var i=e.cuepoints.indexOf(t);isNaN(t)||(t={time:t}),t.index=i,n(i),e.trigger("cuepoint",[e,t])};e.on("progress",(function(e,t,n){if(!o)for(var r=i(n);u<r;)l[u+=.125]&&l[u].forEach(c)})).on("unload",n).on("beforeseek",(function(e){setTimeout((function(){e.defaultPrevented||(o=!0)}))})).on("seek",(function(e,t,r){n(),u=i(r||0)-.125,o=!1,!r&&l[0]&&l[0].forEach(c)})).on("ready",(function(t,n,i){u=-.125,e.setCuepoints(i.cuepoints||e.conf.cuepoints||[])})).on("finish",(function(){u=-.125})),e.conf.generate_cuepoints&&e.bind("load",(function(){r.find(".fp-cuepoint",t).forEach(r.removeNode)})),e.setCuepoints=function(t){return e.cuepoints=[],l={},t.forEach(e.addCuepoint),e},e.addCuepoint=function(n){e.cuepoints||(e.cuepoints=[]);var s=i(n);if(l[s]||(l[s]=[]),l[s].push(n),e.cuepoints.push(n),e.conf.generate_cuepoints&&!1!==n.visible){var o=e.video.duration,u=r.find(".fp-timeline",t)[0];r.css(u,"overflow","visible");var c=n.time||n;c<0&&(c=o+c);var d=r.createElement("a",{className:"fp-cuepoint fp-cuepoint"+(e.cuepoints.length-1)});r.css(d,"left",c/o*100+"%"),u.appendChild(d),a.on(d,"mousedown",(function(t){t.preventDefault(),t.stopPropagation(),e.seek(c)}))}return e},e.removeCuepoint=function(t){var n=e.cuepoints.indexOf(t),r=i(t);if(-1!==n){e.cuepoints=e.cuepoints.slice(0,n).concat(e.cuepoints.slice(n+1));var a=l[r].indexOf(t);if(-1!==a)return l[r]=l[r].slice(0,a).concat(l[r].slice(a+1)),e}}}))},{"../common":1,"../flowplayer":28,bean:31}],9:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("bean"),a=e("../common"),s=e("./util/clipboard");i((function(e,t){if(!1!==e.conf.embed&&!1!==e.conf.share){var n=a.find(".fp-share-menu",t)[0],i=a.createElement("a",{class:"fp-icon fp-embed",title:"Copy to your site"},"Embed");a.append(n,i),e.embedCode=function(){var n=e.conf.embed||{},i=e.video,r=n.width||i.width||a.width(t),s=n.height||i.height||a.height(t),o=e.conf.ratio,l='<iframe src="'+e.shareUrl(!0)+'" allowfullscreen style="border:none;';return n.width||n.height?(isNaN(r)||(r+="px"),isNaN(s)||(s+="px"),l+"width:"+r+";height:"+s+';"></iframe>'):(o&&!e.conf.adaptiveRatio||(o=s/r),'<div style="position:relative;width:100%;display:inline-block;">'+l+'position:absolute;top:0;left:0;width:100%;height:100%;"></iframe><div style="padding-top:'+100*o+'%;"></div></div>')},r.on(t,"click",".fp-embed",(function(){s(e.embedCode(),(function(){e.message("The embed code is now on your clipboard",2e3)}),(function(){e.textarea(e.embedCode(),"Copy the code below to embed your video")}))}))}}))},{"../common":1,"../flowplayer":28,"./util/clipboard":27,bean:31}],10:[function(e,t,n){"use strict";t.exports=function(e,t){t||(t=document.createElement("div"));var n={},i={},r=function(e,r,a){var s=e.split(".")[0],o=function(l){a&&(t.removeEventListener(s,o),n[e].splice(n[e].indexOf(o),1));var u=[l].concat(i[l.timeStamp+l.type]||[]);r&&r.apply(void 0,u)};t.addEventListener(s,o),n[e]||(n[e]=[]),n[e].push(o)};e.on=e.bind=function(t,n){return t.split(" ").forEach((function(e){r(e,n)})),e},e.one=function(t,n){return t.split(" ").forEach((function(e){r(e,n,!0)})),e},e.off=e.unbind=function(i){return i.split(" ").forEach((function(e){var i=e.split(".").slice(1),r=e.split(".")[0];Object.keys(n).filter((function(e){var t=e.split(".").slice(1);return(!r||0===e.indexOf(r))&&function(e,t){return 0===t.filter((function(t){return-1===e.indexOf(t)})).length}(t,i)})).forEach((function(e){var i=n[e],r=e.split(".")[0];n[e]=i.filter((function(e){return t.removeEventListener(r,e),!1}))}))})),e},e.trigger=function(n,r,a){if(n){r=(r||[]).length?r||[]:[r];var s=document.createEvent("Event");return s.initEvent(n.type||n,!1,!0),Object.defineProperty&&(s.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}),i[s.timeStamp+s.type]=r,t.dispatchEvent(s),a?s:e}}},t.exports.EVENTS=["beforeseek","disable","error","finish","fullscreen","fullscreen-exit","load","mute","pause","progress","ready","resume","seek","speed","stop","unload","volume","boot","shutdown"]},{}],11:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("../common"),a=e("bean");i((function(e,t){var n=e.conf;if(!1!==n.share&&n.facebook){e.facebook=function(){var e,t,i=screen.height,r=screen.width,a="string"==typeof n.facebook?n.facebook:window.location.toString();e=Math.round(r/2-275),t=0,i>420&&(t=Math.round(i/2-210)),window.open("https://www.facebook.com/sharer.php?s=100&p[url]="+encodeURIComponent(a),"sharer","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left="+e+",top="+t)};var i=r.find(".fp-share-menu",t)[0],s=r.createElement("a",{class:"fp-icon fp-facebook"},"Facebook");r.append(i,s),a.on(t,"click",".fp-facebook",(function(){e.facebook()}))}}))},{"../common":1,"../flowplayer":28,bean:31}],12:[function(e,t,n){"use strict";var i,r=e("../flowplayer"),a=e("bean"),s=e("../common"),o="fullscreen-exit",l=r.support.fullscreen,u=navigator.userAgent.toLowerCase(),c=/(safari)[ \/]([\w.]+)/.exec(u)&&!/(chrome)[ \/]([\w.]+)/.exec(u);a.on(document,"fullscreenchange.ffscr webkitfullscreenchange.ffscr mozfullscreenchange.ffscr MSFullscreenChange.ffscr",(function(e){var t=document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.fullscreenElement||document.msFullscreenElement||e.target;if(i||t.parentNode&&t.parentNode.getAttribute("data-flowplayer-instance-id")){var n=i||r(t.parentNode);t&&!i?i=n.trigger("fullscreen",[t]):(i.trigger(o,[i]),i=null)}})),r((function(e,t){var n=s.createElement("div",{className:"fp-player"});if(Array.prototype.map.call(t.children,s.identity).forEach((function(e){s.matches(e,".fp-ratio,script")||n.appendChild(e)})),t.appendChild(n),e.conf.fullscreen){var r,a,u,d=window;e.isFullscreen=!1,e.fullscreen=function(t){if(!e.disabled)return void 0===t&&(t=!e.isFullscreen),t&&(r=d.scrollY,a=d.scrollX),l?t?["requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].forEach((function(e){if("function"==typeof n[e])return n[e](Element.ALLOW_KEYBOARD_INPUT),setTimeout((function(){!c||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||n[e]()})),!1})):["exitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].forEach((function(e){if("function"==typeof document[e])return document[e](),!1})):e.trigger(t?"fullscreen":o,[e]),e},e.on("mousedown.fs",(function(){+new Date-u<150&&e.ready&&e.fullscreen(),u=+new Date})),e.on("fullscreen",(function(){s.addClass(t,"is-fullscreen"),s.toggleClass(t,"fp-minimal-fullscreen",s.hasClass(t,"fp-minimal")),s.removeClass(t,"fp-minimal"),l||s.css(t,"position","fixed"),e.isFullscreen=!0})).on(o,(function(){var n;s.toggleClass(t,"fp-minimal",s.hasClass(t,"fp-minimal-fullscreen")),s.removeClass(t,"fp-minimal-fullscreen"),l||"html5"!==e.engine||(n=t.css("opacity")||"",s.css(t,"opacity",0)),l||s.css(t,"position",""),s.removeClass(t,"is-fullscreen"),l||"html5"!==e.engine||setTimeout((function(){t.css("opacity",n)})),e.isFullscreen=!1,d.scrollTo(a,r)})).on("unload",(function(){e.isFullscreen&&e.fullscreen()})),e.on("shutdown",(function(){i=null}))}}))},{"../common":1,"../flowplayer":28,bean:31}],13:[function(e,t,n){"use strict";var i,r,a=e("../flowplayer"),s=e("bean"),o=e("../common");s.on(document,"keydown.fp",(function(e){var t=i,n=e.ctrlKey||e.metaKey||e.altKey,a=e.which,s=t&&t.conf;if(t&&s.keyboard&&!t.disabled){if(-1!=[63,187,191].indexOf(a))return o.toggleClass(r,"is-help"),!1;if(27==a&&o.hasClass(r,"is-help"))return o.toggleClass(r,"is-help"),!1;if(!n&&t.ready){if(e.preventDefault(),e.shiftKey)return void(39==a?t.speed(!0):37==a&&t.speed(!1));if(a<58&&a>47)return t.seekTo(a-48);switch(a){case 38:case 75:t.volume(t.volumeLevel+.15);break;case 40:case 74:t.volume(t.volumeLevel-.15);break;case 39:case 76:t.seeking=!0,t.seek(!0);break;case 37:case 72:t.seeking=!0,t.seek(!1);break;case 190:t.seekTo();break;case 32:t.toggle();break;case 70:s.fullscreen&&t.fullscreen();break;case 77:t.mute();break;case 81:t.unload()}}}})),a((function(e,t){if(e.conf.keyboard){s.on(t,"mouseenter mouseleave",(function(n){(i=e.disabled||"mouseover"!=n.type?0:e)&&(r=t)}));var n=a.support.video&&"flash"!==e.conf.engine&&document.createElement("video").playbackRate?"<p><em>shift</em> + <em>&#8592;</em><em>&#8594;</em>slower / faster</p>":"";t.appendChild(o.createElement("div",{className:"fp-help"},'         <a class="fp-close"></a>         <div class="fp-help-section fp-help-basics">            <p><em>space</em>play / pause</p>            <p><em>q</em>unload | stop</p>            <p><em>f</em>fullscreen</p>'+n+'         </div>         <div class="fp-help-section">            <p><em>&#8593;</em><em>&#8595;</em>volume</p>            <p><em>m</em>mute</p>         </div>         <div class="fp-help-section">            <p><em>&#8592;</em><em>&#8594;</em>seek</p>            <p><em>&nbsp;. </em>seek to previous            </p><p><em>1</em><em>2</em>&hellip; <em>6</em> seek to 10%, 20% &hellip; 60% </p>         </div>   ')),s.on(t,"click",".fp-close",(function(){o.toggleClass(t,"is-help")})),e.bind("shutdown",(function(){r==t&&(r=null)}))}}))},{"../common":1,"../flowplayer":28,bean:31}],14:[function(e,t,n){var i=e("../flowplayer"),r=e("../common"),a=e("bean");i((function(e,t){e.showMenu=function(n,i){var s=r.find(".fp-ui",t)[0];r.toggleClass(n,"fp-active",!0),setTimeout((function(){a.one(document,"click",(function(){e.hideMenu(n)}))}));var o=i;if(i&&i.tagName&&(o={left:r.offset(i).left,rightFallbackOffset:r.width(i),top:r.offset(i).top+r.height(i)}),!o)return r.css(n,"top","auto");o.rightFallbackOffset=o.rightFallbackOffset||0;var l=o.top-r.offset(s).top,u=o.left-r.offset(s).left;r.width(n)+u>r.width(s)&&(u=u-r.width(n)+o.rightFallbackOffset),r.height(n)+l>r.height(s)&&(l-=r.height(n)),r.css(n,{top:l+"px",left:u+"px"})},e.hideMenu=function(e){r.toggleClass(e,"fp-active",!1),r.css(e,{top:"-9999em"})}}))},{"../common":1,"../flowplayer":28,bean:31}],15:[function(e,t,n){var i=e("../flowplayer"),r=e("../common"),a=e("bean");i((function(e,t){function n(e){var t=r.createElement("div",{className:"fp-message"},e);return s.insertBefore(t,i),setTimeout((function(){r.toggleClass(t,"fp-shown")})),t}var i=r.find(".fp-header",t)[0],s=r.find(".fp-ui",t)[0];e.message=function(e,t){var i=n(e),a=function(){r.toggleClass(i,"fp-shown"),setTimeout((function(){!function(e){r.removeNode(e)}(i)}),500)};return t&&setTimeout(a,t),a},e.textarea=function(e){var t=document.createElement("textarea");t.value=e,t.className="fp-textarea",s.appendChild(t),a.on(document,"click.fptextarea",(function(e){if(e.target===t)return t.select();e.stopPropagation(),e.preventDefault(),r.removeNode(t),a.off(document,"click.fptextarea")}))}}))},{"../common":1,"../flowplayer":28,bean:31}],16:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=/IEMobile/.test(window.navigator.userAgent),a=e("../common"),s=e("bean"),o=e("./ui").format,l=window.navigator.userAgent;(i.support.touch||r)&&i((function(e,t){var n=/Android/.test(l)&&!/Firefox/.test(l)&&!/Opera/.test(l),u=/Silk/.test(l),c=n?parseFloat(/Android\ (\d\.\d)/.exec(l)[1],10):0;if(n&&!r){if(!/Chrome/.test(l)&&c<4){var d=e.load;e.load=function(){var t=d.apply(e,arguments);return e.trigger("ready",[e,e.video]),t}}var h,f=0,p=function(e){h=setInterval((function(){e.video.time=++f,e.trigger("progress",[e,f])}),1e3)};e.bind("ready pause unload",(function(){h&&(clearInterval(h),h=null)})),e.bind("ready",(function(){f=0})),e.bind("resume",(function(t,n){if(n.live)return f?p(n):void e.one("progress",(function(e,t,n){0===n&&p(t)}))}))}i.support.volume||a.addClass(t,"no-volume"),a.addClass(t,"is-touch"),e.sliders&&e.sliders.timeline&&e.sliders.timeline.disableAnimation();var g=!1;if(s.on(t,"touchmove",(function(){g=!0})),s.on(t,"touchend click",(function(n){return g?void(g=!1):e.playing&&!a.hasClass(t,"is-mouseover")?(a.addClass(t,"is-mouseover"),a.removeClass(t,"is-mouseout"),n.preventDefault(),void n.stopPropagation()):void(e.playing||e.splash||!a.hasClass(t,"is-mouseout")||a.hasClass(t,"is-mouseover")||setTimeout((function(){e.disabled||e.playing||e.splash||e.resume()}),400))})),!i.support.fullscreen&&e.conf.native_fullscreen&&"function"==typeof document.createElement("video").webkitEnterFullScreen){var m=e.fullscreen;e.fullscreen=function(){var n=a.find("video.fp-engine",t)[0];if(!n)return m.apply(e);e.trigger("fullscreen",[e]),s.on(document,"webkitfullscreenchange.nativefullscreen",(function(){document.webkitFullscreenElement===n&&(s.off(document,".nativefullscreen"),s.on(document,"webkitfullscreenchange.nativefullscreen",(function(){document.webkitFullscreenElement||(s.off(document,".nativefullscreen"),e.trigger("fullscreen-exit",[e]))})))})),n.webkitEnterFullScreen(),s.one(n,"webkitendfullscreen",(function(){s.off(document,"fullscreenchange.nativefullscreen"),e.trigger("fullscreen-exit",[e]),a.prop(n,"controls",!0),a.prop(n,"controls",!1)}))}}(n||u)&&e.bind("ready",(function(){var n=a.find("video.fp-engine",t)[0];s.one(n,"canplay",(function(){n.play()})),n.play(),e.bind("progress.dur",(function(){if(!e.live&&!e.conf.live){var i=n.duration;1!==i&&(e.video.duration=i,a.find(".fp-duration",t)[0].innerHTML=o(i),e.unbind("progress.dur"))}}))}))}))},{"../common":1,"../flowplayer":28,"./ui":24,bean:31}],17:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("extend-object"),a=e("bean"),s=e("../common"),o=e("./resolve"),l=new o,u=window.jQuery,c=/^#/;i((function(e,t){function n(){return s.find(f.query,i())}function i(){if(!c.test(f.query))return t}function d(){return s.find(f.query+"."+p,i())}function h(){var n=s.find(".fp-playlist",t)[0];if(!n){n=s.createElement("div",{className:"fp-playlist"});var i=s.find(".fp-next,.fp-prev",t);i.length?i[0].parentElement.insertBefore(n,i[0]):s.insertAfter(t,s.find("video",t)[0],n)}n.innerHTML="",e.conf.playlist[0].length&&(e.conf.playlist=e.conf.playlist.map((function(e){if("string"==typeof e){var t=e.split(o.TYPE_RE)[1];return{sources:[{type:"m3u8"===t.toLowerCase()?"application/x-mpegurl":"video/"+t,src:e}]}}return{sources:e.map((function(e){var t={};return Object.keys(e).forEach((function(n){t.type=/mpegurl/i.test(n)?"application/x-mpegurl":"video/"+n,t.src=e[n]})),t}))}}))),e.conf.playlist.forEach((function(t,i){n.appendChild(s.createElement("a",{href:t.sources[0].src,className:e.video.index===i?p:void 0,"data-index":i}))}))}var f=r({active:"is-active",advance:!0,query:".fp-playlist a"},e.conf),p=f.active,g=s.find(".fp-ui",t)[0],m=s.hasClass(t,"fp-custom-playlist")||!!f.customPlaylist;s.toggleClass(t,"fp-custom-playlist",m),s.toggleClass(t,"fp-default-playlist",!m),e.play=function(t){if(void 0===t)return e.resume();if("number"==typeof t&&!e.conf.playlist[t])return e;if("number"!=typeof t)return e.load.apply(null,arguments);var n=r({index:t},e.conf.playlist[t]);return e.off("beforeresume.fromfirst"),t===e.video.index?e.load(n,(function(){e.resume()})):(e.load(n,(function(){e.video.index=t})),e)},e.next=function(t){t&&t.preventDefault();var n=e.video.index;return-1!=n&&e.play(n=n===e.conf.playlist.length-1?0:n+1),e},e.prev=function(t){t&&t.preventDefault();var n=e.video.index;return-1!=n&&e.play(n=0===n?e.conf.playlist.length-1:n-1),e},e.setPlaylist=function(t,n){return e.conf.playlist=t,n||delete e.video.index,h(),e},e.addPlaylistItem=function(t){return delete e.video.is_last,e.setPlaylist(e.conf.playlist.concat([t]),!0)},e.removePlaylistItem=function(t){var n=e.conf.playlist;return e.setPlaylist(n.slice(0,t).concat(n.slice(t+1)))},a.on(t,"click",".fp-next",e.next),a.on(t,"click",".fp-prev",e.prev),f.advance&&e.off("finish.pl").on("finish.pl",(function(e,n){if(n.video.loop)return n.seek(0,(function(){n.resume()}));var i=n.video.index>=0?n.video.index+1:void 0;i<n.conf.playlist.length||f.loop?(i=i===n.conf.playlist.length?0:i,s.removeClass(t,"is-finished"),setTimeout((function(){n.play(i)}))):n.conf.playlist.length>1&&(n.one("beforeresume.fromfirst",(function(e){e.preventDefault(),n.play(0)})),n.one("seek",(function(){n.off("beforeresume.fromfirst")})))}));var v=!1;e.conf.playlist.length&&(v=!0,h(),e.conf.clip&&e.conf.clip.sources.length||(e.conf.clip=e.conf.playlist[e.conf.startIndex||0])),n().length&&!v&&(e.conf.playlist=[],delete e.conf.startIndex,n().forEach((function(t){var n=t.href;t.setAttribute("data-index",e.conf.playlist.length);var i=l.resolve(n,e.conf.clip.sources);u&&r(i,u(t).data()),e.conf.playlist.push(i)}))),s.find(".fp-prev,.fp-next,.fp-playlist",t).forEach((function(e){g.appendChild(e)})),a.on(c.test(f.query)?document:t,"click",f.query,(function(t){t.preventDefault();var n=Number(t.currentTarget.getAttribute("data-index"));-1!=n&&e.play(n)})),e.on("load",(function(n,r,a){if(e.conf.playlist.length){var o=d()[0],l=o&&o.getAttribute("data-index"),u=a.index=function(t){return void 0!==t.index?t.index:void 0!==e.video.index?e.video.index:e.conf.startIndex||0}(a),c=s.find(f.query+'[data-index="'+u+'"]',i())[0],h=u==e.conf.playlist.length-1;o&&s.removeClass(o,p),c&&s.addClass(c,p),s.removeClass(t,"video"+l),s.addClass(t,"video"+u),s.toggleClass(t,"last-video",h),a.index=r.video.index=u,a.is_last=r.video.is_last=h}})).on("unload.pl",(function(){e.conf.playlist.length&&(d().forEach((function(e){s.toggleClass(e,p)})),e.conf.playlist.forEach((function(e,n){s.removeClass(t,"video"+n)})))})),e.conf.playlist.length&&(e.conf.loop=!1)}))},{"../common":1,"../flowplayer":28,"./resolve":19,bean:31,"extend-object":36}],18:[function(e,t,n){var i=e("../flowplayer"),r=e("../common"),a=e("bean");i((function(e,t){function n(){r.find(".fp-qsel-menu",t).forEach(r.removeNode),r.find(".fp-qsel",t).forEach(r.removeNode)}function i(e){l.appendChild(r.createElement("strong",{className:"fp-qsel"},"HD"));var t=r.createElement("div",{className:"fp-menu fp-qsel-menu"},"<strong>Quality</strong>");e.forEach((function(e){var n=document.createElement("a");n.setAttribute("data-quality",void 0!==e.value?e.value:e),n.innerHTML=e.label||e,t.appendChild(n)})),o.appendChild(t)}function s(e){r.find(".fp-qsel-menu a",t).forEach((function(t){r.toggleClass(t,"fp-selected",t.getAttribute("data-quality")==e),r.toggleClass(t,"fp-color",t.getAttribute("data-quality")==e)}))}var o=r.find(".fp-ui",t)[0],l=r.find(".fp-controls",o)[0];a.on(t,"click",".fp-qsel",(function(){var n=r.find(".fp-qsel-menu",t)[0];r.hasClass(n,"fp-active")?e.hideMenu():e.showMenu(n)})),a.on(t,"click",".fp-qsel-menu a",(function(t){var n=t.target.getAttribute("data-quality");e.quality(n)})),e.quality=function(t){t=isNaN(Number(t))?t:Number(t),e.trigger("quality",[e,t])},e.on("quality",(function(e,t,n){s(n)})),e.on("ready",(function(e,t,r){n(),!r.qualities||r.qualities.filter((function(e){return void 0===e.value||e.value>-1})).length<2||(i(r.qualities),s(r.quality))}))}))},{"../common":1,"../flowplayer":28,bean:31}],19:[function(e,t,n){"use strict";function i(e){var t=e.attr("src"),n=e.attr("type")||"",i=t.split(a)[1];return n=n.toLowerCase(),s(e.data(),{src:t,suffix:i||n,type:n||i})}function r(e){return/mpegurl/i.test(e)?"application/x-mpegurl":"video/"+e}var a=/\.(\w{3,4})(\?.*)?$/i,s=e("extend-object");t.exports=function(){this.sourcesFromVideoTag=function(e,t){var n=[];return t("source",e).each((function(){n.push(i(t(this)))})),!n.length&&e.length&&n.push(i(e)),n},this.resolve=function(e,t){return e?("string"==typeof e&&((e={src:e,sources:[]}).sources=(t||[]).map((function(t){var n=t.src.split(a)[1];return{type:t.type,src:e.src.replace(a,"."+n+"$2")}}))),e instanceof Array&&(e={sources:e.map((function(e){return e.type&&e.src?e:Object.keys(e).reduce((function(t,n){return s(t,{type:r(n),src:e[n]})}),{})}))}),e):{sources:t}}},t.exports.TYPE_RE=a},{"extend-object":36}],20:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("../common"),a=e("extend-object"),s=e("bean");i((function(e,t){var n=e.conf;if(!1!==n.share){e.shareUrl=function(t){return t&&n.embed&&n.embed.iframe?n.embed.iframe:"string"==typeof e.conf.share?e.conf.share:(t?"https://flowplayer.org/e/":"https://flowplayer.org/s/")+"?t="+encodeURIComponent(e.video.title||(r.find("title")[0]||{}).innerHTML||"Flowplayer Commercial video")+"&c="+encodeURIComponent(btoa(JSON.stringify(a({},e.conf,e.extensions))))+"&r="+encodeURIComponent(window.location.toString())};var i=r.createElement("div",{className:"fp-menu fp-share-menu"},"<strong>Share</strong>");r.find(".fp-ui",t)[0].appendChild(i);var o=r.find(".fp-share",t)[0];s.on(t,"click",".fp-share",(function(t){t.preventDefault(),r.hasClass(i,"fp-active")?e.hideMenu():e.showMenu(i,o)}))}else r.find(".fp-share",t).forEach(r.removeNode)}))},{"../common":1,"../flowplayer":28,bean:31,"extend-object":36}],21:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("../common"),a=e("bean");i.defaults.subtitleParser=function(e){function t(e){var t=e.split(":");return 2==t.length&&t.unshift(0),60*t[0]*60+60*t[1]+parseFloat(t[2].replace(",","."))}for(var n,i,r,a=/^(([0-9]{2}:){1,2}[0-9]{2}[,.][0-9]{3}) --\> (([0-9]{2}:){1,2}[0-9]{2}[,.][0-9]{3})(.*)/,s=[],o=0,l=e.split("\n"),u=l.length,c={};o<u;o++)if(i=a.exec(l[o])){for(n=l[o-1],r="<p>"+l[++o]+"</p><br/>";"string"==typeof l[++o]&&l[o].trim()&&o<l.length;)r+="<p>"+l[o]+"</p><br/>";c={title:n,startTime:t(i[1]),endTime:t(i[3]),text:r},s.push(c)}return s},i((function(e,t){var n,s,o,l;i.support.inlineVideo&&!e.conf.native_fullscreen||(e.conf.nativesubtitles=!0),a.on(t,"click",".fp-cc",(function(){r.hasClass(l,"fp-active")?e.hideMenu():e.showMenu(l)})),a.on(t,"click",".fp-subtitle-menu [data-subtitle-index]",(function(t){t.preventDefault();var n=t.target.getAttribute("data-subtitle-index");if("-1"===n)return e.disableSubtitles();e.loadSubtitles(n)}));var u=function(){s=(s=r.find(".fp-captions",t)[0])||r.appendTo(r.createElement("div",{class:"fp-captions"}),r.find(".fp-player",t)[0]),Array.prototype.forEach.call(s.children,r.removeNode),o=o||r.createElement("strong",{className:"fp-cc"},"CC"),l=l||r.createElement("div",{className:"fp-menu fp-subtitle-menu"},"<strong>Closed Captions</strong>"),r.find("a",l).forEach(r.removeNode),l.appendChild(r.createElement("a",{"data-subtitle-index":-1},"No subtitles")),(e.video.subtitles||[]).forEach((function(e,t){var n=r.createElement("a",{"data-subtitle-index":t},e.label||"Default ("+(e.srclang||"en")+")");l.appendChild(n)})),r.find(".fp-ui",t)[0].appendChild(l),r.find(".fp-controls",t)[0].appendChild(o)};e.on("ready",(function(n,a,s){if((!i.support.subtitles||!a.conf.nativesubtitles||"html5"!=a.engine.engineName)&&(a.subtitles=[],u(),r.removeClass(t,"has-menu"),e.disableSubtitles(),r.toggleClass(o,"fp-hidden",!s.subtitles||!s.subtitles.length),s.subtitles&&s.subtitles.length)){var l=s.subtitles.filter((function(e){return e.default}))[0];l&&a.loadSubtitles(s.subtitles.indexOf(l))}})),e.bind("cuepoint",(function(e,t,i){i.subtitle?(n=i.index,r.html(s,i.subtitle.text),r.addClass(s,"fp-shown")):i.subtitleEnd&&(r.removeClass(s,"fp-shown"),n=i.index)})),e.bind("seek",(function(t,i,a){n&&e.cuepoints[n]&&e.cuepoints[n].time>a&&(r.removeClass(s,"fp-shown"),n=null),(e.cuepoints||[]).forEach((function(t){var i=t.subtitle;i&&n!=t.index?a>=t.time&&(!i.endTime||a<=i.endTime)&&e.trigger("cuepoint",[e,t]):t.subtitleEnd&&a>=t.time&&t.index==n+1&&e.trigger("cuepoint",[e,t])}))})),e.on("unload",(function(){r.find(".fp-captions",t).forEach(r.removeNode)}));var c=function(e){r.toggleClass(r.find("a.fp-selected",l)[0],"fp-selected"),r.toggleClass(r.find('a[data-subtitle-index="'+e+'"]',l)[0],"fp-selected")};e.disableSubtitles=function(){return e.subtitles=[],(e.cuepoints||[]).forEach((function(t){(t.subtitle||t.subtitleEnd)&&e.removeCuepoint(t)})),s&&Array.prototype.forEach.call(s.children,r.removeNode),c(-1),e},e.loadSubtitles=function(t){e.disableSubtitles();var n=e.video.subtitles[t].src;if(n)return c(t),r.xhrGet(n,(function(t){e.conf.subtitleParser(t).forEach((function(t){var n={time:t.startTime,subtitle:t,visible:!1};e.subtitles.push(t),e.addCuepoint(n),e.addCuepoint({time:t.endTime,subtitleEnd:t.title,visible:!1}),0!==t.startTime||e.video.time||e.splash||e.trigger("cuepoint",[e,n]),e.splash&&e.one("ready",(function(){e.trigger("cuepoint",[e,n])}))}))}),(function(){return e.trigger("error",{code:8,url:n}),!1})),e}}))},{"../common":1,"../flowplayer":28,bean:31}],22:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("extend-object");!function(){var e={},t=document.documentElement.style,n=navigator.userAgent.toLowerCase(),a=/(chrome)[ \/]([\w.]+)/.exec(n)||/(safari)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];a[1]&&(e[a[1]]=!0,e.version=a[2]||"0");var s=function(){var e=document.createElement("video");return e.loop=!0,e.autoplay=!0,e.preload=!0,e}(),o=navigator.userAgent,l=e.msie||/Trident\/7/.test(o),u=/iPad|MeeGo/.test(o)&&!/CriOS/.test(o),c=/iPad/.test(o)&&/CriOS/.test(o),d=/iP(hone|od)/i.test(o)&&!/iPad/.test(o)&&!/IEMobile/i.test(o),h=/Android/.test(o)&&!/Firefox/.test(o),f=/Android/.test(o)&&/Firefox/.test(o),p=/Silk/.test(o),g=/IEMobile/.test(o),m=g?parseFloat(/Windows\ Phone\ (\d+\.\d+)/.exec(o)[1],10):0,v=g?parseFloat(/IEMobile\/(\d+\.\d+)/.exec(o)[1],10):0,y=u||d?function(e){var t=/iP(ad|hone)(; CPU)? OS (\d+_\d)/.exec(e);return t&&t.length>1?parseFloat(t[t.length-1].replace("_","."),10):0}(o):0,b=h?parseFloat(/Android\ (\d\.\d)/.exec(o)[1],10):0,_=r(i.support,{browser:e,iOS:{iPhone:d,iPad:u||c,version:y,chrome:c},android:!!h&&{firefox:f,version:b},subtitles:!!s.addTextTrack,fullscreen:"boolean"==typeof document.webkitFullscreenEnabled?document.webkitFullscreenEnabled:"function"==typeof document.webkitCancelFullScreen&&!/Mac OS X 10_5.+Version\/5\.0\.\d Safari/.test(o)||document.mozFullScreenEnabled||"function"==typeof document.exitFullscreen||"function"==typeof document.msExitFullscreen,inlineBlock:!(l&&e.version<8),touch:"ontouchstart"in window,dataload:!u&&!d&&!g,flex:"flexWrap"in t||"WebkitFlexWrap"in t||"msFlexWrap"in t,svg:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,zeropreload:!l&&!h,volume:!(u||d||p||c),cachedVideoTag:!(u||d||c||g),firstframe:!(d||u||h||p||c||g||f),inlineVideo:(!d||y>=10)&&(!g||m>=8.1&&v>=11)&&(!h||b>=3),hlsDuration:!h&&(!e.safari||u||d||c),seekable:!u&&!c});_.autoplay=_.firstframe;try{var T=navigator.plugins["Shockwave Flash"],w=l?new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version"):T.description;l||T[0].enabledPlugin?((w=w.split(/\D+/)).length&&!w[0]&&(w=w.slice(1)),_.flashVideo=w[0]>9||9==w[0]&&w[3]>=115):_.flashVideo=!1}catch(e){}try{_.video=!!s.canPlayType,_.video&&s.canPlayType("video/mp4")}catch(e){_.video=!1}_.animation=function(){for(var e=["","Webkit","Moz","O","ms","Khtml"],t=document.createElement("p"),n=0;n<e.length;n++)if(void 0!==t.style[e[n]+"AnimationName"])return!0}()}()},{"../flowplayer":28,"extend-object":36}],23:[function(e,t,n){"use strict";var i=e("../flowplayer"),r=e("../common"),a=e("bean");i((function(e,t){var n=e.conf;if(!1!==n.share&&!1!==n.twitter){e.tweet=function(){var t,i,r=screen.height,a=screen.width,s="string"==typeof n.twitter?n.twitter:e.shareUrl();t=Math.round(a/2-275),i=0,r>420&&(i=Math.round(r/2-210)),window.open("https://twitter.com/intent/tweet?url="+encodeURIComponent(s),"intent","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left="+t+",top="+i)};var i=r.find(".fp-share-menu",t)[0],s=r.createElement("a",{class:"fp-icon fp-twitter"},"Twitter");r.append(i,s),a.on(t,"click",".fp-twitter",(function(){e.tweet()}))}}))},{"../common":1,"../flowplayer":28,bean:31}],24:[function(e,t,n){(function(n){"use strict";function i(e){return(e=parseInt(e,10))>=10?e:"0"+e}function r(e,t){e=Math.max(e||0,0),e=t?Math.ceil(e):Math.floor(e);var n=Math.floor(e/3600),r=Math.floor(e/60);return e-=60*r,n>=1?n+":"+i(r-=60*n)+":"+i(e):i(r)+":"+i(e)}var a=e("../flowplayer"),s=e("../common"),o=e("bean"),l=e("./ui/slider"),u=e("./ui/bar-slider"),c=n("PHN2ZyBjbGFzcz0iZnAtcGxheS1yb3VuZGVkLW91dGxpbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDk5Ljg0NCA5OS44NDM0Ij48ZGVmcz48c3R5bGU+LmZwLWNvbG9yLXBsYXl7b3BhY2l0eTowLjY1O30uY29udHJvbGJ1dHRvbntmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz4KPHRpdGxlPnBsYXktcm91bmRlZC1vdXRsaW5lPC90aXRsZT48cGF0aCBjbGFzcz0iZnAtY29sb3ItcGxheSIgZD0iTTQ5LjkyMTctLjA3OGE1MCw1MCwwLDEsMCw1MCw1MEE1MC4wNTY0LDUwLjA1NjQsMCwwLDAsNDkuOTIxNy0uMDc4WiIvPjxwYXRoIGNsYXNzPSJjb250cm9sYnV0dG9uIiBkPSJNNDEuMDM1OSw3MS4xOWE1LjA0OTIsNS4wNDkyLDAsMCwxLTIuNTU3NS0uNjY3M2MtMS44MDMxLTEuMDQxLTIuNzk1OC0zLjEyNDgtMi43OTU4LTUuODY2NFYzNS4xODg3YzAtMi43NDI5Ljk5MzMtNC44MjcyLDIuNzk3LTUuODY3NiwxLjgwMjUtMS4wNDIyLDQuMTAzNC0uODYsNi40OC41MTQzTDcwLjQ3ODIsNDQuNTY3MmMyLjM3NTEsMS4zNzExLDMuNjgyNiwzLjI3MjUsMy42ODMyLDUuMzU0NXMtMS4zMDc2LDMuOTg0NS0zLjY4MzIsNS4zNTYyTDQ0Ljk1OTIsNzAuMDExNEE3LjkzODQsNy45Mzg0LDAsMCwxLDQxLjAzNTksNzEuMTlabS4wMDY1LTQwLjEyM2EyLjY3OTQsMi42Nzk0LDAsMCwwLTEuMzU4Mi4zNDEzYy0xLjAyNjMuNTkyNi0xLjU5MTIsMS45MzQ5LTEuNTkxMiwzLjc4VjY0LjY1NjNjMCwxLjg0NDkuNTY0OSwzLjE4NjYsMS41OTA2LDMuNzc5MSwxLjAyODEuNTkzMiwyLjQ3MzMuNDEwOCw0LjA3LS41MTJMNjkuMjczLDUzLjE5MDZjMS41OTgzLS45MjI3LDIuNDc4LTIuMDgzOCwyLjQ3OC0zLjI2ODlzLS44OC0yLjM0NDUtMi40NzgtMy4yNjY2TDQzLjc1NCwzMS45MjI3QTUuNTY4NSw1LjU2ODUsMCwwLDAsNDEuMDQyMywzMS4wNjcxWiIgZmlsdGVyPSJ1cmwoI2YxKSIvPjwvc3ZnPgo=","base64"),d=n("PHN2ZyBjbGFzcz0iZnAtcGxheS1yb3VuZGVkLWZpbGwiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogIDxkZWZzPjxzdHlsZT4uYXtmaWxsOiMwMDA7b3BhY2l0eTowLjY1O30uYntmaWxsOiNmZmY7b3BhY2l0eToxLjA7fTwvc3R5bGU+CiAgPC9kZWZzPjx0aXRsZT5wbGF5LXJvdW5kZWQtZmlsbDwvdGl0bGU+CiAgPHBhdGggY2xhc3M9ImZwLWNvbG9yLXBsYXkiIGQ9Ik00OS45MjE3LS4wNzhhNTAsNTAsMCwxLDAsNTAsNTBBNTAuMDU2NCw1MC4wNTY0LDAsMCwwLDQ5LjkyMTctLjA3OFoiLz4KICA8cGF0aCBjbGFzcz0iYiIgZD0iTTM1Ljk0MiwzNS4yMzIzYzAtNC43Mjg5LDMuMzUwNi02LjY2MzcsNy40NDYtNC4yOTcxTDY4LjgzLDQ1LjYyMzVjNC4wOTU2LDIuMzY0LDQuMDk1Niw2LjIzMTksMCw4LjU5NzdMNDMuMzg4LDY4LjkxYy00LjA5NTQsMi4zNjQtNy40NDYuNDMtNy40NDYtNC4yOTc5WiIgZmlsdGVyPSJ1cmwoI2YxKSIvPgogIDwvc3ZnPgogIAo=","base64"),h=n("PHN2ZyBjbGFzcz0iZnAtcGxheS1zaGFycC1maWxsIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4uZnAtY29sb3ItcGxheXtvcGFjaXR5OjAuNjU7fS5jb250cm9sYnV0dG9ue2ZpbGw6I2ZmZjt9PC9zdHlsZT4KICA8L2RlZnM+CiAgPHRpdGxlPnBsYXktc2hhcnAtZmlsbDwvdGl0bGU+CiAgPHBhdGggY2xhc3M9ImZwLWNvbG9yLXBsYXkiIGQ9Ik00OS45MjE3LS4wNzhhNTAsNTAsMCwxLDAsNTAsNTBBNTAuMDU2NCw1MC4wNTY0LDAsMCwwLDQ5LjkyMTctLjA3OFoiLz4KICA8cG9seWdvbiBjbGFzcz0iY29udHJvbGJ1dHRvbiIgcG9pbnRzPSI3My42MDEgNTAgMzcuOTY4IDcwLjU3MyAzNy45NjggMjkuNDI3IDczLjYwMSA1MCIgZmlsdGVyPSJ1cmwoI2YxKSIvPgo8L3N2Zz4K","base64"),f=n("PHN2ZyBjbGFzcz0iZnAtcGxheS1zaGFycC1vdXRsaW5lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5OS44NDQgOTkuODQzNCI+PGRlZnM+PHN0eWxlPi5jb250cm9sYnV0dG9uYmd7b3BhY2l0eTowLjY1O30uY29udHJvbGJ1dHRvbntmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz48dGl0bGU+cGxheS1zaGFycC1vdXRsaW5lPC90aXRsZT48cGF0aCBjbGFzcz0iZnAtY29sb3ItcGxheSIgZD0iTTQ5LjkyMTctLjA3OGE1MCw1MCwwLDEsMCw1MCw1MEE1MC4wNTY0LDUwLjA1NjQsMCwwLDAsNDkuOTIxNy0uMDc4WiIvPjxwYXRoIGNsYXNzPSJjb250cm9sYnV0dG9uIiBkPSJNMzYuOTQ0Myw3Mi4yNDczVjI3LjI5MTZMNzUuODc3Niw0OS43N1ptMi4yLTQxLjE0NTVWNjguNDM3MUw3MS40Nzc2LDQ5Ljc3WiIgZmlsdGVyPSJ1cmwoI2YxKSIvPjwvc3ZnPgo=","base64"),p=n("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utcm91bmRlZC1vdXRsaW5lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5OS44NDM0IDk5Ljg0MzQiPjxkZWZzPjxzdHlsZT4uZnAtY29sb3ItcGxheXtvcGFjaXR5OjAuNjU7fS5yZWN0e2ZpbGw6I2ZmZjt9PC9zdHlsZT4KPC9kZWZzPjx0aXRsZT5wYXVzZS1yb3VuZGVkLW91dGxpbmU8L3RpdGxlPjxwYXRoIGNsYXNzPSJmcC1jb2xvci1wbGF5IiBkPSJNNDkuOTIxMi0uMDc4M2E1MCw1MCwwLDEsMCw1MC4wMDA2LDUwQTUwLjA1NjIsNTAuMDU2MiwwLDAsMCw0OS45MjEyLS4wNzgzWiIvPjxnIGNsYXNzPSJjb250cm9sYnV0dG9uIj48cGF0aCBjbGFzcz0icmVjdCIgZD0iTTM5LjAwMzYsNzEuOTcyNmE3LjU2NSw3LjU2NSwwLDAsMS03LjU1Ny03LjU1NnYtMjguOTlhNy41NTY1LDcuNTU2NSwwLDAsMSwxNS4xMTMsMHYyOC45OUE3LjU2NDgsNy41NjQ4LDAsMCwxLDM5LjAwMzYsNzEuOTcyNlptMC00MS45MDRhNS4zNjQ3LDUuMzY0NywwLDAsMC01LjM1OTMsNS4zNTgydjI4Ljk5YTUuMzU4Nyw1LjM1ODcsMCwwLDAsMTAuNzE3NCwwdi0yOC45OUE1LjM2NDUsNS4zNjQ1LDAsMCwwLDM5LjAwMzYsMzAuMDY4NloiIGZpbHRlcj0idXJsKCNmMSkiLz48cGF0aCBjbGFzcz0icmVjdCIgZD0iTTYwLjg0LDcxLjk3MjZhNy41NjQ4LDcuNTY0OCwwLDAsMS03LjU1Ni03LjU1NnYtMjguOTlhNy41NTY1LDcuNTU2NSwwLDAsMSwxNS4xMTMsMHYyOC45OUE3LjU2NSw3LjU2NSwwLDAsMSw2MC44NCw3MS45NzI2Wm0wLTQxLjkwNGE1LjM2NDUsNS4zNjQ1LDAsMCwwLTUuMzU4Miw1LjM1ODJ2MjguOTlhNS4zNTg3LDUuMzU4NywwLDAsMCwxMC43MTc0LDB2LTI4Ljk5QTUuMzY0Nyw1LjM2NDcsMCwwLDAsNjAuODQsMzAuMDY4NloiIGZpbHRlcj0idXJsKCNmMSkiLz48L2c+PC9zdmc+Cg==","base64"),g=n("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utcm91bmRlZC1maWxsIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmZwLWNvbG9yLXBsYXl7b3BhY2l0eTowLjY1O30ucmVjdHtmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz48dGl0bGU+cGF1c2Utcm91bmRlZC1maWxsPC90aXRsZT48cGF0aCBjbGFzcz0iZnAtY29sb3ItcGxheSIgZD0iTTQ5LjkyMTctLjA3OGE1MCw1MCwwLDEsMCw1MCw1MEE1MC4wNTY0LDUwLjA1NjQsMCwwLDAsNDkuOTIxNy0uMDc4WiIvPjxnIGNsYXNzPSJjb250cm9sYnV0dG9uIiBmaWx0ZXI9InVybCgjZjEpIj48cmVjdCBjbGFzcz0icmVjdCIgeD0iMzEuODQ0IiB5PSIyOC4xMjMxIiB3aWR0aD0iMTMuNDM2MiIgaGVpZ2h0PSI0My41OTczIiByeD0iNi43MTgxIiByeT0iNi43MTgxIi8+PHJlY3QgY2xhc3M9InJlY3QiIHg9IjU0LjU2MzgiIHk9IjI4LjEyMzEiIHdpZHRoPSIxMy40MzYyIiBoZWlnaHQ9IjQzLjU5NzMiIHJ4PSI2LjcxODEiIHJ5PSI2LjcxODEiLz48L2c+PC9zdmc+Cg==","base64"),m=n("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utc2hhcnAtZmlsbCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PGRlZnM+PHN0eWxlPi5mcC1jb2xvci1wbGF5e29wYWNpdHk6MC42NTt9LnJlY3R7ZmlsbDojZmZmO308L3N0eWxlPgo8L2RlZnM+PHRpdGxlPnBhdXNlLXNoYXJwLWZpbGw8L3RpdGxlPjxwYXRoIGNsYXNzPSJmcC1jb2xvci1wbGF5IiBkPSJNNDkuOTIxNy0uMDc4YTUwLDUwLDAsMSwwLDUwLDUwQTUwLjA1NjQsNTAuMDU2NCwwLDAsMCw0OS45MjE3LS4wNzhaIi8+PGcgY2xhc3M9ImNvbnRyb2xidXR0b24iIGZpbHRlcj0idXJsKCNmMSkiPjxyZWN0IGNsYXNzPSJyZWN0IiB4PSIzMy41IiB5PSIzMC4xMDQyIiB3aWR0aD0iMTIuMjYzNCIgaGVpZ2h0PSIzOS43OTE3Ii8+PHJlY3QgY2xhc3M9InJlY3QiIHg9IjU0LjIzNjYiIHk9IjMwLjEwNDIiIHdpZHRoPSIxMi4yNjM0IiBoZWlnaHQ9IjM5Ljc5MTciLz48L2c+PC9zdmc+Cg==","base64"),v=n("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utc2hhcnAtb3V0bGluZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgOTkuODQzNCA5OS44NDM0Ij48ZGVmcz48c3R5bGU+LmZwLWNvbG9yLXBsYXl7b3BhY2l0eTowLjY1O30ucmVjdHtmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz48dGl0bGU+cGF1c2Utc2hhcnAtb3V0bGluZTwvdGl0bGU+PHBhdGggY2xhc3M9ImZwLWNvbG9yLXBsYXkiIGQ9Ik00OS45MjEyLS4wNzgzYTUwLDUwLDAsMSwwLDUwLjAwMDYsNTBBNTAuMDU2Miw1MC4wNTYyLDAsMCwwLDQ5LjkyMTItLjA3ODNaIi8+PGcgY2xhc3M9ImNvbnRyb2xidXR0b24iIGZpbHRlcj0idXJsKCNmMSkiPjxwYXRoIGNsYXNzPSJyZWN0IiBkPSJNNDYuODcwOSw2OS45NTMxSDMzLjEzODVWMjkuODlINDYuODcwOVpNMzUuMTQxNiw2Ny45NWg5LjcyNjJWMzEuODkzNUgzNS4xNDE2WiIvPjxwYXRoIGNsYXNzPSJyZWN0IiBkPSJNNjYuNzA0Nyw2OS45NTMxSDUyLjk3MjJWMjkuODlINjYuNzA0N1pNNTQuOTc1NCw2Ny45NWg5LjcyNjJWMzEuODkzNUg1NC45NzU0WiIvPjwvZz48L3N2Zz4K","base64"),y=n("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1yb3VuZGVkLW91dGxpbmUiIHdpZHRoPScxMTJweCcgaGVpZ2h0PScxMTJweCcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgogICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9Ijc2IiBoZWlnaHQ9Ijc2IiBmaWxsPSJyZ2JhKDAsMCwwLDApIiBjbGFzcz0iYmsiPjwvcmVjdD4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgMjUpIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwwLDAsLjUpIiBzdHJva2Utd2lkdGg9IjMlIiBjbGFzcz0ic3EiPgogICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuMHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC4wcyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgIDwvY2lyY2xlPgogICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCAyNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDAsMCwuNSkiIHN0cm9rZS13aWR0aD0iMyUiIGNsYXNzPSJzcSI+CiAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InN0cm9rZSIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC40cyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjRzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgPC9jaXJjbGU+CiAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDUwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMCwwLC41KSIgc3Ryb2tlLXdpZHRoPSIzJSIgY2xhc3M9InNxIj4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjhzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgICA8L2NpcmNsZT4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgNTApIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwwLDAsLjUpIiBzdHJva2Utd2lkdGg9IjMlIiBjbGFzcz0ic3EiPgogICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjEuMnMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMS4ycyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgIDwvY2lyY2xlPgo8L3N2Zz4K","base64"),b=n("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1yb3VuZGVkLWZpbGwiIHdpZHRoPScxMTJweCcgaGVpZ2h0PScxMTJweCcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgogICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9Ijc2IiBoZWlnaHQ9Ijc2IiBmaWxsPSJyZ2JhKDAsMCwwLDApIiBjbGFzcz0iYmsiPjwvcmVjdD4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgMjUpIiBmaWxsPSJyZ2JhKDAsMCwwLC41KSIgY2xhc3M9InNxIj4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC4wcyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjBzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgPC9jaXJjbGU+CiAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDI1KSIgZmlsbD0icmdiYSgwLDAsMCwuNSkiIGNsYXNzPSJzcSI+CiAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuNHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC40cyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgIDwvY2lyY2xlPgogICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCA1MCkiIGZpbGw9InJnYmEoMCwwLDAsLjUpIiBjbGFzcz0ic3EiPgogICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjhzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgICA8L2NpcmNsZT4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgNTApIiBmaWxsPSJyZ2JhKDAsMCwwLC41KSIgY2xhc3M9InNxIj4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMS4ycyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIxLjJzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgPC9jaXJjbGU+Cjwvc3ZnPgo=","base64"),_=n("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1zaGFycC1maWxsIiB3aWR0aD0nMTEycHgnIGhlaWdodD0nMTEycHgnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNzYiIGhlaWdodD0iNzYiIGZpbGw9InJnYmEoMCwwLDAsMCkiIGNsYXNzPSJiayI+PC9yZWN0PgogIDxyZWN0IHg9Ii0xMCIgeT0iLTEwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1IDI1KSIgZmlsbD0icmdiYSgwLDAsMCwuNSkiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjBzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjBzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogIDwvcmVjdD4KICA8cmVjdCB4PSItMTAiIHk9Ii0xMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCAyNSkiIGZpbGw9InJnYmEoMCwwLDAsLjUpIiBjbGFzcz0ic3EiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC40cyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC40cyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICA8L3JlY3Q+CiAgPHJlY3QgeD0iLTEwIiB5PSItMTAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTAgNTApIiBmaWxsPSJyZ2JhKDAsMCwwLC41KSIgY2xhc3M9InNxIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuOHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgPC9yZWN0PgogIDxyZWN0IHg9Ii0xMCIgeT0iLTEwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1IDUwKSIgZmlsbD0icmdiYSgwLDAsMCwuNSkiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIxLjJzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIxLjJzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogIDwvcmVjdD4KPC9zdmc+Cg==","base64"),T=n("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1zaGFycC1vdXRsaW5lIiB3aWR0aD0nMTEycHgnIGhlaWdodD0nMTEycHgnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNzYiIGhlaWdodD0iNzYiIGZpbGw9InJnYmEoMCwwLDAsMCkiIGNsYXNzPSJiayI+PC9yZWN0PgogIDxyZWN0IHg9Ii05IiB5PSItOSIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNSAyNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDAsMCwuNSkiIHN0cm9rZS13aWR0aD0iMyUiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuMHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC4wcyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICA8L3JlY3Q+CiAgPHJlY3QgeD0iLTkiIHk9Ii05IiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDI1KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMCwwLC41KSIgc3Ryb2tlLXdpZHRoPSIzJSIgY2xhc3M9InNxIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InN0cm9rZSIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC40cyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjRzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogIDwvcmVjdD4KICA8cmVjdCB4PSItOSIgeT0iLTkiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTAgNTApIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwwLDAsLjUpIiBzdHJva2Utd2lkdGg9IjMlIiBjbGFzcz0ic3EiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjhzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgPC9yZWN0PgogIDxyZWN0IHg9Ii05IiB5PSItOSIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNSA1MCkiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDAsMCwuNSkiIHN0cm9rZS13aWR0aD0iMyUiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjEuMnMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMS4ycyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICA8L3JlY3Q+Cjwvc3ZnPgo=","base64");a((function(e,t){function i(e){return s.find(".fp-"+e,t)[0]}function w(e){s.css(R,"padding-top",100*e+"%"),A.inlineBlock||s.height(s.find("object",t)[0],s.height(t))}function S(e){e?(s.addClass(t,"is-mouseover"),s.removeClass(t,"is-mouseout")):(s.addClass(t,"is-mouseout"),s.removeClass(t,"is-mouseover"))}s.find(".fp-filters").forEach(s.removeNode);try{var E;document.body.appendChild(E=s.createElement("div",{},n("PHN2ZyBjbGFzcz0iZnAtZmlsdGVycyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMCAwIj4KICA8ZGVmcz4KICAgIDxmaWx0ZXIgaWQ9ImYxIiB4PSItMjAlIiB5PSItMjAlIiB3aWR0aD0iMjAwJSIgaGVpZ2h0PSIyMDAlIj4KICAgICAgPGZlT2Zmc2V0IHJlc3VsdD0ib2ZmT3V0IiBpbj0iU291cmNlQWxwaGEiIGR4PSIwIiBkeT0iMCIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXggcmVzdWx0PSJtYXRyaXhPdXQiIGluPSJvZmZPdXQiIHR5cGU9Im1hdHJpeCIKICAgICAgdmFsdWVzPSIwLjMgMCAwIDAgMCAwIDAuMyAwIDAgMCAwIDAgMC4zIDAgMCAwIDAgMCAwLjQgMCIgLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyIHJlc3VsdD0iYmx1ck91dCIgaW49Im1hdHJpeE91dCIgc3RkRGV2aWF0aW9uPSI0IiAvPgogICAgICA8ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJibHVyT3V0IiBtb2RlPSJub3JtYWwiIC8+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+Cjwvc3ZnPgo=","base64"))),s.css(E,{width:0,height:0,overflow:"hidden",position:"absolute",margin:0,padding:0})}catch(e){}var C,k=e.conf,A=a.support;s.find(".fp-ratio,.fp-ui",t).forEach(s.removeNode),s.addClass(t,"flowplayer"),t.appendChild(s.createElement("div",{className:"fp-ratio"}));var I=s.createElement("div",{className:"fp-ui"},'         <div class="fp-waiting">           {{ LOADING_SHARP_OUTLINE }}           {{ LOADING_SHARP_FILL }}           {{ LOADING_ROUNDED_FILL }}           {{ LOADING_ROUNDED_OUTLINE }}         </div>         <div class="fp-header">           <a class="fp-share fp-icon"></a>           <a class="fp-fullscreen fp-icon"></a>           <a class="fp-unload fp-icon"></a>         </div>         <p class="fp-speed-flash"></p>         <div class="fp-play fp-visible">           <a class="fp-icon fp-playbtn"></a>           {{ PLAY_ROUNDED_FILL }}           {{ PLAY_ROUNDED_OUTLINE }}           {{ PLAY_SHARP_FILL }}           {{ PLAY_SHARP_OUTLINE }}         </div>         <div class="fp-pause">           <a class="fp-icon fp-playbtn"></a>           {{ PAUSE_SHARP_OUTLINE }}           {{ PAUSE_SHARP_FILL }}           {{ PAUSE_ROUNDED_OUTLINE }}           {{ PAUSE_ROUNDED_FILL }}         </div>         <div class="fp-controls">            <a class="fp-icon fp-playbtn"></a>            <span class="fp-elapsed">00:00</span>            <div class="fp-timeline fp-bar">               <div class="fp-buffer"></div>               <span class="fp-timestamp"></span>               <div class="fp-progress fp-color"></div>            </div>            <span class="fp-duration"></span>            <span class="fp-remaining"></span>            <div class="fp-volume">               <a class="fp-icon fp-volumebtn"></a>               <div class="fp-volumebar fp-bar-slider">                 <em></em><em></em><em></em><em></em><em></em><em></em><em></em>               </div>            </div>            <strong class="fp-speed fp-hidden"></strong>         </div>'.replace("{{ PAUSE_ROUNDED_FILL }}",g).replace("{{ PAUSE_ROUNDED_OUTLINE }}",p).replace("{{ PAUSE_SHARP_FILL }}",m).replace("{{ PAUSE_SHARP_OUTLINE }}",v).replace("{{ PLAY_SHARP_OUTLINE }}",f).replace("{{ PLAY_SHARP_FILL }}",h).replace("{{ PLAY_ROUNDED_OUTLINE }}",c).replace("{{ PLAY_ROUNDED_FILL }}",d).replace("{{ LOADING_ROUNDED_OUTLINE }}",y).replace("{{ LOADING_ROUNDED_FILL }}",b).replace("{{ LOADING_SHARP_FILL }}",_).replace("{{ LOADING_SHARP_OUTLINE }}",T).replace(/url\(#/g,"url("+window.location.href.replace(window.location.hash,"").replace(/\#$/g,"")+"#"));t.appendChild(I);var x=i("buffer"),L=i("waiting"),D=i("elapsed"),R=i("ratio"),P=i("speed-flash"),O=i("duration"),N=i("remaining"),M=i("timestamp"),U=s.css(R,"padding-top"),j=i("play"),B=i("pause"),F=i("timeline"),G=l(F,e.rtl),H=i("fullscreen"),W=i("volumebar"),z=u(W,{rtl:e.rtl}),V=s.hasClass(t,"no-toggle");G.disableAnimation(s.hasClass(t,"is-touch")),e.sliders=e.sliders||{},e.sliders.timeline=G,e.sliders.volume=z;var Y=[];A.svg||s.html(L,"<p>loading &hellip;</p>"),k.ratio&&w(k.ratio);try{k.fullscreen||s.removeNode(H)}catch(e){s.removeNode(H)}e.on("dvrwindow",(function(){G.disable(!1)})),e.on("ready",(function(e,n,i){var a=n.video.duration;G.disable(n.disabled||!a),k.adaptiveRatio&&!isNaN(i.height/i.width)&&w(i.height/i.width),s.html([O,N],n.live?"Live":r(a)),s.toggleClass(t,"is-long",a>=3600),z.slide(n.volumeLevel),"flash"===n.engine.engineName?G.disableAnimation(!0,!0):G.disableAnimation(!1),s.find(".fp-title",I).forEach(s.removeNode),i.title&&s.prepend(I,s.createElement("div",{className:"fp-message fp-title"},i.title)),s.toggleClass(t,"has-title",!!i.title)})).on("unload",(function(){U||k.splash||s.css(R,"paddingTop",""),G.slide(0),s.addClass(j,"fp-visible")})).on("buffer",(function(){var t=e.video,n=t.buffer/t.duration;!t.seekable&&A.seekable&&G.max(e.conf.live?1/0:n),s.css(x,"width",n<1?100*n+"%":"100%")})).on("speed",(function(e,t,n){t.video.time&&(s.text(P,n+"x"),s.addClass(P,"fp-shown"),(Y=Y.filter((function(e){return clearTimeout(e),!1}))).push(setTimeout((function(){s.addClass(P,"fp-hilite"),Y.push(setTimeout((function(){s.removeClass(P,"fp-hilite"),Y.push(setTimeout((function(){s.removeClass(P,"fp-shown")}),300))}),1e3))}))))})).on("buffered",(function(){s.css(x,"width","100%"),G.max(1)})).on("progress seek",(function(n,i,a){var o=e.video.duration,l=e.video.seekOffset||0;a=a||e.video.time,G.dragging||G.slide((a-l)/(o-l),e.seeking?0:250),s.toggleClass(t,"is-live-position",o-a<k.livePositionOffset),s.html(D,r(a)),s.html(N,r(o-a,!0))})).on("finish resume seek",(function(e){s.toggleClass(t,"is-finished","finish"==e.type)})).on("resume",(function(){s.addClass(j,"fp-visible"),setTimeout((function(){s.removeClass(j,"fp-visible")}),300)})).on("pause",(function(){s.addClass(B,"fp-visible"),setTimeout((function(){s.removeClass(B,"fp-visible")}),300)})).on("stop",(function(){s.html(D,r(0)),G.slide(0,100)})).on("finish",(function(){s.html(D,r(e.video.duration)),G.slide(1,100),s.removeClass(t,"is-seeking")})).on("beforeseek",(function(){})).on("volume",(function(){z.slide(e.volumeLevel)})).on("disable",(function(){var n=e.disabled;G.disable(n),z.disable(n),s.toggleClass(t,"is-disabled",e.disabled)})).on("mute",(function(e,n,i){s.toggleClass(t,"is-muted",i)})).on("error",(function(e,n,i){if(s.removeClass(t,"is-loading"),s.removeClass(t,"is-seeking"),s.addClass(t,"is-error"),i){i.message=k.errors[i.code],n.error=!0;var r=n.message((n.engine&&n.engine.engineName||"html5")+": "+i.message);s.removeClass(t,"is-mouseover"),n.one("load progress",(function(){r()}))}})).one("resume ready",(function(){var e=s.find("video.fp-engine",t)[0];if(e&&(!s.width(e)||!s.height(e))){var n=t.style.overflow;t.style.overflow="visible",setTimeout((function(){n?t.style.overflow=n:t.style.removeProperty("overflow")}))}})),o.on(t,"mouseenter mouseleave",(function(n){if(!V){var i,r="mouseover"==n.type;if(S(r),r){var a=function(){S(!0),i=new Date};e.on("pause.x volume.x",a),o.on(t,"mousemove.x",a),C=setInterval((function(){new Date-i>k.mouseoutTimeout&&(S(!1),i=new Date)}),100)}else o.off(t,"mousemove.x"),e.off("pause.x volume.x"),clearInterval(C)}})),o.on(t,"mouseleave",(function(){(G.dragging||z.dragging)&&(s.addClass(t,"is-mouseover"),s.removeClass(t,"is-mouseout"))})),o.on(t,"click.player",(function(t){if(!e.disabled)return s.hasClass(t.target,"fp-ui")||s.hasClass(t.target,"fp-engine")||t.flash||s.hasParent(t.target,".fp-play,.fp-pause")?(t.preventDefault&&t.preventDefault(),e.toggle()):void 0})),o.on(t,"mousemove",".fp-timeline",(function(t){var n=(t.pageX||t.clientX)-s.offset(F).left,i=n/s.width(F);if(!(i<0)){s.html(M,r((e.rtl?1-i:i)*e.video.duration));var a=n-s.width(M)/2;a<0&&(a=0),a>s.width(F)-s.width(M)&&(a=!1),s.css(M,!1!==a?{left:a+"px",right:"auto"}:{left:"auto",right:"0px"})}})),o.on(t,"contextmenu",(function(n){var i=window;if(!s.hasClass(t,"is-flash-disabled")){var r=s.find(".fp-context-menu",t)[0];r&&(n.preventDefault(),e.showMenu(r,{left:n.clientX-i.scrollX,top:n.clientY-i.scrollY}),o.on(t,"click",".fp-context-menu",(function(e){e.stopPropagation()})))}})),e.on("flashdisabled",(function(n,i,r){var a;s.addClass(t,"is-flash-disabled"),!1!==r&&(a=e.message("Seems something is blocking Adobe Flash from running")),e.one("ready progress",(function(){s.removeClass(t,"is-flash-disabled"),a&&a()}))})),k.poster&&s.css(t,"background-image","url("+k.poster+")");var Z=s.css(t,"background-color"),q="none"!=s.css(t,"background-image")||Z&&"rgba(0, 0, 0, 0)"!=Z&&"transparent"!=Z;if(q&&!k.splash){k.poster||(k.poster=!0);var X=function(){s.addClass(t,"is-poster"),s.addClass(j,"fp-visible"),e.poster=!0,e.one(k.autoplay?"progress seek":"resume seek",(function(){s.removeClass(t,"is-poster"),s.removeClass(j,"fp-visible"),e.poster=!1}))};e.on("stop",(function(){X()})),e.on("ready",(function(e,t,n){n.index||n.autoplay||X()}))}"string"==typeof k.splash&&s.css(t,"background-image","url('"+k.splash+"')"),!q&&e.forcedSplash&&s.css(t,"background-color","#555"),o.on(t,"click",".fp-toggle, .fp-play, .fp-playbtn",(function(){e.disabled||e.toggle()})),o.on(t,"click",".fp-volumebtn",(function(){e.mute()})),o.on(t,"click",".fp-fullscreen",(function(){e.fullscreen()})),o.on(t,"click",".fp-unload",(function(){e.unload()})),o.on(F,"slide",(function(t){e.seeking=!0,e.seekTo(10*t)})),o.on(W,"slide",(function(t){e.volume(t)})),o.on(t,"click",".fp-duration,.fp-remaining",(function(){if(e.dvr)return e.seekTo(10);s.toggleClass(t,"is-inverted")})),S(V),e.on("shutdown",(function(){o.off(F),o.off(W)}))})),t.exports.format=r}).call(this,e("buffer").Buffer)},{"../common":1,"../flowplayer":28,"./ui/bar-slider":25,"./ui/slider":26,bean:31,buffer:32}],25:[function(e,t,n){var i=e("bean"),r=e("../../common");t.exports=function(e,t){function n(t){var n=t.pageX||t.clientX,i=r.offset(e),a=r.width(e);!n&&t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length&&(n=t.originalEvent.touches[0].pageX);var s=n-i.left,o=(s=Math.max(0,Math.min(a,s)))/a;return l&&(o=1-o),o}var a=(t=t||{}).activeClass||"fp-color",s=t.inactiveClass||"fp-grey",o=t.childSelector||"em",l=!!t.rtl,u=!1,c=r.find(o,e).length,d={unload:function(){i.off(e,".barslider")},slide:function(t,n){r.find(o,e).forEach((function(e,n){var i=t>n/c;r.toggleClass(e,a,i),r.toggleClass(e,s,!i)})),n&&i.fire(e,"slide",[t])},disable:function(e){u=e}};return i.on(e,"mousedown.sld touchstart.sld",(function(t){t.preventDefault(),u||(d.slide(n(t),!0),i.on(e,"mousemove.sld touchmove.sld",(function(e){e.preventDefault(),d.slide(n(e),!0)})),i.one(document,"mouseup.sld touchup.sld",(function(){i.off(e,"mousemove.sld touchmove.sld")})))})),d}},{"../../common":1,bean:31}],26:[function(e,t,n){"use strict";var i=e("bean"),r=e("../../common");t.exports=function(e,t){var n,a,s,o,l,u,c=r.lastChild(e),d=!1,h=function(){a=r.offset(e),s=r.width(e),r.height(e),o=s,u=m(l)},f=function(t){n||t==v.value||l&&!(t<l)||(i.fire(e,"slide",[t]),v.value=t)},p=function(e){var n=e.pageX||e.clientX;!n&&e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length&&(n=e.originalEvent.touches[0].pageX);var i=n-a.left,r=(i=Math.max(0,Math.min(u||o,i)))/o;return t&&(r=1-r),g(r,0,!0)},g=function(e,t){void 0===t&&(t=0),e>1&&(e=1);var n=Math.round(1e3*e)/10+"%";return(!l||e<=l)&&(d?r.removeClass(c,"animated"):(r.addClass(c,"animated"),r.css(c,"transition-duration",(t||0)+"ms")),r.css(c,"width",n)),e},m=function(e){return Math.max(0,Math.min(o,e*s))},v={max:function(e){l=e},disable:function(e){n=e},slide:function(e,t,n){h(),n&&f(e),g(e,t)},disableAnimation:function(t,n){d=!1!==t,r.toggleClass(e,"no-animation",!!n)}};return h(),i.on(e,"mousedown.sld touchstart",(function(t){if(t.preventDefault(),!n){var a=function(e,t){var n;return function(){n||(e.apply(this,arguments),n=1,setTimeout((function(){n=0}),100))}}(f);h(),v.dragging=!0,r.addClass(e,"is-dragging"),f(p(t)),i.on(document,"mousemove.sld touchmove.sld",(function(e){e.preventDefault(),a(p(e))})),i.one(document,"mouseup touchend",(function(){v.dragging=!1,r.removeClass(e,"is-dragging"),i.off(document,"mousemove.sld touchmove.sld")}))}})),v}},{"../../common":1,bean:31}],27:[function(e,t,n){t.exports=function(e,t,n){try{(function(e){var t=document.createElement("textarea");t.value=e,t.style.opacity=0,t.style.position="absolute",document.body.appendChild(t),t.select();var n=document.execCommand("copy");if(document.body.removeChild(t),!n)throw new Error("Unsuccessfull")})(e),t()}catch(e){n(e)}}},{}],28:[function(e,t,n){"use strict";function i(e,t,n){t&&t.embed&&(t.embed=r({},y.defaults.embed,t.embed));var i,o,l=e,f=r({},y.defaults,y.conf,t),g={},m=new _;u.addClass(l,"is-loading"),u.toggleClass(l,"no-flex",!y.support.flex),u.toggleClass(l,"no-svg",!y.support.svg);try{g=p?window.localStorage:g}catch(e){}if(f.aspectRatio&&"string"==typeof f.aspectRatio){var v=f.aspectRatio.split(/[:\/]/);f.ratio=v[1]/v[0]}var T=l.currentStyle&&"rtl"===l.currentStyle.direction||window.getComputedStyle&&null!==window.getComputedStyle(l,null)&&"rtl"===window.getComputedStyle(l,null).getPropertyValue("direction");T&&u.addClass(l,"is-rtl");var w={conf:f,currentSpeed:1,volumeLevel:f.muted?0:void 0===f.volume?1*g.volume:f.volume,video:{},disabled:!1,finished:!1,loading:!1,muted:"true"==g.muted||f.muted,paused:!1,playing:!1,ready:!1,splash:!1,rtl:T,hijack:function(e){try{w.engine.suspendEngine()}catch(e){}w.hijacked=e},release:function(){try{w.engine.resumeEngine()}catch(e){}w.hijacked=!1},load:function(e,t){if(!w.error&&!w.loading){w.video={},w.finished=!1,e=r({},m.resolve(e=e||f.clip,f.clip.sources)),(w.playing||w.engine)&&(e.autoplay=!0);var n=S(e);if(!n)return setTimeout((function(){w.trigger("error",[w,{code:y.support.flashVideo?5:10}])}))&&w;if(!n.engineName)throw new Error("engineName property of factory should be exposed");return w.engine&&n.engineName===w.engine.engineName||(w.ready=!1,w.engine&&(w.engine.unload(),w.conf.autoplay=!0),o=w.engine=n(w,l),w.one("ready",(function(){setTimeout((function(){w.muted?w.mute(!0,!0):o.volume(w.volumeLevel)}))}))),r(e,o.pick(e.sources.filter((function(e){return!e.engine||e.engine===o.engineName})))),e.src&&(w.trigger("load",[w,e,o],!0).defaultPrevented?w.loading=!1:(o.load(e),a(e)&&(t=e),t&&w.one("ready",t))),w}},pause:function(e){return w.hijacked?w.hijacked.pause(e)|w:(!w.ready||w.seeking||w.loading||(o.pause(),w.one("pause",e)),w)},resume:function(){if(!w.trigger("beforeresume",[w],!0).defaultPrevented)return w.hijacked?w.hijacked.resume()|w:(w.ready&&w.paused&&(o.resume(),w.finished&&(w.trigger("resume",[w]),w.finished=!1)),w)},toggle:function(){return w.ready?w.paused?w.resume():w.pause():w.load()},seek:function(e,t){if("boolean"==typeof e){var n=.1*w.video.duration;e=w.video.time+(e?n:-n),e=Math.min(Math.max(e,0),w.video.duration-.1)}return w.hijacked?w.hijacked.seek(e,t)|w:(w.ready&&(i=e,w.trigger("beforeseek",[w,e],!0).defaultPrevented?(w.seeking=!1,u.toggleClass(l,"is-seeking",w.seeking)):(o.seek(e),a(t)&&w.one("seek",t))),w)},seekTo:function(e,t){return w.seek(void 0===e?i:void 0!==w.video.seekOffset?w.video.seekOffset+.1*(w.video.duration-w.video.seekOffset)*e:.1*w.video.duration*e,t)},mute:function(e,t){return void 0===e&&(e=!w.muted),t||(g.muted=w.muted=e,g.volume=isNaN(g.volume)?f.volume:g.volume),w.volume(e?0:g.volume,!0),w.trigger("mute",[w,e]),w},volume:function(e,t){return w.ready&&(e=Math.min(Math.max(e,0),1),t||(g.volume=e),o.volume(e)),w},speed:function(e,t){return w.ready&&("boolean"==typeof e&&(e=f.speeds[f.speeds.indexOf(w.currentSpeed)+(e?1:-1)]||w.currentSpeed),o.speed(e),t&&l.one("speed",t)),w},stop:function(){return w.ready&&(w.pause(),w.seek(0,(function(){w.trigger("stop",[w])}))),w},unload:function(){return f.splash?(w.trigger("unload",[w]),o&&(o.unload(),w.engine=o=0)):w.stop(),w},shutdown:function(){w.unload(),w.trigger("shutdown",[w]),s.off(l),delete d[l.getAttribute("data-flowplayer-instance-id")],l.removeAttribute("data-flowplayer-instance-id")},disable:function(e){return void 0===e&&(e=!w.disabled),e!=w.disabled&&(w.disabled=e,w.trigger("disable",e)),w},registerExtension:function(e,t){"string"==typeof(e=e||[])&&(e=[e]),"string"==typeof(t=t||[])&&(t=[t]),e.forEach((function(e){w.extensions.js.push(e)})),t.forEach((function(e){w.extensions.css.push(e)}))}};w.conf=r(w.conf,f),w.extensions={js:[],css:[]},y.extensions.forEach((function(e){w.registerExtension(e[0],e[1])})),c(w);var S=function(e){var t,n=y.engines;if(f.engine){var i=n.filter((function(e){return e.engineName===f.engine}))[0];if(i&&e.sources.some((function(e){return(!e.engine||e.engine===i.engineName)&&i.canPlay(e.type,w.conf)})))return i}return f.enginePreference&&(n=y.engines.filter((function(e){return f.enginePreference.indexOf(e.engineName)>-1})).sort((function(e,t){return f.enginePreference.indexOf(e.engineName)-f.enginePreference.indexOf(t.engineName)}))),e.sources.some((function(e){var i=n.filter((function(t){return(!e.engine||e.engine===t.engineName)&&t.canPlay(e.type,w.conf)})).shift();return i&&(t=i),!!i})),t};return l.getAttribute("data-flowplayer-instance-id")||(l.setAttribute("data-flowplayer-instance-id",b++),w.on("boot",(function(){(f.splash||u.hasClass(l,"is-splash")||!y.support.firstframe)&&(w.forcedSplash=!f.splash&&!u.hasClass(l,"is-splash"),w.splash=f.autoplay=!0,f.splash||(f.splash=!0),u.addClass(l,"is-splash")),f.splash&&u.find("video",l).forEach(u.removeNode),(f.dvr||f.live||u.hasClass(l,"is-live"))&&(w.live=f.live=!0,w.dvr=f.dvr=!!f.dvr||u.hasClass(l,"is-dvr"),u.addClass(l,"is-live"),u.toggleClass(l,"is-dvr",w.dvr)),h.forEach((function(e){e(w,l)})),d.push(w),f.splash?w.unload():w.load(),f.disabled&&w.disable(),w.one("ready",n)})).on("load",(function(e,t,n){f.splash&&u.find(".flowplayer.is-ready,.flowplayer.is-loading").forEach((function(e){var t=e.getAttribute("data-flowplayer-instance-id");if(t!==l.getAttribute("data-flowplayer-instance-id")){var n=d[Number(t)];n&&n.conf.splash&&n.unload()}})),u.addClass(l,"is-loading"),t.loading=!0,void 0===n.live&&void 0===n.dvr||(u.toggleClass(l,"is-live",n.dvr||n.live),u.toggleClass(l,"is-dvr",!!n.dvr),t.live=n.dvr||n.live,t.dvr=!!n.dvr)})).on("ready",(function(e,t,n){n.time=0,t.video=n,u.removeClass(l,"is-loading"),t.loading=!1,t.muted?t.mute(!0,!0):t.volume(t.volumeLevel);var i=t.conf.hlsFix&&/mpegurl/i.exec(n.type);u.toggleClass(l,"hls-fix",!!i)})).on("unload",(function(){u.removeClass(l,"is-loading"),w.loading=!1})).on("ready unload",(function(e){var t="ready"==e.type;u.toggleClass(l,"is-splash",!t),u.toggleClass(l,"is-ready",t),w.ready=t,w.splash=!t})).on("progress",(function(e,t,n){t.video.time=n})).on("buffer",(function(e,t,n){t.video.buffer=n})).on("speed",(function(e,t,n){t.currentSpeed=n})).on("volume",(function(e,t,n){t.volumeLevel=Math.round(100*n)/100,t.muted?n&&t.mute(!1):g.volume=n})).on("beforeseek seek",(function(e){w.seeking="beforeseek"==e.type,u.toggleClass(l,"is-seeking",w.seeking)})).on("ready pause resume unload finish stop",(function(e){w.paused=/pause|finish|unload|stop/.test(e.type),w.paused=w.paused||"ready"===e.type&&!f.autoplay&&!w.playing,w.playing=!w.paused,u.toggleClass(l,"is-paused",w.paused),u.toggleClass(l,"is-playing",w.playing),w.load.ed||w.pause()})).on("finish",(function(){w.finished=!0})).on("error",(function(){}))),w.trigger("boot",[w,l]),w}var r=e("extend-object"),a=e("is-function"),s=e("bean"),o=e("./ext/ui/slider"),l=e("./ext/ui/bar-slider"),u=e("./common"),c=e("./ext/events"),d=[],h=[],f=window.onbeforeunload;window.onbeforeunload=function(e){if(d.forEach((function(e){e.conf.splash?e.unload():e.bind("error",(function(){u.find(".flowplayer.is-error .fp-message").forEach(u.removeNode)}))})),f)return f(e)};var p=!1;try{"object"==typeof window.localStorage&&(window.localStorage.flowplayerTestStorage="test",p=!0)}catch(e){}var g=/Safari/.exec(navigator.userAgent)&&!/Chrome/.exec(navigator.userAgent),m=/(\d+\.\d+) Safari/.exec(navigator.userAgent),v=m?Number(m[1]):100,y=t.exports=function(e,t,n){if(a(e))return h.push(e);if("number"==typeof e||void 0===e)return d[e||0];if(e.nodeType){if(null!==e.getAttribute("data-flowplayer-instance-id"))return d[e.getAttribute("data-flowplayer-instance-id")];if(!t)return;return i(e,t,n)}if(e.jquery)return y(e[0],t,n);if("string"==typeof e){var r=u.find(e)[0];return r&&y(r,t,n)}};r(y,{version:"7.0.4",engines:[],extensions:[],conf:{},set:function(e,t){"string"==typeof e?y.conf[e]=t:r(y.conf,e)},registerExtension:function(e,t){y.extensions.push([e,t])},support:{},defaults:{debug:!!p&&!!localStorage.flowplayerDebug,disabled:!1,fullscreen:window==window.top,keyboard:!0,ratio:9/16,adaptiveRatio:!1,rtmp:0,proxy:"best",hlsQualities:!0,splash:!1,live:!1,livePositionOffset:120,swf:"//releases.flowplayer.org/7.0.4/commercial/flowplayer.swf",swfHls:"//releases.flowplayer.org/7.0.4/commercial/flowplayerhls.swf",speeds:[.25,.5,1,1.5,2],tooltip:!0,mouseoutTimeout:5e3,volume:p?"true"==localStorage.muted?0:isNaN(localStorage.volume)?1:localStorage.volume||1:1,errors:["","Video loading aborted","Network error","Video not properly encoded","Video file not found","Unsupported video","Skin not found","SWF file not found","Subtitles not found","Invalid RTMP URL","Unsupported video format. Try installing Adobe Flash."],errorUrls:["","","","","","","","","","","http://get.adobe.com/flashplayer/"],playlist:[],hlsFix:g&&v<8,disableInline:!1},bean:s,common:u,slider:o,barSlider:l,extend:r});var b=0,_=e("./ext/resolve");if(void 0!==window.jQuery){var T=window.jQuery;T((function(){"function"==typeof T.fn.flowplayer&&T('.flowplayer:has(video,script[type="application/json"])').flowplayer()}));var w=function(e){if(!e.length)return{};var t=e.data()||{},n={};return T.each(["autoplay","loop","preload","poster"],(function(i,r){var a=e.attr(r);void 0!==a&&-1!==["autoplay","poster"].indexOf(r)?n[r]=a||!0:void 0!==a&&(t[r]=a||!0)})),t.subtitles=e.find("track").map((function(){var e=T(this);return{src:e.attr("src"),kind:e.attr("kind"),label:e.attr("label"),srclang:e.attr("srclang"),default:e.prop("default")}})).get(),t.sources=(new _).sourcesFromVideoTag(e,T),r(n,{clip:t})};T.fn.flowplayer=function(e,t){return this.each((function(){"string"==typeof e&&(e={swf:e}),a(e)&&(t=e,e={});var n=T(this),r=n.find('script[type="application/json"]'),s=r.length?JSON.parse(r.text()):w(n.find("video")),o=i(this,T.extend({},e||{},s,n.data()),t);c.EVENTS.forEach((function(e){o.on(e+".jquery",(function(e){n.trigger.call(n,e.type,e.detail&&e.detail.args)}))})),n.data("flowplayer",o)}))}}},{"./common":1,"./ext/events":10,"./ext/resolve":19,"./ext/ui/bar-slider":25,"./ext/ui/slider":26,bean:31,"extend-object":36,"is-function":39}],29:[function(e,t,n){e("es5-shim");var i=t.exports=e("./flowplayer");e("./ext/support"),e("./engine/embed"),e("./engine/html5"),e("./engine/flash"),e("./ext/ui"),e("./ext/message"),e("./ext/keyboard"),e("./ext/playlist"),e("./ext/cuepoint"),e("./ext/subtitle"),e("./ext/analytics"),e("./ext/share"),e("./ext/facebook"),e("./ext/twitter"),e("./ext/embed"),e("./ext/airplay"),e("./ext/chromecast"),e("./ext/qsel"),e("./ext/menu"),e("./ext/fullscreen"),e("./ext/mobile"),i((function(e,t){var n=e.conf,r=i.common,a=r.createElement,s=n.swf.indexOf("flowplayer.org")&&n.e&&t.getAttribute("data-origin"),o=s?function(e){var t=document.createElement("a");return t.href=e,r.hostname(t.hostname)}(s):r.hostname(),l=(document,n.key);if("file:"==location.protocol&&(o="localhost"),e.load.ed=1,n.hostname=o,n.origin=s||location.href,s&&function(e,t){-1===e.className.split(" ").indexOf(t)&&(e.className+=" "+t)}(t,"is-embedded"),"string"==typeof l&&(l=l.split(/,\s*/)),l&&function(e,t){t=function(e){var t="ab.ca,ac.ac,ac.ae,ac.at,ac.be,ac.cn,ac.il,ac.in,ac.jp,ac.kr,ac.sg,ac.th,ac.uk,ad.jp,adm.br,adv.br,ah.cn,am.br,arq.br,art.br,arts.ro,asn.au,asso.fr,asso.mc,bc.ca,bio.br,biz.pl,biz.tr,bj.cn,br.com,cn.com,cng.br,cnt.br,co.ac,co.at,co.de,co.gl,co.hk,co.id,co.il,co.in,co.jp,co.kr,co.mg,co.ms,co.nz,co.th,co.uk,co.ve,co.vi,co.za,com.ag,com.ai,com.ar,com.au,com.br,com.cn,com.co,com.cy,com.de,com.do,com.ec,com.es,com.fj,com.fr,com.gl,com.gt,com.hk,com.hr,com.hu,com.kg,com.ki,com.lc,com.mg,com.mm,com.ms,com.mt,com.mu,com.mx,com.my,com.na,com.nf,com.ng,com.ni,com.pa,com.ph,com.pl,com.pt,com.qa,com.ro,com.ru,com.sb,com.sc,com.sg,com.sv,com.tr,com.tw,com.ua,com.uy,com.ve,com.vn,cp.tz,cq.cn,de.com,de.org,ecn.br,ed.jp,edu.au,edu.cn,edu.hk,edu.mm,edu.my,edu.pl,edu.pt,edu.qa,edu.sg,edu.tr,edu.tw,eng.br,ernet.in,esp.br,etc.br,eti.br,eu.com,eu.int,eu.lv,firm.in,firm.ro,fm.br,fot.br,fst.br,g12.br,gb.com,gb.net,gd.cn,gen.in,go.jp,go.kr,go.th,gov.au,gov.az,gov.br,gov.cn,gov.il,gov.in,gov.mm,gov.my,gov.qa,gov.sg,gov.tr,gov.tw,gov.uk,govt.nz,gr.jp,gs.cn,gv.ac,gv.at,gx.cn,gz.cn,he.cn,hi.cn,hk.cn,hl.cn,hu.com,id.au,idv.tw,in.ua,ind.br,ind.in,inf.br,info.pl,info.ro,info.tr,info.ve,iwi.nz,jl.cn,jor.br,js.cn,jus.br,k12.il,k12.tr,kr.com,lel.br,lg.jp,ln.cn,ltd.uk,maori.nz,mb.ca,me.uk,med.br,mi.th,mil.br,mil.uk,mo.cn,mod.uk,muni.il,nb.ca,ne.jp,ne.kr,net.ag,net.ai,net.au,net.br,net.cn,net.do,net.gl,net.hk,net.il,net.in,net.kg,net.ki,net.lc,net.mg,net.mm,net.mu,net.ni,net.nz,net.pl,net.ru,net.sb,net.sc,net.sg,net.th,net.tr,net.tw,net.uk,net.ve,nf.ca,nhs.uk,nm.cn,nm.kr,no.com,nom.br,nom.ni,nom.ro,ns.ca,nt.ca,nt.ro,ntr.br,nx.cn,odo.br,off.ai,on.ca,or.ac,or.at,or.jp,or.kr,or.th,org.ag,org.ai,org.au,org.br,org.cn,org.do,org.es,org.gl,org.hk,org.in,org.kg,org.ki,org.lc,org.mg,org.mm,org.ms,org.nf,org.ng,org.ni,org.nz,org.pl,org.ro,org.ru,org.sb,org.sc,org.sg,org.tr,org.tw,org.uk,org.ve,pe.ca,plc.uk,police.uk,ppg.br,presse.fr,pro.br,psc.br,psi.br,qc.ca,qc.com,qh.cn,rec.br,rec.ro,res.in,sa.com,sc.cn,sch.uk,se.com,se.net,sh.cn,sk.ca,slg.br,sn.cn,store.ro,tj.cn,tm.fr,tm.mc,tm.ro,tmp.br,tur.br,tv.br,tv.tr,tw.cn,uk.com,uk.net,us.com,uy.com,vet.br,waw.pl,web.ve,www.ro,xj.cn,xz.cn,yk.ca,yn.cn,zj.cn,zlg.br".split(","),n=(e=e.toLowerCase()).split("."),i=n.length;if(i<2||/^\d+$/.test(n[i-1]))return e;var r=n.slice(-2).join(".");return i>=3&&t.indexOf(r)>=0?n.slice(-3).join("."):r}(t);for(var n=0,i=t.length-1;i>=0;i--)n+=5285928321*t.charCodeAt(i);for(n=(""+n).substring(0,7),i=0;i<e.length;i++)if(n===e[i].substring(1,8))return 1}(l,o)){if(n.logo){var u=r.find(".fp-player",t)[0],c=a("a",{className:"fp-logo"});s&&(c.href=s),n.embed&&n.embed.popup&&(c.target="_blank");var d=a("img",{src:n.logo});c.appendChild(d),(u||t).appendChild(c)}}else{c=a("a",{href:"home2"}),t.appendChild(c);var h=a("div",{className:"fp-context-menu fp-menu"},'<strong>&copy; 2017 Flowplayer</strong><a href="home2">About Flowplayer</a><a href="home2">GPL based license</a>'),f=window.location.href.indexOf("localhost");u=r.find(".fp-player",t)[0],7!==f&&(u||t).appendChild(h),e.on("pause resume finish unload ready",(function(e,n){var i=-1;if(n.video.src)for(var r=[["org","flowplayer","drive"],["org","flowplayer","my"],["org","flowplayer","cdn"]],a=0;a<r.length&&-1===(i=n.video.src.indexOf("://"+r[a].reverse().join(".")));a++);if(/pause|resume/.test(e.type)&&"flash"!=n.engine.engineName&&4!=i&&5!=i){var s={display:"block",position:"absolute",left:"16px",bottom:"70px",zIndex:99999,width:"100px",height:"20px",backgroundImage:"url("+[".png","logo","/",".ten",".clo","d32","//"].reverse().join("")+")"};for(var o in s)s.hasOwnProperty(o)&&(c.style[o]=s[o]);n.load.ed=function(e){return"none"!==window.getComputedStyle(e).display}(c)&&(7===f||h.parentNode==t||h.parentNode==u),n.load.ed||n.pause()}else c.style.display="none"}))}}))},{"./engine/embed":2,"./engine/flash":3,"./engine/html5":4,"./ext/airplay":5,"./ext/analytics":6,"./ext/chromecast":7,"./ext/cuepoint":8,"./ext/embed":9,"./ext/facebook":11,"./ext/fullscreen":12,"./ext/keyboard":13,"./ext/menu":14,"./ext/message":15,"./ext/mobile":16,"./ext/playlist":17,"./ext/qsel":18,"./ext/share":20,"./ext/subtitle":21,"./ext/support":22,"./ext/twitter":23,"./ext/ui":24,"./flowplayer":28,"es5-shim":35}],30:[function(e,t,n){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function a(e,t,n){for(var i=[],a=t;a<n;a+=3)i.push(r((e[a]<<16)+(e[a+1]<<8)+e[a+2]));return i.join("")}n.byteLength=function(e){return 3*e.length/4-i(e)},n.toByteArray=function(e){var t,n,r,a,s,u,c=e.length;s=i(e),u=new l(3*c/4-s),r=s>0?c-4:c;var d=0;for(t=0,n=0;t<r;t+=4,n+=3)a=o[e.charCodeAt(t)]<<18|o[e.charCodeAt(t+1)]<<12|o[e.charCodeAt(t+2)]<<6|o[e.charCodeAt(t+3)],u[d++]=a>>16&255,u[d++]=a>>8&255,u[d++]=255&a;return 2===s?(a=o[e.charCodeAt(t)]<<2|o[e.charCodeAt(t+1)]>>4,u[d++]=255&a):1===s&&(a=o[e.charCodeAt(t)]<<10|o[e.charCodeAt(t+1)]<<4|o[e.charCodeAt(t+2)]>>2,u[d++]=a>>8&255,u[d++]=255&a),u},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,r="",o=[],l=0,u=n-i;l<u;l+=16383)o.push(a(e,l,l+16383>u?u:l+16383));return 1===i?(r+=s[(t=e[n-1])>>2],r+=s[t<<4&63],r+="=="):2===i&&(r+=s[(t=(e[n-2]<<8)+e[n-1])>>10],r+=s[t>>4&63],r+=s[t<<2&63],r+="="),o.push(r),o.join("")};for(var s=[],o=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,d=u.length;c<d;++c)s[c]=u[c],o[u.charCodeAt(c)]=c;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],31:[function(e,t,n){!function(e,n,i){void 0!==t&&t.exports?t.exports=i():n.bean=i()}(0,this,(function(e,t){e=e||"bean",t=t||this;var n,i=window,r=t[e],a="addEventListener",s=document||{},o=s.documentElement||{},l=o[a],u=l?a:"attachEvent",c={},d=Array.prototype.slice,h=function(e,t){return e.split(t||" ")},f=function(e){return"string"==typeof e},p=function(e){return"function"==typeof e},g=function(e,t,n){for(n=0;n<t.length;n++)t[n]&&(e[t[n]]=1);return e}({},h("click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll "+(l?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":""))),m=function(){var e="compareDocumentPosition"in o?function(e,t){return t.compareDocumentPosition&&16==(16&t.compareDocumentPosition(e))}:"contains"in o?function(e,t){return(t=9===t.nodeType||t===window?o:t)!==e&&t.contains(e)}:function(e,t){for(;e=e.parentNode;)if(e===t)return 1;return 0},t=function(t){var n=t.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!e(n,this):null==n};return{mouseenter:{base:"mouseover",condition:t},mouseleave:{base:"mouseout",condition:t},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),v=function(){var e=h("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),t=e.concat(h("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),n=t.concat(h("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),r=e.concat(h("char charCode key keyCode keyIdentifier keyLocation location")),a=e.concat(h("data")),l=e.concat(h("touches targetTouches changedTouches scale rotation")),u=e.concat(h("data origin source")),c=e.concat(h("state")),d=/over|out/,f=[{reg:/key/i,fix:function(e,t){return t.keyCode=e.keyCode||e.which,r}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(e,n,i){return n.rightClick=3===e.which||2===e.button,n.pos={x:0,y:0},e.pageX||e.pageY?(n.clientX=e.pageX,n.clientY=e.pageY):(e.clientX||e.clientY)&&(n.clientX=e.clientX+s.body.scrollLeft+o.scrollLeft,n.clientY=e.clientY+s.body.scrollTop+o.scrollTop),d.test(i)&&(n.relatedTarget=e.relatedTarget||e[("mouseover"==i?"from":"to")+"Element"]),t}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return a}},{reg:/^touch|^gesture/i,fix:function(){return l}},{reg:/^message$/i,fix:function(){return u}},{reg:/^popstate$/i,fix:function(){return c}},{reg:/.*/,fix:function(){return e}}],p={},g=function(e,t,n){if(arguments.length&&(this.originalEvent=e=e||((t.ownerDocument||t.document||t).parentWindow||i).event,this.isNative=n,this.isBean=!0,e)){var r,a,s,o,l,u=e.type,c=e.target||e.srcElement;if(this.target=c&&3===c.nodeType?c.parentNode:c,n){if(!(l=p[u]))for(r=0,a=f.length;r<a;r++)if(f[r].reg.test(u)){p[u]=l=f[r].fix;break}for(r=(o=l(e,this,u)).length;r--;)!((s=o[r])in this)&&s in e&&(this[s]=e[s])}}};return g.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},g.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},g.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},g.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},g.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},g.prototype.clone=function(e){var t=new g(this,this.element,this.isNative);return t.currentTarget=e,t},g}(),y=function(e,t){return l||t||e!==s&&e!==i?e:o},b=function(){var e=function(e,t,n,i){var r=function(n,r){return t.apply(e,i?d.call(r,n?0:1).concat(i):r)},a=function(n,i){return t.__beanDel?t.__beanDel.ft(n.target,e):i},s=n?function(e){var t=a(e,this);if(n.apply(t,arguments))return e&&(e.currentTarget=t),r(e,arguments)}:function(e){return t.__beanDel&&(e=e.clone(a(e))),r(e,arguments)};return s.__beanDel=t.__beanDel,s},t=function(t,n,i,r,a,s,o){var c,d=m[n];"unload"==n&&(i=E(C,t,n,i,r)),d&&(d.condition&&(i=e(t,i,d.condition,s)),n=d.base||n),this.isNative=c=g[n]&&!!t[u],this.customType=!l&&!c&&n,this.element=t,this.type=n,this.original=r,this.namespaces=a,this.eventType=l||c?n:"propertychange",this.target=y(t,c),this[u]=!!this.target[u],this.root=o,this.handler=e(t,i,null,s)};return t.prototype.inNamespaces=function(e){var t,n,i=0;if(!e)return!0;if(!this.namespaces)return!1;for(t=e.length;t--;)for(n=this.namespaces.length;n--;)e[t]==this.namespaces[n]&&i++;return e.length===i},t.prototype.matches=function(e,t,n){return!(this.element!==e||t&&this.original!==t||n&&this.handler!==n)},t}(),_=function(){var e={},t=function(n,i,r,a,s,o){var l=s?"r":"$";if(i&&"*"!=i){var u,c=0,d=e[l+i],h="*"==n;if(!d)return;for(u=d.length;c<u;c++)if((h||d[c].matches(n,r,a))&&!o(d[c],d,c,i))return}else for(var f in e)f.charAt(0)==l&&t(n,f.substr(1),r,a,s,o)};return{has:function(t,n,i,r){var a,s=e[(r?"r":"$")+n];if(s)for(a=s.length;a--;)if(!s[a].root&&s[a].matches(t,i,null))return!0;return!1},get:function(e,n,i,r){var a=[];return t(e,n,i,null,r,(function(e){return a.push(e)})),a},put:function(t){var n=!t.root&&!this.has(t.element,t.type,null,!1),i=(t.root?"r":"$")+t.type;return(e[i]||(e[i]=[])).push(t),n},del:function(n){t(n.element,n.type,null,n.handler,n.root,(function(t,n,i){return n.splice(i,1),t.removed=!0,0===n.length&&delete e[(t.root?"r":"$")+t.type],!1}))},entries:function(){var t,n=[];for(t in e)"$"==t.charAt(0)&&(n=n.concat(e[t]));return n}}}(),T=function(e){n=arguments.length?e:s.querySelectorAll?function(e,t){return t.querySelectorAll(e)}:function(){throw new Error("Bean: No selector engine installed")}},w=function(e,t){if(l||!t||!e||e.propertyName=="_on"+t){var n=_.get(this,t||e.type,null,!1),i=n.length,r=0;for(e=new v(e,this,!0),t&&(e.type=t);r<i&&!e.isImmediatePropagationStopped();r++)n[r].removed||n[r].handler.call(this,e)}},S=l?function(e,t,n){e[n?a:"removeEventListener"](t,w,!1)}:function(e,t,n,i){var r;n?(_.put(r=new b(e,i||t,(function(t){w.call(e,t,i)}),w,null,null,!0)),i&&null==e["_on"+i]&&(e["_on"+i]=0),r.target.attachEvent("on"+r.eventType,r.handler)):(r=_.get(e,i||t,w,!0)[0])&&(r.target.detachEvent("on"+r.eventType,r.handler),_.del(r))},E=function(e,t,n,i,r){return function(){i.apply(this,arguments),e(t,n,r)}},C=function(e,t,n,i){var r,a,s=t&&t.replace(/\..*/,""),o=_.get(e,s,null,!1),l={};for(r=0,a=o.length;r<a;r++)n&&o[r].original!==n||!o[r].inNamespaces(i)||(_.del(o[r]),!l[o[r].eventType]&&o[r][u]&&(l[o[r].eventType]={t:o[r].eventType,c:o[r].type}));for(r in l)_.has(e,l[r].t,null,!1)||S(e,l[r].t,!1,l[r].c)},k=function(e,t){var i=function(t,i){for(var r,a=f(e)?n(e,i):e;t&&t!==i;t=t.parentNode)for(r=a.length;r--;)if(a[r]===t)return t},r=function(e){var n=i(e.target,this);n&&t.apply(n,arguments)};return r.__beanDel={ft:i,selector:e},r},A=l?function(e,t,n){var r=s.createEvent(e?"HTMLEvents":"UIEvents");r[e?"initEvent":"initUIEvent"](t,!0,!0,i,1),n.dispatchEvent(r)}:function(e,t,n){n=y(n,e),e?n.fireEvent("on"+t,s.createEventObject()):n["_on"+t]++},I=function(e,t,n){var i,r,a,s,o=f(t);if(o&&t.indexOf(" ")>0){for(s=(t=h(t)).length;s--;)I(e,t[s],n);return e}if((r=o&&t.replace(/\..*/,""))&&m[r]&&(r=m[r].base),!t||o)(a=o&&t.replace(/[^\.]*(?=\..*)\.|.*/,""))&&(a=h(a,".")),C(e,r,n,a);else if(p(t))C(e,null,t);else for(i in t)t.hasOwnProperty(i)&&I(e,i,t[i]);return e},x=function(e,t,n,i){var r,a,s,o,l,f,g;if(void 0!==n||"object"!=typeof t){for(p(n)?(l=d.call(arguments,3),i=r=n):(r=i,l=d.call(arguments,4),i=k(n,r)),s=h(t),this===c&&(i=E(I,e,t,i,r)),o=s.length;o--;)g=_.put(f=new b(e,s[o].replace(/\..*/,""),i,r,h(s[o].replace(/[^\.]*(?=\..*)\.|.*/,""),"."),l,!1)),f[u]&&g&&S(e,f.eventType,!0,f.customType);return e}for(a in t)t.hasOwnProperty(a)&&x.call(this,e,a,t[a])},L={on:x,add:function(e,t,n,i){return x.apply(null,f(n)?[e,n,t,i].concat(arguments.length>3?d.call(arguments,5):[]):d.call(arguments))},one:function(){return x.apply(c,arguments)},off:I,remove:I,clone:function(e,t,n){for(var i,r,a=_.get(t,n,null,!1),s=a.length,o=0;o<s;o++)a[o].original&&(i=[e,a[o].type],(r=a[o].handler.__beanDel)&&i.push(r.selector),i.push(a[o].original),x.apply(null,i));return e},fire:function(e,t,n){var i,r,a,s,o,l=h(t);for(i=l.length;i--;)if(t=l[i].replace(/\..*/,""),(s=l[i].replace(/[^\.]*(?=\..*)\.|.*/,""))&&(s=h(s,".")),s||n||!e[u])for(o=_.get(e,t,null,!1),n=[!1].concat(n),r=0,a=o.length;r<a;r++)o[r].inNamespaces(s)&&o[r].handler.apply(e,n);else A(g[t],t,e);return e},Event:v,setSelectorEngine:T,noConflict:function(){return t[e]=r,this}};if(i.attachEvent){var D=function(){var e,t=_.entries();for(e in t)t[e].type&&"unload"!==t[e].type&&I(t[e].element,t[e].type);i.detachEvent("onunload",D),i.CollectGarbage&&i.CollectGarbage()};i.attachEvent("onunload",D)}return T(),L}))},{}],32:[function(e,t,n){(function(t){"use strict";function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=a.prototype:(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return s(this,e,t,n)}function s(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),a.TYPED_ARRAY_SUPPORT?(e=t).__proto__=a.prototype:e=u(e,t),e}(e,t,n,i):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|d(t,n),s=(e=r(e,i)).write(t,n);return s!==i&&(e=e.slice(0,s)),e}(e,t,n):function(e,t){if(a.isBuffer(t)){var n=0|c(t.length);return 0===(e=r(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?r(e,0):u(e,t);if("Buffer"===t.type&&G(t.data))return u(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(o(t),e=r(e,t<0?0:0|c(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function u(e,t){var n=t.length<0?0:0|c(t.length);e=r(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function c(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function d(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(i)return M(e).length;t=(""+t).toLowerCase(),i=!0}}function h(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function f(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function p(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=a.from(t,i)),a.isBuffer(t))return 0===t.length?-1:g(e,t,n,i,r);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,i,r){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var s,o=1,l=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,l/=2,u/=2,n/=2}if(r){var c=-1;for(s=n;s<l;s++)if(a(e,s)===a(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===u)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(n+u>l&&(n=l-u),s=n;s>=0;s--){for(var d=!0,h=0;h<u;h++)if(a(e,s+h)!==a(t,h)){d=!1;break}if(d)return s}return-1}function m(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[n+s]=o}return s}function v(e,t,n,i){return j(M(t,e.length-n),e,n,i)}function y(e,t,n,i){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function b(e,t,n,i){return y(e,t,n,i)}function _(e,t,n,i){return j(U(t),e,n,i)}function T(e,t,n,i){return j(function(e,t){for(var n,i,r=[],a=0;a<e.length&&!((t-=2)<0);++a)i=(n=e.charCodeAt(a))>>8,r.push(n%256),r.push(i);return r}(t,e.length-n),e,n,i)}function w(e,t,n){return B.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,s,o,l,u=e[r],c=null,d=u>239?4:u>223?3:u>191?2:1;if(r+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[r+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:s=e[r+2],128==(192&(a=e[r+1]))&&128==(192&s)&&(l=(15&u)<<12|(63&a)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=e[r+2],o=e[r+3],128==(192&(a=e[r+1]))&&128==(192&s)&&128==(192&o)&&(l=(15&u)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(i.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=d}return function(e){var t=e.length;if(t<=H)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=H));return n}(i)}function E(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function C(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function k(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=t;a<n;++a)r+=N(e[a]);return r}function A(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,n,i,r,s){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function L(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function D(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function R(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,i,r){return r||R(e,0,n,4),F.write(e,t,n,i,23,4),n+4}function O(e,t,n,i,r){return r||R(e,0,n,8),F.write(e,t,n,i,52,8),n+8}function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function M(e,t){t=t||1/0;for(var n,i=e.length,r=null,a=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function U(e){return B.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}var B=e("base64-js"),F=e("ieee754"),G=e("isarray");n.Buffer=a,n.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},n.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),n.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return s(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return function(e,t,n,i){return o(t),t<=0?r(e,t):void 0!==n?"string"==typeof i?r(e,t).fill(n,i):r(e,t).fill(n):r(e,t)}(null,e,t,n)},a.allocUnsafe=function(e){return l(null,e)},a.allocUnsafeSlow=function(e){return l(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,s=Math.min(n,i);r<s;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!G(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=a.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var s=e[n];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},a.byteLength=d,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):h.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,i,r){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),l=Math.min(s,o),u=this.slice(i,r),c=e.slice(t,n),d=0;d<l;++d)if(u[d]!==c[d]){s=u[d],o=c[d];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},a.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;a.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),a.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=a.prototype;else{var r=t-e;n=new a(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+e]}return n},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},a.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var i=t,r=1,a=this[e+--i];i>0&&(r*=256);)a+=this[e+--i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},a.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),F.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),F.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),F.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),F.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||x(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||x(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);x(this,e,t,n,r-1,-r)}var a=0,s=1,o=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},a.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);x(this,e,t,n,r-1,-r)}var a=n-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return O(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return O(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,s=i-n;if(this===e&&n<t&&t<i)for(r=s-1;r>=0;--r)e[r+t]=this[r+n];else if(s<1e3||!a.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},a.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=a.isBuffer(e)?e:M(new a(e,i).toString()),l=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%l]}return this};var W=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":30,ieee754:37,isarray:40}],33:[function(e,t,n){function i(e){return!!e}var r=e("indexof");t.exports=function(e){function t(e){var t=s();r(t,e)>-1||(t.push(e),o(t))}function n(e){var t=s(),n=r(t,e);-1!==n&&(t.splice(n,1),o(t))}function a(e){return r(s(),e)>-1}function s(){return function(e,t){for(var n=[],i=0;i<e.length;i++)t(e[i])&&n.push(e[i]);return n}(e.className.split(" "),i)}function o(t){var n=t.length;e.className=t.join(" "),u.length=n;for(var i=0;i<t.length;i++)u[i]=t[i];delete t[n]}var l=e.classList;if(l)return l;var u={add:t,remove:n,contains:a,toggle:function(e){return a(e)?(n(e),!1):(t(e),!0)},toString:function(){return e.className},length:0,item:function(e){return s()[e]||null}};return u}},{indexof:38}],34:[function(e,t,n){t.exports=function(e,t,n,i){if(i=(n=window.getComputedStyle)?n(e):e.currentStyle)return i[t.replace(/-(\w)/gi,(function(e,t){return t.toUpperCase()}))]}},{}],35:[function(e,t,n){!function(e,i){"use strict";"object"==typeof n?t.exports=i():e.returnExports=i()}(this,(function(){var e,t=Array,n=t.prototype,i=Object,r=i.prototype,a=Function,s=a.prototype,o=String,l=o.prototype,u=Number,c=u.prototype,d=n.slice,h=n.splice,f=n.push,p=n.unshift,g=n.concat,m=n.join,v=s.call,y=s.apply,b=Math.max,_=Math.min,T=r.toString,w="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,S=Function.prototype.toString,E=/^\s*class /,C=function(e){try{var t=S.call(e).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return E.test(t)}catch(e){return!1}},k=function(e){try{return!C(e)&&(S.call(e),!0)}catch(e){return!1}},A=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(w)return k(e);if(C(e))return!1;var t=T.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},I=RegExp.prototype.exec,x=function(e){try{return I.call(e),!0}catch(e){return!1}};e=function(e){return"object"==typeof e&&(w?x(e):"[object RegExp]"===T.call(e))};var L,D=String.prototype.valueOf,R=function(e){try{return D.call(e),!0}catch(e){return!1}};L=function(e){return"string"==typeof e||"object"==typeof e&&(w?R(e):"[object String]"===T.call(e))};var P=i.defineProperty&&function(){try{var e={};for(var t in i.defineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),O=function(e){var t;return t=P?function(e,t,n,r){!r&&t in e||i.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,i){!i&&t in e||(e[t]=n)},function(n,i,r){for(var a in i)e.call(i,a)&&t(n,a,i[a],r)}}(r.hasOwnProperty),N=function(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t},M=u.isNaN||function(e){return e!=e},U={ToInteger:function(e){var t=+e;return M(t)?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},ToPrimitive:function(e){var t,n,i;if(N(e))return e;if(A(n=e.valueOf)&&(t=n.call(e),N(t)))return t;if(A(i=e.toString)&&(t=i.call(e),N(t)))return t;throw new TypeError},ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return i(e)},ToUint32:function(e){return e>>>0}},j=function(){};O(s,{bind:function(e){var t=this;if(!A(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,r=d.call(arguments,1),s=function(){if(this instanceof n){var a=y.call(t,this,g.call(r,d.call(arguments)));return i(a)===a?a:this}return y.call(t,e,g.call(r,d.call(arguments)))},o=b(0,t.length-r.length),l=[],u=0;u<o;u++)f.call(l,"$"+u);return n=a("binder","return function ("+m.call(l,",")+"){ return binder.apply(this, arguments); }")(s),t.prototype&&(j.prototype=t.prototype,n.prototype=new j,j.prototype=null),n}});var B=v.bind(r.hasOwnProperty),F=v.bind(r.toString),G=v.bind(d),H=y.bind(d),W=v.bind(l.slice),z=v.bind(l.split),V=v.bind(l.indexOf),Y=v.bind(f),Z=v.bind(r.propertyIsEnumerable),q=v.bind(n.sort),X=t.isArray||function(e){return"[object Array]"===F(e)},K=1!==[].unshift(0);O(n,{unshift:function(){return p.apply(this,arguments),this.length}},K),O(t,{isArray:X});var J=i("a"),Q="a"!==J[0]||!(0 in J),$=function(e){var t=!0,n=!0,i=!1;if(e)try{e.call("foo",(function(e,n,i){"object"!=typeof i&&(t=!1)})),e.call([1],(function(){"use strict";n="string"==typeof this}),"x")}catch(e){i=!0}return!!e&&!i&&t&&n};O(n,{forEach:function(e){var t,n=U.ToObject(this),i=Q&&L(this)?z(this,""):n,r=-1,a=U.ToUint32(i.length);if(arguments.length>1&&(t=arguments[1]),!A(e))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++r<a;)r in i&&(void 0===t?e(i[r],r,n):e.call(t,i[r],r,n))}},!$(n.forEach)),O(n,{map:function(e){var n,i=U.ToObject(this),r=Q&&L(this)?z(this,""):i,a=U.ToUint32(r.length),s=t(a);if(arguments.length>1&&(n=arguments[1]),!A(e))throw new TypeError("Array.prototype.map callback must be a function");for(var o=0;o<a;o++)o in r&&(s[o]=void 0===n?e(r[o],o,i):e.call(n,r[o],o,i));return s}},!$(n.map)),O(n,{filter:function(e){var t,n,i=U.ToObject(this),r=Q&&L(this)?z(this,""):i,a=U.ToUint32(r.length),s=[];if(arguments.length>1&&(n=arguments[1]),!A(e))throw new TypeError("Array.prototype.filter callback must be a function");for(var o=0;o<a;o++)o in r&&(t=r[o],(void 0===n?e(t,o,i):e.call(n,t,o,i))&&Y(s,t));return s}},!$(n.filter)),O(n,{every:function(e){var t,n=U.ToObject(this),i=Q&&L(this)?z(this,""):n,r=U.ToUint32(i.length);if(arguments.length>1&&(t=arguments[1]),!A(e))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;a<r;a++)if(a in i&&!(void 0===t?e(i[a],a,n):e.call(t,i[a],a,n)))return!1;return!0}},!$(n.every)),O(n,{some:function(e){var t,n=U.ToObject(this),i=Q&&L(this)?z(this,""):n,r=U.ToUint32(i.length);if(arguments.length>1&&(t=arguments[1]),!A(e))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;a<r;a++)if(a in i&&(void 0===t?e(i[a],a,n):e.call(t,i[a],a,n)))return!0;return!1}},!$(n.some));var ee=!1;n.reduce&&(ee="object"==typeof n.reduce.call("es5",(function(e,t,n,i){return i}))),O(n,{reduce:function(e){var t=U.ToObject(this),n=Q&&L(this)?z(this,""):t,i=U.ToUint32(n.length);if(!A(e))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var r,a=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(a in n){r=n[a++];break}if(++a>=i)throw new TypeError("reduce of empty array with no initial value")}for(;a<i;a++)a in n&&(r=e(r,n[a],a,t));return r}},!ee);var te=!1;n.reduceRight&&(te="object"==typeof n.reduceRight.call("es5",(function(e,t,n,i){return i}))),O(n,{reduceRight:function(e){var t=U.ToObject(this),n=Q&&L(this)?z(this,""):t,i=U.ToUint32(n.length);if(!A(e))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r,a=i-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(a in n){r=n[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(a<0)return r;do{a in n&&(r=e(r,n[a],a,t))}while(a--);return r}},!te);var ne=n.indexOf&&-1!==[0,1].indexOf(1,2);O(n,{indexOf:function(e){var t=Q&&L(this)?z(this,""):U.ToObject(this),n=U.ToUint32(t.length);if(0===n)return-1;var i=0;for(arguments.length>1&&(i=U.ToInteger(arguments[1])),i=i>=0?i:b(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}},ne);var ie=n.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);O(n,{lastIndexOf:function(e){var t=Q&&L(this)?z(this,""):U.ToObject(this),n=U.ToUint32(t.length);if(0===n)return-1;var i=n-1;for(arguments.length>1&&(i=_(i,U.ToInteger(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in t&&e===t[i])return i;return-1}},ie);var re=function(){var e=[1,2],t=e.splice();return 2===e.length&&X(t)&&0===t.length}();O(n,{splice:function(e,t){return 0===arguments.length?[]:h.apply(this,arguments)}},!re);var ae=function(){var e={};return n.splice.call(e,0,0,1),1===e.length}();O(n,{splice:function(e,t){if(0===arguments.length)return[];var n=arguments;return this.length=b(U.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof t&&((n=G(arguments)).length<2?Y(n,this.length-e):n[1]=U.ToInteger(t)),h.apply(this,n)}},!ae);var se=function(){var e=new t(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),oe=function(){var e=[];return e[256]="a",e.splice(257,0,"b"),"a"===e[256]}();O(n,{splice:function(e,t){for(var n,i=U.ToObject(this),r=[],a=U.ToUint32(i.length),s=U.ToInteger(e),l=s<0?b(a+s,0):_(s,a),u=_(b(U.ToInteger(t),0),a-l),c=0;c<u;)n=o(l+c),B(i,n)&&(r[c]=i[n]),c+=1;var d,h=G(arguments,2),f=h.length;if(f<u){c=l;for(var p=a-u;c<p;)n=o(c+u),d=o(c+f),B(i,n)?i[d]=i[n]:delete i[d],c+=1;c=a;for(var g=a-u+f;c>g;)delete i[c-1],c-=1}else if(f>u)for(c=a-u;c>l;)n=o(c+u-1),d=o(c+f-1),B(i,n)?i[d]=i[n]:delete i[d],c-=1;c=l;for(var m=0;m<h.length;++m)i[c]=h[m],c+=1;return i.length=a-u+f,r}},!se||!oe);var le,ue=n.join;try{le="1,2,3"!==Array.prototype.join.call("123",",")}catch(A){le=!0}le&&O(n,{join:function(e){var t=void 0===e?",":e;return ue.call(L(this)?z(this,""):this,t)}},le);var ce="1,2"!==[1,2].join(void 0);ce&&O(n,{join:function(e){return ue.call(this,void 0===e?",":e)}},ce);var de=function(e){for(var t=U.ToObject(this),n=U.ToUint32(t.length),i=0;i<arguments.length;)t[n+i]=arguments[i],i+=1;return t.length=n+i,n+i},he=function(){var e={};return 1!==Array.prototype.push.call(e,void 0)||1!==e.length||void 0!==e[0]||!B(e,0)}();O(n,{push:function(e){return X(this)?f.apply(this,arguments):de.apply(this,arguments)}},he);var fe=function(){var e=[];return 1!==e.push(void 0)||1!==e.length||void 0!==e[0]||!B(e,0)}();O(n,{push:de},fe),O(n,{slice:function(e,t){var n=L(this)?z(this,""):this;return H(n,arguments)}},Q);var pe=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(A){}return!1}(),ge=function(){try{return[1,2].sort(/a/),!1}catch(A){}return!0}(),me=function(){try{return[1,2].sort(void 0),!0}catch(A){}return!1}();O(n,{sort:function(e){if(void 0===e)return q(this);if(!A(e))throw new TypeError("Array.prototype.sort callback must be a function");return q(this,e)}},pe||!me||!ge);var ve=!Z({toString:null},"toString"),ye=Z((function(){}),"prototype"),be=!B("x","0"),_e=function(e){var t=e.constructor;return t&&t.prototype===e},Te={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},we=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!Te["$"+e]&&B(window,e)&&null!==window[e]&&"object"==typeof window[e]&&_e(window[e])}catch(e){return!0}return!1}(),Se=function(e){if("undefined"==typeof window||!we)return _e(e);try{return _e(e)}catch(e){return!1}},Ee=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ce=Ee.length,ke=function(e){return"[object Arguments]"===F(e)},Ae=function(e){return null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&!X(e)&&A(e.callee)},Ie=ke(arguments)?ke:Ae;O(i,{keys:function(e){var t=A(e),n=Ie(e),i=null!==e&&"object"==typeof e,r=i&&L(e);if(!i&&!t&&!n)throw new TypeError("Object.keys called on a non-object");var a=[],s=ye&&t;if(r&&be||n)for(var l=0;l<e.length;++l)Y(a,o(l));if(!n)for(var u in e)s&&"prototype"===u||!B(e,u)||Y(a,o(u));if(ve)for(var c=Se(e),d=0;d<Ce;d++){var h=Ee[d];c&&"constructor"===h||!B(e,h)||Y(a,h)}return a}});var xe=i.keys&&function(){return 2===i.keys(arguments).length}(1,2),Le=i.keys&&function(){var e=i.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),De=i.keys;O(i,{keys:function(e){return De(Ie(e)?G(e):e)}},!xe||Le);var Re,Pe,Oe=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Ne=new Date(-0x55d318d56a724),Me=new Date(14496624e5),Ue="Mon, 01 Jan -45875 11:59:59 GMT"!==Ne.toUTCString();Ne.getTimezoneOffset()<-720?(Re="Tue Jan 02 -45875"!==Ne.toDateString(),Pe=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Me.toString())):(Re="Mon Jan 01 -45875"!==Ne.toDateString(),Pe=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Me.toString()));var je=v.bind(Date.prototype.getFullYear),Be=v.bind(Date.prototype.getMonth),Fe=v.bind(Date.prototype.getDate),Ge=v.bind(Date.prototype.getUTCFullYear),He=v.bind(Date.prototype.getUTCMonth),We=v.bind(Date.prototype.getUTCDate),ze=v.bind(Date.prototype.getUTCDay),Ve=v.bind(Date.prototype.getUTCHours),Ye=v.bind(Date.prototype.getUTCMinutes),Ze=v.bind(Date.prototype.getUTCSeconds),qe=v.bind(Date.prototype.getUTCMilliseconds),Xe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ke=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Je=function(e,t){return Fe(new Date(t,e,0))};O(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=je(this);return e<0&&Be(this)>11?e+1:e},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=je(this),t=Be(this);return e<0&&t>11?0:t},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=je(this),t=Be(this),n=Fe(this);return e<0&&t>11?12===t?n:Je(0,e+1)-n+1:n},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ge(this);return e<0&&He(this)>11?e+1:e},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ge(this),t=He(this);return e<0&&t>11?0:t},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ge(this),t=He(this),n=We(this);return e<0&&t>11?12===t?n:Je(0,e+1)-n+1:n}},Oe),O(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=ze(this),t=We(this),n=He(this),i=Ge(this),r=Ve(this),a=Ye(this),s=Ze(this);return Xe[e]+", "+(t<10?"0"+t:t)+" "+Ke[n]+" "+i+" "+(r<10?"0"+r:r)+":"+(a<10?"0"+a:a)+":"+(s<10?"0"+s:s)+" GMT"}},Oe||Ue),O(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),i=this.getFullYear();return Xe[e]+" "+Ke[n]+" "+(t<10?"0"+t:t)+" "+i}},Oe||Re),(Oe||Pe)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),i=this.getFullYear(),r=this.getHours(),a=this.getMinutes(),s=this.getSeconds(),o=this.getTimezoneOffset(),l=Math.floor(Math.abs(o)/60),u=Math.floor(Math.abs(o)%60);return Xe[e]+" "+Ke[n]+" "+(t<10?"0"+t:t)+" "+i+" "+(r<10?"0"+r:r)+":"+(a<10?"0"+a:a)+":"+(s<10?"0"+s:s)+" GMT"+(o>0?"-":"+")+(l<10?"0"+l:l)+(u<10?"0"+u:u)},P&&i.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var Qe=Date.prototype.toISOString&&-1===new Date(-621987552e5).toISOString().indexOf("-000001"),$e=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),et=v.bind(Date.prototype.getTime);O(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(et(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=Ge(this),t=He(this);e+=Math.floor(t/12);var n=[1+(t=(t%12+12)%12),We(this),Ve(this),Ye(this),Ze(this)];e=(e<0?"-":e>9999?"+":"")+W("00000"+Math.abs(e),0<=e&&e<=9999?-4:-6);for(var i=0;i<n.length;++i)n[i]=W("00"+n[i],-2);return e+"-"+G(n,0,2).join("-")+"T"+G(n,2).join(":")+"."+W("000"+qe(this),-3)+"Z"}},Qe||$e),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(-621987552e5).toJSON().indexOf("-000001")&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(A){return!1}}()||(Date.prototype.toJSON=function(e){var t=i(this),n=U.ToPrimitive(t);if("number"==typeof n&&!isFinite(n))return null;var r=t.toISOString;if(!A(r))throw new TypeError("toISOString property is not callable");return r.call(t)});var tt=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),nt=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||nt||!tt){var it=Math.pow(2,31)-1,rt=M(new Date(1970,0,1,0,0,0,it+1).getTime());Date=function(e){var t=function(n,i,r,a,s,l,u){var c,d=arguments.length;if(this instanceof e){var h=l,f=u;if(rt&&d>=7&&u>it){var p=Math.floor(u/it)*it,g=Math.floor(p/1e3);h+=g,f-=1e3*g}c=1===d&&o(n)===n?new e(t.parse(n)):d>=7?new e(n,i,r,a,s,h,f):d>=6?new e(n,i,r,a,s,h):d>=5?new e(n,i,r,a,s):d>=4?new e(n,i,r,a):d>=3?new e(n,i,r):d>=2?new e(n,i):d>=1?new e(n instanceof e?+n:n):new e}else c=e.apply(this,arguments);return N(c)||O(c,{constructor:t},!0),c},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),i=[0,31,59,90,120,151,181,212,243,273,304,334,365],r=function(e,t){var n=t>1?1:0;return i[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)},a=function(t){var n=0,i=t;if(rt&&i>it){var r=Math.floor(i/it)*it,a=Math.floor(r/1e3);n+=a,i-=1e3*a}return u(new e(1970,0,1,0,0,n,i))};for(var s in e)B(e,s)&&(t[s]=e[s]);return O(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,O(t.prototype,{constructor:t},!0),O(t,{parse:function(t){var i=n.exec(t);if(i){var s,o=u(i[1]),l=u(i[2]||1)-1,c=u(i[3]||1)-1,d=u(i[4]||0),h=u(i[5]||0),f=u(i[6]||0),p=Math.floor(1e3*u(i[7]||0)),g=Boolean(i[4]&&!i[8]),m="-"===i[9]?1:-1,v=u(i[10]||0),y=u(i[11]||0);return d<(h>0||f>0||p>0?24:25)&&h<60&&f<60&&p<1e3&&l>-1&&l<12&&v<24&&y<60&&c>-1&&c<r(o,l+1)-r(o,l)&&(s=1e3*(60*((s=60*(24*(r(o,l)+c)+d+v*m))+h+y*m)+f)+p,g&&(s=a(s)),-864e13<=s&&s<=864e13)?s:NaN}return e.parse.apply(this,arguments)}}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var at=c.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),st={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var n=-1,i=t;++n<st.size;)st.data[n]=(i+=e*st.data[n])%st.base,i=Math.floor(i/st.base)},divide:function(e){for(var t=st.size,n=0;--t>=0;)n+=st.data[t],st.data[t]=Math.floor(n/e),n=n%e*st.base},numToString:function(){for(var e=st.size,t="";--e>=0;)if(""!==t||0===e||0!==st.data[e]){var n=o(st.data[e]);""===t?t=n:t+=W("0000000",0,7-n.length)+n}return t},pow:function e(t,n,i){return 0===n?i:n%2==1?e(t,n-1,i*t):e(t*t,n/2,i)},log:function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}};O(c,{toFixed:function(e){var t,n,i,r,a,s,l,c;if(t=u(e),(t=M(t)?0:Math.floor(t))<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=u(this),M(n))return"NaN";if(n<=-1e21||n>=1e21)return o(n);if(i="",n<0&&(i="-",n=-n),r="0",n>1e-21)if(s=(a=st.log(n*st.pow(2,69,1))-69)<0?n*st.pow(2,-a,1):n/st.pow(2,a,1),s*=4503599627370496,(a=52-a)>0){for(st.multiply(0,s),l=t;l>=7;)st.multiply(1e7,0),l-=7;for(st.multiply(st.pow(10,l,1),0),l=a-1;l>=23;)st.divide(1<<23),l-=23;st.divide(1<<l),st.multiply(1,1),st.divide(2),r=st.numToString()}else st.multiply(0,s),st.multiply(1<<-a,0),r=st.numToString()+W("0.00000000000000000000",2,2+t);return t>0?(c=r.length)<=t?i+W("0.0000000000000000000",0,t-c+2)+r:i+W(r,0,c-t)+"."+W(r,c-t):i+r}},at);var ot=function(){try{return"1"===1..toPrecision(void 0)}catch(A){return!0}}(),lt=c.toPrecision;O(c,{toPrecision:function(e){return void 0===e?lt.call(this):lt.call(this,e)}},ot),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var t=void 0===/()??/.exec("")[1],n=Math.pow(2,32)-1;l.split=function(i,r){var a=String(this);if(void 0===i&&0===r)return[];if(!e(i))return z(this,i,r);var s,o,l,u,c=[],d=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":""),h=0,p=new RegExp(i.source,d+"g");t||(s=new RegExp("^"+p.source+"$(?!\\s)",d));var g=void 0===r?n:U.ToUint32(r);for(o=p.exec(a);o&&!((l=o.index+o[0].length)>h&&(Y(c,W(a,h,o.index)),!t&&o.length>1&&o[0].replace(s,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)})),o.length>1&&o.index<a.length&&f.apply(c,G(o,1)),u=o[0].length,h=l,c.length>=g));)p.lastIndex===o.index&&p.lastIndex++,o=p.exec(a);return h===a.length?!u&&p.test("")||Y(c,""):Y(c,W(a,h)),c.length>g?G(c,0,g):c}}():"0".split(void 0,0).length&&(l.split=function(e,t){return void 0===e&&0===t?[]:z(this,e,t)});var ut=l.replace;(function(){var e=[];return"x".replace(/x(.)?/g,(function(t,n){Y(e,n)})),1===e.length&&void 0===e[0]})()||(l.replace=function(t,n){var i=A(n),r=e(t)&&/\)[*?]/.test(t.source);return ut.call(this,t,i&&r?function(e){var i=arguments.length,r=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];return t.lastIndex=r,Y(a,arguments[i-2],arguments[i-1]),n.apply(this,a)}:n)});var ct=l.substr,dt="".substr&&"b"!=="0b".substr(-1);O(l,{substr:function(e,t){var n=e;return e<0&&(n=b(this.length+e,0)),ct.call(this,n,t)}},dt);var ht="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",ft="\u200b",pt="["+ht+"]",gt=new RegExp("^"+pt+pt+"*"),mt=new RegExp(pt+pt+"*$"),vt=l.trim&&(ht.trim()||!ft.trim());O(l,{trim:function(){if(null==this)throw new TypeError("can't convert "+this+" to object");return o(this).replace(gt,"").replace(mt,"")}},vt);var yt=v.bind(String.prototype.trim),bt=l.lastIndexOf&&-1!=="abc\u3042\u3044".lastIndexOf("\u3042\u3044",2);O(l,{lastIndexOf:function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var t=o(this),n=o(e),i=arguments.length>1?u(arguments[1]):NaN,r=M(i)?1/0:U.ToInteger(i),a=_(b(r,0),t.length),s=n.length,l=a+s;l>0;){l=b(0,l-s);var c=V(W(t,l,a+s),n);if(-1!==c)return l+c}return-1}},bt);var _t=l.lastIndexOf;if(O(l,{lastIndexOf:function(e){return _t.apply(this,arguments)}},1!==l.lastIndexOf.length),8===parseInt(ht+"08")&&22===parseInt(ht+"0x16")||(parseInt=function(e){var t=/^[\-+]?0[xX]/;return function(n,i){var r=yt(String(n)),a=u(i)||(t.test(r)?16:10);return e(r,a)}}(parseInt)),1/parseFloat("-0")!=-1/0&&(parseFloat=function(e){return function(t){var n=yt(String(t)),i=e(n);return 0===i&&"-"===W(n,0,1)?-0:i}}(parseFloat)),"RangeError: test"!==String(new RangeError("test"))){var Tt=function(){if(null==this)throw new TypeError("can't convert "+this+" to object");var e=this.name;void 0===e?e="Error":"string"!=typeof e&&(e=o(e));var t=this.message;return void 0===t?t="":"string"!=typeof t&&(t=o(t)),e?t?e+": "+t:e:t};Error.prototype.toString=Tt}if(P){var wt=function(e,t){if(Z(e,t)){var n=Object.getOwnPropertyDescriptor(e,t);n.configurable&&(n.enumerable=!1,Object.defineProperty(e,t,n))}};wt(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),wt(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var St=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e};RegExp.prototype.toString=St}}))},{}],36:[function(e,t,n){var i=[],r=i.forEach,a=i.slice;t.exports=function(e){return r.call(a.call(arguments,1),(function(t){if(t)for(var n in t)e[n]=t[n]})),e}},{}],37:[function(e,t,n){n.read=function(e,t,n,i,r){var a,s,o=8*r-i-1,l=(1<<o)-1,u=l>>1,c=-7,d=n?r-1:0,h=n?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-c)-1,f>>=-c,c+=o;c>0;a=256*a+e[t+d],d+=h,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=i;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),a-=u}return(f?-1:1)*s*Math.pow(2,a-i)},n.write=function(e,t,n,i,r,a){var s,o,l,u=8*a-r-1,c=(1<<u)-1,d=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(t*l-1)*Math.pow(2,r),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+f]=255&o,f+=p,o/=256,r-=8);for(s=s<<r|o,u+=r;u>0;e[n+f]=255&s,f+=p,s/=256,u-=8);e[n+f-p]|=128*g}},{}],38:[function(e,t,n){var i=[].indexOf;t.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],39:[function(e,t,n){t.exports=function(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var i=Object.prototype.toString},{}],40:[function(e,t,n){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],41:[function(e,t,n){(function(e){!function(i){function r(e){throw new RangeError(D[e])}function a(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function s(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+a((e=e.replace(L,".")).split("."),t).join(".")}function o(e){for(var t,n,i=[],r=0,a=e.length;r<a;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<a?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function l(e){return a(e,(function(e){var t="";return e>65535&&(t+=O((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+O(e)})).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function c(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,n){var i=0;for(e=n?P(e/E):e>>1,e+=P(e/t);e>R*w>>1;i+=_)e=P(e/R);return P(i+(R+1)*e/(e+S))}function h(e){var t,n,i,a,s,o,c,h,f,p,g=[],m=e.length,v=0,y=k,S=C;for((n=e.lastIndexOf(A))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&r("not-basic"),g.push(e.charCodeAt(i));for(a=n>0?n+1:0;a<m;){for(s=v,o=1,c=_;a>=m&&r("invalid-input"),((h=u(e.charCodeAt(a++)))>=_||h>P((b-v)/o))&&r("overflow"),v+=h*o,!(h<(f=c<=S?T:c>=S+w?w:c-S));c+=_)o>P(b/(p=_-f))&&r("overflow"),o*=p;S=d(v-s,t=g.length+1,0==s),P(v/t)>b-y&&r("overflow"),y+=P(v/t),v%=t,g.splice(v++,0,y)}return l(g)}function f(e){var t,n,i,a,s,l,u,h,f,p,g,m,v,y,S,E=[];for(m=(e=o(e)).length,t=k,n=0,s=C,l=0;l<m;++l)(g=e[l])<128&&E.push(O(g));for(i=a=E.length,a&&E.push(A);i<m;){for(u=b,l=0;l<m;++l)(g=e[l])>=t&&g<u&&(u=g);for(u-t>P((b-n)/(v=i+1))&&r("overflow"),n+=(u-t)*v,t=u,l=0;l<m;++l)if((g=e[l])<t&&++n>b&&r("overflow"),g==t){for(h=n,f=_;!(h<(p=f<=s?T:f>=s+w?w:f-s));f+=_)E.push(O(c(p+(S=h-p)%(y=_-p),0))),h=P(S/y);E.push(O(c(h,0))),s=d(n,v,i==a),n=0,++i}++n,++t}return E.join("")}var p="object"==typeof n&&n&&!n.nodeType&&n,g="object"==typeof t&&t&&!t.nodeType&&t,m="object"==typeof e&&e;m.global!==m&&m.window!==m&&m.self!==m||(i=m);var v,y,b=2147483647,_=36,T=1,w=26,S=38,E=700,C=72,k=128,A="-",I=/^xn--/,x=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=_-T,P=Math.floor,O=String.fromCharCode;if(v={version:"1.4.1",ucs2:{decode:o,encode:l},decode:h,encode:f,toASCII:function(e){return s(e,(function(e){return x.test(e)?"xn--"+f(e):e}))},toUnicode:function(e){return s(e,(function(e){return I.test(e)?h(e.slice(4).toLowerCase()):e}))}},p&&g)if(t.exports==p)g.exports=v;else for(y in v)v.hasOwnProperty(y)&&(p[y]=v[y]);else i.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(e,t,n){!function(e,n){void 0!==t&&t.exports?t.exports=n():this.$script=n()}(0,(function(){function e(e,t){for(var n=0,i=e.length;n<i;++n)if(!t(e[n]))return l;return 1}function t(t,n){e(t,(function(e){return!n(e)}))}function n(a,s,o){function l(e){return e.call?e():h[e]}function c(){if(!--y)for(var n in h[v]=1,m&&m(),p)e(n.split("|"),l)&&!t(p[n],l)&&(p[n]=[])}a=a[u]?a:[a];var d=s&&s.call,m=d?s:o,v=d?a.join(""):s,y=a.length;return setTimeout((function(){t(a,(function e(t,n){return null===t?c():(n||/^https?:\/\//.test(t)||!r||(t=-1===t.indexOf(".js")?r+t+".js":r+t),g[t]?(v&&(f[v]=1),2==g[t]?c():setTimeout((function(){e(t,!0)}),0)):(g[t]=1,v&&(f[v]=1),void i(t,c)))}))}),0),n}function i(e,t){var n,i=s.createElement("script");i.onload=i.onerror=i[d]=function(){i[c]&&!/^c|loade/.test(i[c])||n||(i.onload=i[d]=null,n=1,g[e]=2,t())},i.async=1,i.src=a?e+(-1===e.indexOf("?")?"?":"&")+a:e,o.insertBefore(i,o.lastChild)}var r,a,s=document,o=s.getElementsByTagName("head")[0],l=!1,u="push",c="readyState",d="onreadystatechange",h={},f={},p={},g={};return n.get=i,n.order=function(e,t,i){!function r(a){a=e.shift(),e.length?n(a,r):n(a,t,i)}()},n.path=function(e){r=e},n.urlArgs=function(e){a=e},n.ready=function(i,r,a){var s=[];return!t(i=i[u]?i:[i],(function(e){h[e]||s[u](e)}))&&e(i,(function(e){return h[e]}))?r():function(e){p[e]=p[e]||[],p[e][u](r),a&&a(s)}(i.join("|")),n},n.done=function(e){n([null],e)},n}))},{}]},{},[29])(29)})),function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(5)},function(e,t,n){!function(){"use strict";var t=function(e,t){var i,r="hlsjs",a=t.common,s=t.extend,o=t.support,l=o.browser,u=t.version,c=0===u.indexOf("6."),d=window,h=d.MediaSource||d.WebKitMediaSource,f=d.performance,p=function(e){return e.toLowerCase().indexOf("mpegurl")>-1},g=function(e){var t=e.clip&&e.clip.hlsQualities||e.hlsQualities;return o.inlineVideo&&(!0===t||t&&t.length)},m=function(e){var t=a.findDirect("video",e)[0]||a.find(".fp-player>video",e)[0];t&&(a.find("source",t).forEach((function(e){e.removeAttribute("src")})),t.removeAttribute("src"),t.load(),a.removeNode(t))},v=n(3),y=new v.TextDecoder("utf-8"),b=function(e){var t="";try{t=y.decode(e)}catch(n){try{t=(y=new v.TextDecoder("utf-16be")).decode(e)}catch(n){try{t=(y=new v.TextDecoder("utf-16le")).decode(e)}catch(e){}}}return t},_=function(e,t,n){t.title=t.title||n+"";var i={time:t.startTime,subtitle:t,visible:!1};e.subtitles.push(t),e.addCuepoint(i),e.addCuepoint({time:t.endTime,subtitleEnd:t.title,visible:!1}),0!==t.startTime||e.video.time||e.splash||e.trigger("cuepoint",[e,i]),e.splash&&e.one("ready."+r,(function(){e.trigger("cuepoint",[e,i])}))},T=function(n,l){var d,v,y,T,w,S,E,C,k,A,I=t.bean,x="is-seeking",L="is-poster",D=function(e,t,i){if(e.debug&&console.log("recovery."+r,"<-",t),a.removeClass(l,"is-paused"),a.addClass(l,x),i)v.startLoad();else{var s=f.now();!T||s-T>3e3?(T=f.now(),v.recoverMediaError()):(!w||s-w>3e3)&&(w=f.now(),v.swapAudioCodec(),v.recoverMediaError())}y>0&&(y-=1),I.one(d,"seeked."+r,(function(){d.paused&&(a.removeClass(l,L),n.poster=!1,d.play()),a.removeClass(l,x)}))},R=function(e,t,i){var r={code:e};return e>2&&(r.video=s(n.video,{src:t,url:i||t})),r},P=function(){I.one(d,"timeupdate."+r,(function(){a.addClass(l,L),n.poster=!0}))},O=function(){c&&n.poster&&I.one(d,"timeupdate."+r,(function(){a.removeClass(l,L),n.poster=!1}))},N=0,M=function(e){if(E&&E.length>1){var t=v.audioTracks,n=t.filter((function(n){var i=v.levels[e].attrs;return n.autoselect&&i&&n.groupId===i.AUDIO&&n.name===t[v.audioTrack].name})),i=n.length&&n[0].id;void 0!==i&&i!==v.audioTrack&&(v.audioTrack=i)}},U=function(e){a.find(".fp-audio",l)[0].innerHTML=e.lang||e.name,a.find(".fp-audio-menu a",l).forEach((function(t){var n=t.getAttribute("data-audio")===e.name;a.toggleClass(t,"fp-selected",n),a.toggleClass(t,"fp-color",n)}))},j=function(){a.find(".fp-audio-menu",l).forEach(a.removeNode),a.find(".fp-audio",l).forEach(a.removeNode)},B=function(e){var t=a.find(".fp-subtitle-menu",l)[0];a.toggleClass(a.find("a.fp-selected",t)[0],"fp-selected"),a.toggleClass(a.find('a[data-subtitle-index="'+e+'"]',t)[0],"fp-selected")},F=function(e,t){var i=b(e.payload),r=e.frag.trackId;i&&(A[r]||(A[r]=[]),(i=t.subtitleParser(i)).forEach((function(e){if(e.text&&(A[r].push(e),n.ready&&(_(n,e,A[r].length),n.live))){var t=n.video.seekOffset;A[r]=A[r].filter((function(e){return e.endTime>=t})),n.subtitles=n.subtitles.filter((function(e){return e.endTime>=t})),n.cuepoints.forEach((function(e){e.subtitle&&e.time<t&&n.removeCuepoint(e)}))}})))},G=function(){[].forEach.call(d.textTracks,(function(e){"subtitles"===e.kind&&(e.mode="hidden")}))},H=function(e,t){var i=e.subtitleTracks;t.subtitles&&i.length&&o.inlineVideo&&!c&&(i=i.filter((function(e){return e.groupId===i[0].groupId})),n.video.subtitles=i.map((function(e){var t={kind:"subtitles",id:e.id,srclang:e.lang,label:e.name,default:e.default};return a.append(d,a.createElement("track",t)),t})),n.on("ready."+r,(function(e,t){var n,i=v.subtitleTracks;i&&i.length&&(k?a.addClass(d,"native-subtitles"):G(),i.map((function(e,t){e.default&&(v.subtitleTrack=t)})),(n=v.subtitleTrack)>-1?(!k&&A[n]&&A[n].forEach((function(e,n){_(t,e,n+1)})),B(n)):B(-1))})),I.on(l,"click."+r,".fp-subtitle-menu [data-subtitle-index]",(function(e){e.preventDefault();var t=e.target.getAttribute("data-subtitle-index");return n.disableSubtitles(),v.subtitleTrack=t,t<0?void G():(B(t),void(!k&&A[t]&&A[t].forEach((function(e,t){_(n,e,t+1)}))))})))},W=function(e){E=[],C=[],e.levels.forEach((function(e){var t=e.attrs&&e.attrs.AUDIO,n=e.audioCodec;t&&E.indexOf(t)<0&&(!n||h.isTypeSupported("audio/mp4;codecs="+n))&&E.push(t)})),E.length&&(C=e.audioTracks.filter((function(e){return e.groupId===E[0]}))),!o.inlineVideo||c||C.length<2||(I.on(l,"click."+r,".fp-audio",(function(){var e=a.find(".fp-audio-menu",l)[0];a.hasClass(e,"fp-active")?n.hideMenu():n.showMenu(e)})),I.on(l,"click."+r,".fp-audio-menu a",(function(e){var t=e.target.getAttribute("data-audio"),n=v.audioTracks,i=n[v.audioTrack].groupId,r=n.filter((function(e){return e.groupId===i&&(e.name===t||e.lang===t)}))[0];v.audioTrack=r.id,U(r)})),n.on("ready."+r,(function(){if(j(),v&&C&&!(C.length<2)){var e=a.find(".fp-ui",l)[0],t=a.find(".fp-controls",e)[0],n=v.audioTracks[v.audioTrack],i=a.createElement("div",{className:"fp-menu fp-audio-menu",css:{width:"auto"}},"<strong>Audio</strong>");C.forEach((function(e){i.appendChild(a.createElement("a",{"data-audio":e.name},e.name))})),e.appendChild(i),t.appendChild(a.createElement("strong",{className:"fp-audio"},n)),U(n)}})))},z="active",V=function(e){return e?n.qualities.indexOf(e)<0&&(e="abr"):e=n.quality,e.toLowerCase().replace(/\ /g,"")},Y=function(){var e=n.qualities;e&&(a.removeClass(l,"quality-abr"),e.forEach((function(e){a.removeClass(l,"quality-"+V(e))})))},Z=function(){c&&(delete n.hlsQualities,Y(),a.find(".fp-quality-selector",l).forEach(a.removeNode))},q=function(){return n.hlsQualities[n.qualities.indexOf(n.quality)+1]},X=-1,K=function(e,t,i){var s,o,u,f=i.levels,p=function(e){return isNaN(Number(e))?e.level:e};if(Z(),e&&!(f.length<2)){if("drive"===e){switch(f.length){case 4:s=[1,2,3];break;case 5:s=[1,2,3,4];break;case 6:s=[1,3,4,5];break;case 7:s=[1,3,5,6];break;case 8:s=[1,3,6,7];break;default:if(f.length<3||f[0].height&&f[2].height&&f[0].height===f[2].height)return;s=[1,2]}s.unshift(-1)}else switch(typeof e){case"object":s=e.map(p);break;case"string":s=e.split(/\s*,\s*/).map(Number);break;default:(s=f.map((function(e,t){return t}))).unshift(-1)}if(c&&s.indexOf(-1)<0&&s.unshift(-1),o=(s=s.filter((function(e){if(e>-1&&e<f.length){var t=f[e];return!t.videoCodec||t.videoCodec&&h.isTypeSupported("video/mp4;codecs="+t.videoCodec)}return-1===e}))).map((function(t,n){var i=f[t],r="object"==typeof e?e.filter((function(e){return p(e)===t}))[0]:t,a="Level "+(n+1);return t<0?a=r.label||"Auto":r.label?a=r.label:(i.width&&i.height&&(a=Math.min(i.width,i.height)+"p"),"drive"!==e&&i.bitrate&&(a+=" ("+Math.round(i.bitrate/1e3)+"k)")),c?a:{value:t,label:a}})),!c)return n.video.qualities=o,X>-1||s.indexOf(-1)<0?(v.loadLevel=s.indexOf(X)<0?s[0]:X,v.config.startLevel=v.loadLevel,n.video.quality=v.loadLevel):n.video.quality=-1,void(X=n.video.quality);n.hlsQualities=s,n.qualities=o.slice(1),u=a.createElement("ul",{class:"fp-quality-selector"}),a.find(".fp-ui",l)[0].appendChild(u),!n.quality||o.indexOf(n.quality)<1?n.quality="abr":(v.loadLevel=q(),v.config.startLevel=v.loadLevel),o.forEach((function(e){u.appendChild(a.createElement("li",{"data-quality":V(e)},e))})),a.addClass(l,"quality-"+V()),I.on(l,"click."+r,".fp-quality-selector li",(function(e){var i=e.currentTarget,s=a.find(".fp-quality-selector li",l),o=t.smoothSwitching,u=d.paused;a.hasClass(i,z)||(u||o||I.one(d,"pause."+r,(function(){a.removeClass(l,"is-paused")})),s.forEach((function(e,t){var r=e===i;r&&(n.quality=t>0?n.qualities[t-1]:"abr",o&&!n.poster?v.nextLevel=q():v.currentLevel=q(),a.addClass(i,z),u&&d.play()),a.toggleClass(e,z,r)})),Y(),a.addClass(l,"quality-"+V()))}))}},J={engineName:r,pick:function(e){var t=e.filter((function(e){return p(e.type)}))[0];return"string"==typeof t.src&&(t.src=a.createAbsoluteUrl(t.src)),t},load:function(t){var u=n.conf,h={ended:"finish",loadeddata:"ready",pause:"pause",play:"resume",progress:"buffer",ratechange:"speed",seeked:"seek",timeupdate:"progress",volumechange:"volume",error:"error"},f=e.Events,p=!!t.autoplay||!!u.autoplay||!!u.splash,_=t.hlsQualities||u.hlsQualities,S=s(i,u.hlsjs,t.hlsjs),E=s({},S);if(!1===t.hlsQualities&&(_=!1),k=S.subtitles&&o.subtitles&&u.nativesubtitles,v?(v.destroy(),a.find("track",d).forEach(a.removeNode),a.removeClass(d,"native-subtitles"),(n.video.src&&t.src!==n.video.src||t.index)&&a.attr(d,"autoplay","autoplay")):(m(l),d=a.createElement("video",{class:"fp-engine hlsjs-engine",autoplay:!!p&&"autoplay",volume:n.volumeLevel}),o.mutedAutoplay&&!u.splash&&p&&(d.muted=!0),Object.keys(h).forEach((function(e){var t,i=h[e],o=e+"."+r;I.on(d,o,(function(e){u.debug&&i.indexOf("progress")<0&&console.log(o,"->",i,e.originalEvent);var r,h,f,p=d.currentTime,g=d.seekable,m=n.video,y=n.dvr?m.seekOffset:n.live?v.liveSyncPosition:0,b=d.buffered,_=[],T=m.src,w=n.quality;switch(i){case"ready":t=s(m,{duration:d.duration,seekable:g.length&&g.end(null),width:d.videoWidth,height:d.videoHeight,url:T});break;case"resume":O(),S.bufferWhilePaused||v.startLoad(p),p<y&&(d.currentTime=y);break;case"seek":O(),!S.bufferWhilePaused&&d.paused&&v.stopLoad(),t=p;break;case"pause":S.bufferWhilePaused||v.stopLoad();break;case"progress":t=p;break;case"speed":t=d.playbackRate;break;case"volume":t=d.volume;break;case"buffer":for(r=0;r<b.length;r+=1)_.push(b.end(r));t=_.filter((function(e){return e>=p})).sort()[0],m.buffer=t;break;case"finish":S.bufferWhilePaused&&v.autoLevelEnabled&&(m.loop||u.playlist.length<2||!1===u.advance)&&(v.nextLoadLevel=N);break;case"error":if(f=d.error&&d.error.code,S.recoverMediaError&&(3===f||!f)||S.recoverNetworkError&&2===f||S.recover&&(2===f||3===f))return e.preventDefault(),void D(u,i,2===f);t=R(f,T)}n.trigger(i,[n,t]),c&&"ready"===i&&w&&(h="abr"===w?0:n.qualities.indexOf(w)+1,a.addClass(a.find(".fp-quality-selector li",l)[h],z))}))})),n.on("error."+r,(function(){v&&n.engine.unload()})).on("beforeseek."+r,(function(e,t,n){void 0===n?e.preventDefault():!S.bufferWhilePaused&&t.paused&&v.startLoad(n)})),c?u.poster&&(n.on("stop."+r,P),!n.live||p||n.video.autoplay||I.one(d,"seeked."+r,P)):n.on("quality."+r,(function(e,t,n){S.smoothSwitching?v.nextLevel=n:v.currentLevel=n,X=n})),a.prepend(a.find(".fp-player",l)[0],d)),n.video=t,N=0,Object.keys(S).forEach((function(t){e.DefaultConfig.hasOwnProperty(t)||delete E[t];var n=S[t];switch(t){case"adaptOnStartOnly":n&&(E.startLevel=-1);break;case"autoLevelCapping":!1===n&&(n=-1),E[t]=n;break;case"startLevel":switch(n){case"auto":n=-1;break;case"firstLevel":n=void 0}E[t]=n;break;case"recover":S.recoverMediaError=!1,S.recoverNetworkError=!1,y=n;break;case"strict":n&&(S.recoverMediaError=!1,S.recoverNetworkError=!1,y=0)}})),v=new e(E),n.engine[r]=v,T=null,w=null,n.disableSubtitles(),A={},Object.keys(f).forEach((function(t){var i=f[t],o=S.listeners,h=o&&o.indexOf(i)>-1;v.on(i,(function(i,o){var f,p={},m=e.ErrorTypes,T=e.ErrorDetails,w=n.video,E=w.src;switch(t){case"MANIFEST_PARSED":!g(u)||!c&&n.pluginQualitySelectorEnabled?c&&delete n.quality:K(_,S,o);break;case"MANIFEST_LOADED":W(o);break;case"SUBTITLE_TRACKS_UPDATED":H(o,S);break;case"MEDIA_ATTACHED":v.loadSource(E);break;case"FRAG_LOADED":"subtitle"===o.frag.type&&S.subtitles&&!k&&F(o,u),S.bufferWhilePaused&&!n.live&&v.autoLevelEnabled&&v.nextLoadLevel>N&&(N=v.nextLoadLevel);break;case"SUBTITLE_TRACK_SWITCH":k&&[].forEach.call(d.textTracks,(function(e){e.mode=v.subtitleTracks[o.id].lang===e.language&&"subtitles"===e.kind?"showing":"hidden"}));break;case"FRAG_PARSING_METADATA":if(c)return;o.samples.forEach((function(e){var t;t=function(){if(!(d.currentTime<e.dts)){I.off(d,"timeupdate."+r,t);var i=b(e.unit||e.data);n.trigger("metadata",[n,{key:i.substr(10,4),data:i}])}},I.on(d,"timeupdate."+r,t)}));break;case"LEVEL_UPDATED":n.live&&(s(w,{seekOffset:o.details.fragments[0].start+v.config.nudgeOffset,duration:v.liveSyncPosition}),n.dvr&&n.playing&&n.trigger("dvrwindow",[n,{start:w.seekOffset,end:v.liveSyncPosition}]));break;case"LEVEL_SWITCHED":S.audioABR&&n.one("buffer."+r,(function(e,t,n){n>t.video.time&&M(o.level)}));break;case"BUFFER_APPENDED":a.removeClass(l,x);break;case"ERROR":if(o.fatal||S.strict){switch(o.type){case m.NETWORK_ERROR:S.recoverNetworkError||y?D(u,o.type,!0):o.frag&&o.frag.url?(p.url=o.frag.url,f=2):f=4;break;case m.MEDIA_ERROR:S.recoverMediaError||y?D(u,o.type):f=3;break;default:f=5}void 0!==f&&(p=R(f,E,o.url),n.trigger("error",[n,p]))}else o.details!==T.FRAG_LOOP_LOADING_ERROR&&o.details!==T.BUFFER_STALLED_ERROR||a.addClass(l,x)}h&&n.trigger(i,[n,o])}))})),S.adaptOnStartOnly&&I.one(d,"timeupdate."+r,(function(){v.loadLevel=v.loadLevel})),v.attachMedia(d),p&&d.paused){var C=d.play();void 0!==C&&C.catch((function(){o.mutedAutoplay||(n.unload(),c||n.message("Please click the play button",3e3))}))}},resume:function(){d.play()},pause:function(){d.pause()},seek:function(e){d&&(d.currentTime=e)},volume:function(e){d&&(d.volume=e)},speed:function(e){d.playbackRate=e,n.trigger("speed",[n,e])},unload:function(){if(v){var e="."+r;n.disableSubtitles(),v.destroy(),v=0,Z(),j(),n.off(e),I.off(l,e),I.off(d,e),a.removeNode(d),d=0}}};return!/^6\.0\.[0-3]$/.test(u)||n.conf.splash||n.conf.poster||n.conf.autoplay||(S=a.css(l,"backgroundColor"),("none"!==a.css(l,"backgroundImage")||S&&"rgba(0, 0, 0, 0)"!==S&&"transparent"!==S)&&(n.conf.poster=!0)),J};e.isSupported()&&0!==u.indexOf("5.")&&(T.engineName=r,T.hlsjsClientVersion=e.version,T.canPlay=function(e,t){return!1!==t[r]&&!1!==t.clip[r]&&(i=s({bufferWhilePaused:!0,smoothSwitching:!0,recoverMediaError:!0},t[r],t.clip[r]),p(e)&&(!(l.safari&&o.dataload)||i.safari))},t((function(e,t){var n=e.conf;c?e.pluginQualitySelectorEnabled=g(n)&&T.canPlay("application/x-mpegurl",n):!o.mutedAutoplay||n.splash||n.autoplay||"7.1.0"!==u&&"7.0.0"!==u||(e.splash=!0,n.splash="string"!=typeof n.poster||n.poster,n.poster=void 0,n.autoplay=!0,m(t))})),t.engines.unshift(T))};"object"==typeof e&&e.exports?e.exports=t.bind(void 0,n(2)):window.Hls&&window.flowplayer&&t(window.Hls,window.flowplayer)}()},function(e,t,n){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=7)}([function(e,t,n){"use strict";function i(){}function r(e,t){return"["+e+"] > "+t}function a(e){var t=self.console[e];return t?function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];i[0]&&(i[0]=r(e,i[0])),t.apply(self.console,i)}:i}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={trace:i,debug:i,log:i,warn:i,info:i,error:i},l=o,u=function(e){if(!0===e||"object"===(void 0===e?"undefined":s(e))){!function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach((function(t){l[t]=e[t]?e[t].bind(e):a(t)}))}(e,"debug","log","info","warn","error");try{l.log()}catch(e){l=o}}else l=o},c=o},function(e,t,n){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,n){"use strict";var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var i=n,r=0;e.isHeader(t,n);)r+=10,r+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(r+=10),n+=r;if(r>0)return t.subarray(i,i+r)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),i=0;i<n.length;i++){var r=n[i];if(e.isTimeStampFrame(r))return e._readTimeStamp(r)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4);return{type:n,size:i,data:t.subarray(10,10+i)}},e.getID3Frames=function(t){for(var n=0,i=[];e.isHeader(t,n);){for(var r=e._readSize(t,n+6),a=(n+=10)+r;n+8<a;){var s=e._getFrameData(t.subarray(n)),o=e._decodeFrame(s);o&&i.push(o),n+=s.size+10}e.isFooter(t,n)&&(n+=10)}return i},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,1&t[3]&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data),i=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:i.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,i=e._utf8ArrayToStr(t.data.subarray(n)),r=e._utf8ArrayToStr(t.data.subarray(n+=i.length+1));return{key:t.type,info:i,data:r}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,i=e._utf8ArrayToStr(t.data.subarray(n)),r=e._utf8ArrayToStr(t.data.subarray(n+=i.length+1));return{key:t.type,info:i,data:r}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e){for(var t=void 0,n=void 0,i="",r=0,a=e.length;r<a;){var s=e[r++];switch(s>>4){case 0:return i;case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String.fromCharCode(s);break;case 12:case 13:t=e[r++],i+=String.fromCharCode((31&s)<<6|63&t);break;case 14:t=e[r++],n=e[r++],i+=String.fromCharCode((15&s)<<12|(63&t)<<6|(63&n)<<0)}}return i},e}();t.a=i},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,o,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(a(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(r(n))for(o=Array.prototype.slice.call(arguments,1),s=(u=n.slice()).length,l=0;l<s;l++)u[l].apply(this,o);return!0},n.prototype.on=n.prototype.addListener=function(e,t){var s;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(s=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,a,s,o;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,a=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(o=s;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=o;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){!function(t){var n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=this.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s}()},function(e,t,n){"use strict";function i(e,t){return 255===e[t]&&240==(246&e[t+1])}function r(e,t){return 1&e[t+1]?7:9}function a(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function s(e,t){return!!(t+1<e.length&&i(e,t))}function o(e,t){if(t+1<e.length&&i(e,t)){var n=r(e,t);t+5<e.length&&(n=a(e,t));var s=t+n;if(s===e.length||s+1<e.length&&i(e,s))return!0}return!1}function l(e,t,n,i,r){if(!e.samplerate){var a=function(e,t,n,i){var r,a,s,o,l,u=navigator.userAgent.toLowerCase(),c=i,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return r=1+((192&t[n+2])>>>6),(a=(60&t[n+2])>>>2)>d.length-1?void e.trigger(Event.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a}):(o=(1&t[n+2])<<2,v.b.log("manifest codec:"+i+",ADTS data:type:"+r+",sampleingIndex:"+a+"["+d[a]+"Hz],channelConfig:"+(o|=(192&t[n+3])>>>6)),/firefox/i.test(u)?a>=6?(r=5,l=new Array(4),s=a-3):(r=2,l=new Array(2),s=a):-1!==u.indexOf("android")?(r=2,l=new Array(2),s=a):(r=5,l=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&a>=6?s=a-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(a>=6&&1===o||/vivaldi/i.test(u))||!i&&1===o)&&(r=2,l=new Array(2)),s=a)),l[0]=r<<3,l[0]|=(14&a)>>1,l[1]|=(1&a)<<7,l[1]|=o<<3,5===r&&(l[1]|=(14&s)>>1,l[2]=(1&s)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:d[a],channelCount:o,codec:"mp4a.40."+r,manifestCodec:c})}(t,n,i,r);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,v.b.log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function u(e){return 9216e4/e}function c(e,t,n,i,s){var o,l,u=e.length;if(o=r(e,t),l=a(e,t),(l-=o)>0&&t+o+l<=u)return{headerLength:o,frameLength:l,stamp:n+i*s}}function d(e,t,n,i,r){var a=c(t,n,i,r,u(e.samplerate));if(a){var s=a.stamp,o=a.headerLength,l=a.frameLength,d={unit:t.subarray(n+o,n+o+l),pts:s,dts:s};return e.samples.push(d),e.len+=l,{sample:d,length:l+o}}}var h=n(1),f=n(2),p=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.subtle=t,this.aesIV=n}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),g=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.subtle=t,this.key=n}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),m=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],s=n[3],o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;e[f]=m=m>>>8^255&m^99,t[m]=f;var v=h[f],y=h[v],b=h[y],_=257*h[m]^16843008*m;i[f]=_<<24|_>>>8,r[f]=_<<16|_>>>16,a[f]=_<<8|_>>>24,s[f]=_,l[m]=(_=16843009*b^65537*y^257*v^16843008*f)<<24|_>>>8,u[m]=_<<16|_>>>16,c[m]=_<<8|_>>>24,d[m]=_,f?(f=v^h[h[h[b^v]]],p^=h[h[p]]):f=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a=this.ksRows=4*(r+6+1),s=void 0,o=void 0,l=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),c=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],g=h[2],m=h[3],v=void 0,y=void 0;for(s=0;s<a;s++)s<r?v=l[s]=t[s]:(y=v,s%r==0?(y=c[(y=y<<8|y>>>24)>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=d[s/r|0]<<24):r>6&&s%r==4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),l[s]=v=(l[s-r]^y)>>>0);for(o=0;o<a;o++)s=a-o,y=3&o?l[s]:l[s-4],u[o]=o<4||s<=4?y:f[c[y>>>24]]^p[c[y>>>16&255]]^g[c[y>>>8&255]]^m[c[255&y]],u[o]=u[o]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,n){for(var i,r,a=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,l=this.invSubMix,u=l[0],c=l[1],d=l[2],h=l[3],f=this.uint8ArrayToUint32Array_(n),p=f[0],g=f[1],m=f[2],v=f[3],y=new Int32Array(e),b=new Int32Array(y.length),_=void 0,T=void 0,w=void 0,S=void 0,E=void 0,C=void 0,k=void 0,A=void 0,I=void 0,x=void 0,L=void 0,D=void 0,R=this.networkToHostOrderSwap;t<y.length;){for(I=R(y[t]),x=R(y[t+1]),L=R(y[t+2]),D=R(y[t+3]),E=I^s[0],C=D^s[1],k=L^s[2],A=x^s[3],i=4,r=1;r<a;r++)T=u[C>>>24]^c[k>>16&255]^d[A>>8&255]^h[255&E]^s[i+1],w=u[k>>>24]^c[A>>16&255]^d[E>>8&255]^h[255&C]^s[i+2],S=u[A>>>24]^c[E>>16&255]^d[C>>8&255]^h[255&k]^s[i+3],E=_=u[E>>>24]^c[C>>16&255]^d[k>>8&255]^h[255&A]^s[i],C=T,k=w,A=S,i+=4;_=o[E>>>24]<<24^o[C>>16&255]<<16^o[k>>8&255]<<8^o[255&A]^s[i],T=o[C>>>24]<<24^o[k>>16&255]<<16^o[A>>8&255]<<8^o[255&E]^s[i+1],w=o[k>>>24]<<24^o[A>>16&255]<<16^o[E>>8&255]<<8^o[255&C]^s[i+2],S=o[A>>>24]<<24^o[E>>16&255]<<16^o[C>>8&255]<<8^o[255&k]^s[i+3],i+=3,b[t]=R(_^p),b[t+1]=R(S^g),b[t+2]=R(w^m),b[t+3]=R(T^v),p=I,g=x,m=L,v=D,t+=4}return b.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),v=n(0),y=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.config=n,this.logEnabled=!0;try{var i=crypto||self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,n,i){var r=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(v.b.log("JS AES decrypt"),this.logEnabled=!1);var a=this.decryptor;a||(this.decryptor=a=new m),a.expandKey(t),i(a.decrypt(e,0,n))}else{this.logEnabled&&(v.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var s=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new g(s,t)),this.fastAesKey.expandKey().then((function(a){new p(s,n).decrypt(e,a).catch((function(a){r.onWebCryptoError(a,e,t,n,i)})).then((function(e){i(e)}))})).catch((function(a){r.onWebCryptoError(a,e,t,n,i)}))}},e.prototype.onWebCryptoError=function(e,t,n,i,r){this.config.enableSoftwareAES?(v.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,i,r)):(v.b.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}(),b=n(3),_=function(){function e(t,n,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.config=i,this.remuxer=n}return e.prototype.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(b.a.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(o(e,t))return v.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var r=this._audioTrack,a=b.a.getID3Data(e,0)||[],o=b.a.getTimeStamp(a),u=o?90*o:9e4*t,c=0,h=u,f=e.length,p=a.length,g=[{pts:h,dts:h,data:a}];p<f-1;)if(s(e,p)&&p+5<f){l(r,this.observer,e,p,r.manifestCodec);var m=d(r,e,p,u,c);if(!m){v.b.log("Unable to parse AAC frame");break}p+=m.length,h=m.sample.pts,c++}else b.a.isHeader(e,p)?(a=b.a.getID3Data(e,p),g.push({pts:h,dts:h,data:a}),p+=a.length):p++;this.remuxer.remux(r,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}(),T=Math.pow(2,32)-1,w=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.remuxer=n}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,n,i,r){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t),s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:r?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:r?t:null}),a.video&&(s.video={container:"video/mp4",codec:i,initSegment:r?t:null})),this.observer.trigger(h.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),i&&(this.videoCodec=i)},e.probe=function(t){if(t.length>=8){var n=e.bin2str(t.subarray(4,8));return["moof","ftyp","styp"].indexOf(n)>=0}return!1},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var i,r,a,s,o,l,u=[];if(t.data?(o=t.start,a=t.end,t=t.data):(o=0,a=t.byteLength),!n.length)return null;for(i=o;i<a;)l=(r=e.readUint32(t,i))>1?i+r:a,e.bin2str(t.subarray(i+4,i+8))===n[0]&&(1===n.length?u.push({data:t,start:i+8,end:l}):(s=e.findBox({data:t,start:i+8,end:l},n.slice(1))).length&&(u=u.concat(s))),i=l;return u},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var r=i.data[i.start],a=0===r?12:20,s=e.readUint32(i,a),o=e.findBox(t,["mdia","mdhd"])[0];if(o){var l=e.readUint32(o,a=0===(r=o.data[o.start])?12:20),u=e.findBox(t,["mdia","hdlr"])[0];if(u){var c={soun:"audio",vide:"video"}[e.bin2str(u.data.subarray(u.start+8,u.start+12))];c&&(n[s]={timescale:l,type:c},n[c]={timescale:l,id:s})}}}})),n},e.getStartDTS=function(t,n){var i,r,a;return i=e.findBox(n,["moof","traf"]),r=[].concat.apply([],i.map((function(n){return e.findBox(n,["tfhd"]).map((function(i){var r,a;return r=e.readUint32(i,4),a=t[r].timescale||9e4,e.findBox(n,["tfdt"]).map((function(t){var n,i;return n=t.data[t.start],i=e.readUint32(t,4),1===n&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i}))[0]/a}))}))),a=Math.min.apply(null,r),isFinite(a)?a:0},e.offsetStartDTS=function(t,n,i){e.findBox(n,["moof","traf"]).map((function(n){return e.findBox(n,["tfhd"]).map((function(r){var a=e.readUint32(r,4),s=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map((function(t){var n=t.data[t.start],r=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,r-i*s);else{r*=Math.pow(2,32),r+=e.readUint32(t,8),r-=i*s,r=Math.max(r,0);var a=Math.floor(r/(T+1)),o=Math.floor(r%(T+1));e.writeUint32(t,4,a),e.writeUint32(t,8,o)}}))}))}))},e.prototype.append=function(t,n,i,r){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),a=this.initData);var s,o=this.initPTS;if(void 0===o){var l=e.getStartDTS(a,t);this.initPTS=o=l-n,this.observer.trigger(h.a.INIT_PTS_FOUND,{initPTS:o})}e.offsetStartDTS(a,t,o),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,i,r,t)},e.prototype.destroy=function(){},e}(),S={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,n,i,r){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var s=i+r*(10368e4/a.sampleRate),o={unit:t.subarray(n,n+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),e.len+=a.frameLength,{sample:o,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==r&&15!==r&&3!==a){var s=1e3*S.BitratesMap[14*(3===n?3-i:3===i?3:4)+r-1],o=S.SamplingRateMap[3*(3===n?0:2===n?1:2)+a],l=2&e[t+2]?1:0;return{sampleRate:o,channelCount:e[t+3]>>6==3?1:2,frameLength:3===i?(3===n?12:6)*s/o+l<<2:(3===n?144:72)*s/o+l|0}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),i=4;n&&n.frameLength&&(i=n.frameLength);var r=t+i;if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1}},E=S,C=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&v.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,n=8,i=8;for(t=0;t<e;t++)0!==i&&(i=(n+this.readEG()+256)%256),n=0===i?n:i},e.prototype.readSPS=function(){var e,t,n,i,r,a,s,o=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),h(5),g(3),d(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=f();if(3===b&&g(1),v(),v(),g(1),p())for(a=3!==b?8:12,s=0;s<a;s++)p()&&y(s<6?16:64)}v();var _=f();if(0===_)f();else if(1===_)for(g(1),m(),m(),t=f(),s=0;s<t;s++)m();v(),g(1),n=f(),i=f(),0===(r=h(1))&&g(1),g(1),p()&&(o=f(),l=f(),u=f(),c=f());var T=[1,1];if(p()&&p())switch(d()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*o-2*l),height:(2-r)*(i+1)*16-(r?2:4)*(u+c),pixelRatio:T}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),k=function(){function e(t,n,i,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.decryptdata=i,this.discardEPB=r,this.decrypter=new y(t,n)}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,n,i){var r=e[t].unit,a=r.subarray(16,r.length-r.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),o=this;this.decryptBuffer(s,(function(a){a=new Uint8Array(a),r.set(a,16),i||o.decryptAacSamples(e,t+1,n)}))},e.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,i),!i)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<=e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,i=32;i<=e.length-16;i+=160,n+=16)e.set(t.subarray(n,n+16),i);return e},e.prototype.decryptAvcSample=function(e,t,n,i,r,a){var s=this.discardEPB(r.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,(function(o){r.data=l.getAvcDecryptedUnit(s,o),a||l.decryptAvcSamples(e,t,n+1,i)}))},e.prototype.decryptAvcSamples=function(e,t,n,i){for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,i,a,s),!s)return}}}},e}(),A=function(){function e(t,n,i,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.config=i,this.typeSupported=r,this.remuxer=n,this.sampleAes=null}return e.prototype.setDecryptData=function(e){this.sampleAes=null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?new k(this.observer,this.config,e,this.discardEPB):null},e.probe=function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]},e.prototype.resetInitSegment=function(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:i,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(e,t,n,i){var r,a,s,o,l,u=e.length,c=!1;this.contiguous=n;var d=this.pmtParsed,p=this._avcTrack,g=this._audioTrack,m=this._id3Track,y=p.id,b=g.id,_=m.id,T=this._pmtId,w=p.pesData,S=g.pesData,E=m.pesData,C=this._parsePAT,k=this._parsePMT,A=this._parsePES,I=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this);for(u-=u%188,r=0;r<u;r+=188)if(71===e[r]){if(a=!!(64&e[r+1]),s=((31&e[r+1])<<8)+e[r+2],(48&e[r+3])>>4>1){if((o=r+5+e[r+4])===r+188)continue}else o=r+4;switch(s){case y:a&&(w&&(l=A(w))&&I(l,!1),w={data:[],size:0}),w&&(w.data.push(e.subarray(o,r+188)),w.size+=r+188-o);break;case b:a&&(S&&(l=A(S))&&(g.isAAC?x(l):L(l)),S={data:[],size:0}),S&&(S.data.push(e.subarray(o,r+188)),S.size+=r+188-o);break;case _:a&&(E&&(l=A(E))&&D(l),E={data:[],size:0}),E&&(E.data.push(e.subarray(o,r+188)),E.size+=r+188-o);break;case 0:a&&(o+=e[o]+1),T=this._pmtId=C(e,o);break;case T:a&&(o+=e[o]+1);var R=k(e,o,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=R.avc)>0&&(p.id=y),(b=R.audio)>0&&(g.id=b,g.isAAC=R.isAAC),(_=R.id3)>0&&(m.id=_),c&&!d&&(v.b.log("reparse from beginning"),c=!1,r=-188),d=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(h.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(l=A(w))?(I(l,!0),p.pesData=null):p.pesData=w,S&&(l=A(S))?(g.isAAC?x(l):L(l),g.pesData=null):(S&&S.size&&v.b.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=S),E&&(l=A(E))?(D(l),m.pesData=null):m.pesData=E,null==this.sampleAes?this.remuxer.remux(g,p,m,this._txtTrack,t,n,i):this.decryptAndRemux(g,p,m,this._txtTrack,t,n,i)},e.prototype.decryptAndRemux=function(e,t,n,i,r,a,s){if(e.samples&&e.isAAC){var o=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){o.decryptAndRemuxAvc(e,t,n,i,r,a,s)}))}else this.decryptAndRemuxAvc(e,t,n,i,r,a,s)},e.prototype.decryptAndRemuxAvc=function(e,t,n,i,r,a,s){if(t.samples){var o=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){o.remuxer.remux(e,t,n,i,r,a,s)}))}else this.remuxer.remux(e,t,n,i,r,a,s)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,n,i){var r,a,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<r;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){v.b.log("unkown stream type:"+e[t]);break}case 15:-1===s.audio&&(s.audio=a);break;case 21:-1===s.id3&&(s.id3=a);break;case 219:if(!i){v.b.log("unkown stream type:"+e[t]);break}case 27:-1===s.avc&&(s.avc=a);break;case 3:case 4:n?-1===s.audio&&(s.audio=a,s.isAAC=!1):v.b.log("MPEG audio found, not supported in this browser for now");break;case 36:v.b.warn("HEVC stream type found, not supported for now");break;default:v.b.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return s},e.prototype._parsePES=function(e){var t,n,i,r,a,s,o,l,u=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var d=new Uint8Array(c[0].length+c[1].length);d.set(c[0]),d.set(c[1],c[0].length),c[0]=d,c.splice(1,1)}if(1===((t=c[0])[0]<<16)+(t[1]<<8)+t[2]){if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;192&(n=t[7])&&((s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(s-=8589934592),64&n?((o=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(o-=8589934592),s-o>54e5&&(v.b.warn(Math.round((s-o)/9e4)+"s delta between PTS and DTS, align them"),s=o)):o=s),e.size-=l=(r=t[8])+9,a=new Uint8Array(e.size);for(var h=0,f=c.length;h<f;h++){var p=(t=c[h]).byteLength;if(l){if(l>p){l-=p;continue}t=t.subarray(l),p-=l,l=0}a.set(t,u),u+=p}return i&&(i-=r+3),{data:a,pts:s,dts:o,len:i}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,i=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,n.push(e)):t.dropped++}e.debug.length&&v.b.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var n,i,r,a=this,s=this._avcTrack,o=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,n,i){return{key:e,pts:t,dts:n,units:[],debug:i}};e.data=null,l&&o.length&&!s.audFound&&(c(l,s),l=this.avcSample=d(!1,e.pts,e.dts,"")),o.forEach((function(t){switch(t.type){case 1:i=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.frame=!0;var o=t.data;if(u&&o.length>4){var h=new C(o).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:i=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:i=!0,(n=new C(a.discardEPB(t.data))).readUByte();for(var f=0,p=0,g=!1,m=0;!g&&n.bytesAvailable>1;){f=0;do{f+=m=n.readUByte()}while(255===m);p=0;do{p+=m=n.readUByte()}while(255===m);if(4===f&&0!==n.bytesAvailable){if(g=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){var v=n.readUByte(),y=31&v,b=[v,n.readUByte()];for(r=0;r<y;r++)b.push(n.readUByte()),b.push(n.readUByte()),b.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}else if(p<n.bytesAvailable)for(r=0;r<p;r++)n.readUByte()}break;case 7:if(i=!0,u=!0,!s.sps){var _=(n=new C(t.data)).readSPS();s.width=_.width,s.height=_.height,s.pixelRatio=_.pixelRatio,s.sps=[t.data],s.duration=a._duration;var T=t.data.subarray(1,4),w="avc1.";for(r=0;r<3;r++){var S=T[r].toString(16);S.length<2&&(S="0"+S),w+=S}s.codec=w}break;case 8:i=!0,s.pps||(s.pps=[t.data]);break;case 9:i=!1,s.audFound=!0,l&&c(l,s),l=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:i=!1;break;default:i=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&i&&l.units.push(t)})),t&&l&&(c(l,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var i=n-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t},e.prototype._parseAVCNALu=function(e){var t,n,i,r,a=0,s=e.byteLength,o=this._avcTrack,l=o.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,r=31&e[0],l=0,a=1);a<s;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){if(d>=0)i={data:e.subarray(d,a-l-1),type:r},c.push(i);else{var h=this._getLastNalUnit();if(h&&(u&&a<=4-u&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-u)),(n=a-l-1)>0)){var f=new Uint8Array(h.data.byteLength+n);f.set(h.data,0),f.set(e.subarray(0,n),h.data.byteLength),h.data=f}}a<s?(d=a,r=31&e[a],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(d>=0&&l>=0&&(i={data:e.subarray(d,s),type:r,state:l},c.push(i)),0===c.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+e.byteLength);g.set(p.data,0),g.set(e,p.data.byteLength),p.data=g}}return o.naluState=l,c},e.prototype.discardEPB=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},e.prototype._parseAACPES=function(e){var t,n,i,r,a,o,c,p=this._audioTrack,g=e.data,m=e.pts,y=this.aacOverFlow,b=this.aacLastPTS;if(y){var _=new Uint8Array(y.byteLength+g.byteLength);_.set(y,0),_.set(g,y.byteLength),g=_}for(i=0,a=g.length;i<a-1&&!s(g,i);i++);if(!i||(i<a-1?(o="AAC PES did not start with ADTS header,offset:"+i,c=!1):(o="no ADTS header found in AAC PES",c=!0),v.b.warn("parsing error:"+o),this.observer.trigger(h.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_PARSING_ERROR,fatal:c,reason:o}),!c)){if(l(p,this.observer,g,i,this.audioCodec),n=0,t=u(p.samplerate),y&&b){var T=b+t;Math.abs(T-m)>1&&(v.b.log("AAC: align PTS for overlapping frames by "+Math.round((T-m)/90)),m=T)}for(;i<a;)if(s(g,i)&&i+5<a){var w=d(p,g,i,m,n);if(!w)break;i+=w.length,r=w.sample.pts,n++}else i++;y=i<a?g.subarray(i,a):null,this.aacOverFlow=y,this.aacLastPTS=r}},e.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,i=0,r=0,a=e.pts;r<n;)if(E.isHeader(t,r)){var s=E.appendFrame(this._audioTrack,t,r,a,i);if(!s)break;r+=s.length,i++}else r++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),I=function(){function e(t,n,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.config=i,this.remuxer=n}return e.prototype.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,n,i=b.a.getID3Data(e,0);if(i&&void 0!==b.a.getTimeStamp(i))for(t=i.length,n=Math.min(e.length-1,t+100);t<n;t++)if(E.probe(e,t))return v.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var r=b.a.getID3Data(e,0),a=90*b.a.getTimeStamp(r),s=r.length,o=e.length,l=0,u=0,c=this._audioTrack,d=[{pts:a,dts:a,data:r}];s<o;)if(E.isHeader(e,s)){var h=E.appendFrame(c,e,s,a,l);if(!h)break;s+=h.length,u=h.sample.pts,l++}else b.a.isHeader(e,s)?(r=b.a.getID3Data(e,s),d.push({pts:u,dts:u,data:r}),s+=r.length):s++;this.remuxer.remux(c,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}(),x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),L=Math.pow(2,32)-1,D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),i=8,r=n.length,a=r;r--;)i+=n[r].byteLength;for((t=new Uint8Array(i))[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),r=0,i=8;r<a;r++)t.set(n[r],i),i+=n[r].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(L+1)),r=Math.floor(n%(L+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return e.box(e.types.minf,"audio"===t.type?e.box(e.types.smhd,e.SMHD):e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))},e.moov=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(L+1)),r=Math.floor(n%(L+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,i,r=t.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)a[i+4]=(n=r[i].flags).dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,i,r,a=[],s=[];for(n=0;n<t.sps.length;n++)a.push((r=(i=t.sps[n]).byteLength)>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<t.pps.length;n++)s.push((r=(i=t.pps[n]).byteLength)>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(i));var o=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(s))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return e.box(e.types.stsd,e.STSD,"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.mp4a(t):e.mp3(t):e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,r=t.width,a=t.height,s=Math.floor(i/(L+1)),o=Math.floor(i%(L+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),r=t.id,a=Math.floor(n/(L+1)),s=Math.floor(n%(L+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var i,r,a,s,o,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,(n+=8+d)>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)h.set([(a=(r=u[i]).duration)>>>24&255,a>>>16&255,a>>>8&255,255&a,(s=r.size)>>>24&255,s>>>16&255,s>>>8&255,255&s,(o=r.flags).isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,(l=r.cts)>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n,i=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+i.byteLength)).set(e.FTYP),n.set(i,e.FTYP.byteLength),n},e}(),R=function(){function e(t,n,i,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.config=n,this.typeSupported=i;var a=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,n,i,r,a,s){if(this.ISGenerated||this.generateIS(e,t,r),this.ISGenerated){var o=e.samples.length,l=t.samples.length,u=r,c=r;if(o&&l){var d=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;u+=Math.max(0,d),c+=Math.max(0,-d)}if(o){e.timescale||(v.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,r));var f=this.remuxAudio(e,u,a,s);if(l){var p=void 0;f&&(p=f.endPTS-f.startPTS),t.timescale||(v.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,r)),this.remuxVideo(t,c,a,p,s)}}else{var g=void 0;l&&(g=this.remuxVideo(t,c,a,s)),g&&e.codec&&this.remuxEmptyAudio(e,u,a,g)}}n.samples.length&&this.remuxID3(n,r),i.samples.length&&this.remuxText(i,r),this.observer.trigger(h.a.FRAG_PARSED)},e.prototype.generateIS=function(e,t,n){var i,r,a=this.observer,s=e.samples,o=t.samples,l=this.typeSupported,u="audio/mp4",c={},d={tracks:c},p=void 0===this._initPTS;if(p&&(i=r=1/0),e.config&&s.length&&(e.timescale=e.samplerate,v.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(l.mpeg?(u="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),c.audio={container:u,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array:D.initSegment([e]),metadata:{channelCount:e.channelCount}},p&&(i=r=s[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&o.length){var g=t.inputTimeScale;t.timescale=g,c.video={container:"video/mp4",codec:t.codec,initSegment:D.initSegment([t]),metadata:{width:t.width,height:t.height}},p&&(i=Math.min(i,o[0].pts-g*n),r=Math.min(r,o[0].dts-g*n),this.observer.trigger(h.a.INIT_PTS_FOUND,{initPTS:i}))}Object.keys(c).length?(a.trigger(h.a.FRAG_PARSING_INIT_SEGMENT,d),this.ISGenerated=!0,p&&(this._initPTS=i,this._initDTS=r)):a.trigger(h.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,n,i,r){var a,s,o,l,u,c,d,p=8,g=e.timescale,m=e.samples,y=[],b=m.length,_=this._PTSNormalize,T=this._initDTS,w=this.nextAvcDts,S=this.isSafari;S&&(n|=m.length&&w&&(r&&Math.abs(t-w/g)<.1||Math.abs(m[0].pts-w-T)<g/5)),n||(w=t*g),m.forEach((function(e){e.pts=_(e.pts-T,w),e.dts=_(e.dts-T,w)})),m.sort((function(e,t){return e.dts-t.dts||e.pts-t.pts||e.id-t.id}));var E=m.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)}),0);if(E<0){v.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(E/90)+" ms to overcome this issue");for(var C=0;C<m.length;C++)m[C].dts+=E}var k=m[0];u=Math.max(k.dts,0),l=Math.max(k.pts,0);var A=Math.round((u-w)/90);n&&A&&(A>1?v.b.log("AVC:"+A+" ms hole between fragments detected,filling it"):A<-1&&v.b.log("AVC:"+-A+" ms overlapping between fragments detected"),m[0].dts=u=w,l=Math.max(l-A,w),m[0].pts=l,v.b.log("Video/PTS/DTS adjusted: "+Math.round(l/90)+"/"+Math.round(u/90)+",delta:"+A+" ms")),k=m[m.length-1],d=Math.max(k.dts,0),c=Math.max(k.pts,0,d),S&&(a=Math.round((d-u)/(m.length-1)));for(var I=0,x=0,L=0;L<b;L++){for(var R=m[L],P=R.units,O=P.length,N=0,M=0;M<O;M++)N+=P[M].data.length;x+=N,I+=O,R.length=N,R.dts=S?u+L*a:Math.max(R.dts,u),R.pts=Math.max(R.pts,R.dts)}var U=x+4*I+8;try{s=new Uint8Array(U)}catch(e){return void this.observer.trigger(h.a.ERROR,{type:f.b.MUX_ERROR,details:f.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating video mdat "+U})}var j=new DataView(s.buffer);j.setUint32(0,U),s.set(D.types.mdat,4);for(var B=0;B<b;B++){for(var F=m[B],G=F.units,H=0,W=void 0,z=0,V=G.length;z<V;z++){var Y=G[z],Z=Y.data,q=Y.data.byteLength;j.setUint32(p,q),s.set(Z,p+=4),p+=q,H+=4+q}if(S)W=Math.max(0,a*Math.round((F.pts-F.dts)/a));else{if(B<b-1)a=m[B+1].dts-F.dts;else{var X=this.config,K=F.dts-m[B>0?B-1:B].dts;if(X.stretchShortVideoTrack){var J=Math.floor(Math.min(X.maxBufferHole,X.maxSeekHole)*g),Q=(i?l+i*g:this.nextAudioPts)-F.pts;Q>J?((a=Q-K)<0&&(a=K),v.b.log("It is approximately "+Q/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=K}else a=K}W=Math.round(F.pts-F.dts)}y.push({size:H,duration:a,cts:W,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:F.key?2:1,isNonSync:F.key?0:1}})}this.nextAvcDts=d+a;var $=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ee=y[0].flags;ee.dependsOn=2,ee.isNonSync=0}e.samples=y,o=D.moof(e.sequenceNumber++,u,e),e.samples=[];var te={data1:o,data2:s,startPTS:l/g,endPTS:(c+a)/g,startDTS:u/g,endDTS:this.nextAvcDts/g,type:"video",nb:y.length,dropped:$};return this.observer.trigger(h.a.FRAG_PARSING_DATA,te),te},e.prototype.remuxAudio=function(e,t,n,i){var r,a,s,o,l,u,c,d=e.inputTimeScale,p=d/e.timescale,g=(e.isAAC?1024:1152)*p,m=this._PTSNormalize,y=this._initDTS,b=!e.isAAC&&this.typeSupported.mpeg,_=e.samples,T=[],w=this.nextAudioPts;if((n|=_.length&&w&&(i&&Math.abs(t-w/d)<.1||Math.abs(_[0].pts-w-y)<20*g))||(w=t*d),_.forEach((function(e){e.pts=e.dts=m(e.pts-y,w)})),_.sort((function(e,t){return e.pts-t.pts})),i&&e.isAAC)for(var S=this.config.maxAudioFramesDrift,E=0,C=w;E<_.length;){var k,A=_[E];k=A.pts-C;var I=Math.abs(1e3*k/d);if(k<=-S*g)v.b.warn("Dropping 1 audio frame @ "+(C/d).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),_.splice(E,1),e.len-=A.unit.length;else if(k>=S*g&&I<1e4&&C){var L=Math.round(k/g);v.b.warn("Injecting "+L+" audio frame @ "+(C/d).toFixed(3)+"s due to "+Math.round(1e3*k/d)+" ms gap.");for(var R=0;R<L;R++){var P=Math.max(C,0);(s=x.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(v.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),s=A.unit.subarray()),_.splice(E,0,{unit:s,pts:P,dts:P}),e.len+=s.length,C+=g,E++}A.pts=A.dts=C,C+=g,E++}else Math.abs(k),A.pts=A.dts=C,C+=g,E++}for(var O=0,N=_.length;O<N;O++){var M=_[O],U=M.unit,j=M.pts;if(void 0!==c)a.duration=Math.round((j-c)/p);else{var B=Math.round(1e3*(j-w)/d),F=0;if(n&&e.isAAC&&B){if(B>0&&B<1e4)F=Math.round((j-w)/g),v.b.log(B+" ms hole between AAC samples detected,filling it"),F>0&&((s=x.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s=U.subarray()),e.len+=F*s.length);else if(B<-12){v.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(w/d).toFixed(3)+"s/"+(j/d).toFixed(3)+"s/"+-B+"ms"),e.len-=U.byteLength;continue}j=w}if(u=Math.max(0,j),!(e.len>0))return;var G=b?e.len:e.len+8;r=b?0:8;try{o=new Uint8Array(G)}catch(e){return void this.observer.trigger(h.a.ERROR,{type:f.b.MUX_ERROR,details:f.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating audio mdat "+G})}b||(new DataView(o.buffer).setUint32(0,G),o.set(D.types.mdat,4));for(var H=0;H<F;H++)(s=x.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(v.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),s=U.subarray()),o.set(s,r),r+=s.byteLength,T.push(a={size:s.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}})}o.set(U,r);var W=U.byteLength;r+=W,T.push(a={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),c=j}var z=0,V=T.length;if(V>=2&&(a.duration=z=T[V-2].duration),V){this.nextAudioPts=w=c+p*z,e.len=0,e.samples=T,l=b?new Uint8Array:D.moof(e.sequenceNumber++,u/p,e),e.samples=[];var Y=u/d,Z=w/d,q={data1:l,data2:o,startPTS:Y,endPTS:Z,startDTS:Y,endDTS:Z,type:"audio",nb:V};return this.observer.trigger(h.a.FRAG_PARSING_DATA,q),q}return null},e.prototype.remuxEmptyAudio=function(e,t,n,i){var r=e.inputTimeScale,a=this.nextAudioPts,s=(void 0!==a?a:i.startDTS*r)+this._initDTS,o=r/(e.samplerate?e.samplerate:r)*1024,l=Math.ceil((i.endDTS*r+this._initDTS-s)/o),u=x.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(v.b.warn("remux empty Audio"),u){for(var c=[],d=0;d<l;d++){var h=s+d*o;c.push({unit:u,pts:h,dts:h}),e.len+=u.length}e.samples=c,this.remuxAudio(e,t,n)}else v.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e,t){var n,i=e.samples.length,r=e.inputTimeScale,a=this._initPTS,s=this._initDTS;if(i){for(var o=0;o<i;o++)(n=e.samples[o]).pts=(n.pts-a)/r,n.dts=(n.dts-s)/r;this.observer.trigger(h.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},e.prototype.remuxText=function(e,t){e.samples.sort((function(e,t){return e.pts-t.pts}));var n,i=e.samples.length,r=e.inputTimeScale,a=this._initPTS;if(i){for(var s=0;s<i;s++)(n=e.samples[s]).pts=(n.pts-a)/r;this.observer.trigger(h.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},e.prototype._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}(),P=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,n,i,r,a,s,o){var l=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),l.trigger(h.a.FRAG_PARSING_DATA,{data1:o,startPTS:r,startDTS:r,type:u,nb:1,dropped:0}),l.trigger(h.a.FRAG_PARSED)},e}(),O=function(){function e(t,n,i,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.typeSupported=n,this.config=i,this.vendor=r}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,n,i,r,a,s,o,l,u,c,d){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var f=this.decrypter;null==f&&(f=this.decrypter=new y(this.observer,this.config));var p,g=this;try{p=performance.now()}catch(e){p=Date.now()}f.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var f;try{f=performance.now()}catch(e){f=Date.now()}g.observer.trigger(h.a.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:f}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,r,a,s,o,l,u,c,d)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,r,a,s,o,l,u,c,d)},e.prototype.pushDecrypted=function(e,t,n,i,r,a,s,o,l,u,c,d){var p=this.demuxer;if(!p||s&&!this.probe(e)){for(var g=this.observer,m=this.typeSupported,v=this.config,y=[{demux:A,remux:R},{demux:_,remux:R},{demux:I,remux:R},{demux:w,remux:P}],b=0,T=y.length;b<T;b++){var S=y[b],E=S.demux.probe;if(E(e)){var C=this.remuxer=new S.remux(g,v,m,this.vendor);p=new S.demux(g,C,v,m),this.probe=E;break}}if(!p)return void g.trigger(h.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var k=this.remuxer;(s||o)&&(p.resetInitSegment(n,i,r,u),k.resetInitSegment()),s&&(p.resetTimeStamp(d),k.resetTimeStamp(d)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,a,l,c)},e}();t.a=O},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return MediaSource.isTypeSupported('video/mp4;codecs="'+e+'"')}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,n){var i=e[t],r=e[n],a=r.startPTS;isNaN(a)?r.start=n>t?i.start+i.duration:Math.max(i.start-r.duration,0):n>t?(i.duration=a-i.start,i.duration<0&&k.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-a,r.duration<0&&k.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}function o(e,t,n,i,r,a){var o=n;if(!isNaN(t.startPTS)){var l=Math.abs(t.startPTS-n);t.deltaPTS=isNaN(t.deltaPTS)?l:Math.max(l,t.deltaPTS),o=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),i=Math.max(i,t.endPTS),r=Math.min(r,t.startDTS),a=Math.max(a,t.endDTS)}var u=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=o,t.endPTS=i,t.startDTS=r,t.endDTS=a,t.duration=i-n;var c,d,h,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;for((d=e.fragments)[c=f-e.startSN]=t,h=c;h>0;h--)s(d,h,h-1);for(h=c;h<d.length-1;h++)s(d,h,h+1);return e.PTSKnown=!0,u}function l(e,t){var n,i=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,s=e.fragments,l=t.fragments,u=0;if(r<i)t.PTSKnown=!1;else{for(var c=i;c<=r;c++){var d=s[a+c],h=l[c];h&&d&&(u=d.cc-h.cc,isNaN(d.startPTS)||(h.start=h.startPTS=d.startPTS,h.endPTS=d.endPTS,h.duration=d.duration,h.backtracked=d.backtracked,h.dropped=d.dropped,n=h))}if(u)for(k.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<l.length;c++)l[c].cc+=u;if(n)o(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(a>=0&&a<s.length){var f=s[a].start;for(c=0;c<l.length;c++)l[c].start+=f}t.PTSKnown=e.PTSKnown}}function u(e,t){t.fragments.forEach((function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}})),t.PTSKnown=!0}function c(e,t,n){if(function(e,t,n){var i=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(i=!0),i}(e,t,n)){var i=function(e,t){var n=e.fragments,i=t.fragments;if(i.length&&n.length){var r=function(e,t){for(var n=null,i=0;i<e.length;i+=1){var r=e[i];if(r&&r.cc===t){n=r;break}}return n}(n,i[0].cc);return!r||r&&!r.startPTS?void k.b.log("No frag in previous level to align on"):r}k.b.log("No fragments to align")}(t.details,n);i&&(k.b.log("Adjusting PTS using last level due to CC increase within current level"),u(i.start,n))}if(!1===n.PTSKnown&&t&&t.details){var r=(n.programDateTime-t.details.programDateTime)/1e3+t.details.fragments[0].start;isNaN(r)||(k.b.log("adjusting PTS using programDateTime delta, sliding:"+r.toFixed(3)),u(r,n))}}function d(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new ye,this.regionList=[]}function h(){this.values=Object.create(null)}function f(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(n);2===s.length&&t(s[0],s[1])}}function p(e,t,n){function i(){var t=function(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+a);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function r(){e=e.replace(/^\s+/,"")}var a=e;if(r(),t.startTime=i(),r(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);e=e.substr(3),r(),t.endTime=i(),r(),function(e,t){var i=new h;f(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];i.integer(e,s),i.percent(e,s)&&i.set("snapToLines",!1),i.alt(e,s,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",_e,"end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",_e,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",_e,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===be.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",_e);var a=i.get("position","auto");"auto"===a&&50===be.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function g(e){return e.replace(/<br(?: \/)?>/gi,"\n")}function m(e,t,n,i){for(var r,a,s,o,l,u=window.VTTCue||window.TextTrackCue,c=0;c<i.rows.length;c++)if(s=!0,o=0,l="",!(r=i.rows[c]).isEmpty()){for(var d=0;d<r.chars.length;d++)r.chars[d].uchar.match(/\s/)&&s?o++:(l+=r.chars[d].uchar,s=!1);r.cueStartTime=t,t===n&&(n+=1e-4),o>=16?o--:o++,(a=new u(t,n,g(l.trim()))).line=navigator.userAgent.match(/Firefox\//)?c+1:c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,o/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function b(e,t,n,i){return Math.min(t,i)-Math.max(e,n)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var T={};n.d(T,"newCue",(function(){return m}));var w=n(5),S=n.n(w),E=n(1),C=n(2),k=n(0),A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I=function(){function e(t){i(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.unregisterListeners()},e.prototype.isEventHandler=function(){return"object"===A(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}),this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){k.b.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(E.a.ERROR,{type:C.b.OTHER_ERROR,details:C.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}(),x=/^(\d+)x(\d+)$/,L=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,D=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}return e.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.prototype.enumeratedString=function(e){return this[e]},e.prototype.decimalResolution=function(e){var t=x.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(L.lastIndex=0;null!==(t=L.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},e}(),R={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},P=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,N=/#EXT-X-MEDIA:(.*)/g,M=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),U=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,j=function(){function e(){a(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return P(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=S.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),B=function(){function e(){a(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},e.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new j).method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n},e.prototype.cloneObj=function(e){return JSON.parse(JSON.stringify(e))},P(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=S.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);e[0]=1===t.length?this.lastByteRangeEndOffset||0:parseInt(t[1]),e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),F=function(e){function t(n){a(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.MANIFEST_LOADING,E.a.LEVEL_LOADING,E.a.AUDIO_TRACK_LOADING,E.a.SUBTITLE_TRACK_LOADING));return i.loaders={},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},I.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(e){this.load(e.url,{type:"manifest"})},t.prototype.onLevelLoading=function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})},t.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:"audioTrack",id:e.id})},t.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})},t.prototype.load=function(e,t){var n=this.loaders[t.type];if(n){var i=n.context;if(i&&i.url===e)return void k.b.trace("playlist request ongoing");k.b.warn("abort previous loader for type:"+t.type),n.abort()}var r,a,s=this.hls.config,o=void 0,l=void 0,u=void 0,c=void 0;"manifest"===t.type?(o=s.manifestLoadingMaxRetry,l=s.manifestLoadingTimeOut,u=s.manifestLoadingRetryDelay,c=s.manifestLoadingMaxRetryTimeout):(o=s.levelLoadingMaxRetry,l=s.levelLoadingTimeOut,u=s.levelLoadingRetryDelay,c=s.levelLoadingMaxRetryTimeout,k.b.log("loading playlist for "+t.type+" "+(t.level||t.id))),n=this.loaders[t.type]=t.loader=void 0!==s.pLoader?new s.pLoader(s):new s.loader(s),t.url=e,t.responseType="",r={timeout:l,maxRetry:o,retryDelay:u,maxRetryDelay:c},a={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(t,r,a)},t.prototype.resolve=function(e,t){return S.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.prototype.parseMasterPlaylist=function(e,t){function n(e,t){["video","audio"].forEach((function(n){var i=e.filter((function(e){return function(e,t){var n=R[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)}));if(i.length){var r=i.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=r.length>0?r[0]:i[0],e=e.filter((function(e){return-1===i.indexOf(e)}))}})),t.unknownCodecs=e}var i=[],r=void 0;for(O.lastIndex=0;null!=(r=O.exec(e));){var a={},s=a.attrs=new D(r[1]);a.url=this.resolve(r[2],t);var o=s.decimalResolution("RESOLUTION");o&&(a.width=o.width,a.height=o.height),a.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),a.name=s.NAME,n([].concat((s.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=this.avc1toavcoti(a.videoCodec)),i.push(a)}return i},t.prototype.parseMasterPlaylistMedia=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=void 0,a=[],s=0;for(N.lastIndex=0;null!=(r=N.exec(e));){var o={},l=new D(r[1]);l.TYPE===n&&(o.groupId=l["GROUP-ID"],o.name=l.NAME,o.type=n,o.default="YES"===l.DEFAULT,o.autoselect="YES"===l.AUTOSELECT,o.forced="YES"===l.FORCED,l.URI&&(o.url=this.resolve(l.URI,t)),o.lang=l.LANGUAGE,o.name||(o.name=o.lang),i&&(o.audioCodec=i),o.id=s++,a.push(o))}return a},t.prototype.avc1toavcoti=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},t.prototype.parseLevelPlaylist=function(e,t,n,i){var r,a,s=0,o=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},u=new j,c=0,d=null,h=new B;for(M.lastIndex=0;null!==(r=M.exec(e));){var f=r[1];if(f){h.duration=parseFloat(f);var p=(" "+r[2]).slice(1);h.title=p||null,h.tagList.push(p?["INF",f,p]:["INF",f])}else if(r[3]){if(!isNaN(h.duration)){var g=s++;h.type=i,h.start=o,h.levelkey=u,h.sn=g,h.level=n,h.cc=c,h.baseurl=t,h.relurl=(" "+r[3]).slice(1),l.fragments.push(h),d=h,o+=h.duration,h=new B}}else if(r[4]){if(h.rawByteRange=(" "+r[4]).slice(1),d){var m=d.byteRangeEndOffset;m&&(h.lastByteRangeEndOffset=m)}}else if(r[5])h.rawProgramDateTime=(" "+r[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]),void 0===l.programDateTime&&(l.programDateTime=new Date(new Date(Date.parse(r[5]))-1e3*o));else{for(r=r[0].match(U),a=1;a<r.length&&void 0===r[a];a++);var v=(" "+r[a+1]).slice(1),y=(" "+r[a+2]).slice(1);switch(r[a]){case"#":h.tagList.push(y?[v,y]:[v]);break;case"PLAYLIST-TYPE":l.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":s=l.startSN=parseInt(v);break;case"TARGETDURATION":l.targetduration=parseFloat(v);break;case"VERSION":l.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":c++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(v);break;case"KEY":var b=new D(v),_=b.enumeratedString("METHOD"),T=b.URI,w=b.hexadecimalInteger("IV");_&&(u=new j,T&&["AES-128","SAMPLE-AES"].indexOf(_)>=0&&(u.method=_,u.baseuri=t,u.reluri=T,u.key=null,u.iv=w));break;case"START":var S=new D(v).decimalFloatingPoint("TIME-OFFSET");isNaN(S)||(l.startTimeOffset=S);break;case"MAP":var E=new D(v);h.relurl=E.URI,h.rawByteRange=E.BYTERANGE,h.baseurl=t,h.level=n,h.type=i,h.sn="initSegment",l.initSegment=h,h=new B;break;default:k.b.warn("line parsed but not handled: "+r)}}}return(h=d)&&!h.relurl&&(l.fragments.pop(),o-=h.duration),l.totalduration=o,l.averagetargetduration=o/l.fragments.length,l.endSN=s-1,l.startCC=l.fragments[0]?l.fragments[0].cc:0,l.endCC=c,l},t.prototype.loadsuccess=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,a=e.url,s=n.type,o=n.id,l=n.level,u=this.hls;if(this.loaders[s]=void 0,void 0!==a&&0!==a.indexOf("data:")||(a=n.url),t.tload=performance.now(),0===r.indexOf("#EXTM3U"))if(r.indexOf("#EXTINF:")>0){var c="audioTrack"!==s&&"subtitleTrack"!==s,d=isNaN(l)?isNaN(o)?0:o:l,h=this.parseLevelPlaylist(r,a,d,"audioTrack"===s?"audio":"subtitleTrack"===s?"subtitle":"main");h.tload=t.tload,"manifest"===s&&u.trigger(E.a.MANIFEST_LOADED,{levels:[{url:a,details:h}],audioTracks:[],url:a,stats:t,networkDetails:i}),t.tparsed=performance.now(),h.targetduration?c?u.trigger(E.a.LEVEL_LOADED,{details:h,level:l||0,id:o||0,stats:t,networkDetails:i}):"audioTrack"===s?u.trigger(E.a.AUDIO_TRACK_LOADED,{details:h,id:o,stats:t,networkDetails:i}):"subtitleTrack"===s&&u.trigger(E.a.SUBTITLE_TRACK_LOADED,{details:h,id:o,stats:t,networkDetails:i}):u.trigger(E.a.ERROR,{type:C.b.NETWORK_ERROR,details:C.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"invalid targetduration",networkDetails:i})}else{var f=this.parseMasterPlaylist(r,a);if(f.length){var p=this.parseMasterPlaylistMedia(r,a,"AUDIO",f[0].audioCodec),g=this.parseMasterPlaylistMedia(r,a,"SUBTITLES");if(p.length){var m=!1;p.forEach((function(e){e.url||(m=!0)})),!1===m&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(k.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}u.trigger(E.a.MANIFEST_LOADED,{levels:f,audioTracks:p,subtitles:g,url:a,stats:t,networkDetails:i})}else u.trigger(E.a.ERROR,{type:C.b.NETWORK_ERROR,details:C.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no level found in manifest",networkDetails:i})}else u.trigger(E.a.ERROR,{type:C.b.NETWORK_ERROR,details:C.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no EXTM3U delimiter",networkDetails:i})},t.prototype.loaderror=function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":n=C.a.MANIFEST_LOAD_ERROR,i=!0;break;case"level":n=C.a.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":n=C.a.AUDIO_TRACK_LOAD_ERROR,i=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(E.a.ERROR,{type:C.b.NETWORK_ERROR,details:n,fatal:i,url:a.url,loader:a,response:e,context:t,networkDetails:r})},t.prototype.loadtimeout=function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":n=C.a.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":n=C.a.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":n=C.a.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(E.a.ERROR,{type:C.b.NETWORK_ERROR,details:n,fatal:i,url:a.url,loader:a,context:t,networkDetails:r})},t}(I),G=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.FRAG_LOADING));return i.loaders={},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},I.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag,n=t.type,i=this.loaders[n],r=this.hls.config;t.loaded=0,i&&(k.b.warn("abort previous fragment loader for type:"+n),i.abort()),i=this.loaders[n]=t.loader=void 0!==r.fLoader?new r.fLoader(r):new r.loader(r);var a,s,o=void 0;o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var l=t.byteRangeStartOffset,u=t.byteRangeEndOffset;isNaN(l)||isNaN(u)||(o.rangeStart=l,o.rangeEnd=u),a={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},i.load(o,a,s)},t.prototype.loadsuccess=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(E.a.FRAG_LOADED,{payload:r,frag:a,stats:t,networkDetails:i})},t.prototype.loaderror=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(E.a.ERROR,{type:C.b.NETWORK_ERROR,details:C.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},t.prototype.loadtimeout=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(E.a.ERROR,{type:C.b.NETWORK_ERROR,details:C.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},t.prototype.loadprogress=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.frag;r.loaded=e.loaded,this.hls.trigger(E.a.FRAG_LOAD_PROGRESS,{frag:r,stats:e,networkDetails:i})},t}(I),H=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},I.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,n=t.type,i=this.loaders[n],r=t.decryptdata,a=r.uri;if(a!==this.decrypturl||null===this.decryptkey){var s,o,l,u=this.hls.config;i&&(k.b.warn("abort previous key loader for type:"+n),i.abort()),t.loader=this.loaders[n]=new u.loader(u),this.decrypturl=a,this.decryptkey=null,s={url:a,frag:t,responseType:"arraybuffer"},o={timeout:u.fragLoadingTimeOut,maxRetry:u.fragLoadingMaxRetry,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,o,l)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(E.a.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,n){var i=n.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(E.a.KEY_LOADED,{frag:i})},t.prototype.loaderror=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(E.a.ERROR,{type:C.b.NETWORK_ERROR,details:C.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.prototype.loadtimeout=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(E.a.ERROR,{type:C.b.NETWORK_ERROR,details:C.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}(I),W=function(e,t){for(var n=0,i=e.length-1,r=null,a=null;n<=i;){var s=t(a=e[r=(n+i)/2|0]);if(s>0)n=r+1;else{if(!(s<0))return a;i=r-1}}return null},z={isBuffered:function(e,t){if(e)for(var n=e.buffered,i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0;return!1},bufferInfo:function(e,t,n){if(e){var i,r=e.buffered,a=[];for(i=0;i<r.length;i++)a.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(a,t,n)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,n){var i,r,a,s,o,l=[];for(e.sort((function(e,t){return e.start-t.start||t.end-e.end})),o=0;o<e.length;o++){var u=l.length;if(u){var c=l[u-1].end;e[o].start-c<n?e[o].end>c&&(l[u-1].end=e[o].end):l.push(e[o])}else l.push(e[o])}for(o=0,i=0,r=a=t;o<l.length;o++){var d=l[o].start,h=l[o].end;if(t+n>=d&&t<h)r=d,i=(a=h)-t;else if(t+n<d){s=d;break}}return{len:i,start:r,end:a,nextStart:s}}},V=n(6),Y=n(4),Z=n.n(Y),q=n(8),X=n.n(q),K=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.hls=t,this.id=n;var i=this.observer=new Z.a,r=t.config;i.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e,e].concat(n))},i.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[e].concat(n))};var a=(function(e,n){(n=n||{}).frag=this.frag,n.id=this.id,t.trigger(e,n)}).bind(this);i.on(E.a.FRAG_DECRYPTED,a),i.on(E.a.FRAG_PARSING_INIT_SEGMENT,a),i.on(E.a.FRAG_PARSING_DATA,a),i.on(E.a.FRAG_PARSED,a),i.on(E.a.ERROR,a),i.on(E.a.FRAG_PARSING_METADATA,a),i.on(E.a.FRAG_PARSING_USERDATA,a),i.on(E.a.INIT_PTS_FOUND,a);var s={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){k.b.log("demuxing in webworker");var l=void 0;try{l=this.w=X()(9),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(e){t.trigger(E.a.ERROR,{type:C.b.OTHER_ERROR,details:C.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:s,vendor:o,id:n,config:JSON.stringify(r)})}catch(e){k.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&URL.revokeObjectURL(l.objectURL),this.demuxer=new V.a(i,s,r,o),this.w=void 0}}else this.demuxer=new V.a(i,s,r,o)}return e.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,t,n,i,r,a,s,o){var l=this.w,u=isNaN(r.startDTS)?r.start:r.startDTS,c=r.decryptdata,d=this.frag,h=!(d&&r.cc===d.cc),f=!(d&&r.level===d.level),p=!f&&d&&r.sn===d.sn+1;if(h&&k.b.log(this.id+":discontinuity detected"),f&&k.b.log(this.id+":switch detected"),this.frag=r,l)l.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:n,videoCodec:i,timeOffset:u,discontinuity:h,trackSwitch:f,contiguous:p,duration:a,accurateTimeOffset:s,defaultInitPTS:o},[e]);else{var g=this.demuxer;g&&g.push(e,c,t,n,i,u,h,f,p,a,s,o)}},e.prototype.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case E.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},e}(),J=function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t},Q=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),$=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.MEDIA_ATTACHED,E.a.MEDIA_DETACHING,E.a.MANIFEST_LOADING,E.a.MANIFEST_PARSED,E.a.LEVEL_LOADED,E.a.KEY_LOADED,E.a.FRAG_LOADED,E.a.FRAG_LOAD_EMERGENCY_ABORTED,E.a.FRAG_PARSING_INIT_SEGMENT,E.a.FRAG_PARSING_DATA,E.a.FRAG_PARSED,E.a.ERROR,E.a.AUDIO_TRACK_SWITCHING,E.a.AUDIO_TRACK_SWITCHED,E.a.BUFFER_CREATED,E.a.BUFFER_APPENDED,E.a.BUFFER_FLUSHED));return i.config=n.config,i.audioCodecSwap=!1,i.ticks=0,i._state="STOPPED",i.ontick=i.tick.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),I.prototype.destroy.call(this),this.state="STOPPED"},t.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(k.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state="IDLE",this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state="STOPPED"},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state="STOPPED",this.forceStartLoad=!1},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){switch(this.state){case"ERROR":break;case"BUFFER_FLUSHING":this.fragLoadError=0;break;case"IDLE":this._doTickIdle();break;case"WAITING_LEVEL":var e=this.levels[this.level];e&&e.details&&(this.state="IDLE");break;case"FRAG_LOADING_WAITING_RETRY":var t=performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(k.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state="IDLE")}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var i;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=e.nextLoadLevel,a=this.levels[r];if(a){var s=a.bitrate,o=void 0;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=z.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,t.maxBufferHole),u=l.len;if(!(u>=o)){k.b.trace("buffer length of "+u.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;var c=a.details;if(void 0===c||c.live&&this.levelLastLoaded!==r)return void(this.state="WAITING_LEVEL");var d=this.fragPrevious;if(!c.live&&d&&!d.backtracked&&d.sn===c.endSN&&!l.nextStart&&Math.min(n.duration,d.start+d.duration)-Math.max(l.end,d.start)<=Math.max(.2,d.duration)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(E.a.BUFFER_EOS,h),void(this.state="ENDED")}this._fetchPayloadOrEos(i,l,c)}}}},t.prototype._fetchPayloadOrEos=function(e,t,n){var i=this.fragPrevious,r=this.level,a=n.fragments,s=a.length;if(0!==s){var o=a[0].start,l=a[s-1].start+a[s-1].duration,u=t.end,c=void 0;if(n.initSegment&&!n.initSegment.data)c=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(s<d)return void k.b.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+d);if(null===(c=this._ensureFragmentAtLivePoint(n,u,o,l,i,a,s)))return}else u<o&&(c=a[0]);c||(c=this._findFragment(o,i,s,a,u,l,n)),c&&this._loadFragmentOrKey(c,r,n,e,u)}},t.prototype._ensureFragmentAtLivePoint=function(e,t,n,i,r,a,s){var o=this.hls.config,l=this.media,u=void 0;if(t<Math.max(n-o.maxFragLookUpTolerance,i-(void 0!==o.liveMaxLatencyDuration?o.liveMaxLatencyDuration:o.liveMaxLatencyDurationCount*e.targetduration))){var c=this.liveSyncPosition=this.computeLivePosition(n,e);k.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),t=c,l&&l.readyState&&l.duration>c&&(l.currentTime=c),this.nextLoadPosition=c}if(e.PTSKnown&&t>i&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(r){var d=r.sn+1;if(d>=e.startSN&&d<=e.endSN){var h=a[d-e.startSN];r.cc===h.cc&&k.b.log("live playlist, switching playlist, load frag with next SN: "+(u=h).sn)}u||(u=W(a,(function(e){return r.cc-e.cc})))&&k.b.log("live playlist, switching playlist, load frag with same CC: "+u.sn)}u||(u=a[Math.min(s-1,Math.round(s/2))],k.b.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},t.prototype._findFragment=function(e,t,n,i,r,a,s){var o=this.hls.config,l=void 0,u=void 0,c=o.maxFragLookUpTolerance,d=t?i[t.sn-i[0].sn+1]:void 0,h=function(e){var t=Math.min(c,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-t<=r?1:e.start-t>r&&e.start?-1:0};if(r<a?(r>a-c&&(c=0),u=d&&!h(d)?d:W(i,h)):u=i[n-1],u){var f=(l=u).sn-s.startSN,p=i[f-1],g=i[f+1];if(t&&l.sn===t.sn)if(t&&l.level===t.level&&!l.backtracked)if(l.sn<s.endSN){var m=t.deltaPTS;m&&m>o.maxBufferHole&&t.dropped&&f?(l=p,k.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):k.b.log("SN just loaded, load next one: "+(l=g).sn)}else l=null;else l.backtracked&&(g&&g.backtracked?(k.b.warn("Already backtracked from fragment "+g.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+g.sn),l=g):(k.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,p?(p.loadCounter&&p.loadCounter--,(l=p).backtracked=!0):f&&(l=null)))}return l},t.prototype._loadFragmentOrKey=function(e,t,n,i,r){var a=this.hls,s=a.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(k.b.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+i.toFixed(3)+",bufferEnd:"+r.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var o=s.fragLoadingLoopThreshold;if(e.loadCounter>o&&Math.abs(this.fragLoadIdx-e.loadIdx)<o)return void a.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),a.trigger(E.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new K(a,"main")),void(this.state="FRAG_LOADING")}k.b.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state="KEY_LOADING",a.trigger(E.a.KEY_LOADING,{frag:e})},t.prototype.getBufferedFrag=function(e){return W(this._bufferedFrags,(function(t){return e<t.startPTS?-1:e>t.endPTS?1:0}))},t.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),z.isBuffered(n,t)?e=this.getBufferedFrag(t):z.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(E.a.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(E.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},t.prototype.immediateLevelSwitch=function(){if(k.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,z.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},t.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n=void 0,i=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),(t=this.getBufferedFrag(e.currentTime))&&t.startPTS>1&&this.flushMainBuffer(0,t.startPTS-1),e.paused)n=0;else{var r=this.fragLastKbps;n=r&&this.fragCurrent?this.fragCurrent.duration*this.levels[this.hls.nextLoadLevel].bitrate/(1e3*r)+1:0}if((i=this.getBufferedFrag(e.currentTime+n))&&(i=this.followingBufferedFrag(i))){var a=this.fragCurrent;a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.prototype.flushMainBuffer=function(e,t){this.state="BUFFER_FLUSHING";var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(E.a.BUFFER_FLUSHING,n)},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(k.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.loadCounter=void 0,e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;isNaN(t)||k.b.log("media seeking to "+t.toFixed(3));var i=z.bufferInfo(this.mediaBuffer?this.mediaBuffer:e,t,this.config.maxBufferHole);if("FRAG_LOADING"===this.state){var r=this.fragCurrent;if(0===i.len&&r){var a=n.maxFragLookUpTolerance;t<r.start-a||t>r.start+r.duration+a?(r.loader&&(k.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state="IDLE"):k.b.log("seeking outside of buffer but within currently loaded fragment range")}}else"ENDED"===this.state&&(0===i.len&&(this.fragPrevious=0),this.state="IDLE");e&&(this.lastCurrentTime=t),"FRAG_LOADING"!==this.state&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},t.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||k.b.log("media seeked to "+t.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){k.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){k.b.log("trigger BUFFER_RESET"),this.hls.trigger(E.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(e){var t,n=!1,i=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=n&&i,this.audioCodecSwitch&&k.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},t.prototype.onLevelLoaded=function(e){var t=e.details,n=e.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],a=t.totalduration,s=0;if(k.b.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var o=r.details;o&&t.fragments.length>0?(l(o,t),this.liveSyncPosition=this.computeLivePosition(s=t.fragments[0].start,o),t.PTSKnown&&!isNaN(s)?k.b.log("live playlist sliding:"+s.toFixed(3)):(k.b.log("live playlist - outdated PTS, unknown sliding"),c(this.fragPrevious,i,t))):(k.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,c(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(r.details=t,this.levelLastLoaded=n,this.hls.trigger(E.a.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=t.startTimeOffset;isNaN(u)?t.live?(this.startPosition=this.computeLivePosition(s,t),k.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(u<0&&(k.b.log("negative start time offset "+u+", count from end of last fragment"),u=s+a+u),k.b.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}"WAITING_LEVEL"===this.state&&(this.state="IDLE"),this.tick()},t.prototype.onKeyLoaded=function(){"KEY_LOADING"===this.state&&(this.state="IDLE",this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if("FRAG_LOADING"===this.state&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var i=e.stats,r=this.levels[t.level],a=r.details;if(k.b.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=i,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state="IDLE",this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(E.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state="IDLE",i.tparsed=i.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(E.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else{this.state="PARSING";var s=a.totalduration,o=t.level,l=t.sn,u=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(k.b.log("swapping playlist audio codec"),void 0===u&&(u=this.lastAudioCodec),u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,k.b.log("Parsing "+l+" of ["+a.startSN+" ,"+a.endSN+"],level "+o+", cc "+t.cc);var c=this.demuxer;c||(c=this.demuxer=new K(this.hls,"main"));var d=this.media;c.push(e.payload,a.initSegment?a.initSegment.data:[],u,r.videoCodec,t,s,!(d&&d.seeking)&&(a.PTSKnown||!a.live),void 0)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&"PARSING"===this.state){var i,r,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,r=a.audio){var s=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(k.b.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===o.indexOf("firefox")&&(s="mp4a.40.5"),-1!==o.indexOf("android")&&"audio/mpeg"!==r.container&&k.b.log("Android: force audio codec to "+(s="mp4a.40.2")),r.levelCodec=s,r.id=e.id}for(i in(r=a.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),this.hls.trigger(E.a.BUFFER_CODECS,a),a){k.b.log("main track:"+i+",container:"+(r=a[i]).container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var l=r.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(E.a.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"main"===e.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==e.type||!this.altAudio)&&"PARSING"===this.state){var r=this.levels[this.level],a=n;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),k.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped){if(!a.backtracked)return k.b.warn("missing video frame(s), backtracking fragment"),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state="IDLE",this.fragPrevious=a,void this.tick();k.b.warn("Already backtracked on this fragment, appending with the gap")}else a.backtracked=!1;var s=o(r.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),l=this.hls;l.trigger(E.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(n){n&&n.length&&"PARSING"===t.state&&(t.appended=!0,t.pendingBuffering=!0,l.trigger(E.a.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))})),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&"PARSING"===this.state&&(this.stats.tparsed=performance.now(),this.state="PARSED",this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(e){var t=e.id;if(!e.url){if(this.mediaBuffer!==this.media){k.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(k.b.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state="IDLE"}var i=this.hls;i.trigger(E.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(E.a.AUDIO_TRACK_SWITCHED,{id:t}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(e){var t=!!this.hls.audioTracks[e.id].url;if(t){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(k.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=t,this.tick()},t.prototype.onBufferCreated=function(e){var t=e.tracks,n=void 0,i=void 0,r=!1;for(var a in t){var s=t[a];"main"===s.id?(i=a,n=s,"video"===a&&(this.videoBuffer=t[a].buffer)):r=!0}r&&n?(k.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;"PARSING"!==t&&"PARSED"!==t||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!("PARSED"!==this.state||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;k.b.log("main buffered : "+J(t.buffered));var n=this._bufferedFrags.filter((function(e){return z.isBuffered(t,(e.startPTS+e.endPTS)/2)}));n.push(e),this._bufferedFrags=n.sort((function(e,t){return e.startPTS-t.startPTS})),this.fragPrevious=e;var i=this.stats;i.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(E.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.state="IDLE"}this.tick()}},t.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&z.isBuffered(this.media,this.media.currentTime)&&z.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case C.a.FRAG_LOAD_ERROR:case C.a.FRAG_LOAD_TIMEOUT:case C.a.KEY_LOAD_ERROR:case C.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);t.loadCounter=0,k.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state="FRAG_LOADING_WAITING_RETRY"}else k.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state="ERROR";break;case C.a.FRAG_LOOP_LOADING_ERROR:e.fatal||(n?(this._reduceMaxBufferLength(t.duration),this.state="IDLE"):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state="ERROR"));break;case C.a.LEVEL_LOAD_ERROR:case C.a.LEVEL_LOAD_TIMEOUT:"ERROR"!==this.state&&(e.fatal?(this.state="ERROR",k.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||"WAITING_LEVEL"!==this.state||(this.state="IDLE"));break;case C.a.BUFFER_FULL_ERROR:"main"!==e.parent||"PARSING"!==this.state&&"PARSED"!==this.state||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state="IDLE"):(k.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t.prototype._reduceMaxBufferLength=function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,k.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*t.fragLoadingLoopThreshold))},t.prototype._checkBuffer=function(){var e=this.media,t=this.config;if(e&&e.readyState){var n=e.currentTime,i=this.mediaBuffer?this.mediaBuffer:e,r=i.buffered;if(!this.loadedmetadata&&r.length){this.loadedmetadata=!0;var a=e.seeking?n:this.startPosition,s=z.isBuffered(i,a),o=r.start(0),l=!s&&Math.abs(a-o)<t.maxSeekHole;(n!==a||l)&&(k.b.log("target start position:"+a),l&&k.b.log("target start position not buffered, seek to buffered.start(0) "+(a=o)),k.b.log("adjust currentTime from "+n+" to "+a),e.currentTime=a)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var u=z.bufferInfo(e,n,0),c=!(e.paused||e.ended||0===e.buffered.length);if(n!==this.lastCurrentTime)this.stallReported&&(k.b.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(c){var d=performance.now(),h=this.hls;if(this.stalled){var f=d-this.stalled,p=u.len,g=this.nudgeRetry||0;if(p<=.5&&f>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,k.b.warn("playback stalling in low buffer @"+n),h.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:p}));var m=u.nextStart,v=m-n;if(m&&v<t.maxSeekHole&&v>0){this.nudgeRetry=++g;var y=g*t.nudgeOffset;k.b.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+m+" + nudge "+y),e.currentTime=m+y,this.stalled=void 0,h.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:m+y-n})}}else if(p>.5&&f>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,k.b.warn("playback stalling in high buffer @"+n),h.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:p})),this.stalled=void 0,this.nudgeRetry=++g,g<t.nudgeMaxRetry){var b=e.currentTime,_=b+g*t.nudgeOffset;k.b.log("adjust currentTime from "+b+" to "+_),e.currentTime=_,h.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else k.b.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),h.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=d,this.stallReported=!1}}}},t.prototype.onFragLoadEmergencyAborted=function(){this.state="IDLE",this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter((function(t){return z.isBuffered(e,(t.startPTS+t.endPTS)/2)})),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state="IDLE",this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(e,t){return e+Math.max(0,t.totalduration-(void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration))},Q(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,k.b.log("main stream:"+t+"->"+e),this.hls.trigger(E.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(I),ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),te=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.MANIFEST_LOADED,E.a.LEVEL_LOADED,E.a.FRAG_LOADED,E.a.ERROR));return i._manualLevel=-1,i.timer=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.cleanTimer(),this._manualLevel=-1},t.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){this.canload=!0;var e=this._levels;e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),this.timer&&this.tick()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t=[],n=void 0,i={},a=null,s=!1,o=!1,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase());if(e.levels.forEach((function(e){e.loadError=0,e.fragmentError=!1,s=s||!!e.videoCodec,o=o||!!e.audioCodec||!(!e.attrs||!e.attrs.AUDIO),!0===l&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),void 0===(a=i[e.bitrate])?(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,t.push(e)):a.url.push(e.url)})),!0===s&&!0===o&&(t=t.filter((function(e){return!!e.videoCodec}))),(t=t.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||r(t))&&(!n||r(n))}))).length>0){n=t[0].bitrate,t.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=t;for(var u=0;u<t.length;u++)if(t[u].bitrate===n){this._firstLevel=u,k.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+n);break}this.hls.trigger(E.a.MANIFEST_PARSED,{levels:t,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:s,altAudio:e.audioTracks.length>0})}else this.hls.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.cleanTimer(),this._level!==e){k.b.log("switching to level "+e),this._level=e;var i=t[e];i.level=e,n.trigger(E.a.LEVEL_SWITCH,i),n.trigger(E.a.LEVEL_SWITCHING,i)}var r=t[e],a=r.details;if(!a||!0===a.live){var s=r.urlId;n.trigger(E.a.LEVEL_LOADING,{url:r.url[s],level:e,id:s})}}else n.trigger(E.a.ERROR,{type:C.b.OTHER_ERROR,details:C.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(e){var t=this;if(!0!==e.fatal){var n=e.details,i=!1,r=!1,a=void 0,s=void 0,o=this.hls,l=o.config,u=o.media;switch(n){case C.a.FRAG_LOAD_ERROR:case C.a.FRAG_LOAD_TIMEOUT:case C.a.FRAG_LOOP_LOADING_ERROR:case C.a.KEY_LOAD_ERROR:case C.a.KEY_LOAD_TIMEOUT:a=e.frag.level,r=!0;break;case C.a.LEVEL_LOAD_ERROR:case C.a.LEVEL_LOAD_TIMEOUT:a=e.context.level,i=!0;break;case C.a.REMUX_ALLOC_ERROR:a=e.level}if(void 0!==a){(s=this._levels[a]).loadError++,s.fragmentError=r;var c=s.url.length;c>1&&s.loadError<c?(s.urlId=(s.urlId+1)%c,s.details=void 0,k.b.warn("level controller,"+n+" for level "+a+": switching to redundant stream id "+s.urlId)):-1===this._manualLevel&&0!==a?(k.b.warn("level controller,"+n+": switch-down for next fragment"),this.hls.nextAutoLevel=Math.max(0,a-1)):s&&s.details&&s.details.live?(k.b.warn("level controller,"+n+" on live stream, discard"),!0===i&&(this._level=void 0)):!0===i&&(!0===(!!u&&z.isBuffered(u,u.currentTime)&&z.isBuffered(u,u.currentTime+.5))?(k.b.warn("level controller,"+n+", but media buffered, retry in "+l.levelLoadingRetryDelay+"ms"),this.timer=setTimeout((function(){return t.tick()}),l.levelLoadingRetryDelay),e.levelRetry=!0):(k.b.error("cannot recover "+n+" error"),this._level=void 0,this.cleanTimer(),e.fatal=!0))}}else e.type===C.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0)}},t.prototype.onLevelLoaded=function(e){var t=this,n=e.level;if(n===this._level){var i=this._levels[n];!1===i.fragmentError&&(i.loadError=0);var r=e.details;if(r.live){var a=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),s=i.details;s&&r.endSN===s.endSN&&(a/=2,k.b.log("same live playlist, reload twice faster")),a-=performance.now()-e.stats.trequest,a=Math.max(1e3,Math.round(a)),k.b.log("live playlist, reload in "+a+" ms"),this.timer=setTimeout((function(){return t.tick()}),a)}else this.cleanTimer()}},t.prototype.tick=function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var n=t.urlId;this.hls.trigger(E.a.LEVEL_LOADING,{url:t.url[n],level:e,id:n})}}},ee(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),t}(I),ne=n(3),ie=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.MEDIA_ATTACHED,E.a.MEDIA_DETACHING,E.a.FRAG_PARSING_METADATA));return i.id3Track=void 0,i.media=void 0,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){I.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media},t.prototype.onMediaDetaching=function(){this.media=void 0},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var a=ne.a.getID3Frames(n[r].data);if(a){var s=n[r].pts,o=r<n.length-1?n[r+1].pts:t.endPTS;s===o&&(o+=1e-4);for(var l=0;l<a.length;l++){var u=a[l];if(!ne.a.isTimeStampFrame(u)){var c=new i(s,o,"");c.value=u,this.id3Track.addCue(c)}}}}},t}(I),re=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),ae=function(){function e(t,n,i,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.hls=t,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new re(n),this.fast_=new re(i)}return e.prototype.sample=function(e,t){var n=8e3*t/(e=Math.max(e,this.minDelayMs_)),i=e/1e3;this.fast_.sample(i,n),this.slow_.sample(i,n)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),se=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),oe=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.FRAG_LOADING,E.a.FRAG_LOADED,E.a.FRAG_BUFFERED,E.a.ERROR));return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=n,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.clearTimer(),I.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,i=n.config,r=void 0,a=void 0;n.levels[e.frag.level].details.live?(r=i.abrEwmaFastLive,a=i.abrEwmaSlowLive):(r=i.abrEwmaFastVoD,a=i.abrEwmaSlowVoD),this._bwEstimator=new ae(n,a,r,i.abrEwmaDefaultEstimate)}this.fragCurrent=t}},t.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent,i=n.loader,r=e.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return k.b.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var a=i.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var s=performance.now()-a.trequest,o=Math.abs(t.playbackRate);if(s>500*n.duration/o){var l=e.levels,u=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/s),c=l[n.level],d=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,h=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*d/8)),f=t.currentTime,p=(h-a.loaded)/u,g=(z.bufferInfo(t,f,e.config.maxBufferHole).end-f)/o;if(g<2*n.duration/o&&p>g){var m=void 0,v=void 0;for(v=n.level-1;v>r;v--){var y=l[v].realBitrate?Math.max(l[v].realBitrate,l[v].bitrate):l[v].bitrate;if((m=n.duration*y/(6.4*u))<g)break}m<p&&(k.b.warn("loading too slow, abort fragment loading and switch to level "+v+":fragLoadedDelay["+v+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+p.toFixed(1)+":"+g.toFixed(1)),e.nextLoadLevel=v,this._bwEstimator.sample(s,a.loaded),i.abort(),this.clearTimer(),e.trigger(E.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],i=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,r=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},t.prototype.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!(!0===t.aborted||1!==n.loadCounter||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&t.tload!==t.tbuffered)){var i=t.tparsed-t.trequest;k.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),this.bitrateTestDelay=n.bitrateTest?i/1e3:0}},t.prototype.onError=function(e){switch(e.details){case C.a.FRAG_LOAD_ERROR:case C.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(e,t,n,i,r,a,s,o,l){for(var u=r;u>=i;u--){var c,d=l[u].details,h=d?d.totalduration/d.fragments.length:t,f=!!d&&d.live;c=u<=e?s*n:o*n;var p=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,g=p*h/c;if(k.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(c)+"/"+p+"/"+h+"/"+a+"/"+g),c>p&&(!g||f&&!this.bitrateTestDelay||g<a))return u}return-1},se(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,i=e.config,r=e.minAutoLevel,a=e.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,d=(z.bufferInfo(a,l,i.maxBufferHole).end-l)/u,h=this._findBestLevel(s,o,c,r,t,d,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(h>=0)return h;k.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=o?Math.min(o,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===d){var m=this.bitrateTestDelay;m&&(f=(o?Math.min(o,i.maxLoadingDelay):i.maxLoadingDelay)-m,k.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=g=1)}return h=this._findBestLevel(s,o,c,r,t,d+f,p,g,n),Math.max(h,0)}}]),t}(I),le=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.MEDIA_ATTACHING,E.a.MEDIA_DETACHING,E.a.MANIFEST_PARSED,E.a.BUFFER_RESET,E.a.BUFFER_APPENDING,E.a.BUFFER_CODECS,E.a.BUFFER_EOS,E.a.BUFFER_FLUSHING,E.a.LEVEL_PTS_UPDATED,E.a.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){I.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(e){var t=this.tracks.audio;if("audio"===e.type&&t&&"audio/mpeg"===t.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-e.start)>.1){var i=n.updating;try{n.abort()}catch(e){i=!0,k.b.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(k.b.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},t.prototype.onManifestParsed=function(e){var t=e.audio,n=e.video||e.levels.length&&e.audio,i=0;e.altAudio&&(t||n)&&k.b.log((i=(t?1:0)+(n?1:0))+" sourceBuffer(s) expected"),this.sourceBufferNb=i},t.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n)}},t.prototype.onMediaDetaching=function(){k.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){k.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(E.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){k.b.log("media source opened"),this.hls.trigger(E.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){k.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){k.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;k.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce((function(e,n){return n.parent===t?e+1:e}),0);this.hls.trigger(E.a.BUFFER_APPENDED,{parent:t,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(e){k.b.error("sourceBuffer error:",e),this.hls.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var i in e)if(!t[i]){var r=e[i],a=r.levelCodec||r.codec,s=r.container+";codecs="+a;k.b.log("creating sourceBuffer("+s+")");try{var o=t[i]=n.addSourceBuffer(s);o.addEventListener("updateend",this.onsbue),o.addEventListener("error",this.onsbe),this.tracks[i]={codec:a,container:r.container},r.buffer=o}catch(e){k.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:s})}}this.hls.trigger(E.a.BUFFER_CREATED,{tracks:e})},t.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.prototype.onBufferAppendFail=function(e){k.b.error("sourceBuffer error:",e.event),this.hls.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(e){var t=this.sourceBuffer,n=e.type;for(var i in t)n&&i!==n||t[i].ended||(t[i].ended=!0,k.b.log(i+" sourceBuffer now EOS"));this.checkEos()},t.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var i=e[n];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}k.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){k.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},t.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var e=this.media,t=this.mediaSource,n=this.sourceBuffer,i=this._levelDuration;if(null!==i&&e&&t&&n&&0!==e.readyState&&"open"===t.readyState){for(var r in n)if(n[r].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var a=e.duration;(i>this._msDuration&&i>a||a===1/0||isNaN(a))&&(k.b.log("Updating mediasource duration to "+i.toFixed(3)),this._msDuration=t.duration=i)}},t.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var i in n)t+=n[i].buffered.length}catch(e){k.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(E.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void k.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var i=n.shift();try{var r=t[i.type];r?r.updating?n.unshift(i):(r.ended=!1,this.parent=i.parent,r.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){k.b.error("error while trying to append buffer:"+t.message),n.unshift(i);var a={type:C.b.MEDIA_ERROR,parent:i.parent};if(22===t.code)return this.segments=[],a.details=C.a.BUFFER_FULL_ERROR,a.fatal=!1,void e.trigger(E.a.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=C.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return k.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],a.fatal=!0,void e.trigger(E.a.ERROR,a);a.fatal=!1,e.trigger(E.a.ERROR,a)}}}},t.prototype.flushBuffer=function(e,t,n){var i,r,a,s,o,l,u=this.sourceBuffer;if(Object.keys(u).length){if(k.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var c in u)if(!n||c===n){if((i=u[c]).ended=!1,i.updating)return k.b.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<i.buffered.length;r++)if(a=i.buffered.start(r),s=i.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(o=e,l=t):(o=Math.max(a,e),l=Math.min(s,t)),Math.min(l,s)-o>.5)return this.flushBufferCounter++,k.b.log("flush "+c+" ["+o+","+l+"], of ["+a+","+s+"], pos:"+this.media.currentTime),i.remove(o,l),!1}catch(e){k.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else k.b.warn("abort flushing too many retries");k.b.log("buffer flushed")}return!0},t}(I),ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ce=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.FPS_DROP_LEVEL_CAPPING,E.a.MEDIA_ATTACHING,E.a.MANIFEST_PARSED))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},t.prototype.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.prototype.onMediaAttaching=function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},t.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.prototype.getMaxLevel=function(e){var n=this;if(!this.levels)return-1;var i=this.levels.filter((function(i,r){return t.isLevelAllowed(r,n.restrictedLevels)&&r<=e}));return t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},t.isLevelAllowed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return-1===t.indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var i=function(e,t){return!t||e.width!==t.width||e.height!==t.height},r=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=n)&&i(s,e[a+1])){r=a;break}}return r},ue(t,[{key:"mediaWidth",get:function(){var e=void 0,n=this.media;return n&&(e=n.width||n.clientWidth||n.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,n=this.media;return n&&(e=n.height||n.clientHeight||n.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(I),de=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.MEDIA_ATTACHING))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,n){var i=performance.now();if(t){if(this.lastTime){var r=n-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*r/(i-this.lastTime),o=this.hls;if(o.trigger(E.a.FPS_DROP,{currentDropped:r,currentDecoded:a,totalDroppedFrames:n}),s>0&&r>o.config.fpsDroppedMonitoringThreshold*a){var l=o.currentLevel;k.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=l)&&(o.trigger(E.a.FPS_DROP_LEVEL_CAPPING,{level:l-=1,droppedLevel:o.currentLevel}),o.autoLevelCapping=l,o.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(I),he=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(n){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,i=this.stats,r=this.context,a=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n){var s=t.status;if(s>=200&&s<300){i.tload=Math.max(i.tfirst,performance.now());var o,l=void 0;o="arraybuffer"===r.responseType?(l=t.response).byteLength:(l=t.responseText).length,i.loaded=i.total=o,this.callbacks.onSuccess({url:t.responseURL,data:l},i,r,t)}else i.retry>=a.maxRetry||s>=400&&s<499?(k.b.error(s+" while loading "+r.url),this.callbacks.onError({code:s,text:t.statusText},r,t)):(k.b.warn(s+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.prototype.loadtimeout=function(){k.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,t)},e}(),fe=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),pe=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.MANIFEST_LOADING,E.a.MANIFEST_LOADED,E.a.AUDIO_TRACK_LOADED,E.a.ERROR));return i.ticks=0,i.ontick=i.tick.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.cleanTimer(),I.prototype.destroy.call(this)},t.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){this.updateTrack(this.trackId)},t.prototype.onError=function(e){e.fatal&&e.type===C.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,n=e.audioTracks||[],i=!1;this.tracks=n,this.hls.trigger(E.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var r=0;n.forEach((function(e){return e.default&&!i?(t.audioTrack=r,void(i=!0)):void r++})),!1===i&&n.length&&(k.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},t.prototype.onAudioTrackLoaded=function(e){e.id<this.tracks.length&&(k.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())},t.prototype.setAudioTrackInternal=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,k.b.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,i=t.url,r={id:e,type:t.type,url:i};n.trigger(E.a.AUDIO_TRACK_SWITCH,r),n.trigger(E.a.AUDIO_TRACK_SWITCHING,r);var a=t.details;!i||void 0!==a&&!0!==a.live||(k.b.log("(re)loading playlist for audioTrack "+e),n.trigger(E.a.AUDIO_TRACK_LOADING,{url:i,id:e}))}},t.prototype.updateTrack=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,k.b.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,i=t.details;!n||void 0!==i&&!0!==i.live||(k.b.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(E.a.AUDIO_TRACK_LOADING,{url:n,id:e}))}},fe(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(I),ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),me=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.MEDIA_ATTACHED,E.a.MEDIA_DETACHING,E.a.AUDIO_TRACKS_UPDATED,E.a.AUDIO_TRACK_SWITCHING,E.a.AUDIO_TRACK_LOADED,E.a.KEY_LOADED,E.a.FRAG_LOADED,E.a.FRAG_PARSING_INIT_SEGMENT,E.a.FRAG_PARSING_DATA,E.a.FRAG_PARSED,E.a.ERROR,E.a.BUFFER_CREATED,E.a.BUFFER_APPENDED,E.a.BUFFER_FLUSHED,E.a.INIT_PTS_FOUND));return i.config=n.config,i.audioCodecSwap=!1,i.ticks=0,i._state="STOPPED",i.ontick=i.tick.bind(i),i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),I.prototype.destroy.call(this),this.state="STOPPED"},t.prototype.onInitPtsFound=function(e){var t=e.frag.cc,n=e.initPTS;"main"===e.id&&(this.initPTS[t]=n,this.videoTrackCC=t,k.b.log("InitPTS for cc:"+t+" found from video track:"+n),"WAITING_INIT_PTS"===this.state&&this.tick())},t.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(k.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state="IDLE"):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state="STARTING"),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state="STOPPED"},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state="STOPPED"},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){var e,t,n,i=this.hls,r=i.config;switch(this.state){case"ERROR":case"PAUSED":case"BUFFER_FLUSHING":break;case"STARTING":this.state="WAITING_TRACK",this.loadedmetadata=!1;break;case"IDLE":var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var s=this.mediaBuffer?this.mediaBuffer:this.media,o=this.videoBuffer?this.videoBuffer:this.media,l=z.bufferInfo(s,e,r.maxBufferHole),u=z.bufferInfo(o,e,r.maxBufferHole),c=l.len,d=l.end,h=this.fragPrevious,f=Math.max(r.maxBufferLength,u.len),p=this.audioSwitch,g=this.trackId;if((c<f||p)&&g<a.length){if(void 0===(n=a[g].details)){this.state="WAITING_TRACK";break}if(!p&&!n.live&&h&&h.sn===n.endSN&&(!this.media.seeking||this.media.duration-d<h.duration/2)){this.hls.trigger(E.a.BUFFER_EOS,{type:"audio"}),this.state="ENDED";break}var m=n.fragments,v=m.length,y=m[0].start,b=m[v-1].start+m[v-1].duration,_=void 0;if(p)if(n.live&&!n.PTSKnown)k.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),d=0;else if(d=e,n.PTSKnown&&e<y){if(!(l.end>y||l.nextStart))return;k.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=y+.05}if(n.initSegment&&!n.initSegment.data)_=n.initSegment;else if(d<=y){if(_=m[0],null!==this.videoTrackCC&&_.cc!==this.videoTrackCC&&(_=function(e,t){return W(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(m,this.videoTrackCC)),n.live&&_.loadIdx&&_.loadIdx===this.fragLoadIdx){var T=l.nextStart?l.nextStart:y;return k.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(T+.05)),void(this.media.currentTime=T+.05)}}else{var w=void 0,S=r.maxFragLookUpTolerance,A=h?m[h.sn-m[0].sn+1]:void 0,I=function(e){var t=Math.min(S,e.duration);return e.start+e.duration-t<=d?1:e.start-t>d&&e.start?-1:0};d<b?(d>b-S&&(S=0),w=A&&!I(A)?A:W(m,I)):w=m[v-1],w&&(_=w,y=w.start,h&&_.level===h.level&&_.sn===h.sn&&(_.sn<n.endSN?k.b.log("SN just loaded, load next one: "+(_=m[_.sn+1-n.startSN]).sn):_=null))}if(_)if(_.decryptdata&&null!=_.decryptdata.uri&&null==_.decryptdata.key)k.b.log("Loading key for "+_.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+g),this.state="KEY_LOADING",i.trigger(E.a.KEY_LOADING,{frag:_});else{if(k.b.log("Loading "+_.sn+", cc: "+_.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+g+", currentTime:"+e+",bufferEnd:"+d.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,_.loadCounter){_.loadCounter++;var x=r.fragLoadingLoopThreshold;if(_.loadCounter>x&&Math.abs(this.fragLoadIdx-_.loadIdx)<x)return void i.trigger(E.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:_})}else _.loadCounter=1;_.loadIdx=this.fragLoadIdx,this.fragCurrent=_,this.startFragRequested=!0,isNaN(_.sn)||(this.nextLoadPosition=_.start+_.duration),i.trigger(E.a.FRAG_LOADING,{frag:_}),this.state="FRAG_LOADING"}}break;case"WAITING_TRACK":(t=this.tracks[this.trackId])&&t.details&&(this.state="IDLE");break;case"FRAG_LOADING_WAITING_RETRY":var L=performance.now(),D=this.retryDate;s=this.media,(!D||L>=D||s&&s.seeking)&&(k.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state="IDLE");break;case"WAITING_INIT_PTS":var R=this.videoTrackCC;if(void 0===this.initPTS[R])break;var P=this.waitingFragment;if(P){var O=P.frag.cc;R!==O?(t=this.tracks[this.trackId]).details&&t.details.live&&(k.b.warn("Waiting fragment CC ("+O+") does not match video track CC ("+R+")"),this.waitingFragment=null,this.state="IDLE"):(this.state="FRAG_LOADING",this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state="IDLE"}},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(k.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.loadCounter=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){"ENDED"===this.state&&(this.state="IDLE"),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(e){k.b.log("audio tracks updated"),this.tracks=e.audioTracks},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state="PAUSED",this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state="IDLE",void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},t.prototype.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,i=this.tracks[n];if(k.b.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+t.totalduration),t.live){var r=i.details;r&&t.fragments.length>0?(l(r,t),k.b.log(t.PTSKnown?"live audio playlist sliding:"+t.fragments[0].start.toFixed(3):"live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,k.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(-1===this.startPosition){var a=t.startTimeOffset;isNaN(a)?this.startPosition=0:(k.b.log("start time offset found in playlist, adjust startPosition to "+a),this.startPosition=a)}this.nextLoadPosition=this.startPosition}"WAITING_TRACK"===this.state&&(this.state="IDLE"),this.tick()},t.prototype.onKeyLoaded=function(){"KEY_LOADING"===this.state&&(this.state="IDLE",this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if("FRAG_LOADING"===this.state&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var i=this.tracks[this.trackId],r=i.details,a=r.totalduration,s=t.level,o=t.sn,l=t.cc,u=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",c=this.stats=e.stats;if("initSegment"===o)this.state="IDLE",c.tparsed=c.tbuffered=performance.now(),r.initSegment.data=e.payload,this.hls.trigger(E.a.FRAG_BUFFERED,{stats:c,frag:t,id:"audio"}),this.tick();else{this.state="PARSING",this.appended=!1,this.demuxer||(this.demuxer=new K(this.hls,"audio"));var d=this.initPTS[l],h=r.initSegment?r.initSegment.data:[];r.initSegment||void 0!==d?(this.pendingBuffering=!0,k.b.log("Demuxing "+o+" of ["+r.startSN+" ,"+r.endSN+"],track "+s),this.demuxer.push(e.payload,h,u,null,t,a,!1,d)):(k.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+o+" of ["+r.startSN+" ,"+r.endSN+"],track "+s),this.waitingFragment=e,this.state="WAITING_INIT_PTS")}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&"PARSING"===this.state){var i=e.tracks,r=void 0;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(E.a.BUFFER_CODECS,i),k.b.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var s={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(E.a.BUFFER_APPENDING,s))}this.tick()}}},t.prototype.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&i.sn===n.sn&&i.level===n.level&&"PARSING"===this.state){var r=this.trackId,a=this.tracks[r],s=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),k.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),o(a.details,n,e.startPTS,e.endPTS);var l=this.media,u=!1;if(this.audioSwitch&&l)if(l.readyState){var c=l.currentTime;k.b.log("switching audio track : currentTime:"+c),c>=e.startPTS&&(k.b.log("switching audio track : flushing all audio"),this.state="BUFFER_FLUSHING",s.trigger(E.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,s.trigger(E.a.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,s.trigger(E.a.AUDIO_TRACK_SWITCHED,{id:r});var d=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&d.push({type:e.type,data:t,parent:"audio",content:"data"})})),!u&&d.length&&(d.forEach((function(e){"PARSING"===t.state&&(t.pendingBuffering=!0,t.hls.trigger(E.a.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&"PARSING"===this.state&&(this.stats.tparsed=performance.now(),this.state="PARSED",this._checkAppendedParsed())},t.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},t.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;"PARSING"!==t&&"PARSED"!==t||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!("PARSED"!==this.state||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;e&&(this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(E.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"}),k.b.log("audio buffered : "+J((this.mediaBuffer?this.mediaBuffer:this.media).buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(E.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state="IDLE"),this.tick()}},t.prototype.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case C.a.FRAG_LOAD_ERROR:case C.a.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n,t.loadCounter=0;var r=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);k.b.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state="FRAG_LOADING_WAITING_RETRY"}else k.b.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state="ERROR"}break;case C.a.FRAG_LOOP_LOADING_ERROR:case C.a.AUDIO_TRACK_LOAD_ERROR:case C.a.AUDIO_TRACK_LOAD_TIMEOUT:case C.a.KEY_LOAD_ERROR:case C.a.KEY_LOAD_TIMEOUT:"ERROR"!==this.state&&(this.state=e.fatal?"ERROR":"IDLE",k.b.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case C.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&("PARSING"===this.state||"PARSED"===this.state)){var a=this.mediaBuffer,s=this.media.currentTime;if(a&&z.isBuffered(a,s)&&z.isBuffered(a,s+.5)){var o=this.config;o.maxMaxBufferLength>=o.maxBufferLength&&(o.maxMaxBufferLength/=2,k.b.warn("audio:reduce max buffer length to "+o.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*o.fragLoadingLoopThreshold),this.state="IDLE"}else k.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state="BUFFER_FLUSHING",this.hls.trigger(E.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},t.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(k.b.log("appending pending audio data on Buffer Flushed"),t.forEach((function(t){e.hls.trigger(E.a.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state="PARSED"):(this.state="IDLE",this.fragPrevious=null,this.tick())},ge(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,k.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(I),ve=function(){function e(e){return"string"==typeof e&&!!a[e.toLowerCase()]&&e.toLowerCase()}function t(e){return"string"==typeof e&&!!s[e.toLowerCase()]&&e.toLowerCase()}function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function i(i,a,s){var o=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?o=document.createElement("custom"):u.enumerable=!0,o.hasBeenReset=!1;var c="",d=!1,h=i,f=a,p=s,g=null,m="",v=!0,y="auto",b="start",_=50,T="middle",w=50,S="middle";if(Object.defineProperty(o,"id",n({},u,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",n({},u,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(o,"startTime",n({},u,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},u,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},u,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},u,{get:function(){return m},set:function(t){var n=e(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");m=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},u,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},u,{get:function(){return y},set:function(e){if("number"!=typeof e&&e!==r)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},u,{get:function(){return b},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");b=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},u,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},u,{get:function(){return T},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");T=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},u,{get:function(){return w},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");w=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},u,{get:function(){return S},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");S=n,this.hasBeenReset=!0}})),o.displayState=void 0,l)return o}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var r="auto",a={"":!0,lr:!0,rl:!0},s={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}(),ye=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};h.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var be=new ve(0,0,0),_e="middle"===be.align?"middle":"center";d.prototype={parse:function(e){function t(){var e=i.buffer,t=0;for(e=g(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,i.buffer=e.substr(t),n}function n(e){f(e,(function(e,t){switch(e){case"Region":console.log("parse region",t)}}),/:/)}var i=this;e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var a=(r=t()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var s=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(s?s=!1:r=t(),i.state){case"HEADER":/:/.test(r)?n(r):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new ve(0,0,""),i.state="CUE",-1===r.indexOf("--\x3e")){i.cue.id=r;continue}case"CUE":try{p(r,i.cue,i.regionList)}catch(e){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(s=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r;continue;case"BADCUE":r||(i.state="ID");continue}}}catch(e){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}};var Te=d,we={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Se=function(e){var t=e;return we.hasOwnProperty(e)&&(t=we[e]),String.fromCharCode(t)},Ee=100,Ce={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ke={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ae={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ie={25:2,26:4,29:6,30:8,31:10,27:13,28:15},xe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Le={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseLevel>=this.verboseFilter[e]&&console.log(this.time+" ["+e+"] "+t)}},De=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},Re=function(){function e(t,n,i,r,a){v(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=i||!1,this.background=r||"black",this.flash=a||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Pe=function(){function e(t,n,i,r,a,s){v(this,e),this.uchar=t||" ",this.penState=new Re(n,i,r,a,s)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Oe=function(){function e(){v(this,e),this.chars=[];for(var t=0;t<Ee;t++)this.chars.push(new Pe);this.pos=0,this.currPenState=new Re}return e.prototype.equals=function(e){for(var t=!0,n=0;n<Ee;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<Ee;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<Ee;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(Le.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>Ee&&(Le.log("ERROR","Too large cursor position "+this.pos),this.pos=Ee)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=Se(e);return this.pos>=Ee?void Le.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<Ee;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,n=0;n<Ee;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Ne=function(){function e(){v(this,e),this.rows=[];for(var t=0;t<15;t++)this.rows.push(new Oe);this.currRow=14,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},e.prototype.equals=function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){Le.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){Le.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<15;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime;if(a&&a<Le.time)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[i+s])}}this.currRow=t;var o=this.rows[this.currRow];if(null!==e.indent){var l=Math.max(e.indent-1,0);o.setCursor(e.indent),e.color=o.chars[l].penState.foreground}this.setPen({foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1})},e.prototype.setBkgData=function(e){Le.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){Le.log("TEXT",this.getDisplayText());var e=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),Le.log("INFO","Rolling up")}else Le.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=0;i<15;i++){var r=this.rows[i].getTextString();r&&t.push(e?"Row "+(i+1)+": '"+r+"'":r.trim())}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},e.prototype.getTextAndFormat=function(){return this.rows},e}(),Me=function(){function e(t,n){v(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new Ne,this.nonDisplayedMemory=new Ne,this.lastOutputScreen=new Ne,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,Le.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);Le.log("INFO",(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(Le.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){Le.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){Le.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){Le.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){Le.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){Le.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){Le.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){Le.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){Le.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){Le.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},e.prototype.ccCR=function(){Le.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},e.prototype.ccENM=function(){Le.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(Le.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,Le.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},e.prototype.ccTO=function(e){Le.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}Le.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(){var e=Le.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Ue=function(){function e(t,n,i){v(this,e),this.field=t||1,this.outputs=[n,i],this.channels=[new Me(1,n),new Me(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var n,i,r,a=!1;this.lastTime=e,Le.setTime(e);for(var s=0;s<t.length;s+=2)r=127&t[s+1],0!=(i=127&t[s])||0!==r?(Le.log("DATA","["+De([t[s],t[s+1]])+"] -> ("+De([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(a=this.parseChars(i,r))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(a):Le.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,Le.log("WARNING","Couldn't parse cleaned data "+De([i,r])+" orig: "+De([t[s],t[s+1]])))):this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var n;if(!((20===e||28===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Le.log("DEBUG","Repeated command ("+De([e,t])+") is dropped"),!0;var i=this.channels[(n=20===e||23===e?1:2)-1];return 20===e||28===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currChNr?(Le.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),Le.log("DEBUG","MIDROW ("+De([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var n;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2;var i=this.interpretPAC(64<=t&&t<=95?1===n?Ce[e]:Ae[e]:1===n?ke[e]:Ie[e],t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.interpretPAC=function(e,t){var n,i={color:null,italics:!1,indent:null,underline:!1,row:e};return i.underline=1==(1&(n=t>95?t-96:t-64)),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},e.prototype.parseChars=function(e,t){var n,i=null,r=null,a=null;if(e>=25?(i=2,a=e-8):(i=1,a=e),17<=a&&a<=19?(Le.log("INFO","Special char '"+Se(n=17===a?t+80:18===a?t+112:t+144)+"' in channel "+i),r=[n]):32<=e&&e<=127&&(r=0===t?[e]:[e,t]),r){var s=De(r);Le.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},e.prototype.parseBackgroundAttributes=function(e,t){var n,i,r,a;return!(!((16===e||24===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&45<=t&&t<=47)||(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=xe[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=e<24?1:2,a=this.channels[r-1],a.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,0))},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}(),je=function(e,t,n){return e.substr(n||0,t.length)===t},Be=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},Fe=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.MEDIA_ATTACHING,E.a.MEDIA_DETACHING,E.a.FRAG_PARSING_USERDATA,E.a.MANIFEST_LOADING,E.a.MANIFEST_LOADED,E.a.FRAG_LOADED,E.a.LEVEL_SWITCHING,E.a.INIT_PTS_FOUND));if(i.hls=n,i.config=n.config,i.enabled=!0,i.Cues=n.config.cueHandler,i.textTracks=[],i.tracks=[],i.unparsedVttFrags=[],i.initPTS=void 0,i.cueRanges=[],i.config.enableCEA708Captions){var r=i,a=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)};i.cea608Parser=new Ue(0,{newCue:function(e,t,n){if(!r.textTrack1){var i=r.getExistingTrack("1");if(i)r.textTrack1=i,y(r.textTrack1),a(r.textTrack1,r.media);else{var s=r.createTextTrack("captions",r.config.captionsTextTrack1Label,r.config.captionsTextTrack1LanguageCode);s&&(s.textTrack1=!0,r.textTrack1=s)}}r.addCues("textTrack1",e,t,n)}},{newCue:function(e,t,n){if(!r.textTrack2){var i=r.getExistingTrack("2");if(i)r.textTrack2=i,y(r.textTrack2),a(r.textTrack2,r.media);else{var s=r.createTextTrack("captions",r.config.captionsTextTrack2Label,r.config.captionsTextTrack1LanguageCode);s&&(s.textTrack2=!0,r.textTrack2=s)}}r.addCues("textTrack2",e,t,n)}})}return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addCues=function(e,t,n,i){for(var r=this.cueRanges,a=!1,s=r.length;s--;){var o=r[s],l=b(o[0],o[1],t,n);if(l>=0&&(o[0]=Math.min(o[0],t),o[1]=Math.max(o[1],n),a=!0,l/(n-t)>.5))return}a||r.push([t,n]),this.Cues.newCue(this[e],t,n,i)},t.prototype.onInitPtsFound=function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach((function(e){t.onFragLoaded(e)})),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(!0===i["textTrack"+e])return i}return null},t.prototype.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},t.prototype.destroy=function(){I.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(e){this.media=e.media},t.prototype.onMediaDetaching=function(){y(this.textTrack1),y(this.textTrack2)},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)y(t[n])}},t.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,i){var r=void 0;if(i<n.length){var a=n[i];(function(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)})(a,e)&&(r=a)}r||(r=t.createTextTrack("subtitles",e.name,e.lang)),r.mode=e.default?"showing":"hidden",t.textTracks.push(r)}))}},t.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.prototype.onFragLoaded=function(e){var t=e.frag,n=e.payload;if("main"===t.type){var i=t.sn;if(i!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=i}else if("subtitle"===t.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var a=this.vttCCs;a[t.cc]||(a[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var s=this.textTracks,o=this.hls;!function(e,t,n,i,r,a){var s=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),o="00:00.000",l=0,u=0,c=0,d=[],h=void 0,f=!0,p=new Te;p.oncue=function(e){var t=n[i],r=n.ccOffset;t&&t.new&&(void 0!==u?r=n.ccOffset=t.start:function(e,t,n){var i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;r&&r.new;)e.ccOffset+=i.start-r.start,i.new=!1,r=e[(i=r).prevCC];e.presentationOffset=n}(n,i,c)),c&&(r=c+n.ccOffset-n.presentationOffset),e.startTime+=r-u,e.endTime+=r-u,e.id=Be(e.startTime)+Be(e.endTime)+Be(e.text),e.text=decodeURIComponent(escape(e.text)),e.endTime>0&&d.push(e)},p.onparsingerror=function(e){h=e},p.onflush=function(){return h&&a?void a(h):void r(d)},s.forEach((function(e){if(f){if(je(e,"X-TIMESTAMP-MAP=")){f=!1,e.substr(16).split(",").forEach((function(e){je(e,"LOCAL:")?o=e.substr(6):je(e,"MPEGTS:")&&(l=parseInt(e.substr(7)))}));try{l-=t=t<0?t+8589934592:t,u=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),r=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)?-1:(t+=1e3*n,t+=6e4*i,t+=36e5*r)}(o)/1e3,c=l/9e4,-1===u&&(h=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){h=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(f=!1)}p.parse(e+"\n")})),p.flush()}(n,this.initPTS,a,t.cc,(function(e){var n=s[t.trackId];e.forEach((function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(i){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}})),o.trigger(E.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){k.b.log("Failed to parse VTT cue: "+e),o.trigger(E.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}))}else this.hls.trigger(E.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}},t.prototype.extractCea608Data=function(e){for(var t,n,i,r=31&e[0],a=2,s=[],o=0;o<r;o++)t=e[a++],n=127&e[a++],i=127&e[a++],0===n&&0===i||0!=(4&t)&&0==(3&t)&&(s.push(n),s.push(i));return s},t}(I),Ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),He=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.MEDIA_ATTACHED,E.a.MEDIA_DETACHING,E.a.MANIFEST_LOADING,E.a.MANIFEST_LOADED,E.a.SUBTITLE_TRACK_LOADED));return i.tracks=[],i.trackId=-1,i.media=void 0,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=function(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}(this.media.textTracks),n=0;n<t.length;n++)"showing"===t[n].mode&&(e=n);this.subtitleTrack=e}},t.prototype.destroy=function(){I.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.trackId=-1,this.hls.trigger(E.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(e){e.default&&(t.subtitleTrack=e.id)}))},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;void 0!==n&&!0!==n.live||(k.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(E.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(k.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval((function(){t.onTick()}),1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},t.prototype.setSubtitleTrackInternal=function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,k.b.log("switching to subtitle track "+e);var t=this.tracks[e];this.hls.trigger(E.a.SUBTITLE_TRACK_SWITCH,{id:e});var n=t.details;void 0!==n&&!0!==n.live||(k.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(E.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},Ge(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(I),We=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,E.a.ERROR,E.a.SUBTITLE_TRACKS_UPDATED,E.a.SUBTITLE_TRACK_SWITCH,E.a.SUBTITLE_TRACK_LOADED,E.a.SUBTITLE_FRAG_PROCESSED));return i.config=n.config,i.vttFragSNsProcessed={},i.vttFragQueues=void 0,i.currentlyProcessing=null,i.currentTrackId=-1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){I.prototype.destroy.call(this)},t.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach((function(t){e.vttFragQueues[t.id]=[]}))},t.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(E.a.FRAG_LOADING,{frag:e})}},t.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;k.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach((function(e){t.vttFragSNsProcessed[e.id]=[]}))},t.prototype.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,this.clearVttFragQueues()},t.prototype.onSubtitleTrackLoaded=function(e){var t=this.vttFragSNsProcessed[e.id],n=this.vttFragQueues[e.id],i=this.currentlyProcessing?this.currentlyProcessing.sn:-1,r=function(e){return t.indexOf(e.sn)>-1};e.details.fragments.forEach((function(t){r(t)||t.sn===i||function(e){return n.some((function(t){return t.sn===e.sn}))}(t)||(t.trackId=e.id,n.push(t))})),this.nextFrag()},t}(I),ze={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:he,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:oe,bufferController:le,capLevelController:ce,fpsController:de,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};ze.subtitleStreamController=We,ze.subtitleTrackController=He,ze.timelineController=Fe,ze.cueHandler=T,ze.enableCEA708Captions=!0,ze.enableWebVTT=!0,ze.captionsTextTrack1Label="English",ze.captionsTextTrack1LanguageCode="en",ze.captionsTextTrack2Label="Spanish",ze.captionsTextTrack2LanguageCode="es",ze.audioStreamController=me,ze.audioTrackController=pe;var Ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ye=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,e);var i=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in i)r in n||(n[r]=i[r]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(k.a)(n.debug),this.config=n,this._autoLevelCapping=-1;var a=this.observer=new Z.a;a.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];a.removeListener.apply(a,[e].concat(n))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a);var s=this.abrController=new n.abrController(this),o=new n.bufferController(this),l=new n.capLevelController(this),u=new n.fpsController(this),c=new F(this),d=new G(this),h=new H(this),f=new ie(this),p=this.levelController=new te(this),g=this.streamController=new $(this),m=[p,g],v=n.audioStreamController;v&&m.push(new v(this)),this.networkControllers=m;var y=[c,d,h,s,o,l,u,f];if(v=n.audioTrackController){var b=new v(this);this.audioTrackController=b,y.push(b)}if(v=n.subtitleTrackController){var T=new v(this);this.subtitleTrackController=T,y.push(T)}[n.subtitleStreamController,n.timelineController].forEach((function(e){e&&y.push(new e(t))})),this.coreComponents=y}return e.isSupported=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer;return e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')&&(!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove)},Ve(e,null,[{key:"version",get:function(){return"0.8.4"}},{key:"Events",get:function(){return E.a}},{key:"ErrorTypes",get:function(){return C.b}},{key:"ErrorDetails",get:function(){return C.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:ze},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){k.b.log("destroy"),this.trigger(E.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(e){k.b.log("attachMedia"),this.media=e,this.trigger(E.a.MEDIA_ATTACHING,{media:e})},e.prototype.detachMedia=function(){k.b.log("detachMedia"),this.trigger(E.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(e){e=S.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),k.b.log("loadSource:"+e),this.url=e,this.trigger(E.a.MANIFEST_LOADING,{url:e})},e.prototype.startLoad=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;k.b.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},e.prototype.stopLoad=function(){k.b.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},e.prototype.swapAudioCodec=function(){k.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){k.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Ve(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){k.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){k.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){k.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){k.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){k.b.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){k.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,i=0;i<n;i++)if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),e}();t.default=Ye},function(e,t,n){function i(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw console.error(e),e};var i=t(t.s=ENTRY_MODULE);return i.default||i}function r(e){var t=[],n=e.toString(),i=n.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!i)return t;for(var r,a=new RegExp("(\\\\n|\\W)"+function(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}(i[1])+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");r=a.exec(n);)t.push(r[3]);return t}function a(e,t){for(var n=[t],i=[],a={};n.length;){var s=n.pop();if(!a[s]&&e[s]){a[s]=!0,i.push(s);var o=r(e[s]);n=n.concat(o)}}return i}e.exports=function(e,t){var r=n.m,s=(t=t||{}).all?Object.keys(r):a(r,e),o="("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.map((function(e){return JSON.stringify(e)+": "+r[e].toString()})).join(",")+"})(self);",l=new window.Blob([o],{type:"text/javascript"});if(t.bare)return l;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),c=new window.Worker(u);return c.objectURL=u,c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(1),a=n(0),s=n(4),o=n.n(s);t.default=function(e){var t=new o.a;t.trigger=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(i))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",(function(r){var s=r.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);e.demuxer=new i.a(t,s.typeSupported,o,s.vendor);try{Object(a.a)(!0===o.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":e.demuxer.push(s.data,s.decryptdata,s.initSegment,s.audioCodec,s.videoCodec,s.timeOffset,s.discontinuity,s.trackSwitch,s.contiguous,s.duration,s.accurateTimeOffset,s.defaultInitPTS)}})),t.on(r.a.FRAG_DECRYPTED,n),t.on(r.a.FRAG_PARSING_INIT_SEGMENT,n),t.on(r.a.FRAG_PARSED,n),t.on(r.a.ERROR,n),t.on(r.a.FRAG_PARSING_METADATA,n),t.on(r.a.FRAG_PARSING_USERDATA,n),t.on(r.a.INIT_PTS_FOUND,n),t.on(r.a.FRAG_PARSING_DATA,(function(t,n){var i=[],r={event:t,data:n};n.data1&&(r.data1=n.data1.buffer,i.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,i.push(n.data2.buffer),delete n.data2),e.postMessage(r,i)}))}}]).default},function(e,t,n){var i=n(4);e.exports={TextEncoder:i.TextEncoder,TextDecoder:i.TextDecoder}},function(e,t){!function(t){"use strict";function n(e,t,n){return t<=e&&e<=n}function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function r(e){return 0<=e&&e<=127}function a(e){this.tokens=[].slice.call(e),this.tokens.reverse()}function s(e,t){if(e)throw TypeError("Decoder error");return t||65533}function o(e){throw TypeError("The code point "+e+" could not be encoded.")}function l(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(F,e)?F[e]:null}function u(e,t){return t&&t[e]||null}function c(e,t){var n=t.indexOf(e);return-1===n?null:n}function d(e){if(!("encoding-indexes"in t))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return t["encoding-indexes"][e]}function h(e,t){if(!(this instanceof h))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):V,t=i(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=l(e);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+e);if(!z[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var r=this;return r._encoding=n,Boolean(t.fatal)&&(r._error_mode="fatal"),Boolean(t.ignoreBOM)&&(r._ignoreBOM=!0),Object.defineProperty||(this.encoding=r._encoding.name.toLowerCase(),this.fatal="fatal"===r._error_mode,this.ignoreBOM=r._ignoreBOM),r}function f(e,n){if(!(this instanceof f))throw TypeError("Called as a function. Did you forget 'new'?");n=i(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";var r=this;if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){var a=l(e=void 0!==e?String(e):V);if(null===a||"replacement"===a.name)throw RangeError("Unknown encoding: "+e);if(!W[a.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");r._encoding=a}else r._encoding=l("utf-8"),void 0!==e&&"console"in t&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=r._encoding.name.toLowerCase()),r}function p(e){var t=e.fatal,i=0,r=0,a=0,o=128,l=191;this.handler=function(e,u){if(u===U&&0!==a)return a=0,s(t);if(u===U)return j;if(0===a){if(n(u,0,127))return u;if(n(u,194,223))a=1,i=31&u;else if(n(u,224,239))224===u&&(o=160),237===u&&(l=159),a=2,i=15&u;else{if(!n(u,240,244))return s(t);240===u&&(o=144),244===u&&(l=143),a=3,i=7&u}return null}if(!n(u,o,l))return i=a=r=0,o=128,l=191,e.prepend(u),s(t);if(o=128,l=191,i=i<<6|63&u,(r+=1)!==a)return null;var c=i;return i=a=r=0,c}}function g(e){this.handler=function(e,t){if(t===U)return j;if(M(t))return t;var i,r;n(t,128,2047)?(i=1,r=192):n(t,2048,65535)?(i=2,r=224):n(t,65536,1114111)&&(i=3,r=240);for(var a=[(t>>6*i)+r];i>0;)a.push(128|63&t>>6*(i-1)),i-=1;return a}}function m(e,t){var n=t.fatal;this.handler=function(t,i){if(i===U)return j;if(r(i))return i;var a=e[i-128];return null===a?s(n):a}}function v(e,t){this.handler=function(t,n){if(n===U)return j;if(M(n))return n;var i=c(n,e);return null===i&&o(n),i+128}}function y(e){var t=e.fatal,i=0,a=0,o=0;this.handler=function(e,l){if(l===U&&0===i&&0===a&&0===o)return j;var c;if(l!==U||0===i&&0===a&&0===o||(i=0,a=0,o=0,s(t)),0!==o){c=null,n(l,48,57)&&(c=function(e){if(e>39419&&e<189e3||e>1237575)return null;if(7457===e)return 59335;var t,n=0,i=0,r=d("gb18030-ranges");for(t=0;t<r.length;++t){var a=r[t];if(!(a[0]<=e))break;n=a[0],i=a[1]}return i+e-n}(10*(126*(10*(i-129)+a-48)+o-129)+l-48));var h=[a,o,l];return i=0,a=0,o=0,null===c?(e.prepend(h),s(t)):c}if(0!==a)return n(l,129,254)?(o=l,null):(e.prepend([a,l]),i=0,a=0,s(t));if(0!==i){if(n(l,48,57))return a=l,null;var f=i,p=null;i=0;var g=l<127?64:65;return(n(l,64,126)||n(l,128,254))&&(p=190*(f-129)+(l-g)),null===(c=null===p?null:u(p,d("gb18030")))&&r(l)&&e.prepend(l),null===c?s(t):c}return r(l)?l:128===l?8364:n(l,129,254)?(i=l,null):s(t)}}function b(e,t){this.handler=function(e,n){if(n===U)return j;if(M(n))return n;if(58853===n)return o(n);if(t&&8364===n)return 128;var i=c(n,d("gb18030"));if(null!==i){var r=i%190;return[N(i/190)+129,r+(r<63?64:65)]}if(t)return o(n);i=function(e){if(59335===e)return 7457;var t,n=0,i=0,r=d("gb18030-ranges");for(t=0;t<r.length;++t){var a=r[t];if(!(a[1]<=e))break;n=a[1],i=a[0]}return i+e-n}(n);var a=N(i/10/126/10),s=N((i-=10*a*126*10)/10/126),l=N((i-=10*s*126)/10);return[a+129,s+48,l+129,i-10*l+48]}}function _(e){var t=e.fatal,i=0;this.handler=function(e,a){if(a===U&&0!==i)return i=0,s(t);if(a===U&&0===i)return j;if(0!==i){var o=i,l=null;i=0;var c=a<127?64:98;switch((n(a,64,126)||n(a,161,254))&&(l=157*(o-129)+(a-c)),l){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var h=null===l?null:u(l,d("big5"));return null===h&&r(a)&&e.prepend(a),null===h?s(t):h}return r(a)?a:n(a,129,254)?(i=a,null):s(t)}}function T(e){this.handler=function(e,t){if(t===U)return j;if(M(t))return t;var n=function(e){var t=H=H||d("big5").map((function(e,t){return t<5024?null:e}));return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):c(e,t)}(t);if(null===n)return o(t);var i=N(n/157)+129;if(i<161)return o(t);var r=n%157;return[i,r+(r<63?64:98)]}}function w(e){var t=e.fatal,i=!1,a=0;this.handler=function(e,o){if(o===U&&0!==a)return a=0,s(t);if(o===U&&0===a)return j;if(142===a&&n(o,161,223))return a=0,65216+o;if(143===a&&n(o,161,254))return i=!0,a=o,null;if(0!==a){var l=a;a=0;var c=null;return n(l,161,254)&&n(o,161,254)&&(c=u(94*(l-161)+(o-161),d(i?"jis0212":"jis0208"))),i=!1,n(o,161,254)||e.prepend(o),null===c?s(t):c}return r(o)?o:142===o||143===o||n(o,161,254)?(a=o,null):s(t)}}function S(e){this.handler=function(e,t){if(t===U)return j;if(M(t))return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return[142,t-65377+161];8722===t&&(t=65293);var i=c(t,d("jis0208"));return null===i?o(t):[N(i/94)+161,i%94+161]}}function E(e){var t=e.fatal,i=0,r=0,a=!1;this.handler=function(e,o){switch(i){default:case 0:return 27===o?(i=5,null):n(o,0,127)&&14!==o&&15!==o&&27!==o?(a=!1,o):o===U?j:(a=!1,s(t));case 1:return 27===o?(i=5,null):92===o?(a=!1,165):126===o?(a=!1,8254):n(o,0,127)&&14!==o&&15!==o&&27!==o&&92!==o&&126!==o?(a=!1,o):o===U?j:(a=!1,s(t));case 2:return 27===o?(i=5,null):n(o,33,95)?(a=!1,65344+o):o===U?j:(a=!1,s(t));case 3:return 27===o?(i=5,null):n(o,33,126)?(a=!1,r=o,i=4,null):o===U?j:(a=!1,s(t));case 4:if(27===o)return i=5,s(t);if(n(o,33,126)){i=3;var l=u(94*(r-33)+o-33,d("jis0208"));return null===l?s(t):l}return o===U?(i=3,e.prepend(o),s(t)):(i=3,s(t));case 5:return 36===o||40===o?(r=o,i=6,null):(e.prepend(o),a=!1,i=0,s(t));case 6:var c=r;r=0;var h=null;if(40===c&&66===o&&(h=0),40===c&&74===o&&(h=1),40===c&&73===o&&(h=2),36!==c||64!==o&&66!==o||(h=3),null!==h){i=i=h;var f=a;return a=!0,f?s(t):null}return e.prepend([c,o]),a=!1,i=0,s(t)}}}function C(e){var t=0;this.handler=function(e,n){if(n===U&&0!==t)return e.prepend(n),t=0,[27,40,66];if(n===U&&0===t)return j;if(!(0!==t&&1!==t||14!==n&&15!==n&&27!==n))return o(65533);if(0===t&&M(n))return n;if(1===t&&(M(n)&&92!==n&&126!==n||165==n||8254==n)){if(M(n))return n;if(165===n)return 92;if(8254===n)return 126}if(M(n)&&0!==t)return e.prepend(n),t=0,[27,40,66];if((165===n||8254===n)&&1!==t)return e.prepend(n),t=1,[27,40,74];8722===n&&(n=65293);var i=c(n,d("jis0208"));return null===i?o(n):2!==t?(e.prepend(n),t=2,[27,36,66]):[N(i/94)+33,i%94+33]}}function k(e){var t=e.fatal,i=0;this.handler=function(e,a){if(a===U&&0!==i)return i=0,s(t);if(a===U&&0===i)return j;if(0!==i){var o=i,l=null;i=0;var c=a<127?64:65,h=o<160?129:193;if((n(a,64,126)||n(a,128,252))&&(l=188*(o-h)+a-c),n(l,8836,10715))return 48508+l;var f=null===l?null:u(l,d("jis0208"));return null===f&&r(a)&&e.prepend(a),null===f?s(t):f}return r(a)||128===a?a:n(a,161,223)?65216+a:n(a,129,159)||n(a,224,252)?(i=a,null):s(t)}}function A(e){this.handler=function(e,t){if(t===U)return j;if(M(t)||128===t)return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return t-65377+161;8722===t&&(t=65293);var i=function(e){return(G=G||d("jis0208").map((function(e,t){return n(t,8272,8835)?null:e}))).indexOf(e)}(t);if(null===i)return o(t);var r=N(i/188),a=i%188;return[r+(r<31?129:193),a+(a<63?64:65)]}}function I(e){var t=e.fatal,i=0;this.handler=function(e,a){if(a===U&&0!==i)return i=0,s(t);if(a===U&&0===i)return j;if(0!==i){var o=i,l=null;i=0,n(a,65,254)&&(l=190*(o-129)+(a-65));var c=null===l?null:u(l,d("euc-kr"));return null===l&&r(a)&&e.prepend(a),null===c?s(t):c}return r(a)?a:n(a,129,254)?(i=a,null):s(t)}}function x(e){this.handler=function(e,t){if(t===U)return j;if(M(t))return t;var n=c(t,d("euc-kr"));return null===n?o(t):[N(n/190)+129,n%190+65]}}function L(e,t){var n=e>>8,i=255&e;return t?[n,i]:[i,n]}function D(e,t){var i=t.fatal,r=null,a=null;this.handler=function(t,o){if(o===U&&(null!==r||null!==a))return s(i);if(o===U&&null===r&&null===a)return j;if(null===r)return r=o,null;var l;if(l=e?(r<<8)+o:(o<<8)+r,r=null,null!==a){var u=a;return a=null,n(l,56320,57343)?65536+1024*(u-55296)+(l-56320):(t.prepend(L(l,e)),s(i))}return n(l,55296,56319)?(a=l,null):n(l,56320,57343)?s(i):l}}function R(e,t){this.handler=function(t,i){if(i===U)return j;if(n(i,0,65535))return L(i,e);var r=L(55296+(i-65536>>10),e),a=L(56320+(i-65536&1023),e);return r.concat(a)}}function P(e){this.handler=function(e,t){return t===U?j:r(t)?t:63360+t-128}}function O(e){this.handler=function(e,t){return t===U?j:M(t)?t:n(t,63360,63487)?t-63360+128:o(t)}}var N=Math.floor,M=r,U=-1;a.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():U},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var j=-1,B=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],F={};B.forEach((function(e){e.encodings.forEach((function(e){e.labels.forEach((function(t){F[t]=e}))}))}));var G,H,W={},z={},V="utf-8";Object.defineProperty&&(Object.defineProperty(h.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(h.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(h.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),h.prototype.decode=function(e,t){var n;n="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._do_not_flush||(this._decoder=z[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var r,s=new a(n),o=[];;){var l=s.read();if(l===U)break;if((r=this._decoder.handler(s,l))===j)break;null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r))}if(!this._do_not_flush){do{if((r=this._decoder.handler(s,s.read()))===j)break;null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r))}while(!s.endOfStream());this._decoder=null}return(function(e){return!function(e,t){return-1!==["UTF-8","UTF-16LE","UTF-16BE"].indexOf(t)}(0,this._encoding.name)||this._ignoreBOM||this._BOMseen||(e.length>0&&65279===e[0]?(this._BOMseen=!0,e.shift()):e.length>0&&(this._BOMseen=!0)),function(e){for(var t="",n=0;n<e.length;++n){var i=e[n];i<=65535?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return t}(e)}).call(this,o)},Object.defineProperty&&Object.defineProperty(f.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),f.prototype.encode=function(e,t){e=void 0===e?"":String(e),t=i(t),this._do_not_flush||(this._encoder=W[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var n,r=new a(function(e){for(var t=String(e),n=t.length,i=0,r=[];i<n;){var a=t.charCodeAt(i);if(a<55296||a>57343)r.push(a);else if(56320<=a&&a<=57343)r.push(65533);else if(55296<=a&&a<=56319)if(i===n-1)r.push(65533);else{var s=t.charCodeAt(i+1);56320<=s&&s<=57343?(r.push(65536+((1023&a)<<10)+(1023&s)),i+=1):r.push(65533)}i+=1}return r}(e)),s=[];;){var o=r.read();if(o===U)break;if((n=this._encoder.handler(r,o))===j)break;Array.isArray(n)?s.push.apply(s,n):s.push(n)}if(!this._do_not_flush){for(;(n=this._encoder.handler(r,r.read()))!==j;)Array.isArray(n)?s.push.apply(s,n):s.push(n);this._encoder=null}return new Uint8Array(s)},W["UTF-8"]=function(e){return new g(e)},z["UTF-8"]=function(e){return new p(e)},"encoding-indexes"in t&&B.forEach((function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach((function(e){var t=e.name,n=d(t.toLowerCase());z[t]=function(e){return new m(n,e)},W[t]=function(e){return new v(n,e)}}))})),z.GBK=function(e){return new y(e)},W.GBK=function(e){return new b(e,!0)},W.gb18030=function(e){return new b(e)},z.gb18030=function(e){return new y(e)},W.Big5=function(e){return new T(e)},z.Big5=function(e){return new _(e)},W["EUC-JP"]=function(e){return new S(e)},z["EUC-JP"]=function(e){return new w(e)},W["ISO-2022-JP"]=function(e){return new C(e)},z["ISO-2022-JP"]=function(e){return new E(e)},W.Shift_JIS=function(e){return new A(e)},z.Shift_JIS=function(e){return new k(e)},W["EUC-KR"]=function(e){return new x(e)},z["EUC-KR"]=function(e){return new I(e)},W["UTF-16BE"]=function(e){return new R(!0,e)},z["UTF-16BE"]=function(e){return new D(!0,e)},W["UTF-16LE"]=function(e){return new R(!1,e)},z["UTF-16LE"]=function(e){return new D(!1,e)},W["x-user-defined"]=function(e){return new O(e)},z["x-user-defined"]=function(e){return new P(e)},t.TextEncoder||(t.TextEncoder=f),t.TextDecoder||(t.TextDecoder=h),void 0!==e&&e.exports&&(e.exports={TextEncoder:t.TextEncoder,TextDecoder:t.TextDecoder,EncodingIndexes:t["encoding-indexes"]})}(this||{})},function(e,t,n){n(1)(flowplayer)}]);